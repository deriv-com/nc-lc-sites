import {
    a as N
} from "./_oschunk-IQUI5AIQ.js";
import {
    a as R
} from "./_oschunk-LHY3WMNC.js";
import {
    a as m,
    b as D,
    d as y
} from "./_oschunk-XMOR6XCC.js";
import {
    ic as b,
    tc as A
} from "./_oschunk-44PT7RP7.js";
import {
    ia as E
} from "./_oschunk-NTQBNJ73.js";
import {
    a as g,
    b as C,
    c as f
} from "./_oschunk-DVBKI63I.js";
var V = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "\u0633\u062A\u0638\u0647\u0631 \u0645\u0639\u0627\u0645\u0644\u0627\u062A\u0643 \u0647\u0646\u0627.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "36I4v+f8ckKzWPDKEate7g#Value": "\u062A\u062D\u0648\u064A\u0644",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "\u0627\u0644\u0633\u062D\u0628",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "\u0627\u0644\u0625\u064A\u062F\u0627\u0639",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"
    },
    F = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "Transaktionen",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "Ihre Transaktionen werden hier angezeigt.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "Keine Transaktionen gefunden",
        "36I4v+f8ckKzWPDKEate7g#Value": "\xDCberweisung",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Abheben",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "Einzahlung",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "Transaktionen",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "Transaktionen"
    },
    W = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "Transacciones",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "Sus transacciones aparecer\xE1n aqu\xED.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "No se han encontrado transacciones",
        "36I4v+f8ckKzWPDKEate7g#Value": "Transferencia",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Retirar",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "Dep\xF3sito",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "Transacciones",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "Transacciones"
    },
    Q = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "Transazioni",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "Le tue transazioni appariranno qui.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "Nessuna transazione trovata",
        "36I4v+f8ckKzWPDKEate7g#Value": "Trasferisci",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Preleva",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "Deposita",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "Transazioni",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "Transazioni"
    },
    H = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "Transakcje",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "Twoje transakcje pojawi\u0105 si\u0119 tutaj.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "Nie znaleziono transakcji",
        "36I4v+f8ckKzWPDKEate7g#Value": "Przelew",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Wyp\u0142a\u0107",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "Wp\u0142ata",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "Transakcje",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "Transakcje"
    },
    L = {
        "+ULi2IGhtkOlm8HQkYpl7g#Value": "Transa\xE7\xF5es",
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "As suas transa\xE7\xF5es aparecer\xE3o aqui.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "Nenhuma transa\xE7\xE3o encontrada",
        "36I4v+f8ckKzWPDKEate7g#Value": "Transferir",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Levantamentos",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "Dep\xF3sitos",
        "_9a0yxm0X0iZQIHEDh+64w#Title": "Transa\xE7\xF5es",
        "_9a0yxm0X0iZQIHEDh+64w#TitleExpression.2118442357.1": "Transa\xE7\xF5es"
    },
    P = {
        "ZQ_nxfAG9UusGyQPWO49BA#Value": "Vos transactions appara\xEEtront ici.",
        "K8vQm62PtEKjuxDpZl6z2Q#Value": "Aucune transaction trouv\xE9e",
        "36I4v+f8ckKzWPDKEate7g#Value": "Transf\xE9rer",
        "fCvYKaeAIkC05YQyQv5bfw#Value": "Retirer",
        "s9NNwNCXZ0CvWcJ5FqloYw#Value": "D\xE9p\xF4t"
    },
    S = {
        "ar-001": {
            translations: V,
            isRTL: !0
        },
        "de-DE": {
            translations: F,
            isRTL: !1
        },
        "es-ES": {
            translations: W,
            isRTL: !1
        },
        "it-IT": {
            translations: Q,
            isRTL: !1
        },
        "pl-PL": {
            translations: H,
            isRTL: !1
        },
        "pt-PT": {
            translations: L,
            isRTL: !1
        },
        "fr-FR": {
            translations: P,
            isRTL: !1
        }
    };

function w(h, T, I, e) {
    let r = JSON.parse(h.WalletsList),
        a = JSON.parse(h.Transactions);

    function v(s) {
        let i = new Date(s * 1e3),
            c = {
                year: "numeric",
                month: "long",
                day: "numeric"
            };
        return i.toLocaleDateString(void 0, c)
    }
    f(v, "formatDate");
    let n = {
            dtrade: "Options trading",
            dxtrade: "Deriv X",
            mt5: "Deriv MT5",
            ctrader: "Deriv cTrader"
        },
        u = f((s = "") => {
            if (!s) return "";
            if (s.startsWith("CRW")) {
                let i = r.find(c => c.loginid === s);
                return i ? i.name : ""
            }
            return s.startsWith("CR") ? n.dtrade : s.startsWith("CTR") ? n.ctrader : s.startsWith("CXR") ? n.dxtrade : s.startsWith("MTR") ? n.mt5 : ""
        }, "getPlatform"),
        d = f(() => {}, "actionTransfer"),
        o = a.reduce((s, i) => {
            if (i.action_type === "buy" || i.action_type === "sell") return s;
            i.action_type;
            let c = C(g({}, i), {
                date: v(i.transaction_time)
            });
            return i.from && (c.from.platform = u(i.from.loginid)), i.to && (c.to.platform = u(i.to.loginid)), s.push(c), s
        }, []);
    h.FormattedTransactions = JSON.stringify(o)
}
f(w, "default");
var t = E; {
    let T = class T extends t.Controller.BaseViewController {
        constructor(e, r, a) {
            super(e, r, a, S);
            var v = this.controller;
            this.clientActionProxies = {}, this.dataFetchDependenciesOriginal = {}, this.dataFetchDependentsGraph = {}, this.shouldSendClientVarsToDataSources = !1
        }
        get dataFetchActionNames() {
            return this.hasOwnProperty("_dataFetchActionNames") || (this._dataFetchActionNames = []), this._dataFetchActionNames
        }
        set dataFetchActionNames(e) {
            this._dataFetchActionNames = e
        }
        get _depositbtnOnClick$Action() {
            return this.hasOwnProperty("__depositbtnOnClick$Action") || (this.__depositbtnOnClick$Action = function(e) {
                var r = this.model,
                    a = this.controller,
                    v = this.idService;
                return t.Logger.startActiveSpan("DepositbtnOnClick", function(n) {
                    return n && (n.setAttribute("code.function", "DepositbtnOnClick"), n.setAttribute("outsystems.function.key", "55599c77-f67d-4742-934e-a2b7cea23339"), n.setAttribute("outsystems.function.owner.name", "tradershub"), n.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), n.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                        a.ensureControllerAlive("DepositbtnOnClick"), e = a.callContext(e);
                        var u = new t.DataTypes.VariableHolder,
                            d = new t.DataTypes.VariableHolder;
                        return t.Flow.executeAsyncFlow(function() {
                            return r.flush(), y.getAccountStatus2$Action(e).then(function(o) {
                                u.value = o
                            }).then(function() {
                                d.value = t.SystemActions.listFilter(u.value.responseOut.getAccountStatusAttr.statusAttr, function(o) {
                                    return o === "cashier_locked"
                                }, e)
                            }).then(function() {
                                return d.value.filteredListOut.length > 0 ? t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/deposit/disable", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0)) : r.variables.activeWalletVar.currency_typeAttr === "fiat" ? t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/deposit/fiat", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0)) : t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/deposit/crypto", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0))
                            })
                        })
                    }, function() {
                        n && n.end()
                    })
                }, 1)
            }), this.__depositbtnOnClick$Action
        }
        set _depositbtnOnClick$Action(e) {
            this.__depositbtnOnClick$Action = e
        }
        get _onReady$Action() {
            return this.hasOwnProperty("__onReady$Action") || (this.__onReady$Action = function(e) {
                var r = this.model,
                    a = this.controller,
                    v = this.idService;
                return t.Logger.startActiveSpan("OnReady", function(n) {
                    return n && (n.setAttribute("code.function", "OnReady"), n.setAttribute("outsystems.function.key", "b73a1376-9602-49de-8fb3-41cb4767b1ed"), n.setAttribute("outsystems.function.owner.name", "tradershub"), n.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), n.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                        a.ensureControllerAlive("OnReady"), e = a.callContext(e);
                        var u = new t.DataTypes.VariableHolder,
                            d = new t.DataTypes.VariableHolder,
                            o = new t.DataTypes.VariableHolder,
                            s = new t.DataTypes.VariableHolder(new t.DataTypes.JSONSerializeOutputType),
                            i = new t.DataTypes.VariableHolder(new(t.Controller.BaseController.getJSONDeserializeOutputType(A))),
                            c = new t.DataTypes.VariableHolder(new(t.Controller.BaseController.getJSONDeserializeOutputType(b))),
                            _ = new t.DataTypes.VariableHolder(new(t.Controller.BaseController.getJSONDeserializeOutputType(b)));
                        return t.Flow.executeAsyncFlow(function() {
                            return t.Flow.executeSequence(function() {
                                if (!r.variables.isLoadingVar) return r.variables.isLoadingVar = !0, i.value.dataOut = t.JSONUtils.deserializeFromJSON(m.getActiveWallet(), A, !1), r.variables.activeWalletVar = i.value.dataOut, _.value.dataOut = t.JSONUtils.deserializeFromJSON(m.getWalletTransactions(), b, !1), D.consoleLog$Action(m.getWalletList(), 0, e), t.Flow.executeSequence(function() {
                                    if (_.value.dataOut.isEmpty) return r.flush(), y.statement$Action("", "", e).then(function(l) {
                                        u.value = l
                                    }).then(function() {
                                        return s.value.jSONOut = t.JSONUtils.serializeToJSON(u.value.responseOut.statementAttr.transactionsAttr, !1, !1), r.flush(), y.cashierPayments$Action(e).then(function(l) {
                                            d.value = l
                                        })
                                    }).then(function() {
                                        o.value = t.Logger.startActiveSpan("MapTransactions", function(l) {
                                            l && (l.setAttribute("code.function", "MapTransactions"), l.setAttribute("outsystems.function.key", "e24569a6-bb66-4dde-a3bd-721cc79fa4aa"), l.setAttribute("outsystems.function.owner.name", "tradershub"), l.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), l.setAttribute("outsystems.function.type", "JAVASCRIPT"));
                                            try {
                                                return a.safeExecuteJSNode(w, "MapTransactions", "OnReady", {
                                                    CashierPayments: t.DataConversion.JSNodeParamConverter.to(d.value.responseOut, t.DataTypes.DataTypes.Text),
                                                    WalletsList: t.DataConversion.JSNodeParamConverter.to(m.getWalletList(), t.DataTypes.DataTypes.Text),
                                                    Transactions: t.DataConversion.JSNodeParamConverter.to(s.value.jSONOut, t.DataTypes.DataTypes.Text),
                                                    FormattedTransactions: t.DataConversion.JSNodeParamConverter.to("", t.DataTypes.DataTypes.Text)
                                                }, function(k) {
                                                    var O = new(a.constructor.getVariableGroupType("tradershub.WalletFlows.WalletsRecentTransactions.OnReady$mapTransactionsJSResult"));
                                                    return O.formattedTransactionsOut = t.DataConversion.JSNodeParamConverter.from(k.FormattedTransactions, t.DataTypes.DataTypes.Text), O
                                                }, {}, {})
                                            } finally {
                                                l && l.end()
                                            }
                                        }, 1), c.value.dataOut = t.JSONUtils.deserializeFromJSON(o.value.formattedTransactionsOut, b, !1), r.variables.transactionsVar = c.value.dataOut, r.variables.isLoadingVar = !1
                                    });
                                    r.variables.transactionsVar = _.value.dataOut, r.variables.isLoadingVar = !1
                                })
                            })
                        })
                    }, function() {
                        n && n.end()
                    })
                }, 1)
            }), this.__onReady$Action
        }
        set _onReady$Action(e) {
            this.__onReady$Action = e
        }
        get _withdrawbtnOnClick$Action() {
            return this.hasOwnProperty("__withdrawbtnOnClick$Action") || (this.__withdrawbtnOnClick$Action = function(e) {
                var r = this.model,
                    a = this.controller,
                    v = this.idService;
                return t.Logger.startActiveSpan("WithdrawbtnOnClick", function(n) {
                    return n && (n.setAttribute("code.function", "WithdrawbtnOnClick"), n.setAttribute("outsystems.function.key", "bc93fae8-9a73-40ab-a8ce-82d29e6c9363"), n.setAttribute("outsystems.function.owner.name", "tradershub"), n.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), n.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                        a.ensureControllerAlive("WithdrawbtnOnClick"), e = a.callContext(e);
                        var u = new t.DataTypes.VariableHolder,
                            d = new t.DataTypes.VariableHolder;
                        return t.Flow.executeAsyncFlow(function() {
                            return r.flush(), y.getAccountStatus2$Action(e).then(function(o) {
                                d.value = o
                            }).then(function() {
                                u.value = t.SystemActions.listFilter(d.value.responseOut.getAccountStatusAttr.statusAttr, function(o) {
                                    return o === "cashier_locked"
                                }, e)
                            }).then(function() {
                                return u.value.filteredListOut.length > 0 ? t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/withdrawal/disable", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0)) : r.variables.activeWalletVar.balanceAttr.gt(t.BuiltinFunctions.integerToDecimal(0)) ? t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/withdrawal/user-verification", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0)) : t.Flow.returnAsync(t.Navigation.navigateTo(t.Navigation.generateScreenURL("tradershub", "wallets/withdrawal/no-balance", {}), t.Transitions.createTransition(t.Transitions.TransitionAnimation.Default), e, !0))
                            })
                        })
                    }, function() {
                        n && n.end()
                    })
                }, 1)
            }), this.__withdrawbtnOnClick$Action
        }
        set _withdrawbtnOnClick$Action(e) {
            this.__withdrawbtnOnClick$Action = e
        }
        depositbtnOnClick$Action(e) {
            var r = this.controller;
            return t.Logger.startActiveSpan("DepositbtnOnClick__proxy", function(a) {
                return a && (a.setAttribute("code.function", "DepositbtnOnClick"), a.setAttribute("outsystems.function.key", "55599c77-f67d-4742-934e-a2b7cea23339"), a.setAttribute("outsystems.function.owner.name", "tradershub"), a.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), a.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                    return r.safeExecuteClientAction(r._depositbtnOnClick$Action, e)
                }, function() {
                    a && a.end()
                })
            }, 0)
        }
        onReady$Action(e) {
            var r = this.controller;
            return t.Logger.startActiveSpan("OnReady__proxy", function(a) {
                return a && (a.setAttribute("code.function", "OnReady"), a.setAttribute("outsystems.function.key", "b73a1376-9602-49de-8fb3-41cb4767b1ed"), a.setAttribute("outsystems.function.owner.name", "tradershub"), a.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), a.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                    return r.safeExecuteClientAction(r._onReady$Action, e)
                }, function() {
                    a && a.end()
                })
            }, 0)
        }
        withdrawbtnOnClick$Action(e) {
            var r = this.controller;
            return t.Logger.startActiveSpan("WithdrawbtnOnClick__proxy", function(a) {
                return a && (a.setAttribute("code.function", "WithdrawbtnOnClick"), a.setAttribute("outsystems.function.key", "bc93fae8-9a73-40ab-a8ce-82d29e6c9363"), a.setAttribute("outsystems.function.owner.name", "tradershub"), a.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), a.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                    return r.safeExecuteClientAction(r._withdrawbtnOnClick$Action, e)
                }, function() {
                    a && a.end()
                })
            }, 0)
        }
        get onInitializeEventHandler() {
            return this.hasOwnProperty("_onInitializeEventHandler") || (this._onInitializeEventHandler = null), this._onInitializeEventHandler
        }
        set onInitializeEventHandler(e) {
            this._onInitializeEventHandler = e
        }
        get onReadyEventHandler() {
            return this.hasOwnProperty("_onReadyEventHandler") || (this._onReadyEventHandler = function(e) {
                var r = this.controller,
                    a = this.model,
                    v = this.idService;
                return r.onReady$Action(e)
            }), this._onReadyEventHandler
        }
        set onReadyEventHandler(e) {
            this._onReadyEventHandler = e
        }
        get onRenderEventHandler() {
            return this.hasOwnProperty("_onRenderEventHandler") || (this._onRenderEventHandler = null), this._onRenderEventHandler
        }
        set onRenderEventHandler(e) {
            this._onRenderEventHandler = e
        }
        get onDestroyEventHandler() {
            return this.hasOwnProperty("_onDestroyEventHandler") || (this._onDestroyEventHandler = null), this._onDestroyEventHandler
        }
        set onDestroyEventHandler(e) {
            this._onDestroyEventHandler = e
        }
        get onParametersChangedEventHandler() {
            return this.hasOwnProperty("_onParametersChangedEventHandler") || (this._onParametersChangedEventHandler = null), this._onParametersChangedEventHandler
        }
        set onParametersChangedEventHandler(e) {
            this._onParametersChangedEventHandler = e
        }
        get handleError() {
            return this.hasOwnProperty("_handleError") || (this._handleError = function(e) {
                return N.default.handleError(e, this.callContext())
            }), this._handleError
        }
        set handleError(e) {
            this._handleError = e
        }
        static checkPermissions() {}
        getDefaultTimeout() {
            return y.defaultTimeout
        }
    };
    f(T, "ControllerInner");
    let h = T;
    p = h, p.registerVariableGroupType("tradershub.WalletFlows.WalletsRecentTransactions.OnReady$mapTransactionsJSResult", [{
        name: "FormattedTransactions",
        attrName: "formattedTransactionsOut",
        mandatory: !0,
        dataType: t.DataTypes.DataTypes.Text,
        defaultValue: f(function() {
            return ""
        }, "defaultValue")
    }])
}
var p, tt = new t.Controller.ControllerFactory(p, R);
export {
    tt as a
};