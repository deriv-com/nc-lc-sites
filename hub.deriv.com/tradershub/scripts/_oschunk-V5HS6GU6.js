import {
    a as N
} from "./_oschunk-IQUI5AIQ.js";
import {
    a as C
} from "./_oschunk-LHY3WMNC.js";
import {
    a as _,
    d as A
} from "./_oschunk-XMOR6XCC.js";
import {
    ic as E
} from "./_oschunk-44PT7RP7.js";
import {
    ia as O
} from "./_oschunk-NTQBNJ73.js";
import {
    a as V,
    b,
    c as l
} from "./_oschunk-DVBKI63I.js";
var R = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "\u0633\u062A\u0638\u0647\u0631 \u0645\u0639\u0627\u0645\u0644\u0627\u062A\u0643 \u0647\u0646\u0627.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "\u062A\u062D\u0648\u064A\u0644",
        "5IQr13COlUy7WEtvOmJKzw#Value": "\u0627\u0644\u0633\u062D\u0628",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "\u0627\u0644\u0625\u064A\u062F\u0627\u0639",
        "68GTmBANiUubMZr6GDahVg#Value": "\u0627\u0644\u0643\u0644",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "1dw8hqdk3keFKAqmHeBEEw#Value.2118442357.1": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0627\u0644\u0623\u062E\u064A\u0631\u0629",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"
    },
    H = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "Ihre Transaktionen werden hier angezeigt.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "Keine Transaktionen gefunden",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "\xDCberweisung",
        "5IQr13COlUy7WEtvOmJKzw#Value": "Abheben",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "Einzahlung",
        "68GTmBANiUubMZr6GDahVg#Value": "Alle",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transaktionen",
        "1dw8hqdk3keFKAqmHeBEEw#Value.2118442357.1": "K\xFCrzliche Transaktionen",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "Transaktionen",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "Transaktionen"
    },
    L = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "Sus transacciones aparecer\xE1n aqu\xED.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "No se han encontrado transacciones",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "Transferencia",
        "5IQr13COlUy7WEtvOmJKzw#Value": "Retirar",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "Dep\xF3sito",
        "68GTmBANiUubMZr6GDahVg#Value": "Todas ",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transacciones",
        "1dw8hqdk3keFKAqmHeBEEw#Value.2118442357.1": "Transacciones recientes",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "Transacciones",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "Transacciones"
    },
    F = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "Vos transactions appara\xEEtront ici.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "Aucune transaction trouv\xE9e",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transactions"
    },
    g = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "Le tue transazioni appariranno qui.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "Nessuna transazione trovata",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "Trasferisci",
        "5IQr13COlUy7WEtvOmJKzw#Value": "Preleva",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "Deposita",
        "68GTmBANiUubMZr6GDahVg#Value": "Tutto",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transazioni",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "Transazioni",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "Transazioni"
    },
    k = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "Twoje transakcje pojawi\u0105 si\u0119 tutaj.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "Nie znaleziono transakcji",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "Przelew",
        "5IQr13COlUy7WEtvOmJKzw#Value": "Wyp\u0142a\u0107",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "Wp\u0142ata",
        "68GTmBANiUubMZr6GDahVg#Value": "Wszystko",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transakcje",
        "1dw8hqdk3keFKAqmHeBEEw#Value.2118442357.1": "Ostatnie transakcje",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "Transakcje",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "Transakcje"
    },
    P = {
        "M4rt3Iir10eX40aqD1n_lA#Value": "As suas transa\xE7\xF5es aparecer\xE3o aqui.",
        "R5vETfYBYUWiCHLBsjKLqA#Value": "Nenhuma transa\xE7\xE3o encontrada",
        "gDzcFqUlOE6CWD9qA6ZJkw#Value": "Transfer\xEAncias",
        "5IQr13COlUy7WEtvOmJKzw#Value": "Levantamentos",
        "u7HXgj02Ikm2r0jX7pCmAw#Value": "Dep\xF3sitos",
        "68GTmBANiUubMZr6GDahVg#Value": "Tudo",
        "y0td2RELukOpHNdWu7Z0Pw#Value": "Transa\xE7\xF5es",
        "1dw8hqdk3keFKAqmHeBEEw#Value.2118442357.1": "Transa\xE7\xF5es recentes",
        "p0dXA5rf3EG2NUYra7BP3w#Title": "Transa\xE7\xF5es",
        "p0dXA5rf3EG2NUYra7BP3w#TitleExpression.2118442357.1": "Transa\xE7\xF5es"
    },
    W = {
        "ar-001": {
            translations: R,
            isRTL: !0
        },
        "de-DE": {
            translations: H,
            isRTL: !1
        },
        "es-ES": {
            translations: L,
            isRTL: !1
        },
        "fr-FR": {
            translations: F,
            isRTL: !1
        },
        "it-IT": {
            translations: g,
            isRTL: !1
        },
        "pl-PL": {
            translations: k,
            isRTL: !1
        },
        "pt-PT": {
            translations: P,
            isRTL: !1
        }
    };

function w(u, f, S, e) {
    let n = u.AccountType = [];
    window.__wallets = n;
    let r = JSON.parse(u.Transactions);

    function h(d) {
        let s = new Date(d * 1e3),
            a = {
                year: "numeric",
                month: "long",
                day: "numeric"
            };
        return s.toLocaleDateString(void 0, a)
    }
    l(h, "formatDate");
    let o = {
        dtrade: "Options trading",
        dxtrade: "Deriv X",
        mt5: "Deriv MT5",
        ctrader: "Deriv cTrader"
    };

    function m(d) {
        let s = l((a = "") => {
            if (a) {
                if (a.startsWith("CRW") || a.startsWith("VRW")) {
                    let i = n.find(T => T.loginid === a);
                    return i ? `${i.currency} Wallet` : ""
                }
                return a.startsWith("CR") || a.startsWith("VR") ? o.dtrade : a.startsWith("CTR") || a.startsWith("CTD") ? o.ctrader : a.startsWith("CXR") || a.startsWith("CXD") ? o.dxtrade : a.startsWith("MTR") || a.startsWith("MTD") ? o.mt5 : ""
            }
        }, "getPlatform");
        return d.reduce((a, i) => {
            if (i.action_type === "buy" || i.action_type === "sell") return a;
            let T = h(i.transaction_time);
            a[T] || (a[T] = []);
            let y = b(V({}, i), {
                date: T
            });
            return i.from && (y.from.platform = s(i.from.loginid)), i.to && (y.to.platform = s(i.to.loginid)), a[T].push(y), a
        }, {})
    }
    l(m, "groupTransactionsByDate");
    let c = m(r),
        v = Object.keys(c),
        p = Object.values(c).flat();
    u.DatesList = JSON.stringify(v), u.FormattedTransactions = JSON.stringify(p)
}
l(w, "default");
var t = O; {
    let f = class f extends t.Controller.BaseViewController {
        constructor(e, n, r) {
            super(e, n, r, W);
            var h = this.controller;
            this.clientActionProxies = {}, this.dataFetchDependenciesOriginal = {}, this.dataFetchDependentsGraph = {}, this.shouldSendClientVarsToDataSources = !1
        }
        get dataFetchActionNames() {
            return this.hasOwnProperty("_dataFetchActionNames") || (this._dataFetchActionNames = []), this._dataFetchActionNames
        }
        set dataFetchActionNames(e) {
            this._dataFetchActionNames = e
        }
        get _fetchTransactions$Action() {
            return this.hasOwnProperty("__fetchTransactions$Action") || (this.__fetchTransactions$Action = function(e) {
                var n = this.model,
                    r = this.controller,
                    h = this.idService;
                return t.Logger.startActiveSpan("FetchTransactions", function(o) {
                    return o && (o.setAttribute("code.function", "FetchTransactions"), o.setAttribute("outsystems.function.key", "74f1f199-4a46-47af-bdd7-4903701e6e4c"), o.setAttribute("outsystems.function.owner.name", "tradershub"), o.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), o.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                        r.ensureControllerAlive("FetchTransactions"), e = r.callContext(e);
                        var m = new t.DataTypes.VariableHolder,
                            c = new t.DataTypes.VariableHolder,
                            v = new t.DataTypes.VariableHolder(new t.DataTypes.JSONSerializeOutputType),
                            p = new t.DataTypes.VariableHolder(new(t.Controller.BaseController.getJSONDeserializeOutputType(t.DataTypes.TextList))),
                            d = new t.DataTypes.VariableHolder(new(t.Controller.BaseController.getJSONDeserializeOutputType(E)));
                        return t.Flow.executeAsyncFlow(function() {
                            return n.variables.isLoadingVar = !0, n.flush(), A.statement$Action(n.variables.actionTypeValueVar === "all" ? t.BuiltinFunctions.nullTextIdentifier() : n.variables.actionTypeValueVar, "", e).then(function(s) {
                                m.value = s
                            }).then(function() {
                                v.value.jSONOut = t.JSONUtils.serializeToJSON(m.value.responseOut.statementAttr.transactionsAttr, !1, !1), c.value = t.Logger.startActiveSpan("MapTransactions", function(s) {
                                    s && (s.setAttribute("code.function", "MapTransactions"), s.setAttribute("outsystems.function.key", "6e13d519-bafa-4255-b10d-b808a1cd36a6"), s.setAttribute("outsystems.function.owner.name", "tradershub"), s.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), s.setAttribute("outsystems.function.type", "JAVASCRIPT"));
                                    try {
                                        return r.safeExecuteJSNode(w, "MapTransactions", "FetchTransactions", {
                                            Transactions: t.DataConversion.JSNodeParamConverter.to(v.value.jSONOut, t.DataTypes.DataTypes.Text),
                                            AccountType: t.DataConversion.JSNodeParamConverter.to(_.getAccountType(), t.DataTypes.DataTypes.Text),
                                            WalletsList: t.DataConversion.JSNodeParamConverter.to(_.getWalletList(), t.DataTypes.DataTypes.Text),
                                            DatesList: t.DataConversion.JSNodeParamConverter.to("", t.DataTypes.DataTypes.Text),
                                            FormattedTransactions: t.DataConversion.JSNodeParamConverter.to("", t.DataTypes.DataTypes.Text)
                                        }, function(a) {
                                            var i = new(r.constructor.getVariableGroupType("tradershub.WalletFlows.WalletsTransactions.FetchTransactions$mapTransactionsJSResult"));
                                            return i.datesListOut = t.DataConversion.JSNodeParamConverter.from(a.DatesList, t.DataTypes.DataTypes.Text), i.formattedTransactionsOut = t.DataConversion.JSNodeParamConverter.from(a.FormattedTransactions, t.DataTypes.DataTypes.Text), i
                                        }, {}, {})
                                    } finally {
                                        s && s.end()
                                    }
                                }, 1), d.value.dataOut = t.JSONUtils.deserializeFromJSON(c.value.formattedTransactionsOut, E, !1), p.value.dataOut = t.JSONUtils.deserializeFromJSON(c.value.datesListOut, t.DataTypes.TextList, !1), n.variables.datesListVar = p.value.dataOut, n.variables.transactionsVar = d.value.dataOut, n.variables.isLoadingVar = !1
                            })
                        })
                    }, function() {
                        o && o.end()
                    })
                }, 1)
            }), this.__fetchTransactions$Action
        }
        set _fetchTransactions$Action(e) {
            this.__fetchTransactions$Action = e
        }
        fetchTransactions$Action(e) {
            var n = this.controller;
            return t.Logger.startActiveSpan("FetchTransactions__proxy", function(r) {
                return r && (r.setAttribute("code.function", "FetchTransactions"), r.setAttribute("outsystems.function.key", "74f1f199-4a46-47af-bdd7-4903701e6e4c"), r.setAttribute("outsystems.function.owner.name", "tradershub"), r.setAttribute("outsystems.function.owner.key", "2ad446d5-32d7-4fbf-959d-82d8325bcfbc"), r.setAttribute("outsystems.function.type", "CLIENT_SCREEN_ACTION")), t.Flow.tryFinally(function() {
                    return n.safeExecuteClientAction(n._fetchTransactions$Action, e)
                }, function() {
                    r && r.end()
                })
            }, 0)
        }
        get onInitializeEventHandler() {
            return this.hasOwnProperty("_onInitializeEventHandler") || (this._onInitializeEventHandler = null), this._onInitializeEventHandler
        }
        set onInitializeEventHandler(e) {
            this._onInitializeEventHandler = e
        }
        get onReadyEventHandler() {
            return this.hasOwnProperty("_onReadyEventHandler") || (this._onReadyEventHandler = function(e) {
                var n = this.controller,
                    r = this.model,
                    h = this.idService;
                return n.fetchTransactions$Action(e)
            }), this._onReadyEventHandler
        }
        set onReadyEventHandler(e) {
            this._onReadyEventHandler = e
        }
        get onRenderEventHandler() {
            return this.hasOwnProperty("_onRenderEventHandler") || (this._onRenderEventHandler = null), this._onRenderEventHandler
        }
        set onRenderEventHandler(e) {
            this._onRenderEventHandler = e
        }
        get onDestroyEventHandler() {
            return this.hasOwnProperty("_onDestroyEventHandler") || (this._onDestroyEventHandler = null), this._onDestroyEventHandler
        }
        set onDestroyEventHandler(e) {
            this._onDestroyEventHandler = e
        }
        get onParametersChangedEventHandler() {
            return this.hasOwnProperty("_onParametersChangedEventHandler") || (this._onParametersChangedEventHandler = null), this._onParametersChangedEventHandler
        }
        set onParametersChangedEventHandler(e) {
            this._onParametersChangedEventHandler = e
        }
        get handleError() {
            return this.hasOwnProperty("_handleError") || (this._handleError = function(e) {
                return N.default.handleError(e, this.callContext())
            }), this._handleError
        }
        set handleError(e) {
            this._handleError = e
        }
        static checkPermissions() {}
        getDefaultTimeout() {
            return A.defaultTimeout
        }
    };
    l(f, "ControllerInner");
    let u = f;
    D = u, D.registerVariableGroupType("tradershub.WalletFlows.WalletsTransactions.FetchTransactions$mapTransactionsJSResult", [{
        name: "DatesList",
        attrName: "datesListOut",
        mandatory: !0,
        dataType: t.DataTypes.DataTypes.Text,
        defaultValue: l(function() {
            return ""
        }, "defaultValue")
    }, {
        name: "FormattedTransactions",
        attrName: "formattedTransactionsOut",
        mandatory: !0,
        dataType: t.DataTypes.DataTypes.Text,
        defaultValue: l(function() {
            return ""
        }, "defaultValue")
    }])
}
var D, M = new t.Controller.ControllerFactory(D, C);
export {
    M as a
};