import {
    a as Vt,
    b as Vo,
    c as u,
    d as Lr,
    g as q2,
    i as Ot
} from "./_oschunk-QHO7QY6K.js";
var F9 = {};
q2(F9, {
    Application: () => JW,
    ApplicationInfo: () => l8,
    Authentication: () => M8,
    Authorization: () => qz,
    BuiltinFunctions: () => AI,
    ClientVariables: () => U9,
    Communication: () => Hz,
    CommunicationHeaders: () => Fz,
    Controller: () => bW,
    DataConversion: () => Xz,
    DataTypes: () => Wz,
    DebuggerAPI: () => M9,
    DebuggerBase: () => k9,
    Entities: () => tW,
    ErrorHandling: () => nW,
    ErrorScreen: () => s9,
    EventDispatcher: () => sW,
    Exceptions: () => v8,
    FeedbackMessageService: () => rW,
    Flow: () => w8,
    Format: () => kz,
    IndexedDBSerializer: () => kW,
    IndexedDBUtils: () => KW,
    Injector: () => de,
    Interfaces: () => T8,
    JSONUtils: () => qW,
    LanguageResources: () => a9,
    LightImmutable: () => Uz,
    LocaleService: () => BW,
    Logger: () => nU,
    MappingWithDefaultService: () => L9,
    Model: () => u9,
    NativeHelper: () => O8,
    Navigation: () => U8,
    ObjectExtensions: () => d9,
    Performance: () => lW,
    Public: () => gW,
    RequireManager: () => f8,
    ScreenStateCache: () => EW,
    ScriptsManager: () => p9,
    ServiceNames: () => Y,
    SettingsNames: () => HS,
    StorageProvider: () => p8,
    StringUtils: () => N9,
    SystemActions: () => D9,
    SystemStructures: () => h9,
    TableInfoUtils: () => CW,
    TransitionAnimation: () => a8,
    Transitions: () => c8,
    UrlUtils: () => I8,
    Validation: () => mW,
    Version: () => W2,
    VersionDefinition: () => g8,
    WebSQLSerializer: () => MW,
    WebSQLUtils: () => c9,
    WidgetNaming: () => pW,
    runPostInitialization: () => m2,
    runPreInitialization: () => y2,
    useAuthConfigsManager: () => x2,
    useBaseApplication: () => L2,
    useSettingsManager: () => U2,
    useVersionsManager: () => k2
});
var eo;
(function(n) {
    n.WebHttpClientForNative = "WebHttpClientForNative", n.NoInstrumentationFactoryLogs = "NoInstrumentationFactoryLogs", n.WriteLogsOnConsoles = "WriteLogsOnConsoles", n.ServiceWorkerTraces = "ServiceWorkerTraces", n.EnableOTLV2TraceFormat = "EnableOTLV2TraceFormat"
})(eo || (eo = {}));
var G2 = {
        ServiceWorkerTraces: "true",
        EnableOTLV2TraceFormat: "true"
    },
    aC = function() {
        if (typeof window != "undefined") return window;
        if (typeof global != "undefined") return global;
        if (typeof globalThis != "undefined") return globalThis;
        if (typeof self != "undefined") return self;
        throw new Error("unable to locate global object")
    }().sessionStorage,
    K2 = [],
    u0 = class u0 {
        static readValue(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : aC;
            var r;
            return (r = t == null ? void 0 : t.getItem(this.getFeatureKey(e))) !== null && r !== void 0 ? r : void 0
        }
        static isEnabled(e) {
            let {
                featuresStorage: t = aC,
                features: r = K2,
                defaultValues: i = G2
            } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            var o;
            let s = i[e],
                a = (o = this.readValue(e, t)) !== null && o !== void 0 ? o : s,
                l = (a == null ? void 0 : a.toLowerCase()) === "true",
                d = l !== ((s == null ? void 0 : s.toLowerCase()) === "true");
            return d && !r.includes(e) ? (console.warn(`FeaturesManager: Experimental flag "${e}" is overridden with value "${a}"`), r.push(e)) : !d && r.includes(e) && r.splice(r.indexOf(e), 1), l
        }
    };
u(u0, "n");
var Oi = u0;
Oi.getFeatureKey = n => `ft-${n}`;

function Ge(n, e, t, r) {
    return new(t || (t = Promise))(function(i, o) {
        function s(d) {
            try {
                l(r.next(d))
            } catch (c) {
                o(c)
            }
        }
        u(s, "s");

        function a(d) {
            try {
                l(r.throw(d))
            } catch (c) {
                o(c)
            }
        }
        u(a, "a");

        function l(d) {
            var c;
            d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                h(c)
            })).then(s, a)
        }
        u(l, "c"), l((r = r.apply(n, e || [])).next())
    })
}
u(Ge, "e");

function X(n, e, t, r) {
    if (t === "a" && !r) throw new TypeError("Private accessor was defined without a getter");
    if (typeof e == "function" ? n !== e || !r : !e.has(n)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return t === "m" ? r : t === "a" ? r.call(n) : r ? r.value : e.get(n)
}
u(X, "t");

function Ye(n, e, t, r, i) {
    if (r === "m") throw new TypeError("Private method is not writable");
    if (r === "a" && !i) throw new TypeError("Private accessor was defined without a setter");
    if (typeof e == "function" ? n !== e || !i : !e.has(n)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return r === "a" ? i.call(n, t) : i ? i.value = t : e.set(n, t), t
}
u(Ye, "o");
var db = class db extends Error {
    constructor(e, t, r, i, o) {
        super(e), this.errorCode = t, this.status = r ? `${r}` : "", this.response = i, this.category = o
    }
};
u(db, "r");
var wr = db,
    it;
(function(n) {
    n.Communication_Default = "OS-CLRT-60900", n.Communication_Bad_Request = "OS-CLRT-60901", n.Communication_Unauthorized = "OS-CLRT-60902", n.Communication_Forbidden = "OS-CLRT-60903", n.Communication_Not_Found = "OS-CLRT-60904", n.Communication_Timeout = "OS-CLRT-60905", n.Communication_Internal_Server_Error = "OS-CLRT-60906", n.Communication_Unavailable = "OS-CLRT-60907"
})(it || (it = {}));
var J2 = {
        400: it.Communication_Bad_Request,
        401: it.Communication_Unauthorized,
        403: it.Communication_Forbidden,
        404: it.Communication_Not_Found,
        408: it.Communication_Timeout,
        500: it.Communication_Internal_Server_Error,
        503: it.Communication_Unavailable
    },
    hg = u(n => {
        var e;
        return (e = J2[`${n}`]) !== null && e !== void 0 ? e : it.Communication_Default
    }, "s"),
    Z2 = "traceparent",
    Y2 = "tracestate",
    X2 = "baggage",
    Q2 = 512,
    eM = ["code.function", "outsystems.function.key", "outsystems.function.type", "outsystems.runtime.screen", "outsystems.otel.access.visibility"];

function YC() {
    return Ge(this, arguments, void 0, function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {},
            e = arguments.length > 1 ? arguments[1] : void 0;
        return function*() {
            if (!e) return n;
            let t = yield e();
            return t ? function(r, i) {
                let o = Object.assign(Object.assign({}, i), {
                    [Z2]: tM(r)
                });
                if (r.attributes) {
                    let s = function(a) {
                        return eM.map(l => a[l] ? `${l}=${a[l]}` : void 0).filter(l => l !== void 0).join(",")
                    }(r.attributes);
                    o[s.length > Q2 ? X2 : Y2] = s
                }
                return o
            }(t, n) : n
        }()
    })
}
u(YC, "p");

function tM(n) {
    return `00-${n.traceId}-${n.spanId}-${n.sampled?"01":"00"}`
}
u(tM, "d");
var E0;
(function(n) {
    n.FormUrlEncoded = "application/x-www-form-urlencoded", n.Json = "application/json"
})(E0 || (E0 = {}));
var _0, _n = E0;
(function(n) {
    n[n.Unknown = 0] = "Unknown", n[n.Timeout = 1] = "Timeout", n[n.Unauthorized = 2] = "Unauthorized"
})(_0 || (_0 = {}));
var Va = _0,
    nM = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};

function rM(n) {
    return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n
}
u(rM, "_");

function iM(n) {
    if (n.__esModule) return n;
    var e = n.default;
    if (typeof e == "function") {
        var t = u(function r() {
            return this instanceof r ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments)
        }, "e");
        t.prototype = e.prototype
    } else t = {};
    return Object.defineProperty(t, "__esModule", {
        value: !0
    }), Object.keys(n).forEach(function(r) {
        var i = Object.getOwnPropertyDescriptor(n, r);
        Object.defineProperty(t, r, i.get ? i : {
            enumerable: !0,
            get: u(function() {
                return n[r]
            }, "get")
        })
    }), t
}
u(iM, "b");
var Qe, oM = Error,
    sM = EvalError,
    aM = RangeError,
    uM = ReferenceError,
    XC = SyntaxError,
    Yl = TypeError,
    cM = URIError,
    uC = typeof Symbol != "undefined" && Symbol,
    lM = u(function() {
        if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function") return !1;
        if (typeof Symbol.iterator == "symbol") return !0;
        var n = {},
            e = Symbol("test"),
            t = Object(e);
        if (typeof e == "string" || Object.prototype.toString.call(e) !== "[object Symbol]" || Object.prototype.toString.call(t) !== "[object Symbol]") return !1;
        for (e in n[e] = 42, n) return !1;
        if (typeof Object.keys == "function" && Object.keys(n).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(n).length !== 0) return !1;
        var r = Object.getOwnPropertySymbols(n);
        if (r.length !== 1 || r[0] !== e || !Object.prototype.propertyIsEnumerable.call(n, e)) return !1;
        if (typeof Object.getOwnPropertyDescriptor == "function") {
            var i = Object.getOwnPropertyDescriptor(n, e);
            if (i.value !== 42 || i.enumerable !== !0) return !1
        }
        return !0
    }, "A"),
    cC = {
        foo: {}
    },
    dM = Object,
    hM = Object.prototype.toString,
    fM = Math.max,
    lC = u(function(n, e) {
        for (var t = [], r = 0; r < n.length; r += 1) t[r] = n[r];
        for (var i = 0; i < e.length; i += 1) t[i + n.length] = e[i];
        return t
    }, "x"),
    gM = u(function(n) {
        var e = this;
        if (typeof e != "function" || hM.apply(e) !== "[object Function]") throw new TypeError("Function.prototype.bind called on incompatible " + e);
        for (var t, r = function(l, d) {
                for (var c = [], h = d, f = 0; h < l.length; h += 1, f += 1) c[f] = l[h];
                return c
            }(arguments, 1), i = fM(0, e.length - r.length), o = [], s = 0; s < i; s++) o[s] = "$" + s;
        if (t = Function("binder", "return function (" + function(l, d) {
                for (var c = "", h = 0; h < l.length; h += 1) c += l[h], h + 1 < l.length && (c += d);
                return c
            }(o, ",") + "){ return binder.apply(this,arguments); }")(function() {
                if (this instanceof t) {
                    var l = e.apply(this, lC(r, arguments));
                    return Object(l) === l ? l : this
                }
                return e.apply(n, lC(r, arguments))
            }), e.prototype) {
            var a = u(function() {}, "a");
            a.prototype = e.prototype, t.prototype = new a, a.prototype = null
        }
        return t
    }, "L"),
    rb = Function.prototype.bind || gM,
    pM = Function.prototype.call,
    mM = Object.prototype.hasOwnProperty,
    vM = rb.call(pM, mM),
    yM = oM,
    bM = sM,
    wM = aM,
    TM = uM,
    Ga = XC,
    Ya = Yl,
    EM = cM,
    QC = Function,
    c0 = u(function(n) {
        try {
            return QC('"use strict"; return (' + n + ").constructor;")()
        } catch (e) {}
    }, "V"),
    zs = Object.getOwnPropertyDescriptor;
if (zs) try {
    zs({}, "")
} catch (n) {
    zs = null
}
var l0 = u(function() {
        throw new Ya
    }, "X"),
    _M = zs ? function() {
        try {
            return l0
        } catch (n) {
            try {
                return zs(arguments, "callee").get
            } catch (e) {
                return l0
            }
        }
    }() : l0,
    Ha = typeof uC == "function" && typeof Symbol == "function" && typeof uC("foo") == "symbol" && typeof Symbol("bar") == "symbol" && lM(),
    SM = {
        __proto__: cC
    }.foo === cC.foo && !({
            __proto__: null
        }
        instanceof dM),
    gn = Object.getPrototypeOf || (SM ? function(n) {
        return n.__proto__
    } : null),
    Wa = {},
    IM = typeof Uint8Array != "undefined" && gn ? gn(Uint8Array) : Qe,
    Ws = {
        __proto__: null,
        "%AggregateError%": typeof AggregateError == "undefined" ? Qe : AggregateError,
        "%Array%": Array,
        "%ArrayBuffer%": typeof ArrayBuffer == "undefined" ? Qe : ArrayBuffer,
        "%ArrayIteratorPrototype%": Ha && gn ? gn([][Symbol.iterator]()) : Qe,
        "%AsyncFromSyncIteratorPrototype%": Qe,
        "%AsyncFunction%": Wa,
        "%AsyncGenerator%": Wa,
        "%AsyncGeneratorFunction%": Wa,
        "%AsyncIteratorPrototype%": Wa,
        "%Atomics%": typeof Atomics == "undefined" ? Qe : Atomics,
        "%BigInt%": typeof BigInt == "undefined" ? Qe : BigInt,
        "%BigInt64Array%": typeof BigInt64Array == "undefined" ? Qe : BigInt64Array,
        "%BigUint64Array%": typeof BigUint64Array == "undefined" ? Qe : BigUint64Array,
        "%Boolean%": Boolean,
        "%DataView%": typeof DataView == "undefined" ? Qe : DataView,
        "%Date%": Date,
        "%decodeURI%": decodeURI,
        "%decodeURIComponent%": decodeURIComponent,
        "%encodeURI%": encodeURI,
        "%encodeURIComponent%": encodeURIComponent,
        "%Error%": yM,
        "%eval%": eval,
        "%EvalError%": bM,
        "%Float32Array%": typeof Float32Array == "undefined" ? Qe : Float32Array,
        "%Float64Array%": typeof Float64Array == "undefined" ? Qe : Float64Array,
        "%FinalizationRegistry%": typeof FinalizationRegistry == "undefined" ? Qe : FinalizationRegistry,
        "%Function%": QC,
        "%GeneratorFunction%": Wa,
        "%Int8Array%": typeof Int8Array == "undefined" ? Qe : Int8Array,
        "%Int16Array%": typeof Int16Array == "undefined" ? Qe : Int16Array,
        "%Int32Array%": typeof Int32Array == "undefined" ? Qe : Int32Array,
        "%isFinite%": isFinite,
        "%isNaN%": isNaN,
        "%IteratorPrototype%": Ha && gn ? gn(gn([][Symbol.iterator]())) : Qe,
        "%JSON%": typeof JSON == "object" ? JSON : Qe,
        "%Map%": typeof Map == "undefined" ? Qe : Map,
        "%MapIteratorPrototype%": typeof Map != "undefined" && Ha && gn ? gn(new Map()[Symbol.iterator]()) : Qe,
        "%Math%": Math,
        "%Number%": Number,
        "%Object%": Object,
        "%parseFloat%": parseFloat,
        "%parseInt%": parseInt,
        "%Promise%": typeof Promise == "undefined" ? Qe : Promise,
        "%Proxy%": typeof Proxy == "undefined" ? Qe : Proxy,
        "%RangeError%": wM,
        "%ReferenceError%": TM,
        "%Reflect%": typeof Reflect == "undefined" ? Qe : Reflect,
        "%RegExp%": RegExp,
        "%Set%": typeof Set == "undefined" ? Qe : Set,
        "%SetIteratorPrototype%": typeof Set != "undefined" && Ha && gn ? gn(new Set()[Symbol.iterator]()) : Qe,
        "%SharedArrayBuffer%": typeof SharedArrayBuffer == "undefined" ? Qe : SharedArrayBuffer,
        "%String%": String,
        "%StringIteratorPrototype%": Ha && gn ? gn("" [Symbol.iterator]()) : Qe,
        "%Symbol%": Ha ? Symbol : Qe,
        "%SyntaxError%": Ga,
        "%ThrowTypeError%": _M,
        "%TypedArray%": IM,
        "%TypeError%": Ya,
        "%Uint8Array%": typeof Uint8Array == "undefined" ? Qe : Uint8Array,
        "%Uint8ClampedArray%": typeof Uint8ClampedArray == "undefined" ? Qe : Uint8ClampedArray,
        "%Uint16Array%": typeof Uint16Array == "undefined" ? Qe : Uint16Array,
        "%Uint32Array%": typeof Uint32Array == "undefined" ? Qe : Uint32Array,
        "%URIError%": EM,
        "%WeakMap%": typeof WeakMap == "undefined" ? Qe : WeakMap,
        "%WeakRef%": typeof WeakRef == "undefined" ? Qe : WeakRef,
        "%WeakSet%": typeof WeakSet == "undefined" ? Qe : WeakSet
    };
if (gn) try {
    null.error
} catch (n) {
    dC = gn(gn(n)), Ws["%Error.prototype%"] = dC
}
var dC, hC, fC, AM = u(function n(e) {
        var t;
        if (e === "%AsyncFunction%") t = c0("async function () {}");
        else if (e === "%GeneratorFunction%") t = c0("function* () {}");
        else if (e === "%AsyncGeneratorFunction%") t = c0("async function* () {}");
        else if (e === "%AsyncGenerator%") {
            var r = n("%AsyncGeneratorFunction%");
            r && (t = r.prototype)
        } else if (e === "%AsyncIteratorPrototype%") {
            var i = n("%AsyncGenerator%");
            i && gn && (t = gn(i.prototype))
        }
        return Ws[e] = t, t
    }, "e"),
    gC = {
        __proto__: null,
        "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
        "%ArrayPrototype%": ["Array", "prototype"],
        "%ArrayProto_entries%": ["Array", "prototype", "entries"],
        "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
        "%ArrayProto_keys%": ["Array", "prototype", "keys"],
        "%ArrayProto_values%": ["Array", "prototype", "values"],
        "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
        "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
        "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
        "%BooleanPrototype%": ["Boolean", "prototype"],
        "%DataViewPrototype%": ["DataView", "prototype"],
        "%DatePrototype%": ["Date", "prototype"],
        "%ErrorPrototype%": ["Error", "prototype"],
        "%EvalErrorPrototype%": ["EvalError", "prototype"],
        "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
        "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
        "%FunctionPrototype%": ["Function", "prototype"],
        "%Generator%": ["GeneratorFunction", "prototype"],
        "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
        "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
        "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
        "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
        "%JSONParse%": ["JSON", "parse"],
        "%JSONStringify%": ["JSON", "stringify"],
        "%MapPrototype%": ["Map", "prototype"],
        "%NumberPrototype%": ["Number", "prototype"],
        "%ObjectPrototype%": ["Object", "prototype"],
        "%ObjProto_toString%": ["Object", "prototype", "toString"],
        "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
        "%PromisePrototype%": ["Promise", "prototype"],
        "%PromiseProto_then%": ["Promise", "prototype", "then"],
        "%Promise_all%": ["Promise", "all"],
        "%Promise_reject%": ["Promise", "reject"],
        "%Promise_resolve%": ["Promise", "resolve"],
        "%RangeErrorPrototype%": ["RangeError", "prototype"],
        "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
        "%RegExpPrototype%": ["RegExp", "prototype"],
        "%SetPrototype%": ["Set", "prototype"],
        "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
        "%StringPrototype%": ["String", "prototype"],
        "%SymbolPrototype%": ["Symbol", "prototype"],
        "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
        "%TypedArrayPrototype%": ["TypedArray", "prototype"],
        "%TypeErrorPrototype%": ["TypeError", "prototype"],
        "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
        "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
        "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
        "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
        "%URIErrorPrototype%": ["URIError", "prototype"],
        "%WeakMapPrototype%": ["WeakMap", "prototype"],
        "%WeakSetPrototype%": ["WeakSet", "prototype"]
    },
    Xl = rb,
    Hf = vM,
    CM = Xl.call(Function.call, Array.prototype.concat),
    RM = Xl.call(Function.apply, Array.prototype.splice),
    pC = Xl.call(Function.call, String.prototype.replace),
    Cf = Xl.call(Function.call, String.prototype.slice),
    OM = Xl.call(Function.call, RegExp.prototype.exec),
    DM = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
    NM = /\\(\\)?/g,
    LM = u(function(n, e) {
        var t, r = n;
        if (Hf(gC, r) && (r = "%" + (t = gC[r])[0] + "%"), Hf(Ws, r)) {
            var i = Ws[r];
            if (i === Wa && (i = AM(r)), i === void 0 && !e) throw new Ya("intrinsic " + n + " exists, but is not available. Please file an issue!");
            return {
                alias: t,
                name: r,
                value: i
            }
        }
        throw new Ga("intrinsic " + n + " does not exist!")
    }, "_e"),
    iu = u(function(n, e) {
        if (typeof n != "string" || n.length === 0) throw new Ya("intrinsic name must be a non-empty string");
        if (arguments.length > 1 && typeof e != "boolean") throw new Ya('"allowMissing" argument must be a boolean');
        if (OM(/^%?[^%]*%?$/, n) === null) throw new Ga("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
        var t = function(y) {
                var b = Cf(y, 0, 1),
                    E = Cf(y, -1);
                if (b === "%" && E !== "%") throw new Ga("invalid intrinsic syntax, expected closing `%`");
                if (E === "%" && b !== "%") throw new Ga("invalid intrinsic syntax, expected opening `%`");
                var S = [];
                return pC(y, DM, function(_, I, x, L) {
                    S[S.length] = x ? pC(L, NM, "$1") : I || _
                }), S
            }(n),
            r = t.length > 0 ? t[0] : "",
            i = LM("%" + r + "%", e),
            o = i.name,
            s = i.value,
            a = !1,
            l = i.alias;
        l && (r = l[0], RM(t, CM([0, 1], l)));
        for (var d = 1, c = !0; d < t.length; d += 1) {
            var h = t[d],
                f = Cf(h, 0, 1),
                g = Cf(h, -1);
            if ((f === '"' || f === "'" || f === "`" || g === '"' || g === "'" || g === "`") && f !== g) throw new Ga("property names with quotes must have matching quotes");
            if (h !== "constructor" && c || (a = !0), Hf(Ws, o = "%" + (r += "." + h) + "%")) s = Ws[o];
            else if (s != null) {
                if (!(h in s)) {
                    if (!e) throw new Ya("base intrinsic for " + n + " exists, but the property is not available.");
                    return
                }
                if (zs && d + 1 >= t.length) {
                    var p = zs(s, h);
                    s = (c = !!p) && "get" in p && !("originalValue" in p.get) ? p.get : s[h]
                } else c = Hf(s, h), s = s[h];
                c && !a && (Ws[o] = s)
            }
        }
        return s
    }, "be"),
    eR = {
        exports: {}
    };

function ib() {
    if (fC) return hC;
    fC = 1;
    var n = iu("%Object.defineProperty%", !0) || !1;
    if (n) try {
        n({}, "a", {
            value: 1
        })
    } catch (e) {
        n = !1
    }
    return hC = n
}
u(ib, "Se");
var xf = iu("%Object.getOwnPropertyDescriptor%", !0);
if (xf) try {
    xf([], "length")
} catch (n) {
    xf = null
}
var tR = xf,
    mC = ib(),
    xM = XC,
    za = Yl,
    vC = tR,
    S0 = ib(),
    nR = u(function() {
        return !!S0
    }, "Ae");
nR.hasArrayLengthDefineBug = function() {
    if (!S0) return null;
    try {
        return S0([], "length", {
            value: 1
        }).length !== 1
    } catch (n) {
        return !0
    }
};
var PM = iu,
    yC = u(function(n, e, t) {
        if (!n || typeof n != "object" && typeof n != "function") throw new za("`obj` must be an object or a function`");
        if (typeof e != "string" && typeof e != "symbol") throw new za("`property` must be a string or a symbol`");
        if (arguments.length > 3 && typeof arguments[3] != "boolean" && arguments[3] !== null) throw new za("`nonEnumerable`, if provided, must be a boolean or null");
        if (arguments.length > 4 && typeof arguments[4] != "boolean" && arguments[4] !== null) throw new za("`nonWritable`, if provided, must be a boolean or null");
        if (arguments.length > 5 && typeof arguments[5] != "boolean" && arguments[5] !== null) throw new za("`nonConfigurable`, if provided, must be a boolean or null");
        if (arguments.length > 6 && typeof arguments[6] != "boolean") throw new za("`loose`, if provided, must be a boolean");
        var r = arguments.length > 3 ? arguments[3] : null,
            i = arguments.length > 4 ? arguments[4] : null,
            o = arguments.length > 5 ? arguments[5] : null,
            s = arguments.length > 6 && arguments[6],
            a = !!vC && vC(n, e);
        if (mC) mC(n, e, {
            configurable: o === null && a ? a.configurable : !o,
            enumerable: r === null && a ? a.enumerable : !r,
            value: t,
            writable: i === null && a ? a.writable : !i
        });
        else {
            if (!s && (r || i || o)) throw new xM("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
            n[e] = t
        }
    }, "Oe"),
    kM = nR(),
    bC = tR,
    wC = Yl,
    UM = PM("%Math.floor%"),
    MM = u(function(n, e) {
        if (typeof n != "function") throw new wC("`fn` is not a function");
        if (typeof e != "number" || e < 0 || e > 4294967295 || UM(e) !== e) throw new wC("`length` must be a positive 32-bit integer");
        var t = arguments.length > 2 && !!arguments[2],
            r = !0,
            i = !0;
        if ("length" in n && bC) {
            var o = bC(n, "length");
            o && !o.configurable && (r = !1), o && !o.writable && (i = !1)
        }
        return (r || i || !t) && (kM ? yC(n, "length", e, !0, !0) : yC(n, "length", e)), n
    }, "He");
(function(n) {
    var e = rb,
        t = iu,
        r = MM,
        i = Yl,
        o = t("%Function.prototype.apply%"),
        s = t("%Function.prototype.call%"),
        a = t("%Reflect.apply%", !0) || e.call(s, o),
        l = ib(),
        d = t("%Math.max%");
    n.exports = function(h) {
        if (typeof h != "function") throw new i("a function is required");
        var f = a(e, s, arguments);
        return r(f, 1 + d(0, h.length - (arguments.length - 1)), !0)
    };
    var c = u(function() {
        return a(e, o, arguments)
    }, "u");
    l ? l(n.exports, "apply", {
        value: c
    }) : n.exports.apply = c
})(eR);
var rR = iu,
    iR = eR.exports,
    FM = iR(rR("String.prototype.indexOf")),
    BM = iM(Object.freeze({
        __proto__: null,
        default: {}
    })),
    ob = typeof Map == "function" && Map.prototype,
    d0 = Object.getOwnPropertyDescriptor && ob ? Object.getOwnPropertyDescriptor(Map.prototype, "size") : null,
    Rf = ob && d0 && typeof d0.get == "function" ? d0.get : null,
    TC = ob && Map.prototype.forEach,
    sb = typeof Set == "function" && Set.prototype,
    h0 = Object.getOwnPropertyDescriptor && sb ? Object.getOwnPropertyDescriptor(Set.prototype, "size") : null,
    Of = sb && h0 && typeof h0.get == "function" ? h0.get : null,
    EC = sb && Set.prototype.forEach,
    Dl = typeof WeakMap == "function" && WeakMap.prototype ? WeakMap.prototype.has : null,
    Nl = typeof WeakSet == "function" && WeakSet.prototype ? WeakSet.prototype.has : null,
    _C = typeof WeakRef == "function" && WeakRef.prototype ? WeakRef.prototype.deref : null,
    jM = Boolean.prototype.valueOf,
    $M = Object.prototype.toString,
    VM = Function.prototype.toString,
    HM = String.prototype.match,
    ab = String.prototype.slice,
    qo = String.prototype.replace,
    zM = String.prototype.toUpperCase,
    SC = String.prototype.toLowerCase,
    oR = RegExp.prototype.test,
    IC = Array.prototype.concat,
    Ni = Array.prototype.join,
    WM = Array.prototype.slice,
    AC = Math.floor,
    f0 = typeof BigInt == "function" ? BigInt.prototype.valueOf : null,
    g0 = Object.getOwnPropertySymbols,
    I0 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? Symbol.prototype.toString : null,
    eu = typeof Symbol == "function" && typeof Symbol.iterator == "object",
    Un = typeof Symbol == "function" && Symbol.toStringTag && (typeof Symbol.toStringTag === eu || !0) ? Symbol.toStringTag : null,
    sR = Object.prototype.propertyIsEnumerable,
    CC = (typeof Reflect == "function" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function(n) {
        return n.__proto__
    } : null);

function RC(n, e) {
    if (n === 1 / 0 || n === -1 / 0 || n != n || n && n > -1e3 && n < 1e3 || oR.call(/e/, e)) return e;
    var t = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
    if (typeof n == "number") {
        var r = n < 0 ? -AC(-n) : AC(n);
        if (r !== n) {
            var i = String(r),
                o = ab.call(e, i.length + 1);
            return qo.call(i, t, "$&_") + "." + qo.call(qo.call(o, /([0-9]{3})/g, "$&_"), /_$/, "")
        }
    }
    return qo.call(e, t, "$&_")
}
u(RC, "_t");
var A0 = BM,
    OC = A0.custom,
    DC = uR(OC) ? OC : null;

function aR(n, e, t) {
    var r = (t.quoteStyle || e) === "double" ? '"' : "'";
    return r + n + r
}
u(aR, "Ct");

function qM(n) {
    return qo.call(String(n), /"/g, "&quot;")
}
u(qM, "Et");

function C0(n) {
    return !(zo(n) !== "[object Array]" || Un && typeof n == "object" && Un in n)
}
u(C0, "kt");

function NC(n) {
    return !(zo(n) !== "[object RegExp]" || Un && typeof n == "object" && Un in n)
}
u(NC, "Tt");

function uR(n) {
    if (eu) return n && typeof n == "object" && n instanceof Symbol;
    if (typeof n == "symbol") return !0;
    if (!n || typeof n != "object" || !I0) return !1;
    try {
        return I0.call(n), !0
    } catch (e) {}
    return !1
}
u(uR, "It");
var GM = Object.prototype.hasOwnProperty || function(n) {
    return n in this
};

function Ho(n, e) {
    return GM.call(n, e)
}
u(Ho, "Rt");

function zo(n) {
    return $M.call(n)
}
u(zo, "At");

function LC(n, e) {
    if (n.indexOf) return n.indexOf(e);
    for (var t = 0, r = n.length; t < r; t++)
        if (n[t] === e) return t;
    return -1
}
u(LC, "jt");

function cR(n, e) {
    if (n.length > e.maxStringLength) {
        var t = n.length - e.maxStringLength,
            r = "... " + t + " more character" + (t > 1 ? "s" : "");
        return cR(ab.call(n, 0, e.maxStringLength), e) + r
    }
    return aR(qo.call(qo.call(n, /(['\\])/g, "\\$1"), /[\x00-\x1f]/g, KM), "single", e)
}
u(cR, "Ot");

function KM(n) {
    var e = n.charCodeAt(0),
        t = {
            8: "b",
            9: "t",
            10: "n",
            12: "f",
            13: "r"
        } [e];
    return t ? "\\" + t : "\\x" + (e < 16 ? "0" : "") + zM.call(e.toString(16))
}
u(KM, "$t");

function Ll(n) {
    return "Object(" + n + ")"
}
u(Ll, "Dt");

function p0(n) {
    return n + " { ? }"
}
u(p0, "xt");

function xC(n, e, t, r) {
    return n + " (" + e + ") {" + (r ? R0(t, r) : Ni.call(t, ", ")) + "}"
}
u(xC, "Lt");

function R0(n, e) {
    if (n.length === 0) return "";
    var t = `
` + e.prev + e.base;
    return t + Ni.call(n, "," + t) + `
` + e.prev
}
u(R0, "Ht");

function Df(n, e) {
    var t = C0(n),
        r = [];
    if (t) {
        r.length = n.length;
        for (var i = 0; i < n.length; i++) r[i] = Ho(n, i) ? e(n[i], n) : ""
    }
    var o, s = typeof g0 == "function" ? g0(n) : [];
    if (eu) {
        o = {};
        for (var a = 0; a < s.length; a++) o["$" + s[a]] = s[a]
    }
    for (var l in n) Ho(n, l) && (t && String(Number(l)) === l && l < n.length || eu && o["$" + l] instanceof Symbol || (oR.call(/[^\w$]/, l) ? r.push(e(l, n) + ": " + e(n[l], n)) : r.push(l + ": " + e(n[l], n))));
    if (typeof g0 == "function")
        for (var d = 0; d < s.length; d++) sR.call(n, s[d]) && r.push("[" + e(s[d]) + "]: " + e(n[s[d]], n));
    return r
}
u(Df, "Ut");
var lR = iu,
    ou = u(function(n, e) {
        var t = rR(n, !!e);
        return typeof t == "function" && FM(n, ".prototype.") > -1 ? iR(t) : t
    }, "Wt"),
    JM = u(function n(e, t, r, i) {
        var o = t || {};
        if (Ho(o, "quoteStyle") && o.quoteStyle !== "single" && o.quoteStyle !== "double") throw new TypeError('option "quoteStyle" must be "single" or "double"');
        if (Ho(o, "maxStringLength") && (typeof o.maxStringLength == "number" ? o.maxStringLength < 0 && o.maxStringLength !== 1 / 0 : o.maxStringLength !== null)) throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
        var s = !Ho(o, "customInspect") || o.customInspect;
        if (typeof s != "boolean" && s !== "symbol") throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");
        if (Ho(o, "indent") && o.indent !== null && o.indent !== "	" && !(parseInt(o.indent, 10) === o.indent && o.indent > 0)) throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
        if (Ho(o, "numericSeparator") && typeof o.numericSeparator != "boolean") throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
        var a = o.numericSeparator;
        if (e === void 0) return "undefined";
        if (e === null) return "null";
        if (typeof e == "boolean") return e ? "true" : "false";
        if (typeof e == "string") return cR(e, o);
        if (typeof e == "number") {
            if (e === 0) return 1 / 0 / e > 0 ? "0" : "-0";
            var l = String(e);
            return a ? RC(e, l) : l
        }
        if (typeof e == "bigint") {
            var d = String(e) + "n";
            return a ? RC(e, d) : d
        }
        var c = o.depth === void 0 ? 5 : o.depth;
        if (r === void 0 && (r = 0), r >= c && c > 0 && typeof e == "object") return C0(e) ? "[Array]" : "[Object]";
        var h = function(K, ae) {
            var Z;
            if (K.indent === "	") Z = "	";
            else {
                if (!(typeof K.indent == "number" && K.indent > 0)) return null;
                Z = Ni.call(Array(K.indent + 1), " ")
            }
            return {
                base: Z,
                prev: Ni.call(Array(ae + 1), Z)
            }
        }(o, r);
        if (i === void 0) i = [];
        else if (LC(i, e) >= 0) return "[Circular]";

        function f(K, ae, Z) {
            if (ae && (i = WM.call(i)).push(ae), Z) {
                var ne = {
                    depth: o.depth
                };
                return Ho(o, "quoteStyle") && (ne.quoteStyle = o.quoteStyle), n(K, ne, r + 1, i)
            }
            return n(K, o, r + 1, i)
        }
        if (u(f, "p"), typeof e == "function" && !NC(e)) {
            var g = function(K) {
                    if (K.name) return K.name;
                    var ae = HM.call(VM.call(K), /^function\s*([\w$]+)/);
                    return ae ? ae[1] : null
                }(e),
                p = Df(e, f);
            return "[Function" + (g ? ": " + g : " (anonymous)") + "]" + (p.length > 0 ? " { " + Ni.call(p, ", ") + " }" : "")
        }
        if (uR(e)) {
            var y = eu ? qo.call(String(e), /^(Symbol\(.*\))_[^)]*$/, "$1") : I0.call(e);
            return typeof e != "object" || eu ? y : Ll(y)
        }
        if (function(K) {
                return !K || typeof K != "object" ? !1 : typeof HTMLElement != "undefined" && K instanceof HTMLElement ? !0 : typeof K.nodeName == "string" && typeof K.getAttribute == "function"
            }(e)) {
            for (var b = "<" + SC.call(String(e.nodeName)), E = e.attributes || [], S = 0; S < E.length; S++) b += " " + E[S].name + "=" + aR(qM(E[S].value), "double", o);
            return b += ">", e.childNodes && e.childNodes.length && (b += "..."), b += "</" + SC.call(String(e.nodeName)) + ">"
        }
        if (C0(e)) {
            if (e.length === 0) return "[]";
            var _ = Df(e, f);
            return h && ! function(K) {
                for (var ae = 0; ae < K.length; ae++)
                    if (LC(K[ae], `
`) >= 0) return !1;
                return !0
            }(_) ? "[" + R0(_, h) + "]" : "[ " + Ni.call(_, ", ") + " ]"
        }
        if (function(K) {
                return !(zo(K) !== "[object Error]" || Un && typeof K == "object" && Un in K)
            }(e)) {
            var I = Df(e, f);
            return "cause" in Error.prototype || !("cause" in e) || sR.call(e, "cause") ? I.length === 0 ? "[" + String(e) + "]" : "{ [" + String(e) + "] " + Ni.call(I, ", ") + " }" : "{ [" + String(e) + "] " + Ni.call(IC.call("[cause]: " + f(e.cause), I), ", ") + " }"
        }
        if (typeof e == "object" && s) {
            if (DC && typeof e[DC] == "function" && A0) return A0(e, {
                depth: c - r
            });
            if (s !== "symbol" && typeof e.inspect == "function") return e.inspect()
        }
        if (function(K) {
                if (!Rf || !K || typeof K != "object") return !1;
                try {
                    Rf.call(K);
                    try {
                        Of.call(K)
                    } catch (ae) {
                        return !0
                    }
                    return K instanceof Map
                } catch (ae) {}
                return !1
            }(e)) {
            var x = [];
            return TC && TC.call(e, function(K, ae) {
                x.push(f(ae, e, !0) + " => " + f(K, e))
            }), xC("Map", Rf.call(e), x, h)
        }
        if (function(K) {
                if (!Of || !K || typeof K != "object") return !1;
                try {
                    Of.call(K);
                    try {
                        Rf.call(K)
                    } catch (ae) {
                        return !0
                    }
                    return K instanceof Set
                } catch (ae) {}
                return !1
            }(e)) {
            var L = [];
            return EC && EC.call(e, function(K) {
                L.push(f(K, e))
            }), xC("Set", Of.call(e), L, h)
        }
        if (function(K) {
                if (!Dl || !K || typeof K != "object") return !1;
                try {
                    Dl.call(K, Dl);
                    try {
                        Nl.call(K, Nl)
                    } catch (ae) {
                        return !0
                    }
                    return K instanceof WeakMap
                } catch (ae) {}
                return !1
            }(e)) return p0("WeakMap");
        if (function(K) {
                if (!Nl || !K || typeof K != "object") return !1;
                try {
                    Nl.call(K, Nl);
                    try {
                        Dl.call(K, Dl)
                    } catch (ae) {
                        return !0
                    }
                    return K instanceof WeakSet
                } catch (ae) {}
                return !1
            }(e)) return p0("WeakSet");
        if (function(K) {
                if (!_C || !K || typeof K != "object") return !1;
                try {
                    return _C.call(K), !0
                } catch (ae) {}
                return !1
            }(e)) return p0("WeakRef");
        if (function(K) {
                return !(zo(K) !== "[object Number]" || Un && typeof K == "object" && Un in K)
            }(e)) return Ll(f(Number(e)));
        if (function(K) {
                if (!K || typeof K != "object" || !f0) return !1;
                try {
                    return f0.call(K), !0
                } catch (ae) {}
                return !1
            }(e)) return Ll(f(f0.call(e)));
        if (function(K) {
                return !(zo(K) !== "[object Boolean]" || Un && typeof K == "object" && Un in K)
            }(e)) return Ll(jM.call(e));
        if (function(K) {
                return !(zo(K) !== "[object String]" || Un && typeof K == "object" && Un in K)
            }(e)) return Ll(f(String(e)));
        if (typeof window != "undefined" && e === window) return "{ [object Window] }";
        if (e === nM) return "{ [object globalThis] }";
        if (! function(K) {
                return !(zo(K) !== "[object Date]" || Un && typeof K == "object" && Un in K)
            }(e) && !NC(e)) {
            var U = Df(e, f),
                N = CC ? CC(e) === Object.prototype : e instanceof Object || e.constructor === Object,
                j = e instanceof Object ? "" : "null prototype",
                q = !N && Un && Object(e) === e && Un in e ? ab.call(zo(e), 8, -1) : j ? "Object" : "",
                fe = (N || typeof e.constructor != "function" ? "" : e.constructor.name ? e.constructor.name + " " : "") + (q || j ? "[" + Ni.call(IC.call([], q || [], j || []), ": ") + "] " : "");
            return U.length === 0 ? fe + "{}" : h ? fe + "{" + R0(U, h) + "}" : fe + "{ " + Ni.call(U, ", ") + " }"
        }
        return String(e)
    }, "e"),
    ZM = Yl,
    Nf = lR("%WeakMap%", !0),
    Lf = lR("%Map%", !0),
    YM = ou("WeakMap.prototype.get", !0),
    XM = ou("WeakMap.prototype.set", !0),
    QM = ou("WeakMap.prototype.has", !0),
    eF = ou("Map.prototype.get", !0),
    tF = ou("Map.prototype.set", !0),
    nF = ou("Map.prototype.has", !0),
    m0 = u(function(n, e) {
        for (var t, r = n;
            (t = r.next) !== null; r = t)
            if (t.key === e) return r.next = t.next, t.next = n.next, n.next = t, t
    }, "Xt"),
    rF = String.prototype.replace,
    iF = /%20/g,
    PC = "RFC3986",
    ub = {
        default: PC,
        formatters: {
            RFC1738: u(function(n) {
                return rF.call(n, iF, "+")
            }, "RFC1738"),
            RFC3986: u(function(n) {
                return String(n)
            }, "RFC3986")
        },
        RFC1738: "RFC1738",
        RFC3986: PC
    },
    oF = ub,
    v0 = Object.prototype.hasOwnProperty,
    $s = Array.isArray,
    Di = function() {
        for (var n = [], e = 0; e < 256; ++e) n.push("%" + ((e < 16 ? "0" : "") + e.toString(16)).toUpperCase());
        return n
    }(),
    kC = u(function(n, e) {
        for (var t = e && e.plainObjects ? Object.create(null) : {}, r = 0; r < n.length; ++r) n[r] !== void 0 && (t[r] = n[r]);
        return t
    }, "so"),
    y0 = 1024,
    dR = {
        arrayToObject: kC,
        assign: u(function(n, e) {
            return Object.keys(e).reduce(function(t, r) {
                return t[r] = e[r], t
            }, n)
        }, "assign"),
        combine: u(function(n, e) {
            return [].concat(n, e)
        }, "combine"),
        compact: u(function(n) {
            for (var e = [{
                    obj: {
                        o: n
                    },
                    prop: "o"
                }], t = [], r = 0; r < e.length; ++r)
                for (var i = e[r], o = i.obj[i.prop], s = Object.keys(o), a = 0; a < s.length; ++a) {
                    var l = s[a],
                        d = o[l];
                    typeof d == "object" && d !== null && t.indexOf(d) === -1 && (e.push({
                        obj: o,
                        prop: l
                    }), t.push(d))
                }
            return function(c) {
                for (; c.length > 1;) {
                    var h = c.pop(),
                        f = h.obj[h.prop];
                    if ($s(f)) {
                        for (var g = [], p = 0; p < f.length; ++p) f[p] !== void 0 && g.push(f[p]);
                        h.obj[h.prop] = g
                    }
                }
            }(e), n
        }, "compact"),
        decode: u(function(n, e, t) {
            var r = n.replace(/\+/g, " ");
            if (t === "iso-8859-1") return r.replace(/%[0-9a-f]{2}/gi, unescape);
            try {
                return decodeURIComponent(r)
            } catch (i) {
                return r
            }
        }, "decode"),
        encode: u(function(n, e, t, r, i) {
            if (n.length === 0) return n;
            var o = n;
            if (typeof n == "symbol" ? o = Symbol.prototype.toString.call(n) : typeof n != "string" && (o = String(n)), t === "iso-8859-1") return escape(o).replace(/%u[0-9a-f]{4}/gi, function(f) {
                return "%26%23" + parseInt(f.slice(2), 16) + "%3B"
            });
            for (var s = "", a = 0; a < o.length; a += y0) {
                for (var l = o.length >= y0 ? o.slice(a, a + y0) : o, d = [], c = 0; c < l.length; ++c) {
                    var h = l.charCodeAt(c);
                    h === 45 || h === 46 || h === 95 || h === 126 || h >= 48 && h <= 57 || h >= 65 && h <= 90 || h >= 97 && h <= 122 || i === oF.RFC1738 && (h === 40 || h === 41) ? d[d.length] = l.charAt(c) : h < 128 ? d[d.length] = Di[h] : h < 2048 ? d[d.length] = Di[192 | h >> 6] + Di[128 | 63 & h] : h < 55296 || h >= 57344 ? d[d.length] = Di[224 | h >> 12] + Di[128 | h >> 6 & 63] + Di[128 | 63 & h] : (c += 1, h = 65536 + ((1023 & h) << 10 | 1023 & l.charCodeAt(c)), d[d.length] = Di[240 | h >> 18] + Di[128 | h >> 12 & 63] + Di[128 | h >> 6 & 63] + Di[128 | 63 & h])
                }
                s += d.join("")
            }
            return s
        }, "encode"),
        isBuffer: u(function(n) {
            return !(!n || typeof n != "object") && !!(n.constructor && n.constructor.isBuffer && n.constructor.isBuffer(n))
        }, "isBuffer"),
        isRegExp: u(function(n) {
            return Object.prototype.toString.call(n) === "[object RegExp]"
        }, "isRegExp"),
        maybeMap: u(function(n, e) {
            if ($s(n)) {
                for (var t = [], r = 0; r < n.length; r += 1) t.push(e(n[r]));
                return t
            }
            return e(n)
        }, "maybeMap"),
        merge: u(function n(e, t, r) {
            if (!t) return e;
            if (typeof t != "object") {
                if ($s(e)) e.push(t);
                else {
                    if (!e || typeof e != "object") return [e, t];
                    (r && (r.plainObjects || r.allowPrototypes) || !v0.call(Object.prototype, t)) && (e[t] = !0)
                }
                return e
            }
            if (!e || typeof e != "object") return [e].concat(t);
            var i = e;
            return $s(e) && !$s(t) && (i = kC(e, r)), $s(e) && $s(t) ? (t.forEach(function(o, s) {
                if (v0.call(e, s)) {
                    var a = e[s];
                    a && typeof a == "object" && o && typeof o == "object" ? e[s] = n(a, o, r) : e.push(o)
                } else e[s] = o
            }), e) : Object.keys(t).reduce(function(o, s) {
                var a = t[s];
                return v0.call(o, s) ? o[s] = n(o[s], a, r) : o[s] = a, o
            }, i)
        }, "e")
    },
    hR = u(function() {
        var n, e, t, r = {
            assert: u(function(i) {
                if (!r.has(i)) throw new ZM("Side channel does not contain " + JM(i))
            }, "assert"),
            get: u(function(i) {
                if (Nf && i && (typeof i == "object" || typeof i == "function")) {
                    if (n) return YM(n, i)
                } else if (Lf) {
                    if (e) return eF(e, i)
                } else if (t) return function(o, s) {
                    var a = m0(o, s);
                    return a && a.value
                }(t, i)
            }, "get"),
            has: u(function(i) {
                if (Nf && i && (typeof i == "object" || typeof i == "function")) {
                    if (n) return QM(n, i)
                } else if (Lf) {
                    if (e) return nF(e, i)
                } else if (t) return function(o, s) {
                    return !!m0(o, s)
                }(t, i);
                return !1
            }, "has"),
            set: u(function(i, o) {
                Nf && i && (typeof i == "object" || typeof i == "function") ? (n || (n = new Nf), XM(n, i, o)) : Lf ? (e || (e = new Lf), tF(e, i, o)) : (t || (t = {
                    key: {},
                    next: null
                }), function(s, a, l) {
                    var d = m0(s, a);
                    d ? d.value = l : s.next = {
                        key: a,
                        next: s.next,
                        value: l
                    }
                }(t, i, o))
            }, "set")
        };
        return r
    }, "lo"),
    Pf = dR,
    Fl = ub,
    sF = Object.prototype.hasOwnProperty,
    UC = {
        brackets: u(function(n) {
            return n + "[]"
        }, "brackets"),
        comma: "comma",
        indices: u(function(n, e) {
            return n + "[" + e + "]"
        }, "indices"),
        repeat: u(function(n) {
            return n
        }, "repeat")
    },
    Li = Array.isArray,
    aF = Array.prototype.push,
    fR = u(function(n, e) {
        aF.apply(n, Li(e) ? e : [e])
    }, "mo"),
    uF = Date.prototype.toISOString,
    MC = Fl.default,
    sn = {
        addQueryPrefix: !1,
        allowDots: !1,
        allowEmptyArrays: !1,
        arrayFormat: "indices",
        charset: "utf-8",
        charsetSentinel: !1,
        delimiter: "&",
        encode: !0,
        encodeDotInKeys: !1,
        encoder: Pf.encode,
        encodeValuesOnly: !1,
        format: MC,
        formatter: Fl.formatters[MC],
        indices: !1,
        serializeDate: u(function(n) {
            return uF.call(n)
        }, "serializeDate"),
        skipNulls: !1,
        strictNullHandling: !1
    },
    b0 = {},
    cF = u(function n(e, t, r, i, o, s, a, l, d, c, h, f, g, p, y, b, E, S) {
        for (var _, I = e, x = S, L = 0, U = !1;
            (x = x.get(b0)) !== void 0 && !U;) {
            var N = x.get(e);
            if (L += 1, N !== void 0) {
                if (N === L) throw new RangeError("Cyclic object value");
                U = !0
            }
            x.get(b0) === void 0 && (L = 0)
        }
        if (typeof c == "function" ? I = c(t, I) : I instanceof Date ? I = g(I) : r === "comma" && Li(I) && (I = Pf.maybeMap(I, function(De) {
                return De instanceof Date ? g(De) : De
            })), I === null) {
            if (s) return d && !b ? d(t, sn.encoder, E, "key", p) : t;
            I = ""
        }
        if (typeof(_ = I) == "string" || typeof _ == "number" || typeof _ == "boolean" || typeof _ == "symbol" || typeof _ == "bigint" || Pf.isBuffer(I)) return d ? [y(b ? t : d(t, sn.encoder, E, "key", p)) + "=" + y(d(I, sn.encoder, E, "value", p))] : [y(t) + "=" + y(String(I))];
        var j, q = [];
        if (I === void 0) return q;
        if (r === "comma" && Li(I)) b && d && (I = Pf.maybeMap(I, d)), j = [{
            value: I.length > 0 ? I.join(",") || null : void 0
        }];
        else if (Li(c)) j = c;
        else {
            var fe = Object.keys(I);
            j = h ? fe.sort(h) : fe
        }
        var K = l ? t.replace(/\./g, "%2E") : t,
            ae = i && Li(I) && I.length === 1 ? K + "[]" : K;
        if (o && Li(I) && I.length === 0) return ae + "[]";
        for (var Z = 0; Z < j.length; ++Z) {
            var ne = j[Z],
                ue = typeof ne == "object" && ne.value !== void 0 ? ne.value : I[ne];
            if (!a || ue !== null) {
                var ve = f && l ? ne.replace(/\./g, "%2E") : ne,
                    Ee = Li(I) ? typeof r == "function" ? r(ae, ve) : ae : ae + (f ? "." + ve : "[" + ve + "]");
                S.set(e, L);
                var be = hR();
                be.set(b0, S), fR(q, n(ue, Ee, r, i, o, s, a, l, r === "comma" && b && Li(I) ? null : d, c, h, f, g, p, y, b, E, be))
            }
        }
        return q
    }, "e"),
    qa = dR,
    O0 = Object.prototype.hasOwnProperty,
    lF = Array.isArray,
    Jt = {
        allowDots: !1,
        allowEmptyArrays: !1,
        allowPrototypes: !1,
        allowSparse: !1,
        arrayLimit: 20,
        charset: "utf-8",
        charsetSentinel: !1,
        comma: !1,
        decodeDotInKeys: !1,
        decoder: qa.decode,
        delimiter: "&",
        depth: 5,
        duplicates: "combine",
        ignoreQueryPrefix: !1,
        interpretNumericEntities: !1,
        parameterLimit: 1e3,
        parseArrays: !0,
        plainObjects: !1,
        strictNullHandling: !1
    },
    dF = u(function(n) {
        return n.replace(/&#(\d+);/g, function(e, t) {
            return String.fromCharCode(parseInt(t, 10))
        })
    }, "Io"),
    gR = u(function(n, e) {
        return n && typeof n == "string" && e.comma && n.indexOf(",") > -1 ? n.split(",") : n
    }, "Po"),
    hF = u(function(n, e, t, r) {
        if (n) {
            var i = t.allowDots ? n.replace(/\.([^.[]+)/g, "[$1]") : n,
                o = /(\[[^[\]]*])/g,
                s = t.depth > 0 && /(\[[^[\]]*])/.exec(i),
                a = s ? i.slice(0, s.index) : i,
                l = [];
            if (a) {
                if (!t.plainObjects && O0.call(Object.prototype, a) && !t.allowPrototypes) return;
                l.push(a)
            }
            for (var d = 0; t.depth > 0 && (s = o.exec(i)) !== null && d < t.depth;) {
                if (d += 1, !t.plainObjects && O0.call(Object.prototype, s[1].slice(1, -1)) && !t.allowPrototypes) return;
                l.push(s[1])
            }
            return s && l.push("[" + i.slice(s.index) + "]"),
                function(c, h, f, g) {
                    for (var p = g ? h : gR(h, f), y = c.length - 1; y >= 0; --y) {
                        var b, E = c[y];
                        if (E === "[]" && f.parseArrays) b = f.allowEmptyArrays && (p === "" || f.strictNullHandling && p === null) ? [] : [].concat(p);
                        else {
                            b = f.plainObjects ? Object.create(null) : {};
                            var S = E.charAt(0) === "[" && E.charAt(E.length - 1) === "]" ? E.slice(1, -1) : E,
                                _ = f.decodeDotInKeys ? S.replace(/%2E/g, ".") : S,
                                I = parseInt(_, 10);
                            f.parseArrays || _ !== "" ? !isNaN(I) && E !== _ && String(I) === _ && I >= 0 && f.parseArrays && I <= f.arrayLimit ? (b = [])[I] = p : _ !== "__proto__" && (b[_] = p) : b = {
                                0: p
                            }
                        }
                        p = b
                    }
                    return p
                }(l, e, t, r)
        }
    }, "Ro"),
    fF = u(function(n, e) {
        var t, r = n,
            i = function(g) {
                if (!g) return sn;
                if (g.allowEmptyArrays !== void 0 && typeof g.allowEmptyArrays != "boolean") throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
                if (g.encodeDotInKeys !== void 0 && typeof g.encodeDotInKeys != "boolean") throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");
                if (g.encoder !== null && g.encoder !== void 0 && typeof g.encoder != "function") throw new TypeError("Encoder has to be a function.");
                var p = g.charset || sn.charset;
                if (g.charset !== void 0 && g.charset !== "utf-8" && g.charset !== "iso-8859-1") throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
                var y = Fl.default;
                if (g.format !== void 0) {
                    if (!sF.call(Fl.formatters, g.format)) throw new TypeError("Unknown format option provided.");
                    y = g.format
                }
                var b, E = Fl.formatters[y],
                    S = sn.filter;
                if ((typeof g.filter == "function" || Li(g.filter)) && (S = g.filter), b = g.arrayFormat in UC ? g.arrayFormat : "indices" in g ? g.indices ? "indices" : "repeat" : sn.arrayFormat, "commaRoundTrip" in g && typeof g.commaRoundTrip != "boolean") throw new TypeError("`commaRoundTrip` must be a boolean, or absent");
                var _ = g.allowDots === void 0 ? g.encodeDotInKeys === !0 || sn.allowDots : !!g.allowDots;
                return {
                    addQueryPrefix: typeof g.addQueryPrefix == "boolean" ? g.addQueryPrefix : sn.addQueryPrefix,
                    allowDots: _,
                    allowEmptyArrays: typeof g.allowEmptyArrays == "boolean" ? !!g.allowEmptyArrays : sn.allowEmptyArrays,
                    arrayFormat: b,
                    charset: p,
                    charsetSentinel: typeof g.charsetSentinel == "boolean" ? g.charsetSentinel : sn.charsetSentinel,
                    commaRoundTrip: g.commaRoundTrip,
                    delimiter: g.delimiter === void 0 ? sn.delimiter : g.delimiter,
                    encode: typeof g.encode == "boolean" ? g.encode : sn.encode,
                    encodeDotInKeys: typeof g.encodeDotInKeys == "boolean" ? g.encodeDotInKeys : sn.encodeDotInKeys,
                    encoder: typeof g.encoder == "function" ? g.encoder : sn.encoder,
                    encodeValuesOnly: typeof g.encodeValuesOnly == "boolean" ? g.encodeValuesOnly : sn.encodeValuesOnly,
                    filter: S,
                    format: y,
                    formatter: E,
                    serializeDate: typeof g.serializeDate == "function" ? g.serializeDate : sn.serializeDate,
                    skipNulls: typeof g.skipNulls == "boolean" ? g.skipNulls : sn.skipNulls,
                    sort: typeof g.sort == "function" ? g.sort : null,
                    strictNullHandling: typeof g.strictNullHandling == "boolean" ? g.strictNullHandling : sn.strictNullHandling
                }
            }(e);
        typeof i.filter == "function" ? r = (0, i.filter)("", r) : Li(i.filter) && (t = i.filter);
        var o = [];
        if (typeof r != "object" || r === null) return "";
        var s = UC[i.arrayFormat],
            a = s === "comma" && i.commaRoundTrip;
        t || (t = Object.keys(r)), i.sort && t.sort(i.sort);
        for (var l = hR(), d = 0; d < t.length; ++d) {
            var c = t[d];
            i.skipNulls && r[c] === null || fR(o, cF(r[c], c, s, a, i.allowEmptyArrays, i.strictNullHandling, i.skipNulls, i.encodeDotInKeys, i.encode ? i.encoder : null, i.filter, i.sort, i.allowDots, i.serializeDate, i.format, i.formatter, i.encodeValuesOnly, i.charset, l))
        }
        var h = o.join(i.delimiter),
            f = i.addQueryPrefix === !0 ? "?" : "";
        return i.charsetSentinel && (i.charset === "iso-8859-1" ? f += "utf8=%26%2310003%3B&" : f += "utf8=%E2%9C%93&"), h.length > 0 ? f + h : ""
    }, "Ao"),
    gF = u(function(n, e) {
        var t = function(d) {
            if (!d) return Jt;
            if (d.allowEmptyArrays !== void 0 && typeof d.allowEmptyArrays != "boolean") throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
            if (d.decodeDotInKeys !== void 0 && typeof d.decodeDotInKeys != "boolean") throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");
            if (d.decoder !== null && d.decoder !== void 0 && typeof d.decoder != "function") throw new TypeError("Decoder has to be a function.");
            if (d.charset !== void 0 && d.charset !== "utf-8" && d.charset !== "iso-8859-1") throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
            var c = d.charset === void 0 ? Jt.charset : d.charset,
                h = d.duplicates === void 0 ? Jt.duplicates : d.duplicates;
            if (h !== "combine" && h !== "first" && h !== "last") throw new TypeError("The duplicates option must be either combine, first, or last");
            return {
                allowDots: d.allowDots === void 0 ? d.decodeDotInKeys === !0 || Jt.allowDots : !!d.allowDots,
                allowEmptyArrays: typeof d.allowEmptyArrays == "boolean" ? !!d.allowEmptyArrays : Jt.allowEmptyArrays,
                allowPrototypes: typeof d.allowPrototypes == "boolean" ? d.allowPrototypes : Jt.allowPrototypes,
                allowSparse: typeof d.allowSparse == "boolean" ? d.allowSparse : Jt.allowSparse,
                arrayLimit: typeof d.arrayLimit == "number" ? d.arrayLimit : Jt.arrayLimit,
                charset: c,
                charsetSentinel: typeof d.charsetSentinel == "boolean" ? d.charsetSentinel : Jt.charsetSentinel,
                comma: typeof d.comma == "boolean" ? d.comma : Jt.comma,
                decodeDotInKeys: typeof d.decodeDotInKeys == "boolean" ? d.decodeDotInKeys : Jt.decodeDotInKeys,
                decoder: typeof d.decoder == "function" ? d.decoder : Jt.decoder,
                delimiter: typeof d.delimiter == "string" || qa.isRegExp(d.delimiter) ? d.delimiter : Jt.delimiter,
                depth: typeof d.depth == "number" || d.depth === !1 ? +d.depth : Jt.depth,
                duplicates: h,
                ignoreQueryPrefix: d.ignoreQueryPrefix === !0,
                interpretNumericEntities: typeof d.interpretNumericEntities == "boolean" ? d.interpretNumericEntities : Jt.interpretNumericEntities,
                parameterLimit: typeof d.parameterLimit == "number" ? d.parameterLimit : Jt.parameterLimit,
                parseArrays: d.parseArrays !== !1,
                plainObjects: typeof d.plainObjects == "boolean" ? d.plainObjects : Jt.plainObjects,
                strictNullHandling: typeof d.strictNullHandling == "boolean" ? d.strictNullHandling : Jt.strictNullHandling
            }
        }(e);
        if (n === "" || n == null) return t.plainObjects ? Object.create(null) : {};
        for (var r = typeof n == "string" ? function(d, c) {
                var h = {
                        __proto__: null
                    },
                    f = c.ignoreQueryPrefix ? d.replace(/^\?/, "") : d;
                f = f.replace(/%5B/gi, "[").replace(/%5D/gi, "]");
                var g, p = c.parameterLimit === 1 / 0 ? void 0 : c.parameterLimit,
                    y = f.split(c.delimiter, p),
                    b = -1,
                    E = c.charset;
                if (c.charsetSentinel)
                    for (g = 0; g < y.length; ++g) y[g].indexOf("utf8=") === 0 && (y[g] === "utf8=%E2%9C%93" ? E = "utf-8" : y[g] === "utf8=%26%2310003%3B" && (E = "iso-8859-1"), b = g, g = y.length);
                for (g = 0; g < y.length; ++g)
                    if (g !== b) {
                        var S, _, I = y[g],
                            x = I.indexOf("]="),
                            L = x === -1 ? I.indexOf("=") : x + 1;
                        L === -1 ? (S = c.decoder(I, Jt.decoder, E, "key"), _ = c.strictNullHandling ? null : "") : (S = c.decoder(I.slice(0, L), Jt.decoder, E, "key"), _ = qa.maybeMap(gR(I.slice(L + 1), c), function(N) {
                            return c.decoder(N, Jt.decoder, E, "value")
                        })), _ && c.interpretNumericEntities && E === "iso-8859-1" && (_ = dF(_)), I.indexOf("[]=") > -1 && (_ = lF(_) ? [_] : _);
                        var U = O0.call(h, S);
                        U && c.duplicates === "combine" ? h[S] = qa.combine(h[S], _) : U && c.duplicates !== "last" || (h[S] = _)
                    } return h
            }(n, t) : n, i = t.plainObjects ? Object.create(null) : {}, o = Object.keys(r), s = 0; s < o.length; ++s) {
            var a = o[s],
                l = hF(a, r[a], t, typeof n == "string");
            i = qa.merge(i, l, t)
        }
        return t.allowSparse === !0 ? i : qa.compact(i)
    }, "jo"),
    pR = rM({
        formats: ub,
        parse: gF,
        stringify: fF
    }),
    mR = u(n => {
        let {
            payload: e,
            headers: t
        } = n;
        return !(!e || t != null && t["content-type"])
    }, "$o"),
    cb = u(n => {
        let {
            payload: e,
            contentType: t
        } = n;
        return t === _n.FormUrlEncoded ? pR.stringify(e) : t === _n.Json ? JSON.stringify(e) : e
    }, "Do"),
    lb = u(n => {
        let {
            responseHeaders: e,
            localeHeader: t,
            currentLocale: r,
            setLocale: i
        } = n, o = t.toLowerCase(), s = Object.keys(e).find(l => l.toLowerCase() === o), a = s ? e[s] : void 0;
        a && r && a !== r && (i == null || i(a))
    }, "xo"),
    D0 = u(n => n == null ? void 0 : n.replace("outsystems://", "https://"), "Lo"),
    zf = u((n, e, t) => {
        var r;
        let i;
        try {
            n && (i = JSON.parse(n))
        } catch (o) {
            (r = e == null ? void 0 : e.clientError) === null || r === void 0 || r.call(e, {
                error: o,
                category: t,
                clientMessage: `Could not parse response: ${n}`,
                internalMessage: "Could not parse response."
            })
        }
        return i
    }, "Ho"),
    pF = u((n, e) => {
        if (!e) return n;
        let t = pR.stringify(e);
        if (t) {
            let r = n.includes("?") ? "&" : "?";
            return `${n}${r}${t}`
        }
        return n
    }, "Uo");

function mF() {
    if (typeof window != "undefined") return window;
    if (typeof global != "undefined") return global;
    if (typeof globalThis != "undefined") return globalThis;
    if (typeof self != "undefined") return self;
    throw new Error("unable to locate global object")
}
u(mF, "Mo");

function Xa(n, e, t) {
    return Ge(this, void 0, void 0, function*() {
        return n != null && n.startActiveClientSpan ? n.startActiveClientSpan(e, r => Ge(this, void 0, void 0, function*() {
            try {
                return yield t()
            } finally {
                r == null || r.end()
            }
        })) : t()
    })
}
u(Xa, "Wo");
var FC = "os-auth-retry",
    vR = u(n => {
        let {
            fetchClient: e,
            getToken: t,
            retryOnUnauthorizedResponse: r = !0
        } = n, i = e;
        return t && (i = u((o, s) => Ge(void 0, void 0, void 0, function*() {
            yield vF({
                config: s,
                getToken: t
            });
            let a = yield e(o, s);
            return r && (a.ok || (a = yield yF({
                response: a,
                fetchClient: e,
                config: Object.assign({}, s),
                getToken: t
            }))), a
        }), "n")), i
    }, "Fo"),
    vF = u(n => Ge(void 0, [n], void 0, function(e) {
        let {
            config: t = {},
            getToken: r
        } = e;
        return function*() {
            var i;
            let o = yield r();
            return o && (t.headers = Object.assign(Object.assign({}, (i = t.headers) !== null && i !== void 0 ? i : {}), {
                Authorization: o
            })), t
        }()
    }), "qo"),
    yF = u(n => Ge(void 0, [n], void 0, function(e) {
        let {
            response: t,
            fetchClient: r,
            config: i = {},
            getToken: o
        } = e;
        return function*() {
            var s;
            if (t.status !== 401 || t.headers.get(FC) === "true") return t;
            let a = yield o(!0);
            return a ? (i.headers = Object.assign(Object.assign({}, (s = i.headers) !== null && s !== void 0 ? s : {}), {
                Authorization: a,
                [FC]: "true"
            }), r(t.url, i)) : t
        }()
    }), "Bo"),
    BC, Zt, Bl, Wf, qf, jl, $l, Vl, Gf, yr, N0, w0, L0, x0, T0, Kf, P0, jC, k0, $C, Wo = "FetchHttpClient",
    VC = u(n => Ge(void 0, void 0, void 0, function*() {
        let e = yield n.text();
        return e === "" ? void 0 : JSON.parse(e)
    }), "pr");
(BC = AbortSignal.timeout) !== null && BC !== void 0 || (AbortSignal.timeout = function(n) {
    let e = new AbortController;
    return setTimeout(() => e.abort(), n), e.signal
});
var Qa, io = (Qa = class {
    constructor() {
        let {
            baseUrl: e = "",
            headers: t = {},
            localeHeader: r = "",
            getLocale: i,
            setLocale: o,
            fetchClient: s = mF().fetch,
            logger: a,
            loadTrace: l,
            getToken: d = u(() => Promise.resolve(void 0), "l")
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        Zt.add(this), Bl.set(this, void 0), Wf.set(this, void 0), qf.set(this, void 0), jl.set(this, void 0), $l.set(this, void 0), Vl.set(this, void 0), Gf.set(this, void 0), yr.set(this, void 0), Ye(this, Wf, e, "f"), Ye(this, qf, t, "f"), Ye(this, jl, r, "f"), Ye(this, $l, i, "f"), Ye(this, Vl, o, "f"), Ye(this, yr, a, "f"), Ye(this, Gf, l, "f"), Ye(this, Bl, this.addAuthInterceptors(s, d), "f")
    }
    addAuthInterceptors(e, t) {
        return vR({
            fetchClient: e,
            getToken: t
        })
    }
    post(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                payload: o,
                params: s,
                headers: a,
                contentType: l = _n.FormUrlEncoded,
                timeout: d,
                timeoutHandler: c,
                useLocaleInfo: h = !1,
                baseURL: f,
                responseHandler: g
            } = t;
            return function*() {
                var p, y, b, E, S, _, I;
                (y = (p = X(r, yr, "f")) === null || p === void 0 ? void 0 : p.setActiveSpanAsNonAggregable) === null || y === void 0 || y.call(p);
                let x = h ? (b = X(r, $l, "f")) === null || b === void 0 ? void 0 : b.call(r) : void 0,
                    [L, U] = X(r, Zt, "m", N0).call(r, i, f, s);
                try {
                    (S = (E = X(r, yr, "f")) === null || E === void 0 ? void 0 : E.debug) === null || S === void 0 || S.call(E, {
                        category: Wo,
                        message: `POST ${U}`
                    });
                    let N = ((ae, Z) => {
                            let ne = Z == null ? void 0 : Z["content-type"];
                            return ne ? ne.toLowerCase().includes(_n.FormUrlEncoded.toLowerCase()) ? _n.FormUrlEncoded : ne.toLowerCase().includes(_n.Json.toLowerCase()) ? _n.Json : void 0 : ae
                        })(l, a),
                        j = {
                            body: o ? cb({
                                payload: o,
                                contentType: N
                            }) : void 0,
                            headers: yield X(r, Zt, "m", k0).call(r, a, x, mR({
                                payload: o,
                                headers: a
                            }) ? l : void 0),
                            method: "POST",
                            signal: AbortSignal.timeout(d ? 1e3 * d : 1e4)
                        },
                        q = u(() => Ge(r, void 0, void 0, function*() {
                            return X(this, Bl, "f").call(this, L, j)
                        }), "p"),
                        fe = yield Xa(X(r, yr, "f"), "POST", q);
                    if (!fe.ok) throw yield X(r, Zt, "m", P0).call(r, fe, i, "POST", c);
                    let K = yield VC(fe);
                    if (X(r, Zt, "m", x0).call(r, fe, h, x), typeof g == "function") try {
                        let ae = {};
                        fe.headers.forEach((Z, ne) => ae[ne] = Z), g({
                            data: K,
                            responseHeaders: ae
                        })
                    } catch (ae) {
                        (I = (_ = X(r, yr, "f")) === null || _ === void 0 ? void 0 : _.error) === null || I === void 0 || I.call(_, {
                            category: Wo,
                            message: `Handler Error: POST ${U}`,
                            errorCode: it.Communication_Default,
                            error: ae
                        })
                    }
                    return K
                } catch (N) {
                    throw N instanceof wr ? N : yield X(r, Zt, "m", Kf).call(r, N, i, "POST", c)
                }
            }()
        })
    }
    get(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                params: o,
                headers: s,
                useLocaleInfo: a,
                timeout: l,
                timeoutHandler: d,
                responseType: c = "json",
                baseURL: h
            } = t;
            return function*() {
                let f = yield X(r, Zt, "m", L0).call(r, {
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: l,
                    timeoutHandler: d,
                    baseURL: h
                });
                try {
                    return c === "blob" ? yield f.blob(): c === "json" ? yield VC(f): Promise.resolve()
                } catch (g) {
                    throw g instanceof wr ? g : yield X(r, Zt, "m", Kf).call(r, g, i, "GET", d)
                }
            }()
        })
    }
    getResponseUrl(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                params: o,
                headers: s,
                useLocaleInfo: a,
                timeout: l,
                timeoutHandler: d,
                baseURL: c
            } = t;
            return function*() {
                return (yield X(r, Zt, "m", L0).call(r, {
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: l,
                    timeoutHandler: d,
                    baseURL: c
                })).url
            }()
        })
    }
}, u(Qa, "dr"), Qa);
Bl = new WeakMap, Wf = new WeakMap, qf = new WeakMap, jl = new WeakMap, $l = new WeakMap, Vl = new WeakMap, Gf = new WeakMap, yr = new WeakMap, Zt = new WeakSet, N0 = u(function(n, e, t) {
    var r;
    let i = (r = D0(n)) !== null && r !== void 0 ? r : "",
        o = D0(e || X(this, Wf, "f")),
        s = o && !n.includes("://") ? `${o.replace(/\/$/,"")}/${n.replace(/^\/+/,"")}` : i;
    return [pF(s, t), i]
}, "tr"), w0 = u(function(n, e) {
    return Ge(this, void 0, void 0, function*() {
        n === Va.Timeout && e && (yield e())
    })
}, "or"), L0 = u(function(n) {
    return Ge(this, arguments, void 0, function(e) {
        var t = this;
        let {
            url: r,
            params: i,
            headers: o,
            useLocaleInfo: s = !1,
            timeout: a,
            timeoutHandler: l,
            baseURL: d
        } = e;
        return function*() {
            var c, h, f, g, p;
            (h = (c = X(t, yr, "f")) === null || c === void 0 ? void 0 : c.setActiveSpanAsNonAggregable) === null || h === void 0 || h.call(c);
            let y = s ? (f = X(t, $l, "f")) === null || f === void 0 ? void 0 : f.call(t) : void 0,
                [b, E] = X(t, Zt, "m", N0).call(t, r, d, i);
            try {
                (p = (g = X(t, yr, "f")) === null || g === void 0 ? void 0 : g.debug) === null || p === void 0 || p.call(g, {
                    category: Wo,
                    message: `GET ${E}`
                });
                let S = {
                        headers: yield X(t, Zt, "m", k0).call(t, o, y),
                        signal: AbortSignal.timeout(a ? 1e3 * a : 1e4)
                    },
                    _ = u(() => Ge(t, void 0, void 0, function*() {
                        return X(this, Bl, "f").call(this, b, S)
                    }), "n"),
                    I = yield Xa(X(t, yr, "f"), "GET", _);
                if (!I.ok) throw yield X(t, Zt, "m", P0).call(t, I, r, "GET", l);
                return X(t, Zt, "m", x0).call(t, I, s, y), I
            } catch (S) {
                throw S instanceof wr ? S : yield X(t, Zt, "m", Kf).call(t, S, r, "GET", l)
            }
        }()
    })
}, "rr"), x0 = u(function(n, e, t) {
    var r;
    e && X(this, Vl, "f") && (n != null && n.headers) && lb({
        responseHeaders: (r = n.headers.entries(), [...r].reduce((i, o) => {
            let [s, a] = o;
            return i[s] = a, i
        }, {})),
        localeHeader: X(this, jl, "f"),
        currentLocale: t,
        setLocale: X(this, Vl, "f")
    })
}, "nr"), T0 = u(function(n, e) {
    return (n == null ? void 0 : n.name) === "TimeoutError" || (n == null ? void 0 : n.name) === "AbortError" || e === 408 ? Va.Timeout : e === 401 ? Va.Unauthorized : Va.Unknown
}, "ir"), Kf = u(function(n, e, t, r) {
    return Ge(this, void 0, void 0, function*() {
        var i, o;
        let s = X(this, Zt, "m", T0).call(this, n);
        yield X(this, Zt, "m", w0).call(this, s, r);
        let a = it.Communication_Default;
        return s === Va.Timeout ? a = it.Communication_Timeout : s === Va.Unauthorized && (a = it.Communication_Unauthorized), (o = (i = X(this, yr, "f")) === null || i === void 0 ? void 0 : i.error) === null || o === void 0 || o.call(i, {
            category: Wo,
            message: `${t} ${e} - ${n.message}`,
            errorCode: a,
            error: n
        }), new wr(`${t} ${e} - ${n.message}`, a, void 0, void 0, Wo)
    })
}, "sr"), P0 = u(function(n, e, t, r) {
    return Ge(this, void 0, void 0, function*() {
        var i, o, s;
        let a = X(this, Zt, "m", T0).call(this, void 0, n.status);
        yield X(this, Zt, "m", w0).call(this, a, r);
        let l = hg((i = n.status) !== null && i !== void 0 ? i : ""),
            d = yield X(this, Zt, "m", jC).call(this, n);
        return (s = (o = X(this, yr, "f")) === null || o === void 0 ? void 0 : o.error) === null || s === void 0 || s.call(o, {
            category: Wo,
            message: `${t} ${e} - ${n.status} ${n.statusText}`,
            errorCode: l,
            error: new Error(`Fetch ${t} Error - ${n.status} ${n.statusText}`)
        }), new wr(`${t} ${e} - ${n.status} ${n.statusText}`, l, n.status, d, Wo)
    })
}, "ar"), jC = u(function(n) {
    return Ge(this, void 0, void 0, function*() {
        try {
            let e = /application\/.*json/i,
                t = n.headers.get("content-type");
            return t && e.test(t) ? yield n.json(): yield n.text()
        } catch (e) {
            return
        }
    })
}, "cr"), k0 = u(function(n, e) {
    let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
    var r;
    let i = Object.assign(Object.assign(Object.assign(Object.assign({}, X(this, qf, "f")), n), e ? {
        [X(this, jl, "f")]: e
    } : {}), n != null && n["content-type"] || t ? {
        "content-type": (r = n == null ? void 0 : n["content-type"]) !== null && r !== void 0 ? r : t
    } : {});
    return t && (i["content-type"] = t), X(this, Zt, "m", $C).call(this, i)
}, "lr"), $C = u(function(n) {
    return Ge(this, void 0, void 0, function*() {
        var e, t;
        try {
            return yield YC(n, () => {
                var r;
                return (r = X(this, Gf, "f")) === null || r === void 0 ? void 0 : r.call(this)
            })
        } catch (r) {
            (t = (e = X(this, yr, "f")) === null || e === void 0 ? void 0 : e.error) === null || t === void 0 || t.call(e, {
                category: Wo,
                message: "Error loading trace information",
                errorCode: it.Communication_Default,
                error: r
            })
        }
        return n
    })
}, "ur");
var hb = class hb extends io {
    addAuthInterceptors(e, t) {
        return vR({
            fetchClient: e,
            getToken: t,
            retryOnUnauthorizedResponse: !1
        })
    }
};
u(hb, "fr");
var Jf = hb,
    bF = u((n, e, t) => {
        let r = (i => {
            try {
                return new URL(i), !0
            } catch (o) {
                return !1
            }
        })(e != null ? e : "") ? new URL(n, e) : new URL(n);
        return Object.entries(t != null ? t : {}).forEach(i => {
            let [o, s] = i;
            r.searchParams.append(o, s != null ? s : "")
        }), r.toString()
    }, "gr"),
    wF = u((n, e, t) => {
        let r = `${e||""}/${n}${t?"?":""}`,
            i = "";
        return Object.entries(t != null ? t : {}).forEach(o => {
            let [s, a] = o;
            i += `${i?"&":""}${s}=${encodeURIComponent(a)}`
        }), `${r}${i}`.replace(/\/+/g, "/")
    }, "yr"),
    no, Hl, Zf, zl, En, Wl, Yf, Xf, Qf, HC, kf, zC, WC, ri = "NativeHttpClient",
    fb = class fb {
        constructor(e) {
            let {
                baseUrl: t = "",
                headers: r = {},
                localeHeader: i = "",
                getLocale: o,
                setLocale: s,
                httpClientInstance: a,
                logger: l,
                loadTrace: d,
                getToken: c
            } = e;
            no.add(this), Hl.set(this, void 0), Zf.set(this, void 0), zl.set(this, void 0), En.set(this, void 0), Wl.set(this, void 0), Yf.set(this, void 0), Xf.set(this, void 0), Qf.set(this, void 0), Ye(this, Hl, i, "f"), Ye(this, Zf, o, "f"), Ye(this, zl, s, "f"), Ye(this, En, l, "f"), this.httpClientInstance = a, Ye(this, Xf, t, "f"), Ye(this, Qf, r, "f"), Ye(this, Yf, d, "f"), Ye(this, Wl, c != null ? c : () => Promise.resolve(void 0), "f")
        }
        post(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    payload: o,
                    params: s,
                    headers: a,
                    contentType: l = _n.FormUrlEncoded,
                    timeout: d,
                    timeoutHandler: c,
                    useLocaleInfo: h,
                    baseURL: f,
                    responseHandler: g
                } = t;
                return function*() {
                    var p, y, b;
                    let E = cb({
                            payload: o,
                            contentType: l
                        }),
                        S = yield Xa(X(r, En, "f"), "POST", () => X(r, no, "m", kf).call(r, {
                            method: "POST",
                            url: i,
                            params: s,
                            baseURL: f,
                            headers: a,
                            timeout: d,
                            timeoutHandler: c,
                            useLocaleInfo: h,
                            contentType: l,
                            payload: E
                        })), _ = zf(S.responseText, X(r, En, "f"), ri);
                    if (typeof g == "function") try {
                        g({
                            data: _,
                            responseHeaders: (p = S.responseHeaders) !== null && p !== void 0 ? p : {}
                        })
                    } catch (I) {
                        (b = (y = X(r, En, "f")) === null || y === void 0 ? void 0 : y.error) === null || b === void 0 || b.call(y, {
                            category: ri,
                            message: `Handler Error: Post ${S.responseUrl}`,
                            errorCode: it.Communication_Default,
                            error: I
                        })
                    }
                    return _
                }()
            })
        }
        get(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    params: o,
                    headers: s,
                    responseType: a = "json",
                    useLocaleInfo: l,
                    timeout: d,
                    timeoutHandler: c,
                    baseURL: h
                } = t;
                return function*() {
                    let f = a === "blob",
                        g = yield Xa(X(r, En, "f"), "GET", () => X(r, no, "m", kf).call(r, {
                            method: "GET",
                            url: i,
                            params: o,
                            baseURL: h,
                            headers: s,
                            timeout: d,
                            timeoutHandler: c,
                            useLocaleInfo: l,
                            responseType: f ? "blob" : void 0
                        }));
                    return f ? g.response : a !== "none" ? zf(g.responseText, X(r, En, "f"), ri) : void 0
                }()
            })
        }
        getResponseUrl(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: l,
                    timeoutHandler: d,
                    baseURL: c
                } = t;
                return function*() {
                    var h, f;
                    let g = yield Xa(X(r, En, "f"), "GET", () => X(r, no, "m", kf).call(r, {
                        method: "GET",
                        url: i,
                        params: o,
                        baseURL: c,
                        headers: s,
                        timeout: l,
                        timeoutHandler: d,
                        useLocaleInfo: a
                    }));
                    if (!g.responseUrl) {
                        let p = new Error("Successful request came without a response URL");
                        throw (f = (h = X(r, En, "f")) === null || h === void 0 ? void 0 : h.error) === null || f === void 0 || f.call(h, {
                            error: p,
                            category: ri,
                            message: "Successful request came without a response URL",
                            errorCode: it.Communication_Default
                        }), p
                    }
                    return g.responseUrl
                }()
            })
        }
    };
u(fb, "jr");
var eg = fb;
Hl = new WeakMap, Zf = new WeakMap, zl = new WeakMap, En = new WeakMap, Wl = new WeakMap, Yf = new WeakMap, Xf = new WeakMap, Qf = new WeakMap, no = new WeakSet, HC = u(function(n, e, t, r, i) {
    return Ge(this, void 0, void 0, function*() {
        var o, s, a, l, d, c, h, f;
        if (e.status !== 401 || t) {
            let g = (d = (l = (a = e.status) === null || a === void 0 ? void 0 : a.toString) === null || l === void 0 ? void 0 : l.call(a)) !== null && d !== void 0 ? d : "",
                p = hg(g),
                y = new wr((c = e.responseText) !== null && c !== void 0 ? c : "Network Error", p, g, zf(e.responseText, X(this, En, "f"), ri), ri);
            throw (f = (h = X(this, En, "f")) === null || h === void 0 ? void 0 : h.error) === null || f === void 0 || f.call(h, {
                error: y,
                category: ri,
                message: `${n} ${r}`,
                errorCode: p
            }), y
        }
        if (yield X(this, Wl, "f").call(this, !0)) return i(); {
            let g = new Error("Unable to retrieve an authorization token");
            throw (s = (o = X(this, En, "f")) === null || o === void 0 ? void 0 : o.error) === null || s === void 0 || s.call(o, {
                error: g,
                category: ri,
                message: `${n} ${r}`,
                errorCode: it.Communication_Unauthorized
            }), g
        }
    })
}, "Tr"), kf = u(function n(e) {
    return Ge(this, void 0, void 0, function*() {
        var t, r, i;
        (r = (t = X(this, En, "f")) === null || t === void 0 ? void 0 : t.setActiveSpanAsNonAggregable) === null || r === void 0 || r.call(t);
        let {
            method: o,
            url: s,
            params: a,
            baseURL: l,
            payload: d,
            headers: c,
            useLocaleInfo: h,
            timeout: f,
            timeoutHandler: g,
            isRetry: p,
            contentType: y,
            responseType: b
        } = e, E = ((I, x, L) => {
            try {
                return bF(I, x, L)
            } catch (U) {
                return wF(I, x, L)
            }
        })(s, l != null ? l : X(this, Xf, "f"), a), S = h ? (i = X(this, Zf, "f")) === null || i === void 0 ? void 0 : i.call(this) : void 0, _ = yield X(this, no, "m", zC).call(this, {
            headers: c,
            locale: S,
            contentType: y
        });
        return new Promise((I, x) => {
            var L, U;
            let N = this.httpClientInstance.createRequest(o, E);
            N.onError = j => Ge(this, void 0, void 0, function*() {
                try {
                    let q = yield X(this, no, "m", HC).call(this, o, j, !!p, E, () => X(this, no, "m", n).call(this, Object.assign(Object.assign({}, e), {
                        isRetry: !0
                    })));
                    I(q)
                } catch (q) {
                    x(q)
                }
            }), N.onTimeout = () => {
                var j, q;
                g == null || g();
                let fe = new Error(`Request timed out: ${E}`);
                (q = (j = X(this, En, "f")) === null || j === void 0 ? void 0 : j.error) === null || q === void 0 || q.call(j, {
                    category: ri,
                    message: `POST ${E}`,
                    errorCode: it.Communication_Timeout,
                    error: fe
                }), x(fe)
            }, N.onSuccess = j => {
                h && X(this, zl, "f") && j.responseHeaders && lb({
                    responseHeaders: j.responseHeaders,
                    localeHeader: X(this, Hl, "f"),
                    currentLocale: S,
                    setLocale: X(this, zl, "f")
                }), I(j)
            }, Object.entries(_).forEach(j => {
                let [q, fe] = j;
                N.setHeader(q, fe)
            }), f && N.setTimeout(1e3 * f), d && N.setBody(d), b === "blob" && (N.responseType = "blob"), (U = (L = X(this, En, "f")) === null || L === void 0 ? void 0 : L.debug) === null || U === void 0 || U.call(L, {
                category: ri,
                message: `${o} ${s}`
            }), N.send()
        })
    })
}, "o"), zC = u(function(n) {
    return Ge(this, arguments, void 0, function(e) {
        var t = this;
        let {
            headers: r,
            locale: i,
            contentType: o
        } = e;
        return function*() {
            var s;
            let a = Object.assign(Object.assign(Object.assign({}, (s = X(t, Qf, "f")) !== null && s !== void 0 ? s : {}), r), i ? {
                [X(t, Hl, "f")]: i
            } : {});
            o && !a["content-type"] && (a["content-type"] = o);
            let l = yield X(t, Wl, "f").call(t);
            return l && (a.authorization = l), yield X(t, no, "m", WC).call(t, a)
        }()
    })
}, "Pr"), WC = u(function(n) {
    return Ge(this, void 0, void 0, function*() {
        var e, t;
        try {
            return yield YC(n, () => {
                var r;
                return (r = X(this, Yf, "f")) === null || r === void 0 ? void 0 : r.call(this)
            })
        } catch (r) {
            (t = (e = X(this, En, "f")) === null || e === void 0 ? void 0 : e.error) === null || t === void 0 || t.call(e, {
                category: ri,
                message: "Error loading trace information",
                errorCode: it.Communication_Default,
                error: r
            })
        }
        return n
    })
}, "Rr");
var gb = class gb extends Error {
    constructor(e, t) {
        let r = new.target.prototype;
        super(`${e}: Status code '${t}'`), this.statusCode = t, this.__proto__ = r
    }
};
u(gb, "Or");
var Ko = gb,
    pb = class pb extends Error {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "A timeout occurred.",
                t = new.target.prototype;
            super(e), this.__proto__ = t
        }
    };
u(pb, "$r");
var Kl = pb,
    mb = class mb extends Error {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "An abort occurred.",
                t = new.target.prototype;
            super(e), this.__proto__ = t
        }
    };
u(mb, "Dr");
var br = mb,
    vb = class vb extends Error {
        constructor(e, t) {
            let r = new.target.prototype;
            super(e), this.transport = t, this.errorType = "UnsupportedTransportError", this.__proto__ = r
        }
    };
u(vb, "xr");
var U0 = vb,
    yb = class yb extends Error {
        constructor(e, t) {
            let r = new.target.prototype;
            super(e), this.transport = t, this.errorType = "DisabledTransportError", this.__proto__ = r
        }
    };
u(yb, "Lr");
var M0 = yb,
    bb = class bb extends Error {
        constructor(e, t) {
            let r = new.target.prototype;
            super(e), this.transport = t, this.errorType = "FailedToStartTransportError", this.__proto__ = r
        }
    };
u(bb, "Hr");
var F0 = bb,
    wb = class wb extends Error {
        constructor(e) {
            let t = new.target.prototype;
            super(e), this.errorType = "FailedToNegotiateWithServerError", this.__proto__ = t
        }
    };
u(wb, "Ur");
var B0 = wb,
    Tb = class Tb extends Error {
        constructor(e, t) {
            let r = new.target.prototype;
            super(e), this.innerErrors = t, this.__proto__ = r
        }
    };
u(Tb, "Mr");
var j0 = Tb,
    Eb = class Eb {
        constructor(e, t, r) {
            this.statusCode = e, this.statusText = t, this.content = r
        }
    };
u(Eb, "Wr");
var tg = Eb,
    _b = class _b {
        get(e, t) {
            return this.send(Vo(Vt({}, t), {
                method: "GET",
                url: e
            }))
        }
        post(e, t) {
            return this.send(Vo(Vt({}, t), {
                method: "POST",
                url: e
            }))
        }
        delete(e, t) {
            return this.send(Vo(Vt({}, t), {
                method: "DELETE",
                url: e
            }))
        }
        getCookieString(e) {
            return ""
        }
    };
u(_b, "Nr");
var tu = _b,
    J;
(function(n) {
    n[n.Trace = 0] = "Trace", n[n.Debug = 1] = "Debug", n[n.Information = 2] = "Information", n[n.Warning = 3] = "Warning", n[n.Error = 4] = "Error", n[n.Critical = 5] = "Critical", n[n.None = 6] = "None"
})(J || (J = {}));
var Sb = class Sb {
    constructor() {}
    log(e, t) {}
};
u(Sb, "qr");
var qs = Sb;
qs.instance = new qs;
var TF = "7.0.12",
    Ib = class Ib {
        static isRequired(e, t) {
            if (e == null) throw new Error(`The '${t}' argument is required.`)
        }
        static isNotEmpty(e, t) {
            if (!e || e.match(/^\s*$/)) throw new Error(`The '${t}' argument should not be empty.`)
        }
        static isIn(e, t, r) {
            if (!(e in t)) throw new Error(`Unknown ${r} value: ${e}.`)
        }
    };
u(Ib, "zr");
var Qt = Ib,
    Ab = class Ab {
        static get isBrowser() {
            return typeof window == "object" && typeof window.document == "object"
        }
        static get isWebWorker() {
            return typeof self == "object" && "importScripts" in self
        }
        static get isReactNative() {
            return typeof window == "object" && window.document === void 0
        }
        static get isNode() {
            return !this.isBrowser && !this.isWebWorker && !this.isReactNative
        }
    };
u(Ab, "Kr");
var Xt = Ab;

function Jl(n, e) {
    let t = "";
    return Ql(n) ? (t = `Binary data of length ${n.byteLength}`, e && (t += `. Content: '${function(r){let i=new Uint8Array(r),o="";return i.forEach(s=>{o+=`0x${s<16?"0":""}${s.toString(16)} `}),o.substr(0,o.length-1)}(n)}'`)) : typeof n == "string" && (t = `String data of length ${n.length}`, e && (t += `. Content: '${n}'`)), t
}
u(Jl, "Gr");

function Ql(n) {
    return n && typeof ArrayBuffer != "undefined" && (n instanceof ArrayBuffer || n.constructor && n.constructor.name === "ArrayBuffer")
}
u(Ql, "Jr");

function yR(n, e, t, r, i, o) {
    return Ot(this, null, function*() {
        let s = {},
            [a, l] = ru();
        s[a] = l, n.log(J.Trace, `(${e} transport) sending data. ${Jl(i,o.logMessageContent)}.`);
        let d = Ql(i) ? "arraybuffer" : "text",
            c = yield t.post(r, {
                content: i,
                headers: Vt(Vt({}, s), o.headers),
                responseType: d,
                timeout: o.timeout,
                withCredentials: o.withCredentials
            });
        n.log(J.Trace, `(${e} transport) request complete. Response status: ${c.statusCode}.`)
    })
}
u(yR, "Vr");
var Cb = class Cb {
    constructor(e, t) {
        this._subject = e, this._observer = t
    }
    dispose() {
        let e = this._subject.observers.indexOf(this._observer);
        e > -1 && this._subject.observers.splice(e, 1), this._subject.observers.length === 0 && this._subject.cancelCallback && this._subject.cancelCallback().catch(t => {})
    }
};
u(Cb, "Qr");
var $0 = Cb,
    Rb = class Rb {
        constructor(e) {
            this._minLevel = e, this.out = console
        }
        log(e, t) {
            if (e >= this._minLevel) {
                let r = `[${new Date().toISOString()}] ${J[e]}: ${t}`;
                switch (e) {
                    case J.Critical:
                    case J.Error:
                        this.out.error(r);
                        break;
                    case J.Warning:
                        this.out.warn(r);
                        break;
                    case J.Information:
                        this.out.info(r);
                        break;
                    default:
                        this.out.log(r)
                }
            }
        }
    };
u(Rb, "Xr");
var nu = Rb;

function ru() {
    let n = "X-SignalR-User-Agent";
    return Xt.isNode && (n = "User-Agent"), [n, EF(TF, _F(), IF(), SF())]
}
u(ru, "Yr");

function EF(n, e, t, r) {
    let i = "Microsoft SignalR/",
        o = n.split(".");
    return i += `${o[0]}.${o[1]}`, i += ` (${n}; `, i += e && e !== "" ? `${e}; ` : "Unknown OS; ", i += `${t}`, i += r ? `; ${r}` : "; Unknown Runtime Version", i += ")", i
}
u(EF, "Zr");

function _F() {
    if (!Xt.isNode) return "";
    switch (process.platform) {
        case "win32":
            return "Windows NT";
        case "darwin":
            return "macOS";
        case "linux":
            return "Linux";
        default:
            return process.platform
    }
}
u(_F, "en");

function SF() {
    if (Xt.isNode) return process.versions.node
}
u(SF, "tn");

function IF() {
    return Xt.isNode ? "NodeJS" : "Browser"
}
u(IF, "on");

function qC(n) {
    return n.stack ? n.stack : n.message ? n.message : `${n}`
}
u(qC, "rn");
var Ob = class Ob extends tu {
    constructor(e) {
        if (super(), this._logger = e, typeof fetch == "undefined") {
            let t = typeof __webpack_require__ == "function" ? __non_webpack_require__ : Lr;
            this._jar = new(t("tough-cookie")).CookieJar, this._fetchType = t("node-fetch"), this._fetchType = t("fetch-cookie")(this._fetchType, this._jar)
        } else this._fetchType = fetch.bind(function() {
            if (typeof globalThis != "undefined") return globalThis;
            if (typeof self != "undefined") return self;
            if (typeof window != "undefined") return window;
            if (typeof global != "undefined") return global;
            throw new Error("could not find global")
        }());
        if (typeof AbortController == "undefined") {
            let t = typeof __webpack_require__ == "function" ? __non_webpack_require__ : Lr;
            this._abortControllerType = t("abort-controller")
        } else this._abortControllerType = AbortController
    }
    send(e) {
        return Ot(this, null, function*() {
            if (e.abortSignal && e.abortSignal.aborted) throw new br;
            if (!e.method) throw new Error("No method defined.");
            if (!e.url) throw new Error("No url defined.");
            let t = new this._abortControllerType,
                r;
            e.abortSignal && (e.abortSignal.onabort = () => {
                t.abort(), r = new br
            });
            let i, o = null;
            if (e.timeout) {
                let l = e.timeout;
                o = setTimeout(() => {
                    t.abort(), this._logger.log(J.Warning, "Timeout from HTTP request."), r = new Kl
                }, l)
            }
            e.content === "" && (e.content = void 0), e.content && (e.headers = e.headers || {}, Ql(e.content) ? e.headers["Content-Type"] = "application/octet-stream" : e.headers["Content-Type"] = "text/plain;charset=UTF-8");
            try {
                i = yield this._fetchType(e.url, {
                    body: e.content,
                    cache: "no-cache",
                    credentials: e.withCredentials === !0 ? "include" : "same-origin",
                    headers: Vt({
                        "X-Requested-With": "XMLHttpRequest"
                    }, e.headers),
                    method: e.method,
                    mode: "cors",
                    redirect: "follow",
                    signal: t.signal
                })
            } catch (l) {
                throw r || (this._logger.log(J.Warning, `Error from HTTP request. ${l}.`), l)
            } finally {
                o && clearTimeout(o), e.abortSignal && (e.abortSignal.onabort = null)
            }
            if (!i.ok) {
                let l = yield GC(i, "text");
                throw new Ko(l || i.statusText, i.status)
            }
            let s = GC(i, e.responseType),
                a = yield s;
            return new tg(i.status, i.statusText, a)
        })
    }
    getCookieString(e) {
        let t = "";
        return Xt.isNode && this._jar && this._jar.getCookies(e, (r, i) => t = i.join("; ")), t
    }
};
u(Ob, "nn");
var V0 = Ob;

function GC(n, e) {
    let t;
    switch (e) {
        case "arraybuffer":
            t = n.arrayBuffer();
            break;
        case "text":
        default:
            t = n.text();
            break;
        case "blob":
        case "document":
        case "json":
            throw new Error(`${e} is not supported.`)
    }
    return t
}
u(GC, "sn");
var Db = class Db extends tu {
    constructor(e) {
        super(), this._logger = e
    }
    send(e) {
        return e.abortSignal && e.abortSignal.aborted ? Promise.reject(new br) : e.method ? e.url ? new Promise((t, r) => {
            let i = new XMLHttpRequest;
            i.open(e.method, e.url, !0), i.withCredentials = e.withCredentials === void 0 || e.withCredentials, i.setRequestHeader("X-Requested-With", "XMLHttpRequest"), e.content === "" && (e.content = void 0), e.content && (Ql(e.content) ? i.setRequestHeader("Content-Type", "application/octet-stream") : i.setRequestHeader("Content-Type", "text/plain;charset=UTF-8"));
            let o = e.headers;
            o && Object.keys(o).forEach(s => {
                i.setRequestHeader(s, o[s])
            }), e.responseType && (i.responseType = e.responseType), e.abortSignal && (e.abortSignal.onabort = () => {
                i.abort(), r(new br)
            }), e.timeout && (i.timeout = e.timeout), i.onload = () => {
                e.abortSignal && (e.abortSignal.onabort = null), i.status >= 200 && i.status < 300 ? t(new tg(i.status, i.statusText, i.response || i.responseText)) : r(new Ko(i.response || i.responseText || i.statusText, i.status))
            }, i.onerror = () => {
                this._logger.log(J.Warning, `Error from HTTP request. ${i.status}: ${i.statusText}.`), r(new Ko(i.statusText, i.status))
            }, i.ontimeout = () => {
                this._logger.log(J.Warning, "Timeout from HTTP request."), r(new Kl)
            }, i.send(e.content)
        }) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."))
    }
};
u(Db, "an");
var H0 = Db,
    Nb = class Nb extends tu {
        constructor(e) {
            if (super(), typeof fetch != "undefined" || Xt.isNode) this._httpClient = new V0(e);
            else {
                if (typeof XMLHttpRequest == "undefined") throw new Error("No usable HttpClient found.");
                this._httpClient = new H0(e)
            }
        }
        send(e) {
            return e.abortSignal && e.abortSignal.aborted ? Promise.reject(new br) : e.method ? e.url ? this._httpClient.send(e) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."))
        }
        getCookieString(e) {
            return this._httpClient.getCookieString(e)
        }
    };
u(Nb, "cn");
var z0 = Nb,
    Za = class Za {
        static write(e) {
            return `${e}${Za.RecordSeparator}`
        }
        static parse(e) {
            if (e[e.length - 1] !== Za.RecordSeparator) throw new Error("Message is incomplete.");
            let t = e.split(Za.RecordSeparator);
            return t.pop(), t
        }
    };
u(Za, "ln");
var ii = Za;
ii.RecordSeparatorCode = 30, ii.RecordSeparator = String.fromCharCode(ii.RecordSeparatorCode);
var Lb = class Lb {
    writeHandshakeRequest(e) {
        return ii.write(JSON.stringify(e))
    }
    parseHandshakeResponse(e) {
        let t, r;
        if (Ql(e)) {
            let s = new Uint8Array(e),
                a = s.indexOf(ii.RecordSeparatorCode);
            if (a === -1) throw new Error("Message is incomplete.");
            let l = a + 1;
            t = String.fromCharCode.apply(null, Array.prototype.slice.call(s.slice(0, l))), r = s.byteLength > l ? s.slice(l).buffer : null
        } else {
            let s = e,
                a = s.indexOf(ii.RecordSeparator);
            if (a === -1) throw new Error("Message is incomplete.");
            let l = a + 1;
            t = s.substring(0, l), r = s.length > l ? s.substring(l) : null
        }
        let i = ii.parse(t),
            o = JSON.parse(i[0]);
        if (o.type) throw new Error("Expected a handshake response from the server.");
        return [r, o]
    }
};
u(Lb, "un");
var W0 = Lb,
    Dt;
(function(n) {
    n[n.Invocation = 1] = "Invocation", n[n.StreamItem = 2] = "StreamItem", n[n.Completion = 3] = "Completion", n[n.StreamInvocation = 4] = "StreamInvocation", n[n.CancelInvocation = 5] = "CancelInvocation", n[n.Ping = 6] = "Ping", n[n.Close = 7] = "Close"
})(Dt || (Dt = {}));
var xb = class xb {
    constructor() {
        this.observers = []
    }
    next(e) {
        for (let t of this.observers) t.next(e)
    }
    error(e) {
        for (let t of this.observers) t.error && t.error(e)
    }
    complete() {
        for (let e of this.observers) e.complete && e.complete()
    }
    subscribe(e) {
        return this.observers.push(e), new $0(this, e)
    }
};
u(xb, "pn");
var q0 = xb,
    Ht;
(function(n) {
    n.Disconnected = "Disconnected", n.Connecting = "Connecting", n.Connected = "Connected", n.Disconnecting = "Disconnecting", n.Reconnecting = "Reconnecting"
})(Ht || (Ht = {}));
var lg = class lg {
    constructor(e, t, r, i) {
        this._nextKeepAlive = 0, this._freezeEventListener = () => {
            this._logger.log(J.Warning, "The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")
        }, Qt.isRequired(e, "connection"), Qt.isRequired(t, "logger"), Qt.isRequired(r, "protocol"), this.serverTimeoutInMilliseconds = 3e4, this.keepAliveIntervalInMilliseconds = 15e3, this._logger = t, this._protocol = r, this.connection = e, this._reconnectPolicy = i, this._handshakeProtocol = new W0, this.connection.onreceive = o => this._processIncomingData(o), this.connection.onclose = o => this._connectionClosed(o), this._callbacks = {}, this._methods = {}, this._closedCallbacks = [], this._reconnectingCallbacks = [], this._reconnectedCallbacks = [], this._invocationId = 0, this._receivedHandshakeResponse = !1, this._connectionState = Ht.Disconnected, this._connectionStarted = !1, this._cachedPingMessage = this._protocol.writeMessage({
            type: Dt.Ping
        })
    }
    static create(e, t, r, i) {
        return new lg(e, t, r, i)
    }
    get state() {
        return this._connectionState
    }
    get connectionId() {
        return this.connection && this.connection.connectionId || null
    }
    get baseUrl() {
        return this.connection.baseUrl || ""
    }
    set baseUrl(e) {
        if (this._connectionState !== Ht.Disconnected && this._connectionState !== Ht.Reconnecting) throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");
        if (!e) throw new Error("The HubConnection url must be a valid url.");
        this.connection.baseUrl = e
    }
    start() {
        return this._startPromise = this._startWithStateTransitions(), this._startPromise
    }
    _startWithStateTransitions() {
        return Ot(this, null, function*() {
            if (this._connectionState !== Ht.Disconnected) return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));
            this._connectionState = Ht.Connecting, this._logger.log(J.Debug, "Starting HubConnection.");
            try {
                yield this._startInternal(), Xt.isBrowser && window.document.addEventListener("freeze", this._freezeEventListener), this._connectionState = Ht.Connected, this._connectionStarted = !0, this._logger.log(J.Debug, "HubConnection connected successfully.")
            } catch (e) {
                return this._connectionState = Ht.Disconnected, this._logger.log(J.Debug, `HubConnection failed to start successfully because of error '${e}'.`), Promise.reject(e)
            }
        })
    }
    _startInternal() {
        return Ot(this, null, function*() {
            this._stopDuringStartError = void 0, this._receivedHandshakeResponse = !1;
            let e = new Promise((t, r) => {
                this._handshakeResolver = t, this._handshakeRejecter = r
            });
            yield this.connection.start(this._protocol.transferFormat);
            try {
                let t = {
                    protocol: this._protocol.name,
                    version: this._protocol.version
                };
                if (this._logger.log(J.Debug, "Sending handshake request."), yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)), this._logger.log(J.Information, `Using HubProtocol '${this._protocol.name}'.`), this._cleanupTimeout(), this._resetTimeoutPeriod(), this._resetKeepAliveInterval(), yield e, this._stopDuringStartError) throw this._stopDuringStartError;
                this.connection.features.inherentKeepAlive || (yield this._sendMessage(this._cachedPingMessage))
            } catch (t) {
                throw this._logger.log(J.Debug, `Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`), this._cleanupTimeout(), this._cleanupPingTimer(), yield this.connection.stop(t), t
            }
        })
    }
    stop() {
        return Ot(this, null, function*() {
            let e = this._startPromise;
            this._stopPromise = this._stopInternal(), yield this._stopPromise;
            try {
                yield e
            } catch (t) {}
        })
    }
    _stopInternal(e) {
        return this._connectionState === Ht.Disconnected ? (this._logger.log(J.Debug, `Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`), Promise.resolve()) : this._connectionState === Ht.Disconnecting ? (this._logger.log(J.Debug, `Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`), this._stopPromise) : (this._connectionState = Ht.Disconnecting, this._logger.log(J.Debug, "Stopping HubConnection."), this._reconnectDelayHandle ? (this._logger.log(J.Debug, "Connection stopped during reconnect delay. Done reconnecting."), clearTimeout(this._reconnectDelayHandle), this._reconnectDelayHandle = void 0, this._completeClose(), Promise.resolve()) : (this._cleanupTimeout(), this._cleanupPingTimer(), this._stopDuringStartError = e || new br("The connection was stopped before the hub handshake could complete."), this.connection.stop(e)))
    }
    stream(e) {
        for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
        let [o, s] = this._replaceStreamingParams(r), a = this._createStreamInvocation(e, r, s), l, d = new q0;
        return d.cancelCallback = () => {
            let c = this._createCancelInvocation(a.invocationId);
            return delete this._callbacks[a.invocationId], l.then(() => this._sendWithProtocol(c))
        }, this._callbacks[a.invocationId] = (c, h) => {
            h ? d.error(h) : c && (c.type === Dt.Completion ? c.error ? d.error(new Error(c.error)) : d.complete() : d.next(c.item))
        }, l = this._sendWithProtocol(a).catch(c => {
            d.error(c), delete this._callbacks[a.invocationId]
        }), this._launchStreams(o, l), d
    }
    _sendMessage(e) {
        return this._resetKeepAliveInterval(), this.connection.send(e)
    }
    _sendWithProtocol(e) {
        return this._sendMessage(this._protocol.writeMessage(e))
    }
    send(e) {
        for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
        let [o, s] = this._replaceStreamingParams(r), a = this._sendWithProtocol(this._createInvocation(e, r, !0, s));
        return this._launchStreams(o, a), a
    }
    invoke(e) {
        for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
        let [o, s] = this._replaceStreamingParams(r), a = this._createInvocation(e, r, !1, s);
        return new Promise((l, d) => {
            this._callbacks[a.invocationId] = (h, f) => {
                f ? d(f) : h && (h.type === Dt.Completion ? h.error ? d(new Error(h.error)) : l(h.result) : d(new Error(`Unexpected message type: ${h.type}`)))
            };
            let c = this._sendWithProtocol(a).catch(h => {
                d(h), delete this._callbacks[a.invocationId]
            });
            this._launchStreams(o, c)
        })
    }
    on(e, t) {
        e && t && (e = e.toLowerCase(), this._methods[e] || (this._methods[e] = []), this._methods[e].indexOf(t) === -1 && this._methods[e].push(t))
    }
    off(e, t) {
        if (!e) return;
        e = e.toLowerCase();
        let r = this._methods[e];
        if (r)
            if (t) {
                let i = r.indexOf(t);
                i !== -1 && (r.splice(i, 1), r.length === 0 && delete this._methods[e])
            } else delete this._methods[e]
    }
    onclose(e) {
        e && this._closedCallbacks.push(e)
    }
    onreconnecting(e) {
        e && this._reconnectingCallbacks.push(e)
    }
    onreconnected(e) {
        e && this._reconnectedCallbacks.push(e)
    }
    _processIncomingData(e) {
        if (this._cleanupTimeout(), this._receivedHandshakeResponse || (e = this._processHandshakeResponse(e), this._receivedHandshakeResponse = !0), e) {
            let t = this._protocol.parseMessages(e, this._logger);
            for (let r of t) switch (r.type) {
                case Dt.Invocation:
                    this._invokeClientMethod(r);
                    break;
                case Dt.StreamItem:
                case Dt.Completion: {
                    let i = this._callbacks[r.invocationId];
                    if (i) {
                        r.type === Dt.Completion && delete this._callbacks[r.invocationId];
                        try {
                            i(r)
                        } catch (o) {
                            this._logger.log(J.Error, `Stream callback threw error: ${qC(o)}`)
                        }
                    }
                    break
                }
                case Dt.Ping:
                    break;
                case Dt.Close: {
                    this._logger.log(J.Information, "Close message received from server.");
                    let i = r.error ? new Error("Server returned an error on close: " + r.error) : void 0;
                    r.allowReconnect === !0 ? this.connection.stop(i) : this._stopPromise = this._stopInternal(i);
                    break
                }
                default:
                    this._logger.log(J.Warning, `Invalid message type: ${r.type}.`)
            }
        }
        this._resetTimeoutPeriod()
    }
    _processHandshakeResponse(e) {
        let t, r;
        try {
            [r, t] = this._handshakeProtocol.parseHandshakeResponse(e)
        } catch (i) {
            let o = "Error parsing handshake response: " + i;
            this._logger.log(J.Error, o);
            let s = new Error(o);
            throw this._handshakeRejecter(s), s
        }
        if (t.error) {
            let i = "Server returned handshake error: " + t.error;
            this._logger.log(J.Error, i);
            let o = new Error(i);
            throw this._handshakeRejecter(o), o
        }
        return this._logger.log(J.Debug, "Server handshake complete."), this._handshakeResolver(), r
    }
    _resetKeepAliveInterval() {
        this.connection.features.inherentKeepAlive || (this._nextKeepAlive = new Date().getTime() + this.keepAliveIntervalInMilliseconds, this._cleanupPingTimer())
    }
    _resetTimeoutPeriod() {
        if (!(this.connection.features && this.connection.features.inherentKeepAlive || (this._timeoutHandle = setTimeout(() => this.serverTimeout(), this.serverTimeoutInMilliseconds), this._pingServerHandle !== void 0))) {
            let e = this._nextKeepAlive - new Date().getTime();
            e < 0 && (e = 0), this._pingServerHandle = setTimeout(() => Ot(this, null, function*() {
                if (this._connectionState === Ht.Connected) try {
                    yield this._sendMessage(this._cachedPingMessage)
                } catch (t) {
                    this._cleanupPingTimer()
                }
            }), e)
        }
    }
    serverTimeout() {
        this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))
    }
    _invokeClientMethod(e) {
        return Ot(this, null, function*() {
            let t = e.target.toLowerCase(),
                r = this._methods[t];
            if (!r) return this._logger.log(J.Warning, `No client method with the name '${t}' found.`), void(e.invocationId && (this._logger.log(J.Warning, `No result given for '${t}' method and invocation ID '${e.invocationId}'.`), yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId, "Client didn't provide a result.", null))));
            let i = r.slice(),
                o = !!e.invocationId,
                s, a, l;
            for (let d of i) try {
                let c = s;
                s = yield d.apply(this, e.arguments), o && s && c && (this._logger.log(J.Error, `Multiple results provided for '${t}'. Sending error to server.`), l = this._createCompletionMessage(e.invocationId, "Client provided multiple results.", null)), a = void 0
            } catch (c) {
                a = c, this._logger.log(J.Error, `A callback for the method '${t}' threw error '${c}'.`)
            }
            l ? yield this._sendWithProtocol(l): o ? (a ? l = this._createCompletionMessage(e.invocationId, `${a}`, null) : s !== void 0 ? l = this._createCompletionMessage(e.invocationId, null, s) : (this._logger.log(J.Warning, `No result given for '${t}' method and invocation ID '${e.invocationId}'.`), l = this._createCompletionMessage(e.invocationId, "Client didn't provide a result.", null)), yield this._sendWithProtocol(l)) : s && this._logger.log(J.Error, `Result given for '${t}' method but server is not expecting a result.`)
        })
    }
    _connectionClosed(e) {
        this._logger.log(J.Debug, `HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`), this._stopDuringStartError = this._stopDuringStartError || e || new br("The underlying connection was closed before the hub handshake could complete."), this._handshakeResolver && this._handshakeResolver(), this._cancelCallbacksWithError(e || new Error("Invocation canceled due to the underlying connection being closed.")), this._cleanupTimeout(), this._cleanupPingTimer(), this._connectionState === Ht.Disconnecting ? this._completeClose(e) : this._connectionState === Ht.Connected && this._reconnectPolicy ? this._reconnect(e) : this._connectionState === Ht.Connected && this._completeClose(e)
    }
    _completeClose(e) {
        if (this._connectionStarted) {
            this._connectionState = Ht.Disconnected, this._connectionStarted = !1, Xt.isBrowser && window.document.removeEventListener("freeze", this._freezeEventListener);
            try {
                this._closedCallbacks.forEach(t => t.apply(this, [e]))
            } catch (t) {
                this._logger.log(J.Error, `An onclose callback called with error '${e}' threw error '${t}'.`)
            }
        }
    }
    _reconnect(e) {
        return Ot(this, null, function*() {
            let t = Date.now(),
                r = 0,
                i = e !== void 0 ? e : new Error("Attempting to reconnect due to a unknown error."),
                o = this._getNextRetryDelay(r++, 0, i);
            if (o === null) return this._logger.log(J.Debug, "Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."), void this._completeClose(e);
            if (this._connectionState = Ht.Reconnecting, e ? this._logger.log(J.Information, `Connection reconnecting because of error '${e}'.`) : this._logger.log(J.Information, "Connection reconnecting."), this._reconnectingCallbacks.length !== 0) {
                try {
                    this._reconnectingCallbacks.forEach(s => s.apply(this, [e]))
                } catch (s) {
                    this._logger.log(J.Error, `An onreconnecting callback called with error '${e}' threw error '${s}'.`)
                }
                if (this._connectionState !== Ht.Reconnecting) return void this._logger.log(J.Debug, "Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")
            }
            for (; o !== null;) {
                if (this._logger.log(J.Information, `Reconnect attempt number ${r} will start in ${o} ms.`), yield new Promise(s => {
                        this._reconnectDelayHandle = setTimeout(s, o)
                    }), this._reconnectDelayHandle = void 0, this._connectionState !== Ht.Reconnecting) return void this._logger.log(J.Debug, "Connection left the reconnecting state during reconnect delay. Done reconnecting.");
                try {
                    if (yield this._startInternal(), this._connectionState = Ht.Connected, this._logger.log(J.Information, "HubConnection reconnected successfully."), this._reconnectedCallbacks.length !== 0) try {
                        this._reconnectedCallbacks.forEach(s => s.apply(this, [this.connection.connectionId]))
                    } catch (s) {
                        this._logger.log(J.Error, `An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${s}'.`)
                    }
                    return
                } catch (s) {
                    if (this._logger.log(J.Information, `Reconnect attempt failed because of error '${s}'.`), this._connectionState !== Ht.Reconnecting) return this._logger.log(J.Debug, `Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`), void(this._connectionState === Ht.Disconnecting && this._completeClose());
                    i = s instanceof Error ? s : new Error(s.toString()), o = this._getNextRetryDelay(r++, Date.now() - t, i)
                }
            }
            this._logger.log(J.Information, `Reconnect retries have been exhausted after ${Date.now()-t} ms and ${r} failed attempts. Connection disconnecting.`), this._completeClose()
        })
    }
    _getNextRetryDelay(e, t, r) {
        try {
            return this._reconnectPolicy.nextRetryDelayInMilliseconds({
                elapsedMilliseconds: t,
                previousRetryCount: e,
                retryReason: r
            })
        } catch (i) {
            return this._logger.log(J.Error, `IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`), null
        }
    }
    _cancelCallbacksWithError(e) {
        let t = this._callbacks;
        this._callbacks = {}, Object.keys(t).forEach(r => {
            let i = t[r];
            try {
                i(null, e)
            } catch (o) {
                this._logger.log(J.Error, `Stream 'error' callback called with '${e}' threw error: ${qC(o)}`)
            }
        })
    }
    _cleanupPingTimer() {
        this._pingServerHandle && (clearTimeout(this._pingServerHandle), this._pingServerHandle = void 0)
    }
    _cleanupTimeout() {
        this._timeoutHandle && clearTimeout(this._timeoutHandle)
    }
    _createInvocation(e, t, r, i) {
        if (r) return i.length !== 0 ? {
            arguments: t,
            streamIds: i,
            target: e,
            type: Dt.Invocation
        } : {
            arguments: t,
            target: e,
            type: Dt.Invocation
        }; {
            let o = this._invocationId;
            return this._invocationId++, i.length !== 0 ? {
                arguments: t,
                invocationId: o.toString(),
                streamIds: i,
                target: e,
                type: Dt.Invocation
            } : {
                arguments: t,
                invocationId: o.toString(),
                target: e,
                type: Dt.Invocation
            }
        }
    }
    _launchStreams(e, t) {
        if (e.length !== 0) {
            t || (t = Promise.resolve());
            for (let r in e) e[r].subscribe({
                complete: u(() => {
                    t = t.then(() => this._sendWithProtocol(this._createCompletionMessage(r)))
                }, "complete"),
                error: u(i => {
                    let o;
                    o = i instanceof Error ? i.message : i && i.toString ? i.toString() : "Unknown error", t = t.then(() => this._sendWithProtocol(this._createCompletionMessage(r, o)))
                }, "error"),
                next: u(i => {
                    t = t.then(() => this._sendWithProtocol(this._createStreamItemMessage(r, i)))
                }, "next")
            })
        }
    }
    _replaceStreamingParams(e) {
        let t = [],
            r = [];
        for (let i = 0; i < e.length; i++) {
            let o = e[i];
            if (this._isObservable(o)) {
                let s = this._invocationId;
                this._invocationId++, t[s] = o, r.push(s.toString()), e.splice(i, 1)
            }
        }
        return [t, r]
    }
    _isObservable(e) {
        return e && e.subscribe && typeof e.subscribe == "function"
    }
    _createStreamInvocation(e, t, r) {
        let i = this._invocationId;
        return this._invocationId++, r.length !== 0 ? {
            arguments: t,
            invocationId: i.toString(),
            streamIds: r,
            target: e,
            type: Dt.StreamInvocation
        } : {
            arguments: t,
            invocationId: i.toString(),
            target: e,
            type: Dt.StreamInvocation
        }
    }
    _createCancelInvocation(e) {
        return {
            invocationId: e,
            type: Dt.CancelInvocation
        }
    }
    _createStreamItemMessage(e, t) {
        return {
            invocationId: e,
            item: t,
            type: Dt.StreamItem
        }
    }
    _createCompletionMessage(e, t, r) {
        return t ? {
            error: t,
            invocationId: e,
            type: Dt.Completion
        } : {
            invocationId: e,
            result: r,
            type: Dt.Completion
        }
    }
};
u(lg, "fn");
var G0 = lg,
    AF = [0, 2e3, 1e4, 3e4, null],
    Pb = class Pb {
        constructor(e) {
            this._retryDelays = e !== void 0 ? [...e, null] : AF
        }
        nextRetryDelayInMilliseconds(e) {
            return this._retryDelays[e.previousRetryCount]
        }
    };
u(Pb, "yn");
var ng = Pb,
    kb = class kb {};
u(kb, "mn");
var ro = kb;
ro.Authorization = "Authorization", ro.Cookie = "Cookie";
var Ub = class Ub extends tu {
    constructor(e, t) {
        super(), this._innerClient = e, this._accessTokenFactory = t
    }
    send(e) {
        return Ot(this, null, function*() {
            let t = !0;
            this._accessTokenFactory && (!this._accessToken || e.url && e.url.indexOf("/negotiate?") > 0) && (t = !1, this._accessToken = yield this._accessTokenFactory()), this._setAuthorizationHeader(e);
            let r = yield this._innerClient.send(e);
            return t && r.statusCode === 401 && this._accessTokenFactory ? (this._accessToken = yield this._accessTokenFactory(), this._setAuthorizationHeader(e), yield this._innerClient.send(e)) : r
        })
    }
    _setAuthorizationHeader(e) {
        e.headers || (e.headers = {}), this._accessToken ? e.headers[ro.Authorization] = `Bearer ${this._accessToken}` : this._accessTokenFactory && e.headers[ro.Authorization] && delete e.headers[ro.Authorization]
    }
    getCookieString(e) {
        return this._innerClient.getCookieString(e)
    }
};
u(Ub, "vn");
var K0 = Ub,
    fn, Mn;
(function(n) {
    n[n.None = 0] = "None", n[n.WebSockets = 1] = "WebSockets", n[n.ServerSentEvents = 2] = "ServerSentEvents", n[n.LongPolling = 4] = "LongPolling"
})(fn || (fn = {})),
function(n) {
    n[n.Text = 1] = "Text", n[n.Binary = 2] = "Binary"
}(Mn || (Mn = {}));
var Mb = class Mb {
    constructor(e, t, r) {
        this._httpClient = e, this._logger = t, this._pollAbort = new class {
            constructor() {
                this._isAborted = !1, this.onabort = null
            }
            abort() {
                this._isAborted || (this._isAborted = !0, this.onabort && this.onabort())
            }
            get signal() {
                return this
            }
            get aborted() {
                return this._isAborted
            }
        }, this._options = r, this._running = !1, this.onreceive = null, this.onclose = null
    }
    get pollAborted() {
        return this._pollAbort.aborted
    }
    connect(e, t) {
        return Ot(this, null, function*() {
            if (Qt.isRequired(e, "url"), Qt.isRequired(t, "transferFormat"), Qt.isIn(t, Mn, "transferFormat"), this._url = e, this._logger.log(J.Trace, "(LongPolling transport) Connecting."), t === Mn.Binary && typeof XMLHttpRequest != "undefined" && typeof new XMLHttpRequest().responseType != "string") throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");
            let [r, i] = ru(), o = Vt({
                [r]: i
            }, this._options.headers), s = {
                abortSignal: this._pollAbort.signal,
                headers: o,
                timeout: 1e5,
                withCredentials: this._options.withCredentials
            };
            t === Mn.Binary && (s.responseType = "arraybuffer");
            let a = `${e}&_=${Date.now()}`;
            this._logger.log(J.Trace, `(LongPolling transport) polling: ${a}.`);
            let l = yield this._httpClient.get(a, s);
            l.statusCode !== 200 ? (this._logger.log(J.Error, `(LongPolling transport) Unexpected response code: ${l.statusCode}.`), this._closeError = new Ko(l.statusText || "", l.statusCode), this._running = !1) : this._running = !0, this._receiving = this._poll(this._url, s)
        })
    }
    _poll(e, t) {
        return Ot(this, null, function*() {
            try {
                for (; this._running;) try {
                    let r = `${e}&_=${Date.now()}`;
                    this._logger.log(J.Trace, `(LongPolling transport) polling: ${r}.`);
                    let i = yield this._httpClient.get(r, t);
                    i.statusCode === 204 ? (this._logger.log(J.Information, "(LongPolling transport) Poll terminated by server."), this._running = !1) : i.statusCode !== 200 ? (this._logger.log(J.Error, `(LongPolling transport) Unexpected response code: ${i.statusCode}.`), this._closeError = new Ko(i.statusText || "", i.statusCode), this._running = !1) : i.content ? (this._logger.log(J.Trace, `(LongPolling transport) data received. ${Jl(i.content,this._options.logMessageContent)}.`), this.onreceive && this.onreceive(i.content)) : this._logger.log(J.Trace, "(LongPolling transport) Poll timed out, reissuing.")
                } catch (r) {
                    this._running ? r instanceof Kl ? this._logger.log(J.Trace, "(LongPolling transport) Poll timed out, reissuing.") : (this._closeError = r, this._running = !1) : this._logger.log(J.Trace, `(LongPolling transport) Poll errored after shutdown: ${r.message}`)
                }
            } finally {
                this._logger.log(J.Trace, "(LongPolling transport) Polling complete."), this.pollAborted || this._raiseOnClose()
            }
        })
    }
    send(e) {
        return Ot(this, null, function*() {
            return this._running ? yR(this._logger, "LongPolling", this._httpClient, this._url, e, this._options) : Promise.reject(new Error("Cannot send until the transport is connected"))
        })
    }
    stop() {
        return Ot(this, null, function*() {
            this._logger.log(J.Trace, "(LongPolling transport) Stopping polling."), this._running = !1, this._pollAbort.abort();
            try {
                yield this._receiving, this._logger.log(J.Trace, `(LongPolling transport) sending DELETE request to ${this._url}.`);
                let e = {},
                    [t, r] = ru();
                e[t] = r;
                let i = {
                    headers: Vt(Vt({}, e), this._options.headers),
                    timeout: this._options.timeout,
                    withCredentials: this._options.withCredentials
                };
                yield this._httpClient.delete(this._url, i), this._logger.log(J.Trace, "(LongPolling transport) DELETE request sent.")
            } finally {
                this._logger.log(J.Trace, "(LongPolling transport) Stop finished."), this._raiseOnClose()
            }
        })
    }
    _raiseOnClose() {
        if (this.onclose) {
            let e = "(LongPolling transport) Firing onclose event.";
            this._closeError && (e += " Error: " + this._closeError), this._logger.log(J.Trace, e), this.onclose(this._closeError)
        }
    }
};
u(Mb, "wn");
var rg = Mb,
    Fb = class Fb {
        constructor(e, t, r, i) {
            this._httpClient = e, this._accessToken = t, this._logger = r, this._options = i, this.onreceive = null, this.onclose = null
        }
        connect(e, t) {
            return Ot(this, null, function*() {
                return Qt.isRequired(e, "url"), Qt.isRequired(t, "transferFormat"), Qt.isIn(t, Mn, "transferFormat"), this._logger.log(J.Trace, "(SSE transport) Connecting."), this._url = e, this._accessToken && (e += (e.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(this._accessToken)}`), new Promise((r, i) => {
                    let o, s = !1;
                    if (t === Mn.Text) {
                        if (Xt.isBrowser || Xt.isWebWorker) o = new this._options.EventSource(e, {
                            withCredentials: this._options.withCredentials
                        });
                        else {
                            let a = this._httpClient.getCookieString(e),
                                l = {};
                            l.Cookie = a;
                            let [d, c] = ru();
                            l[d] = c, o = new this._options.EventSource(e, {
                                withCredentials: this._options.withCredentials,
                                headers: Vt(Vt({}, l), this._options.headers)
                            })
                        }
                        try {
                            o.onmessage = a => {
                                if (this.onreceive) try {
                                    this._logger.log(J.Trace, `(SSE transport) data received. ${Jl(a.data,this._options.logMessageContent)}.`), this.onreceive(a.data)
                                } catch (l) {
                                    return void this._close(l)
                                }
                            }, o.onerror = a => {
                                s ? this._close() : i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))
                            }, o.onopen = () => {
                                this._logger.log(J.Information, `SSE connected to ${this._url}`), this._eventSource = o, s = !0, r()
                            }
                        } catch (a) {
                            return void i(a)
                        }
                    } else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))
                })
            })
        }
        send(e) {
            return Ot(this, null, function*() {
                return this._eventSource ? yR(this._logger, "SSE", this._httpClient, this._url, e, this._options) : Promise.reject(new Error("Cannot send until the transport is connected"))
            })
        }
        stop() {
            return this._close(), Promise.resolve()
        }
        _close(e) {
            this._eventSource && (this._eventSource.close(), this._eventSource = void 0, this.onclose && this.onclose(e))
        }
    };
u(Fb, "Sn");
var J0 = Fb,
    Bb = class Bb {
        constructor(e, t, r, i, o, s) {
            this._logger = r, this._accessTokenFactory = t, this._logMessageContent = i, this._webSocketConstructor = o, this._httpClient = e, this.onreceive = null, this.onclose = null, this._headers = s
        }
        connect(e, t) {
            return Ot(this, null, function*() {
                let r;
                return Qt.isRequired(e, "url"), Qt.isRequired(t, "transferFormat"), Qt.isIn(t, Mn, "transferFormat"), this._logger.log(J.Trace, "(WebSockets transport) Connecting."), this._accessTokenFactory && (r = yield this._accessTokenFactory()), new Promise((i, o) => {
                    let s;
                    e = e.replace(/^http/, "ws");
                    let a = this._httpClient.getCookieString(e),
                        l = !1;
                    if (Xt.isNode || Xt.isReactNative) {
                        let d = {},
                            [c, h] = ru();
                        d[c] = h, r && (d[ro.Authorization] = `Bearer ${r}`), a && (d[ro.Cookie] = a), s = new this._webSocketConstructor(e, void 0, {
                            headers: Vt(Vt({}, d), this._headers)
                        })
                    } else r && (e += (e.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(r)}`);
                    s || (s = new this._webSocketConstructor(e)), t === Mn.Binary && (s.binaryType = "arraybuffer"), s.onopen = d => {
                        this._logger.log(J.Information, `WebSocket connected to ${e}.`), this._webSocket = s, l = !0, i()
                    }, s.onerror = d => {
                        let c = null;
                        c = typeof ErrorEvent != "undefined" && d instanceof ErrorEvent ? d.error : "There was an error with the transport", this._logger.log(J.Information, `(WebSockets transport) ${c}.`)
                    }, s.onmessage = d => {
                        if (this._logger.log(J.Trace, `(WebSockets transport) data received. ${Jl(d.data,this._logMessageContent)}.`), this.onreceive) try {
                            this.onreceive(d.data)
                        } catch (c) {
                            return void this._close(c)
                        }
                    }, s.onclose = d => {
                        if (l) this._close(d);
                        else {
                            let c = null;
                            c = typeof ErrorEvent != "undefined" && d instanceof ErrorEvent ? d.error : "WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.", o(new Error(c))
                        }
                    }
                })
            })
        }
        send(e) {
            return this._webSocket && this._webSocket.readyState === this._webSocketConstructor.OPEN ? (this._logger.log(J.Trace, `(WebSockets transport) sending data. ${Jl(e,this._logMessageContent)}.`), this._webSocket.send(e), Promise.resolve()) : Promise.reject("WebSocket is not in the OPEN state")
        }
        stop() {
            return this._webSocket && this._close(void 0), Promise.resolve()
        }
        _close(e) {
            this._webSocket && (this._webSocket.onclose = () => {}, this._webSocket.onmessage = () => {}, this._webSocket.onerror = () => {}, this._webSocket.close(), this._webSocket = void 0), this._logger.log(J.Trace, "(WebSockets transport) socket closed."), this.onclose && (!this._isCloseEvent(e) || e.wasClean !== !1 && e.code === 1e3 ? e instanceof Error ? this.onclose(e) : this.onclose() : this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))
        }
        _isCloseEvent(e) {
            return e && typeof e.wasClean == "boolean" && typeof e.code == "number"
        }
    };
u(Bb, "Cn");
var Z0 = Bb,
    jb = class jb {
        constructor(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            var r;
            if (this._stopPromiseResolver = () => {}, this.features = {}, this._negotiateVersion = 1, Qt.isRequired(e, "url"), this._logger = (r = t.logger) === void 0 ? new nu(J.Information) : r === null ? qs.instance : r.log !== void 0 ? r : new nu(r), this.baseUrl = this._resolveUrl(e), (t = t || {}).logMessageContent = t.logMessageContent !== void 0 && t.logMessageContent, typeof t.withCredentials != "boolean" && t.withCredentials !== void 0) throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");
            t.withCredentials = t.withCredentials === void 0 || t.withCredentials, t.timeout = t.timeout === void 0 ? 1e5 : t.timeout;
            let i = null,
                o = null;
            if (Xt.isNode && typeof Lr != "undefined") {
                let s = typeof __webpack_require__ == "function" ? __non_webpack_require__ : Lr;
                i = s("ws"), o = s("eventsource")
            }
            Xt.isNode || typeof WebSocket == "undefined" || t.WebSocket ? Xt.isNode && !t.WebSocket && i && (t.WebSocket = i) : t.WebSocket = WebSocket, Xt.isNode || typeof EventSource == "undefined" || t.EventSource ? Xt.isNode && !t.EventSource && o !== void 0 && (t.EventSource = o) : t.EventSource = EventSource, this._httpClient = new K0(t.httpClient || new z0(this._logger), t.accessTokenFactory), this._connectionState = "Disconnected", this._connectionStarted = !1, this._options = t, this.onreceive = null, this.onclose = null
        }
        start(e) {
            return Ot(this, null, function*() {
                if (e = e || Mn.Binary, Qt.isIn(e, Mn, "transferFormat"), this._logger.log(J.Debug, `Starting connection with transfer format '${Mn[e]}'.`), this._connectionState !== "Disconnected") return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));
                if (this._connectionState = "Connecting", this._startInternalPromise = this._startInternal(e), yield this._startInternalPromise, this._connectionState === "Disconnecting") {
                    let t = "Failed to start the HttpConnection before stop() was called.";
                    return this._logger.log(J.Error, t), yield this._stopPromise, Promise.reject(new br(t))
                }
                if (this._connectionState !== "Connected") {
                    let t = "HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";
                    return this._logger.log(J.Error, t), Promise.reject(new br(t))
                }
                this._connectionStarted = !0
            })
        }
        send(e) {
            return this._connectionState !== "Connected" ? Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")) : (this._sendQueue || (this._sendQueue = new X0(this.transport)), this._sendQueue.send(e))
        }
        stop(e) {
            return Ot(this, null, function*() {
                return this._connectionState === "Disconnected" ? (this._logger.log(J.Debug, `Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`), Promise.resolve()) : this._connectionState === "Disconnecting" ? (this._logger.log(J.Debug, `Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`), this._stopPromise) : (this._connectionState = "Disconnecting", this._stopPromise = new Promise(t => {
                    this._stopPromiseResolver = t
                }), yield this._stopInternal(e), void(yield this._stopPromise))
            })
        }
        _stopInternal(e) {
            return Ot(this, null, function*() {
                this._stopError = e;
                try {
                    yield this._startInternalPromise
                } catch (t) {}
                if (this.transport) {
                    try {
                        yield this.transport.stop()
                    } catch (t) {
                        this._logger.log(J.Error, `HttpConnection.transport.stop() threw error '${t}'.`), this._stopConnection()
                    }
                    this.transport = void 0
                } else this._logger.log(J.Debug, "HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")
            })
        }
        _startInternal(e) {
            return Ot(this, null, function*() {
                let t = this.baseUrl;
                this._accessTokenFactory = this._options.accessTokenFactory, this._httpClient._accessTokenFactory = this._accessTokenFactory;
                try {
                    if (this._options.skipNegotiation) {
                        if (this._options.transport !== fn.WebSockets) throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");
                        this.transport = this._constructTransport(fn.WebSockets), yield this._startTransport(t, e)
                    } else {
                        let r = null,
                            i = 0;
                        do {
                            if (r = yield this._getNegotiationResponse(t), this._connectionState === "Disconnecting" || this._connectionState === "Disconnected") throw new br("The connection was stopped during negotiation.");
                            if (r.error) throw new Error(r.error);
                            if (r.ProtocolVersion) throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");
                            if (r.url && (t = r.url), r.accessToken) {
                                let o = r.accessToken;
                                this._accessTokenFactory = () => o, this._httpClient._accessToken = o, this._httpClient._accessTokenFactory = void 0
                            }
                            i++
                        } while (r.url && i < 100);
                        if (i === 100 && r.url) throw new Error("Negotiate redirection limit exceeded.");
                        yield this._createTransport(t, this._options.transport, r, e)
                    }
                    this.transport instanceof rg && (this.features.inherentKeepAlive = !0), this._connectionState === "Connecting" && (this._logger.log(J.Debug, "The HttpConnection connected successfully."), this._connectionState = "Connected")
                } catch (r) {
                    return this._logger.log(J.Error, "Failed to start the connection: " + r), this._connectionState = "Disconnected", this.transport = void 0, this._stopPromiseResolver(), Promise.reject(r)
                }
            })
        }
        _getNegotiationResponse(e) {
            return Ot(this, null, function*() {
                let t = {},
                    [r, i] = ru();
                t[r] = i;
                let o = this._resolveNegotiateUrl(e);
                this._logger.log(J.Debug, `Sending negotiation request: ${o}.`);
                try {
                    let s = yield this._httpClient.post(o, {
                        content: "",
                        headers: Vt(Vt({}, t), this._options.headers),
                        timeout: this._options.timeout,
                        withCredentials: this._options.withCredentials
                    });
                    if (s.statusCode !== 200) return Promise.reject(new Error(`Unexpected status code returned from negotiate '${s.statusCode}'`));
                    let a = JSON.parse(s.content);
                    return (!a.negotiateVersion || a.negotiateVersion < 1) && (a.connectionToken = a.connectionId), a
                } catch (s) {
                    let a = "Failed to complete negotiation with the server: " + s;
                    return s instanceof Ko && s.statusCode === 404 && (a += " Either this is not a SignalR endpoint or there is a proxy blocking the connection."), this._logger.log(J.Error, a), Promise.reject(new B0(a))
                }
            })
        }
        _createConnectUrl(e, t) {
            return t ? e + (e.indexOf("?") === -1 ? "?" : "&") + `id=${t}` : e
        }
        _createTransport(e, t, r, i) {
            return Ot(this, null, function*() {
                let o = this._createConnectUrl(e, r.connectionToken);
                if (this._isITransport(t)) return this._logger.log(J.Debug, "Connection was provided an instance of ITransport, using that directly."), this.transport = t, yield this._startTransport(o, i), void(this.connectionId = r.connectionId);
                let s = [],
                    a = r.availableTransports || [],
                    l = r;
                for (let d of a) {
                    let c = this._resolveTransportOrError(d, t, i);
                    if (c instanceof Error) s.push(`${d.transport} failed:`), s.push(c);
                    else if (this._isITransport(c)) {
                        if (this.transport = c, !l) {
                            try {
                                l = yield this._getNegotiationResponse(e)
                            } catch (h) {
                                return Promise.reject(h)
                            }
                            o = this._createConnectUrl(e, l.connectionToken)
                        }
                        try {
                            return yield this._startTransport(o, i), void(this.connectionId = l.connectionId)
                        } catch (h) {
                            if (this._logger.log(J.Error, `Failed to start the transport '${d.transport}': ${h}`), l = void 0, s.push(new F0(`${d.transport} failed: ${h}`, fn[d.transport])), this._connectionState !== "Connecting") {
                                let f = "Failed to select transport before stop() was called.";
                                return this._logger.log(J.Debug, f), Promise.reject(new br(f))
                            }
                        }
                    }
                }
                return s.length > 0 ? Promise.reject(new j0(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`, s)) : Promise.reject(new Error("None of the transports supported by the client are supported by the server."))
            })
        }
        _constructTransport(e) {
            switch (e) {
                case fn.WebSockets:
                    if (!this._options.WebSocket) throw new Error("'WebSocket' is not supported in your environment.");
                    return new Z0(this._httpClient, this._accessTokenFactory, this._logger, this._options.logMessageContent, this._options.WebSocket, this._options.headers || {});
                case fn.ServerSentEvents:
                    if (!this._options.EventSource) throw new Error("'EventSource' is not supported in your environment.");
                    return new J0(this._httpClient, this._httpClient._accessToken, this._logger, this._options);
                case fn.LongPolling:
                    return new rg(this._httpClient, this._logger, this._options);
                default:
                    throw new Error(`Unknown transport: ${e}.`)
            }
        }
        _startTransport(e, t) {
            return this.transport.onreceive = this.onreceive, this.transport.onclose = r => this._stopConnection(r), this.transport.connect(e, t)
        }
        _resolveTransportOrError(e, t, r) {
            let i = fn[e.transport];
            if (i == null) return this._logger.log(J.Debug, `Skipping transport '${e.transport}' because it is not supported by this client.`), new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);
            if (! function(o, s) {
                    return !o || (s & o) != 0
                }(t, i)) return this._logger.log(J.Debug, `Skipping transport '${fn[i]}' because it was disabled by the client.`), new M0(`'${fn[i]}' is disabled by the client.`, i);
            if (!(e.transferFormats.map(o => Mn[o]).indexOf(r) >= 0)) return this._logger.log(J.Debug, `Skipping transport '${fn[i]}' because it does not support the requested transfer format '${Mn[r]}'.`), new Error(`'${fn[i]}' does not support ${Mn[r]}.`);
            if (i === fn.WebSockets && !this._options.WebSocket || i === fn.ServerSentEvents && !this._options.EventSource) return this._logger.log(J.Debug, `Skipping transport '${fn[i]}' because it is not supported in your environment.'`), new U0(`'${fn[i]}' is not supported in your environment.`, i);
            this._logger.log(J.Debug, `Selecting transport '${fn[i]}'.`);
            try {
                return this._constructTransport(i)
            } catch (o) {
                return o
            }
        }
        _isITransport(e) {
            return e && typeof e == "object" && "connect" in e
        }
        _stopConnection(e) {
            if (this._logger.log(J.Debug, `HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`), this.transport = void 0, e = this._stopError || e, this._stopError = void 0, this._connectionState !== "Disconnected") {
                if (this._connectionState === "Connecting") throw this._logger.log(J.Warning, `Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`), new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);
                if (this._connectionState === "Disconnecting" && this._stopPromiseResolver(), e ? this._logger.log(J.Error, `Connection disconnected with error '${e}'.`) : this._logger.log(J.Information, "Connection disconnected."), this._sendQueue && (this._sendQueue.stop().catch(t => {
                        this._logger.log(J.Error, `TransportSendQueue.stop() threw error '${t}'.`)
                    }), this._sendQueue = void 0), this.connectionId = void 0, this._connectionState = "Disconnected", this._connectionStarted) {
                    this._connectionStarted = !1;
                    try {
                        this.onclose && this.onclose(e)
                    } catch (t) {
                        this._logger.log(J.Error, `HttpConnection.onclose(${e}) threw error '${t}'.`)
                    }
                }
            } else this._logger.log(J.Debug, `Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)
        }
        _resolveUrl(e) {
            if (e.lastIndexOf("https://", 0) === 0 || e.lastIndexOf("http://", 0) === 0) return e;
            if (!Xt.isBrowser) throw new Error(`Cannot resolve '${e}'.`);
            let t = window.document.createElement("a");
            return t.href = e, this._logger.log(J.Information, `Normalizing '${e}' to '${t.href}'.`), t.href
        }
        _resolveNegotiateUrl(e) {
            let t = e.indexOf("?"),
                r = e.substring(0, t === -1 ? e.length : t);
            return r[r.length - 1] !== "/" && (r += "/"), r += "negotiate", r += t === -1 ? "" : e.substring(t), r.indexOf("negotiateVersion") === -1 && (r += t === -1 ? "?" : "&", r += "negotiateVersion=" + this._negotiateVersion), r
        }
    };
u(jb, "En");
var Y0 = jb,
    dg = class dg {
        constructor(e) {
            this._transport = e, this._buffer = [], this._executing = !0, this._sendBufferedData = new Ka, this._transportResult = new Ka, this._sendLoopPromise = this._sendLoop()
        }
        send(e) {
            return this._bufferData(e), this._transportResult || (this._transportResult = new Ka), this._transportResult.promise
        }
        stop() {
            return this._executing = !1, this._sendBufferedData.resolve(), this._sendLoopPromise
        }
        _bufferData(e) {
            if (this._buffer.length && typeof this._buffer[0] != typeof e) throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);
            this._buffer.push(e), this._sendBufferedData.resolve()
        }
        _sendLoop() {
            return Ot(this, null, function*() {
                for (;;) {
                    if (yield this._sendBufferedData.promise, !this._executing) {
                        this._transportResult && this._transportResult.reject("Connection stopped.");
                        break
                    }
                    this._sendBufferedData = new Ka;
                    let e = this._transportResult;
                    this._transportResult = void 0;
                    let t = typeof this._buffer[0] == "string" ? this._buffer.join("") : dg._concatBuffers(this._buffer);
                    this._buffer.length = 0;
                    try {
                        yield this._transport.send(t), e.resolve()
                    } catch (r) {
                        e.reject(r)
                    }
                }
            })
        }
        static _concatBuffers(e) {
            let t = e.map(o => o.byteLength).reduce((o, s) => o + s),
                r = new Uint8Array(t),
                i = 0;
            for (let o of e) r.set(new Uint8Array(o), i), i += o.byteLength;
            return r.buffer
        }
    };
u(dg, "kn");
var X0 = dg,
    $b = class $b {
        constructor() {
            this.promise = new Promise((e, t) => [this._resolver, this._rejecter] = [e, t])
        }
        resolve() {
            this._resolver()
        }
        reject(e) {
            this._rejecter(e)
        }
    };
u($b, "Tn");
var Ka = $b,
    Vb = class Vb {
        constructor() {
            this.name = "json", this.version = 1, this.transferFormat = Mn.Text
        }
        parseMessages(e, t) {
            if (typeof e != "string") throw new Error("Invalid input for JSON hub protocol. Expected a string.");
            if (!e) return [];
            t === null && (t = qs.instance);
            let r = ii.parse(e),
                i = [];
            for (let o of r) {
                let s = JSON.parse(o);
                if (typeof s.type != "number") throw new Error("Invalid payload.");
                switch (s.type) {
                    case Dt.Invocation:
                        this._isInvocationMessage(s);
                        break;
                    case Dt.StreamItem:
                        this._isStreamItemMessage(s);
                        break;
                    case Dt.Completion:
                        this._isCompletionMessage(s);
                        break;
                    case Dt.Ping:
                    case Dt.Close:
                        break;
                    default:
                        t.log(J.Information, "Unknown message type '" + s.type + "' ignored.");
                        continue
                }
                i.push(s)
            }
            return i
        }
        writeMessage(e) {
            return ii.write(JSON.stringify(e))
        }
        _isInvocationMessage(e) {
            this._assertNotEmptyString(e.target, "Invalid payload for Invocation message."), e.invocationId !== void 0 && this._assertNotEmptyString(e.invocationId, "Invalid payload for Invocation message.")
        }
        _isStreamItemMessage(e) {
            if (this._assertNotEmptyString(e.invocationId, "Invalid payload for StreamItem message."), e.item === void 0) throw new Error("Invalid payload for StreamItem message.")
        }
        _isCompletionMessage(e) {
            if (e.result && e.error) throw new Error("Invalid payload for Completion message.");
            !e.result && e.error && this._assertNotEmptyString(e.error, "Invalid payload for Completion message."), this._assertNotEmptyString(e.invocationId, "Invalid payload for Completion message.")
        }
        _assertNotEmptyString(e, t) {
            if (typeof e != "string" || e === "") throw new Error(t)
        }
    };
u(Vb, "In");
var Q0 = Vb,
    CF = {
        trace: J.Trace,
        debug: J.Debug,
        info: J.Information,
        information: J.Information,
        warn: J.Warning,
        warning: J.Warning,
        error: J.Error,
        critical: J.Critical,
        none: J.None
    },
    Hb = class Hb {
        configureLogging(e) {
            if (Qt.isRequired(e, "logging"), e.log !== void 0) this.logger = e;
            else if (typeof e == "string") {
                let t = function(r) {
                    let i = CF[r.toLowerCase()];
                    if (i !== void 0) return i;
                    throw new Error(`Unknown log level: ${r}`)
                }(e);
                this.logger = new nu(t)
            } else this.logger = new nu(e);
            return this
        }
        withUrl(e, t) {
            return Qt.isRequired(e, "url"), Qt.isNotEmpty(e, "url"), this.url = e, this.httpConnectionOptions = typeof t == "object" ? Vt(Vt({}, this.httpConnectionOptions), t) : Vo(Vt({}, this.httpConnectionOptions), {
                transport: t
            }), this
        }
        withHubProtocol(e) {
            return Qt.isRequired(e, "protocol"), this.protocol = e, this
        }
        withAutomaticReconnect(e) {
            if (this.reconnectPolicy) throw new Error("A reconnectPolicy has already been set.");
            return e ? Array.isArray(e) ? this.reconnectPolicy = new ng(e) : this.reconnectPolicy = e : this.reconnectPolicy = new ng, this
        }
        build() {
            let e = this.httpConnectionOptions || {};
            if (e.logger === void 0 && (e.logger = this.logger), !this.url) throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");
            let t = new Y0(this.url, e);
            return G0.create(t, this.logger || qs.instance, this.protocol || new Q0, this.reconnectPolicy)
        }
    };
u(Hb, "Rn");
var ig = Hb,
    RF = u(n => {
        let {
            builder: e = new ig,
            hubEndpoint: t,
            appUrl: r,
            logger: i,
            getToken: o
        } = n;
        if (!t || !r) throw new Error("The AppUrl and HubEndpoint must be defined in order to use SignalR communications");
        let s = e.withUrl(new URL(t, r).href, {
            accessTokenFactory: u(() => Ge(void 0, void 0, void 0, function*() {
                return (yield function(l) {
                    return Ge(this, void 0, void 0, function*() {
                        var d;
                        return l && (d = yield l()) !== null && d !== void 0 ? d : ""
                    })
                }(o)).replace("Bearer ", "")
            }), "accessTokenFactory")
        }).withAutomaticReconnect();
        return i && s.configureLogging({
            log: u((a, l) => {
                var d, c;
                switch (a) {
                    case J.Information:
                    case J.Trace:
                    case J.Debug:
                    case J.Warning:
                        (d = i.debug) === null || d === void 0 || d.call(i, {
                            category: "SignalRHttpClient",
                            message: `HubConnection ${l}`
                        });
                        break;
                    case J.Error:
                    case J.Critical:
                        (c = i.error) === null || c === void 0 || c.call(i, {
                            category: "SignalRHttpClient",
                            message: `Handler Error: HubConnection ${l}`,
                            errorCode: it.Communication_Default,
                            error: new Error(l)
                        })
                }
            }, "log")
        }), s.build()
    }, "An"),
    eb, xl, Uf, Pl, to, kl, Mf, bR, Ja = "SignalRHttpClient",
    zb = class zb {
        constructor(e) {
            let {
                appUrl: t,
                localeHeader: r = "",
                getLocale: i,
                setLocale: o,
                logger: s,
                getToken: a
            } = e;
            eb.add(this), xl.set(this, void 0), Uf.set(this, void 0), Pl.set(this, void 0), to.set(this, void 0), kl.set(this, void 0), Mf.set(this, void 0), Ye(this, kl, D0(t), "f"), Ye(this, xl, r, "f"), Ye(this, Uf, i, "f"), Ye(this, Pl, o, "f"), Ye(this, to, s, "f"), Ye(this, Mf, a, "f")
        }
        executeRequest(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    payload: o,
                    headers: s,
                    contentType: a = _n.FormUrlEncoded,
                    useLocaleInfo: l = !1,
                    responseHandler: d,
                    hubConnectionBuilder: c = new ig
                } = t;
                return function*() {
                    var h, f, g, p, y, b, E, S, _, I, x, L, U, N;
                    (f = (h = X(r, to, "f")) === null || h === void 0 ? void 0 : h.setActiveSpanAsNonAggregable) === null || f === void 0 || f.call(h);
                    let j = RF({
                            builder: c,
                            hubEndpoint: "moduleservices/debugger/requestshub",
                            appUrl: X(r, kl, "f"),
                            logger: X(r, to, "f"),
                            getToken: X(r, Mf, "f")
                        }),
                        q = l ? (g = X(r, Uf, "f")) === null || g === void 0 ? void 0 : g.call(r) : void 0,
                        fe = Object.assign(Object.assign(Object.assign({}, s), q ? {
                            [X(r, xl, "f")]: q
                        } : {}), mR({
                            payload: o,
                            headers: s
                        }) ? {
                            "content-type": a
                        } : {});
                    try {
                        let K = o ? cb({
                            payload: o,
                            contentType: a
                        }) : void 0;
                        yield j.start();
                        let ae = yield j.invoke("ExecuteRequest", new URL(i, X(r, kl, "f")).pathname, K, fe);
                        yield j.stop(), (y = (p = X(r, to, "f")) === null || p === void 0 ? void 0 : p.debug) === null || y === void 0 || y.call(p, {
                            category: Ja,
                            message: `ExecuteRequest ${i}`
                        });
                        let Z = zf(ae == null ? void 0 : ae.ResponseBody, X(r, to, "f"), Ja);
                        if (!(ae != null && ae.ResponseStatusCode) || ae.ResponseStatusCode < 200 || ae.ResponseStatusCode > 299) {
                            let ne = (S = (E = (b = ae == null ? void 0 : ae.ResponseStatusCode) === null || b === void 0 ? void 0 : b.toString) === null || E === void 0 ? void 0 : E.call(b)) !== null && S !== void 0 ? S : "",
                                ue = hg(ne);
                            throw new wr((I = (_ = Z == null ? void 0 : Z.exception) === null || _ === void 0 ? void 0 : _.message) !== null && I !== void 0 ? I : "Network Error", (L = (x = Z == null ? void 0 : Z.exception) === null || x === void 0 ? void 0 : x.errorCode) !== null && L !== void 0 ? L : ue, ne, Z, Ja)
                        }
                        if (l && X(r, Pl, "f") && (ae != null && ae.ResponseHeaders) && lb({
                                responseHeaders: ae.ResponseHeaders,
                                localeHeader: X(r, xl, "f"),
                                currentLocale: q,
                                setLocale: X(r, Pl, "f")
                            }), typeof d == "function") try {
                            d({
                                data: Z,
                                responseHeaders: ae == null ? void 0 : ae.ResponseHeaders
                            })
                        } catch (ne) {
                            (N = (U = X(r, to, "f")) === null || U === void 0 ? void 0 : U.error) === null || N === void 0 || N.call(U, {
                                category: Ja,
                                message: `ExecuteRequest ${i}`,
                                errorCode: it.Communication_Default,
                                error: ne
                            })
                        }
                        return Z
                    } catch (K) {
                        throw yield j == null ? void 0 : j.stop(), X(r, eb, "m", bR).call(r, K, i)
                    }
                }()
            })
        }
    };
u(zb, "Wn");
var tb = zb,
    Ff, Ul, Bf;
xl = new WeakMap, Uf = new WeakMap, Pl = new WeakMap, to = new WeakMap, kl = new WeakMap, Mf = new WeakMap, eb = new WeakSet, bR = u(function(n, e) {
    var t, r, i, o;
    let s, a = it.Communication_Default;
    return n instanceof wr ? (a = hg((t = n.status) !== null && t !== void 0 ? t : ""), s = n) : s = new wr(`ExecuteRequest ${e}`, a, void 0, void 0, Ja), (i = (r = X(this, to, "f")) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, {
        category: Ja,
        message: `ExecuteRequest ${e} - ${(o=n==null?void 0:n.message)!==null&&o!==void 0?o:""}`,
        errorCode: a,
        error: n
    }), s
}, "Un");
var OF = u(n => {
        let {
            appUrl: e,
            localeHeader: t,
            getLocale: r,
            setLocale: i,
            logger: o,
            getToken: s
        } = n;
        return new tb({
            appUrl: e,
            localeHeader: t,
            getLocale: r,
            setLocale: i,
            logger: o,
            getToken: s
        })
    }, "Bn"),
    Wb = class Wb {
        constructor(e) {
            let {
                appUrl: t,
                localeHeader: r,
                getLocale: i,
                setLocale: o,
                logger: s,
                getToken: a,
                signalRClientInstance: l = OF({
                    appUrl: t,
                    localeHeader: r,
                    getLocale: i,
                    setLocale: o,
                    logger: s,
                    getToken: a
                }),
                alternateHttpClientInstance: d
            } = e;
            Ff.set(this, void 0), Ul.set(this, void 0), Bf.set(this, void 0), Ye(this, Ff, l, "f"), Ye(this, Ul, d, "f"), Ye(this, Bf, s, "f")
        }
        post(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    payload: o,
                    headers: s,
                    contentType: a,
                    timeout: l,
                    timeoutHandler: d,
                    useLocaleInfo: c,
                    responseHandler: h
                } = t;
                return function*() {
                    return Xa(X(r, Bf, "f"), "POST", () => X(r, Ff, "f").executeRequest({
                        url: i,
                        payload: o,
                        headers: s,
                        contentType: a,
                        useLocaleInfo: c,
                        timeout: l,
                        timeoutHandler: d,
                        responseHandler: h
                    }))
                }()
            })
        }
        get(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    params: o,
                    headers: s,
                    responseType: a,
                    useLocaleInfo: l,
                    timeout: d,
                    timeoutHandler: c,
                    baseURL: h
                } = t;
                return function*() {
                    return X(r, Ul, "f").get({
                        url: i,
                        params: o,
                        headers: s,
                        responseType: a,
                        useLocaleInfo: l,
                        timeout: d,
                        timeoutHandler: c,
                        baseURL: h
                    })
                }()
            })
        }
        getResponseUrl(e) {
            return Ge(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: l,
                    timeoutHandler: d,
                    baseURL: c
                } = t;
                return function*() {
                    return X(r, Ul, "f").getResponseUrl({
                        url: i,
                        params: o,
                        headers: s,
                        useLocaleInfo: a,
                        timeout: l,
                        timeoutHandler: d,
                        baseURL: c
                    })
                }()
            })
        }
    };
u(Wb, "zn");
var og = Wb,
    Go, Vs, ql, Gl, sg, ag, Hs, ug, KC, JC, ZC, jf;
Ff = new WeakMap, Ul = new WeakMap, Bf = new WeakMap;
var qb = class qb {
    constructor(e) {
        let {
            isHealthy: t = !1,
            healthCheckIntervalInSeconds: r = 1800,
            healthCheckEndpoint: i = "ping",
            healingTimeoutDelayInSeconds: o = 30,
            healthCheckNeededPathFilter: s,
            logger: a
        } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        Go.add(this), Vs.set(this, void 0), ql.set(this, void 0), Gl.set(this, void 0), sg.set(this, void 0), ag.set(this, void 0), Hs.set(this, void 0), ug.set(this, void 0), Ye(this, Vs, e, "f"), Ye(this, ql, 1e3 * r, "f"), Ye(this, Gl, i, "f"), Ye(this, sg, o, "f"), Ye(this, ag, s, "f"), t && Ye(this, Hs, Date.now(), "f"), Ye(this, ug, a, "f")
    }
    setHealthCheckInterval(e) {
        Ye(this, ql, 1e3 * e, "f")
    }
    post(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                payload: o,
                params: s,
                headers: a,
                contentType: l,
                timeout: d,
                timeoutHandler: c,
                useLocaleInfo: h,
                baseURL: f,
                responseHandler: g
            } = t;
            return function*() {
                return X(r, Go, "m", jf).call(r, p => X(r, Vs, "f").post({
                    url: i,
                    payload: o,
                    params: s,
                    headers: a,
                    contentType: l,
                    timeout: p,
                    timeoutHandler: c,
                    useLocaleInfo: h,
                    baseURL: f,
                    responseHandler: g
                }), i, f, d)
            }()
        })
    }
    get(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                params: o,
                headers: s,
                useLocaleInfo: a,
                timeout: l,
                timeoutHandler: d,
                responseType: c,
                baseURL: h
            } = t;
            return function*() {
                return X(r, Go, "m", jf).call(r, f => X(r, Vs, "f").get({
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: f,
                    timeoutHandler: d,
                    responseType: c,
                    baseURL: h
                }), i, h, l)
            }()
        })
    }
    getResponseUrl(e) {
        return Ge(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                params: o,
                headers: s,
                useLocaleInfo: a,
                timeout: l,
                timeoutHandler: d,
                baseURL: c
            } = t;
            return function*() {
                return X(r, Go, "m", jf).call(r, h => X(r, Vs, "f").getResponseUrl({
                    url: i,
                    params: o,
                    headers: s,
                    useLocaleInfo: a,
                    timeout: h,
                    timeoutHandler: d,
                    baseURL: c
                }), i, c, l)
            }()
        })
    }
};
u(qb, "ni");
var Zl = qb;

function wR(n) {
    return n.errorCode === it.Communication_Timeout || n.errorCode === it.Communication_Unavailable || n.errorCode === it.Communication_Internal_Server_Error
}
u(wR, "ii");
var $f, Ml, Vf, nb;
Vs = new WeakMap, ql = new WeakMap, Gl = new WeakMap, sg = new WeakMap, ag = new WeakMap, Hs = new WeakMap, ug = new WeakMap, Go = new WeakSet, KC = u(function(n, e) {
    var t, r;
    let i = (r = (t = X(this, ag, "f")) === null || t === void 0 ? void 0 : t.isPathAcceptable(n, e)) === null || r === void 0 || r,
        o = !X(this, Hs, "f") || Date.now() - X(this, Hs, "f") > X(this, ql, "f");
    return i && o
}, "ei"), JC = u(function() {
    return Ge(this, void 0, void 0, function*() {
        var n, e;
        (e = (n = X(this, ug, "f")) === null || n === void 0 ? void 0 : n.debug) === null || e === void 0 || e.call(n, {
            category: "HttpClientWithHealthCheck",
            message: `Checking healthiness at ${X(this,Gl,"f")}`
        });
        try {
            return yield X(this, Vs, "f").get({
                url: X(this, Gl, "f"),
                timeout: 2
            }), Ye(this, Hs, Date.now(), "f"), !0
        } catch (t) {
            return !1
        }
    })
}, "ti"), ZC = u(function(n, e, t) {
    return Ge(this, void 0, void 0, function*() {
        return t === void 0 || !X(this, Go, "m", KC).call(this, n, e) || (yield X(this, Go, "m", JC).call(this)) ? t : t + X(this, sg, "f")
    })
}, "oi"), jf = u(function(n, e, t, r) {
    return Ge(this, void 0, void 0, function*() {
        let i = yield X(this, Go, "m", ZC).call(this, e, t, r);
        try {
            return yield n(i)
        } finally {
            Ye(this, Hs, Date.now(), "f")
        }
    })
}, "ri");
var Gb = class Gb {
    constructor() {
        let {
            acceptionRules: e = [],
            rejectionRules: t = []
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        $f.add(this), Ml.set(this, void 0), Vf.set(this, void 0), Ye(this, Ml, e, "f"), Ye(this, Vf, t, "f")
    }
    isPathAcceptable(e, t) {
        let r = (t ? `${t}/${e}` : e).replace(/\/+/g, "/"),
            i = X(this, Ml, "f").length === 0 || X(this, Ml, "f").some(s => X(this, $f, "m", nb).call(this, s, r)),
            o = X(this, Vf, "f").some(s => X(this, $f, "m", nb).call(this, s, r));
        return i && !o
    }
};
u(Gb, "ui");
var cg = Gb;
Ml = new WeakMap, Vf = new WeakMap, $f = new WeakSet, nb = u(function(n, e) {
    return n instanceof RegExp ? n.test(e) : !!n && e.startsWith(n)
}, "li");

function se(n, e, t, r) {
    return new(t || (t = Promise))(function(i, o) {
        function s(d) {
            try {
                l(r.next(d))
            } catch (c) {
                o(c)
            }
        }
        u(s, "s");

        function a(d) {
            try {
                l(r.throw(d))
            } catch (c) {
                o(c)
            }
        }
        u(a, "a");

        function l(d) {
            var c;
            d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                h(c)
            })).then(s, a)
        }
        u(l, "u"), l((r = r.apply(n, e || [])).next())
    })
}
u(se, "i");

function D(n, e, t, r) {
    if (t === "a" && !r) throw new TypeError("Private accessor was defined without a getter");
    if (typeof e == "function" ? n !== e || !r : !e.has(n)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return t === "m" ? r : t === "a" ? r.call(n) : r ? r.value : e.get(n)
}
u(D, "o");

function ge(n, e, t, r, i) {
    if (r === "m") throw new TypeError("Private method is not writable");
    if (r === "a" && !i) throw new TypeError("Private accessor was defined without a setter");
    if (typeof e == "function" ? n !== e || !i : !e.has(n)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return r === "a" ? i.call(n, t) : i ? i.value = t : e.set(n, t), t
}
u(ge, "s");
var DF = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {},
    ta = "1.9.0",
    TR = /^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,
    NF = function(n) {
        var e = new Set([n]),
            t = new Set,
            r = n.match(TR);
        if (!r) return function() {
            return !1
        };
        var i = +r[1],
            o = +r[2],
            s = +r[3];
        if (r[4] != null) return function(d) {
            return d === n
        };

        function a(d) {
            return t.add(d), !1
        }
        u(a, "a");

        function l(d) {
            return e.add(d), !0
        }
        return u(l, "u"),
            function(d) {
                if (e.has(d)) return !0;
                if (t.has(d)) return !1;
                var c = d.match(TR);
                if (!c) return a(d);
                var h = +c[1],
                    f = +c[2],
                    g = +c[3];
                return c[4] != null || i !== h ? a(d) : i === 0 ? o === f && s <= g ? l(d) : a(d) : o <= f ? l(d) : a(d)
            }
    }(ta),
    LF = ta.split(".")[0],
    _d = Symbol.for("opentelemetry.js.api." + LF),
    Sd = DF;

function Od(n, e, t, r) {
    var i;
    r === void 0 && (r = !1);
    var o = Sd[_d] = (i = Sd[_d]) !== null && i !== void 0 ? i : {
        version: ta
    };
    if (!r && o[n]) {
        var s = new Error("@opentelemetry/api: Attempted duplicate registration of API: " + n);
        return t.error(s.stack || s.message), !1
    }
    return o.version !== ta ? (s = new Error("@opentelemetry/api: Registration of version v" + o.version + " for " + n + " does not match previously registered API v" + ta), t.error(s.stack || s.message), !1) : (o[n] = e, t.debug("@opentelemetry/api: Registered a global for " + n + " v" + ta + "."), !0)
}
u(Od, "d");

function oa(n) {
    var e, t, r = (e = Sd[_d]) === null || e === void 0 ? void 0 : e.version;
    if (r && NF(r)) return (t = Sd[_d]) === null || t === void 0 ? void 0 : t[n]
}
u(oa, "g");

function Dd(n, e) {
    e.debug("@opentelemetry/api: Unregistering a global for " + n + " v" + ta + ".");
    var t = Sd[_d];
    t && delete t[n]
}
u(Dd, "v");
var Yt, xF = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    PF = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    kF = function() {
        function n(e) {
            this._namespace = e.namespace || "DiagComponentLogger"
        }
        return u(n, "t"), n.prototype.debug = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ed("debug", this._namespace, e)
        }, n.prototype.error = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ed("error", this._namespace, e)
        }, n.prototype.info = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ed("info", this._namespace, e)
        }, n.prototype.warn = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ed("warn", this._namespace, e)
        }, n.prototype.verbose = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ed("verbose", this._namespace, e)
        }, n
    }();

function ed(n, e, t) {
    var r = oa("diag");
    if (r) return t.unshift(e), r[n].apply(r, PF([], xF(t), !1))
}
u(ed, "b");
(function(n) {
    n[n.NONE = 0] = "NONE", n[n.ERROR = 30] = "ERROR", n[n.WARN = 50] = "WARN", n[n.INFO = 60] = "INFO", n[n.DEBUG = 70] = "DEBUG", n[n.VERBOSE = 80] = "VERBOSE", n[n.ALL = 9999] = "ALL"
})(Yt || (Yt = {}));
var UF = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    MF = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    Mi = function() {
        function n() {
            function e(r) {
                return function() {
                    for (var i = [], o = 0; o < arguments.length; o++) i[o] = arguments[o];
                    var s = oa("diag");
                    if (s) return s[r].apply(s, MF([], UF(i), !1))
                }
            }
            u(e, "t");
            var t = this;
            t.setLogger = function(r, i) {
                var o, s, a;
                if (i === void 0 && (i = {
                        logLevel: Yt.INFO
                    }), r === t) {
                    var l = new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");
                    return t.error((o = l.stack) !== null && o !== void 0 ? o : l.message), !1
                }
                typeof i == "number" && (i = {
                    logLevel: i
                });
                var d = oa("diag"),
                    c = function(f, g) {
                        function p(y, b) {
                            var E = g[y];
                            return typeof E == "function" && f >= b ? E.bind(g) : function() {}
                        }
                        return u(p, "r"), f < Yt.NONE ? f = Yt.NONE : f > Yt.ALL && (f = Yt.ALL), g = g || {}, {
                            error: p("error", Yt.ERROR),
                            warn: p("warn", Yt.WARN),
                            info: p("info", Yt.INFO),
                            debug: p("debug", Yt.DEBUG),
                            verbose: p("verbose", Yt.VERBOSE)
                        }
                    }((s = i.logLevel) !== null && s !== void 0 ? s : Yt.INFO, r);
                if (d && !i.suppressOverrideMessage) {
                    var h = (a = new Error().stack) !== null && a !== void 0 ? a : "<failed to generate stacktrace>";
                    d.warn("Current logger will be overwritten from " + h), c.warn("Current logger will overwrite one already registered from " + h)
                }
                return Od("diag", c, t, !0)
            }, t.disable = function() {
                Dd("diag", t)
            }, t.createComponentLogger = function(r) {
                return new kF(r)
            }, t.verbose = e("verbose"), t.debug = e("debug"), t.info = e("info"), t.warn = e("warn"), t.error = e("error")
        }
        return u(n, "t"), n.instance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n
    }(),
    FF = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    BF = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    jF = function() {
        function n(e) {
            this._entries = e ? new Map(e) : new Map
        }
        return u(n, "t"), n.prototype.getEntry = function(e) {
            var t = this._entries.get(e);
            if (t) return Object.assign({}, t)
        }, n.prototype.getAllEntries = function() {
            return Array.from(this._entries.entries()).map(function(e) {
                var t = FF(e, 2);
                return [t[0], t[1]]
            })
        }, n.prototype.setEntry = function(e, t) {
            var r = new n(this._entries);
            return r._entries.set(e, t), r
        }, n.prototype.removeEntry = function(e) {
            var t = new n(this._entries);
            return t._entries.delete(e), t
        }, n.prototype.removeEntries = function() {
            for (var e, t, r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
            var o = new n(this._entries);
            try {
                for (var s = BF(r), a = s.next(); !a.done; a = s.next()) {
                    var l = a.value;
                    o._entries.delete(l)
                }
            } catch (d) {
                e = {
                    error: d
                }
            } finally {
                try {
                    a && !a.done && (t = s.return) && t.call(s)
                } finally {
                    if (e) throw e.error
                }
            }
            return o
        }, n.prototype.clear = function() {
            return new n
        }, n
    }(),
    $F = Symbol("BaggageEntryMetadata"),
    VF = Mi.instance();

function HF(n) {
    return n === void 0 && (n = {}), new jF(new Map(Object.entries(n)))
}
u(HF, "R");

function bT(n) {
    return Symbol.for(n)
}
u(bT, "P");
var fg, mo, zF = u(function n(e) {
        var t = this;
        t._currentContext = e ? new Map(e) : new Map, t.getValue = function(r) {
            return t._currentContext.get(r)
        }, t.setValue = function(r, i) {
            var o = new n(t._currentContext);
            return o._currentContext.set(r, i), o
        }, t.deleteValue = function(r) {
            var i = new n(t._currentContext);
            return i._currentContext.delete(r), i
        }
    }, "t"),
    uo = new zF,
    aa = (fg = u(function(n, e) {
        return fg = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, r) {
            t.__proto__ = r
        } || function(t, r) {
            for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i])
        }, fg(n, e)
    }, "C"), function(n, e) {
        if (typeof e != "function" && e !== null) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");

        function t() {
            this.constructor = n
        }
        u(t, "r"), fg(n, e), n.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t)
    }),
    WF = function() {
        function n() {}
        return u(n, "t"), n.prototype.createGauge = function(e, t) {
            return tB
        }, n.prototype.createHistogram = function(e, t) {
            return nB
        }, n.prototype.createCounter = function(e, t) {
            return eB
        }, n.prototype.createUpDownCounter = function(e, t) {
            return rB
        }, n.prototype.createObservableGauge = function(e, t) {
            return oB
        }, n.prototype.createObservableCounter = function(e, t) {
            return iB
        }, n.prototype.createObservableUpDownCounter = function(e, t) {
            return sB
        }, n.prototype.addBatchObservableCallback = function(e, t) {}, n.prototype.removeBatchObservableCallback = function(e) {}, n
    }(),
    Ap = u(function() {}, "B"),
    qF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e.prototype.add = function(t, r) {}, e
    }(Ap),
    GF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e.prototype.add = function(t, r) {}, e
    }(Ap),
    KF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e.prototype.record = function(t, r) {}, e
    }(Ap),
    JF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e.prototype.record = function(t, r) {}, e
    }(Ap),
    wT = function() {
        function n() {}
        return u(n, "t"), n.prototype.addCallback = function(e) {}, n.prototype.removeCallback = function(e) {}, n
    }(),
    ZF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e
    }(wT),
    YF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e
    }(wT),
    XF = function(n) {
        function e() {
            return n !== null && n.apply(this, arguments) || this
        }
        return u(e, "e"), aa(e, n), e
    }(wT),
    QF = new WF,
    eB = new qF,
    tB = new KF,
    nB = new JF,
    rB = new GF,
    iB = new ZF,
    oB = new YF,
    sB = new XF,
    aB = {
        get: u(function(n, e) {
            if (n != null) return n[e]
        }, "get"),
        keys: u(function(n) {
            return n == null ? [] : Object.keys(n)
        }, "keys")
    },
    uB = {
        set: u(function(n, e, t) {
            n != null && (n[e] = t)
        }, "set")
    },
    cB = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    lB = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    dB = function() {
        function n() {}
        return u(n, "t"), n.prototype.active = function() {
            return uo
        }, n.prototype.with = function(e, t, r) {
            for (var i = [], o = 3; o < arguments.length; o++) i[o - 3] = arguments[o];
            return t.call.apply(t, lB([r], cB(i), !1))
        }, n.prototype.bind = function(e, t) {
            return t
        }, n.prototype.enable = function() {
            return this
        }, n.prototype.disable = function() {
            return this
        }, n
    }(),
    hB = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    fB = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    Kb = "context",
    gB = new dB,
    Cp = function() {
        function n() {}
        return u(n, "t"), n.getInstance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n.prototype.setGlobalContextManager = function(e) {
            return Od(Kb, e, Mi.instance())
        }, n.prototype.active = function() {
            return this._getContextManager().active()
        }, n.prototype.with = function(e, t, r) {
            for (var i, o = [], s = 3; s < arguments.length; s++) o[s - 3] = arguments[s];
            return (i = this._getContextManager()).with.apply(i, fB([e, t, r], hB(o), !1))
        }, n.prototype.bind = function(e, t) {
            return this._getContextManager().bind(e, t)
        }, n.prototype._getContextManager = function() {
            return oa(Kb) || gB
        }, n.prototype.disable = function() {
            this._getContextManager().disable(), Dd(Kb, Mi.instance())
        }, n
    }();
(function(n) {
    n[n.NONE = 0] = "NONE", n[n.SAMPLED = 1] = "SAMPLED"
})(mo || (mo = {}));
var UO = "0000000000000000",
    MO = "00000000000000000000000000000000",
    FO = {
        traceId: MO,
        spanId: UO,
        traceFlags: mo.NONE
    },
    wd = function() {
        function n(e) {
            e === void 0 && (e = FO), this._spanContext = e
        }
        return u(n, "t"), n.prototype.spanContext = function() {
            return this._spanContext
        }, n.prototype.setAttribute = function(e, t) {
            return this
        }, n.prototype.setAttributes = function(e) {
            return this
        }, n.prototype.addEvent = function(e, t) {
            return this
        }, n.prototype.addLink = function(e) {
            return this
        }, n.prototype.addLinks = function(e) {
            return this
        }, n.prototype.setStatus = function(e) {
            return this
        }, n.prototype.updateName = function(e) {
            return this
        }, n.prototype.end = function(e) {}, n.prototype.isRecording = function() {
            return !1
        }, n.prototype.recordException = function(e, t) {}, n
    }(),
    TT = bT("OpenTelemetry Context Key SPAN");

function ET(n) {
    return n.getValue(TT) || void 0
}
u(ET, "vt");

function pB() {
    return ET(Cp.getInstance().active())
}
u(pB, "_t");

function _T(n, e) {
    return n.setValue(TT, e)
}
u(_T, "yt");

function mB(n) {
    return n.deleteValue(TT)
}
u(mB, "Tt");

function vB(n, e) {
    return _T(n, new wd(e))
}
u(vB, "mt");

function BO(n) {
    var e;
    return (e = ET(n)) === null || e === void 0 ? void 0 : e.spanContext()
}
u(BO, "bt");
var yB = /^([0-9a-f]{32})$/i,
    bB = /^[0-9a-f]{16}$/i;

function jO(n) {
    return yB.test(n) && n !== MO
}
u(jO, "Ot");

function Rp(n) {
    return jO(n.traceId) && (e = n.spanId, bB.test(e) && e !== UO);
    var e
}
u(Rp, "wt");

function wB(n) {
    return new wd(n)
}
u(wB, "Lt");
var Jb = Cp.getInstance(),
    $O = function() {
        function n() {}
        return u(n, "t"), n.prototype.startSpan = function(e, t, r) {
            if (r === void 0 && (r = Jb.active()), !!(t != null && t.root)) return new wd;
            var i, o = r && BO(r);
            return typeof(i = o) == "object" && typeof i.spanId == "string" && typeof i.traceId == "string" && typeof i.traceFlags == "number" && Rp(o) ? new wd(o) : new wd
        }, n.prototype.startActiveSpan = function(e, t, r, i) {
            var o, s, a;
            if (!(arguments.length < 2)) {
                arguments.length === 2 ? a = t : arguments.length === 3 ? (o = t, a = r) : (o = t, s = r, a = i);
                var l = s != null ? s : Jb.active(),
                    d = this.startSpan(e, o, l),
                    c = _T(l, d);
                return Jb.with(c, a, void 0, d)
            }
        }, n
    }(),
    tp, np, rp, TB = new $O,
    EB = function() {
        function n(e, t, r, i) {
            this._provider = e, this.name = t, this.version = r, this.options = i
        }
        return u(n, "t"), n.prototype.startSpan = function(e, t, r) {
            return this._getTracer().startSpan(e, t, r)
        }, n.prototype.startActiveSpan = function(e, t, r, i) {
            var o = this._getTracer();
            return Reflect.apply(o.startActiveSpan, o, arguments)
        }, n.prototype._getTracer = function() {
            if (this._delegate) return this._delegate;
            var e = this._provider.getDelegateTracer(this.name, this.version, this.options);
            return e ? (this._delegate = e, this._delegate) : TB
        }, n
    }(),
    _B = new(function() {
        function n() {}
        return u(n, "t"), n.prototype.getTracer = function(e, t, r) {
            return new $O
        }, n
    }()),
    ER = function() {
        function n() {}
        return u(n, "t"), n.prototype.getTracer = function(e, t, r) {
            var i;
            return (i = this.getDelegateTracer(e, t, r)) !== null && i !== void 0 ? i : new EB(this, e, t, r)
        }, n.prototype.getDelegate = function() {
            var e;
            return (e = this._delegate) !== null && e !== void 0 ? e : _B
        }, n.prototype.setDelegate = function(e) {
            this._delegate = e
        }, n.prototype.getDelegateTracer = function(e, t, r) {
            var i;
            return (i = this._delegate) === null || i === void 0 ? void 0 : i.getTracer(e, t, r)
        }, n
    }();
(function(n) {
    n[n.NOT_RECORD = 0] = "NOT_RECORD", n[n.RECORD = 1] = "RECORD", n[n.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED"
})(tp || (tp = {})),
function(n) {
    n[n.INTERNAL = 0] = "INTERNAL", n[n.SERVER = 1] = "SERVER", n[n.CLIENT = 2] = "CLIENT", n[n.PRODUCER = 3] = "PRODUCER", n[n.CONSUMER = 4] = "CONSUMER"
}(np || (np = {})),
function(n) {
    n[n.UNSET = 0] = "UNSET", n[n.OK = 1] = "OK", n[n.ERROR = 2] = "ERROR"
}(rp || (rp = {}));
var or = Cp.getInstance(),
    pt = Mi.instance(),
    SB = new(function() {
        function n() {}
        return u(n, "t"), n.prototype.getMeter = function(e, t, r) {
            return QF
        }, n
    }()),
    Zb = "metrics",
    IB = function() {
        function n() {}
        return u(n, "t"), n.getInstance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n.prototype.setGlobalMeterProvider = function(e) {
            return Od(Zb, e, Mi.instance())
        }, n.prototype.getMeterProvider = function() {
            return oa(Zb) || SB
        }, n.prototype.getMeter = function(e, t, r) {
            return this.getMeterProvider().getMeter(e, t, r)
        }, n.prototype.disable = function() {
            Dd(Zb, Mi.instance())
        }, n
    }().getInstance(),
    AB = function() {
        function n() {}
        return u(n, "t"), n.prototype.inject = function(e, t) {}, n.prototype.extract = function(e, t) {
            return e
        }, n.prototype.fields = function() {
            return []
        }, n
    }(),
    ST = bT("OpenTelemetry Baggage Key");

function VO(n) {
    return n.getValue(ST) || void 0
}
u(VO, "Zt");

function CB() {
    return VO(Cp.getInstance().active())
}
u(CB, "Vt");

function RB(n, e) {
    return n.setValue(ST, e)
}
u(RB, "Gt");

function OB(n) {
    return n.deleteValue(ST)
}
u(OB, "Ht");
var Yb = "propagation",
    DB = new AB,
    NB = function() {
        function n() {
            this.createBaggage = HF, this.getBaggage = VO, this.getActiveBaggage = CB, this.setBaggage = RB, this.deleteBaggage = OB
        }
        return u(n, "t"), n.getInstance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n.prototype.setGlobalPropagator = function(e) {
            return Od(Yb, e, Mi.instance())
        }, n.prototype.inject = function(e, t, r) {
            return r === void 0 && (r = uB), this._getGlobalPropagator().inject(e, t, r)
        }, n.prototype.extract = function(e, t, r) {
            return r === void 0 && (r = aB), this._getGlobalPropagator().extract(e, t, r)
        }, n.prototype.fields = function() {
            return this._getGlobalPropagator().fields()
        }, n.prototype.disable = function() {
            Dd(Yb, Mi.instance())
        }, n.prototype._getGlobalPropagator = function() {
            return oa(Yb) || DB
        }, n
    }(),
    co = NB.getInstance(),
    Xb = "trace",
    Gn = function() {
        function n() {
            this._proxyTracerProvider = new ER, this.wrapSpanContext = wB, this.isSpanContextValid = Rp, this.deleteSpan = mB, this.getSpan = ET, this.getActiveSpan = pB, this.getSpanContext = BO, this.setSpan = _T, this.setSpanContext = vB
        }
        return u(n, "t"), n.getInstance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n.prototype.setGlobalTracerProvider = function(e) {
            var t = Od(Xb, this._proxyTracerProvider, Mi.instance());
            return t && this._proxyTracerProvider.setDelegate(e), t
        }, n.prototype.getTracerProvider = function() {
            return oa(Xb) || this._proxyTracerProvider
        }, n.prototype.getTracer = function(e, t) {
            return this.getTracerProvider().getTracer(e, t)
        }, n.prototype.disable = function() {
            Dd(Xb, Mi.instance()), this._proxyTracerProvider = new ER
        }, n
    }().getInstance(),
    HO = bT("OpenTelemetry SDK Context Key SUPPRESS_TRACING");

function IT(n) {
    return n.getValue(HO) === !0
}
u(IT, "te");
var Qb = "baggage",
    LB = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    };

function xB(n) {
    var e = n.split(";");
    if (!(e.length <= 0)) {
        var t = e.shift();
        if (t) {
            var r = t.indexOf("=");
            if (!(r <= 0)) {
                var i, o, s = decodeURIComponent(t.substring(0, r).trim()),
                    a = decodeURIComponent(t.substring(r + 1).trim());
                return e.length > 0 && (typeof(o = e.join(";")) != "string" && (VF.error("Cannot create baggage metadata from unknown type: " + typeof o), o = ""), i = {
                    __TYPE__: $F,
                    toString: u(function() {
                        return o
                    }, "toString")
                }), {
                    key: s,
                    value: a,
                    metadata: i
                }
            }
        }
    }
}
u(xB, "ne");
var PB = function() {
        function n() {}
        return u(n, "t"), n.prototype.inject = function(e, t, r) {
            var i = co.getBaggage(e);
            if (i && !IT(e)) {
                var o = function(a) {
                        return a.getAllEntries().map(function(l) {
                            var d = LB(l, 2),
                                c = d[0],
                                h = d[1],
                                f = encodeURIComponent(c) + "=" + encodeURIComponent(h.value);
                            return h.metadata !== void 0 && (f += ";" + h.metadata.toString()), f
                        })
                    }(i).filter(function(a) {
                        return a.length <= 4096
                    }).slice(0, 180),
                    s = function(a) {
                        return a.reduce(function(l, d) {
                            var c = l + (l !== "" ? "," : "") + d;
                            return c.length > 8192 ? l : c
                        }, "")
                    }(o);
                s.length > 0 && r.set(t, Qb, s)
            }
        }, n.prototype.extract = function(e, t, r) {
            var i = r.get(t, Qb),
                o = Array.isArray(i) ? i.join(",") : i;
            if (!o) return e;
            var s = {};
            return o.length === 0 ? e : (o.split(",").forEach(function(a) {
                var l = xB(a);
                if (l) {
                    var d = {
                        value: l.value
                    };
                    l.metadata && (d.metadata = l.metadata), s[l.key] = d
                }
            }), Object.entries(s).length === 0 ? e : co.setBaggage(e, co.createBaggage(s)))
        }, n.prototype.fields = function() {
            return [Qb]
        }, n
    }(),
    zO = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    kB = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    };

function Tg(n) {
    var e, t, r = {};
    if (typeof n != "object" || n == null) return r;
    try {
        for (var i = zO(Object.entries(n)), o = i.next(); !o.done; o = i.next()) {
            var s = kB(o.value, 2),
                a = s[0],
                l = s[1];
            UB(a) ? WO(l) ? Array.isArray(l) ? r[a] = l.slice() : r[a] = l : pt.warn("Invalid attribute value set for key: " + a) : pt.warn("Invalid attribute key: " + a)
        }
    } catch (d) {
        e = {
            error: d
        }
    } finally {
        try {
            o && !o.done && (t = i.return) && t.call(i)
        } finally {
            if (e) throw e.error
        }
    }
    return r
}
u(Tg, "ae");

function UB(n) {
    return typeof n == "string" && n.length > 0
}
u(UB, "ue");

function WO(n) {
    return n == null || (Array.isArray(n) ? function(e) {
        var t, r, i;
        try {
            for (var o = zO(e), s = o.next(); !s.done; s = o.next()) {
                var a = s.value;
                if (a != null) {
                    if (!i) {
                        if (_R(a)) {
                            i = typeof a;
                            continue
                        }
                        return !1
                    }
                    if (typeof a !== i) return !1
                }
            }
        } catch (l) {
            t = {
                error: l
            }
        } finally {
            try {
                s && !s.done && (r = o.return) && r.call(o)
            } finally {
                if (t) throw t.error
            }
        }
        return !0
    }(n) : _R(n))
}
u(WO, "ce");

function _R(n) {
    switch (typeof n) {
        case "number":
        case "boolean":
        case "string":
            return !0
    }
    return !1
}
u(_R, "le");
var Ui, MB = u(function(n) {
    pt.error(function(e) {
        return typeof e == "string" ? e : JSON.stringify(function(t) {
            for (var r = {}, i = t; i !== null;) Object.getOwnPropertyNames(i).forEach(function(o) {
                if (!r[o]) {
                    var s = i[o];
                    s && (r[o] = String(s))
                }
            }), i = Object.getPrototypeOf(i);
            return r
        }(e))
    }(n))
}, "he");

function ip(n) {
    try {
        MB(n)
    } catch (e) {}
}
u(ip, "pe");
(function(n) {
    n.AlwaysOff = "always_off", n.AlwaysOn = "always_on", n.ParentBasedAlwaysOff = "parentbased_always_off", n.ParentBasedAlwaysOn = "parentbased_always_on", n.ParentBasedTraceIdRatio = "parentbased_traceidratio", n.TraceIdRatio = "traceidratio"
})(Ui || (Ui = {}));
var FB = ",",
    BB = ["OTEL_SDK_DISABLED"];

function jB(n) {
    return BB.indexOf(n) > -1
}
u(jB, "ve");
var $B = ["OTEL_BSP_EXPORT_TIMEOUT", "OTEL_BSP_MAX_EXPORT_BATCH_SIZE", "OTEL_BSP_MAX_QUEUE_SIZE", "OTEL_BSP_SCHEDULE_DELAY", "OTEL_BLRP_EXPORT_TIMEOUT", "OTEL_BLRP_MAX_EXPORT_BATCH_SIZE", "OTEL_BLRP_MAX_QUEUE_SIZE", "OTEL_BLRP_SCHEDULE_DELAY", "OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_ATTRIBUTE_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT", "OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT", "OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT", "OTEL_SPAN_EVENT_COUNT_LIMIT", "OTEL_SPAN_LINK_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT", "OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT", "OTEL_EXPORTER_OTLP_TIMEOUT", "OTEL_EXPORTER_OTLP_TRACES_TIMEOUT", "OTEL_EXPORTER_OTLP_METRICS_TIMEOUT", "OTEL_EXPORTER_OTLP_LOGS_TIMEOUT", "OTEL_EXPORTER_JAEGER_AGENT_PORT"];

function VB(n) {
    return $B.indexOf(n) > -1
}
u(VB, "ye");
var HB = ["OTEL_NO_PATCH_MODULES", "OTEL_PROPAGATORS"];

function zB(n) {
    return HB.indexOf(n) > -1
}
u(zB, "me");
var Eg = 1 / 0,
    _g = 128,
    qO = {
        OTEL_SDK_DISABLED: !1,
        CONTAINER_NAME: "",
        ECS_CONTAINER_METADATA_URI_V4: "",
        ECS_CONTAINER_METADATA_URI: "",
        HOSTNAME: "",
        KUBERNETES_SERVICE_HOST: "",
        NAMESPACE: "",
        OTEL_BSP_EXPORT_TIMEOUT: 3e4,
        OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,
        OTEL_BSP_MAX_QUEUE_SIZE: 2048,
        OTEL_BSP_SCHEDULE_DELAY: 5e3,
        OTEL_BLRP_EXPORT_TIMEOUT: 3e4,
        OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512,
        OTEL_BLRP_MAX_QUEUE_SIZE: 2048,
        OTEL_BLRP_SCHEDULE_DELAY: 5e3,
        OTEL_EXPORTER_JAEGER_AGENT_HOST: "",
        OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,
        OTEL_EXPORTER_JAEGER_ENDPOINT: "",
        OTEL_EXPORTER_JAEGER_PASSWORD: "",
        OTEL_EXPORTER_JAEGER_USER: "",
        OTEL_EXPORTER_OTLP_ENDPOINT: "",
        OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: "",
        OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: "",
        OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: "",
        OTEL_EXPORTER_OTLP_HEADERS: "",
        OTEL_EXPORTER_OTLP_TRACES_HEADERS: "",
        OTEL_EXPORTER_OTLP_METRICS_HEADERS: "",
        OTEL_EXPORTER_OTLP_LOGS_HEADERS: "",
        OTEL_EXPORTER_OTLP_TIMEOUT: 1e4,
        OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 1e4,
        OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 1e4,
        OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 1e4,
        OTEL_EXPORTER_ZIPKIN_ENDPOINT: "http://localhost:9411/api/v2/spans",
        OTEL_LOG_LEVEL: Yt.INFO,
        OTEL_NO_PATCH_MODULES: [],
        OTEL_PROPAGATORS: ["tracecontext", "baggage"],
        OTEL_RESOURCE_ATTRIBUTES: "",
        OTEL_SERVICE_NAME: "",
        OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: Eg,
        OTEL_ATTRIBUTE_COUNT_LIMIT: _g,
        OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: Eg,
        OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: _g,
        OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: Eg,
        OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: _g,
        OTEL_SPAN_EVENT_COUNT_LIMIT: 128,
        OTEL_SPAN_LINK_COUNT_LIMIT: 128,
        OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: 128,
        OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: 128,
        OTEL_TRACES_EXPORTER: "",
        OTEL_TRACES_SAMPLER: Ui.ParentBasedAlwaysOn,
        OTEL_TRACES_SAMPLER_ARG: "",
        OTEL_LOGS_EXPORTER: "",
        OTEL_EXPORTER_OTLP_INSECURE: "",
        OTEL_EXPORTER_OTLP_TRACES_INSECURE: "",
        OTEL_EXPORTER_OTLP_METRICS_INSECURE: "",
        OTEL_EXPORTER_OTLP_LOGS_INSECURE: "",
        OTEL_EXPORTER_OTLP_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_COMPRESSION: "",
        OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: "",
        OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: "",
        OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: "",
        OTEL_EXPORTER_OTLP_CLIENT_KEY: "",
        OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: "",
        OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: "",
        OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: "",
        OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: "",
        OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf",
        OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: "http/protobuf",
        OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: "http/protobuf",
        OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: "http/protobuf",
        OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: "cumulative"
    };

function WB(n, e, t) {
    if (t[n] !== void 0) {
        var r = String(t[n]);
        e[n] = r.toLowerCase() === "true"
    }
}
u(WB, "Oe");

function qB(n, e, t, r, i) {
    if (r === void 0 && (r = -1 / 0), i === void 0 && (i = 1 / 0), t[n] !== void 0) {
        var o = Number(t[n]);
        isNaN(o) || (e[n] = o < r ? r : o > i ? i : o)
    }
}
u(qB, "we");

function GB(n, e, t, r) {
    r === void 0 && (r = FB);
    var i = t[n];
    typeof i == "string" && (e[n] = i.split(r).map(function(o) {
        return o.trim()
    }))
}
u(GB, "Le");
var KB = {
    ALL: Yt.ALL,
    VERBOSE: Yt.VERBOSE,
    DEBUG: Yt.DEBUG,
    INFO: Yt.INFO,
    WARN: Yt.WARN,
    ERROR: Yt.ERROR,
    NONE: Yt.NONE
};

function JB(n, e, t) {
    var r = t[n];
    if (typeof r == "string") {
        var i = KB[r.toUpperCase()];
        i != null && (e[n] = i)
    }
}
u(JB, "Ie");

function GO(n) {
    var e = {};
    for (var t in qO) {
        var r = t;
        if (r === "OTEL_LOG_LEVEL") JB(r, e, n);
        else if (jB(r)) WB(r, e, n);
        else if (VB(r)) qB(r, e, n);
        else if (zB(r)) GB(r, e, n);
        else {
            var i = n[r];
            i != null && (e[r] = String(i))
        }
    }
    return e
}
u(GO, "ke");
var Td = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {};

function Ou() {
    var n = GO(Td);
    return Object.assign({}, qO, n)
}
u(Ou, "Pe");
var td, Cu = performance,
    ew = "exception.type",
    tw = "exception.message",
    ww = "telemetry.sdk.name",
    Tw = "telemetry.sdk.language",
    Ew = "telemetry.sdk.version",
    nw = ((td = {})[ww] = "opentelemetry", td["process.runtime.name"] = "browser", td[Tw] = "webjs", td[Ew] = "1.26.0", td),
    _w, ZB = Math.pow(10, 6),
    op = Math.pow(10, 9);

function go(n) {
    var e = n / 1e3;
    return [Math.trunc(e), Math.round(n % 1e3 * ZB)]
}
u(go, "Ze");

function AT() {
    var n = Cu.timeOrigin;
    if (typeof n != "number") {
        var e = Cu;
        n = e.timing && e.timing.fetchStart
    }
    return n
}
u(AT, "Ve");

function Id(n) {
    return KO(go(AT()), go(typeof n == "number" ? n : Cu.now()))
}
u(Id, "Ge");

function nd(n) {
    if (CT(n)) return n;
    if (typeof n == "number") return n < AT() ? Id(n) : go(n);
    if (n instanceof Date) return go(n.getTime());
    throw TypeError("Invalid input type")
}
u(nd, "He");

function so(n) {
    return n[0] * op + n[1]
}
u(so, "Xe");

function CT(n) {
    return Array.isArray(n) && n.length === 2 && typeof n[0] == "number" && typeof n[1] == "number"
}
u(CT, "$e");

function SR(n) {
    return CT(n) || typeof n == "number" || n instanceof Date
}
u(SR, "qe");

function KO(n, e) {
    var t = [n[0] + e[0], n[1] + e[1]];
    return t[1] >= op && (t[1] -= op, t[0] += 1), t
}
u(KO, "Ke");
(function(n) {
    n[n.SUCCESS = 0] = "SUCCESS", n[n.FAILED = 1] = "FAILED"
})(_w || (_w = {}));
var YB = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    XB = function() {
        function n(e) {
            var t;
            e === void 0 && (e = {}), this._propagators = (t = e.propagators) !== null && t !== void 0 ? t : [], this._fields = Array.from(new Set(this._propagators.map(function(r) {
                return typeof r.fields == "function" ? r.fields() : []
            }).reduce(function(r, i) {
                return r.concat(i)
            }, [])))
        }
        return u(n, "t"), n.prototype.inject = function(e, t, r) {
            var i, o;
            try {
                for (var s = YB(this._propagators), a = s.next(); !a.done; a = s.next()) {
                    var l = a.value;
                    try {
                        l.inject(e, t, r)
                    } catch (d) {
                        pt.warn("Failed to inject with " + l.constructor.name + ". Err: " + d.message)
                    }
                }
            } catch (d) {
                i = {
                    error: d
                }
            } finally {
                try {
                    a && !a.done && (o = s.return) && o.call(s)
                } finally {
                    if (i) throw i.error
                }
            }
        }, n.prototype.extract = function(e, t, r) {
            return this._propagators.reduce(function(i, o) {
                try {
                    return o.extract(i, t, r)
                } catch (s) {
                    pt.warn("Failed to inject with " + o.constructor.name + ". Err: " + s.message)
                }
                return i
            }, e)
        }, n.prototype.fields = function() {
            return this._fields.slice()
        }, n
    }(),
    rw = "[_0-9a-z-*/]",
    QB = new RegExp("^(?:" + ("[a-z]" + rw + "{0,255}") + "|" + ("[a-z0-9]" + rw + "{0,240}@[a-z]" + rw + "{0,13}") + ")$"),
    ej = /^[ -~]{0,255}[!-~]$/,
    tj = /,|=/,
    nj = function() {
        function n(e) {
            this._internalState = new Map, e && this._parse(e)
        }
        return u(n, "t"), n.prototype.set = function(e, t) {
            var r = this._clone();
            return r._internalState.has(e) && r._internalState.delete(e), r._internalState.set(e, t), r
        }, n.prototype.unset = function(e) {
            var t = this._clone();
            return t._internalState.delete(e), t
        }, n.prototype.get = function(e) {
            return this._internalState.get(e)
        }, n.prototype.serialize = function() {
            var e = this;
            return this._keys().reduce(function(t, r) {
                return t.push(r + "=" + e.get(r)), t
            }, []).join(",")
        }, n.prototype._parse = function(e) {
            e.length > 512 || (this._internalState = e.split(",").reverse().reduce(function(t, r) {
                var i = r.trim(),
                    o = i.indexOf("=");
                if (o !== -1) {
                    var s = i.slice(0, o),
                        a = i.slice(o + 1, r.length);
                    (function(l) {
                        return QB.test(l)
                    })(s) && function(l) {
                        return ej.test(l) && !tj.test(l)
                    }(a) && t.set(s, a)
                }
                return t
            }, new Map), this._internalState.size > 32 && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, 32))))
        }, n.prototype._keys = function() {
            return Array.from(this._internalState.keys()).reverse()
        }, n.prototype._clone = function() {
            var e = new n;
            return e._internalState = new Map(this._internalState), e
        }, n
    }(),
    iw = "traceparent",
    ow = "tracestate",
    rj = new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),
    IR, AR, ij = function() {
        function n() {}
        return u(n, "t"), n.prototype.inject = function(e, t, r) {
            var i = Gn.getSpanContext(e);
            if (i && !IT(e) && Rp(i)) {
                var o = "00-" + i.traceId + "-" + i.spanId + "-0" + Number(i.traceFlags || mo.NONE).toString(16);
                r.set(t, iw, o), i.traceState && r.set(t, ow, i.traceState.serialize())
            }
        }, n.prototype.extract = function(e, t, r) {
            var i = r.get(t, iw);
            if (!i) return e;
            var o = Array.isArray(i) ? i[0] : i;
            if (typeof o != "string") return e;
            var s = function(d) {
                var c = rj.exec(d);
                return c ? c[1] === "00" && c[5] ? null : {
                    traceId: c[2],
                    spanId: c[3],
                    traceFlags: parseInt(c[4], 16)
                } : null
            }(o);
            if (!s) return e;
            s.isRemote = !0;
            var a = r.get(t, ow);
            if (a) {
                var l = Array.isArray(a) ? a.join(",") : a;
                s.traceState = new nj(typeof l == "string" ? l : void 0)
            }
            return Gn.setSpanContext(e, s)
        }, n.prototype.fields = function() {
            return [iw, ow]
        }, n
    }(),
    oj = "[object Object]",
    sj = "[object Null]",
    aj = "[object Undefined]",
    JO = Function.prototype.toString,
    uj = JO.call(Object),
    cj = (IR = Object.getPrototypeOf, AR = Object, function(n) {
        return IR(AR(n))
    }),
    ZO = Object.prototype,
    CR = ZO.hasOwnProperty,
    Gs = Symbol ? Symbol.toStringTag : void 0,
    RR = ZO.toString;

function OR(n) {
    if (! function(r) {
            return r != null && typeof r == "object"
        }(n) || function(r) {
            return r == null ? r === void 0 ? aj : sj : Gs && Gs in Object(r) ? function(i) {
                var o = CR.call(i, Gs),
                    s = i[Gs],
                    a = !1;
                try {
                    i[Gs] = void 0, a = !0
                } catch (d) {}
                var l = RR.call(i);
                return a && (o ? i[Gs] = s : delete i[Gs]), l
            }(r) : function(i) {
                return RR.call(i)
            }(r)
        }(n) !== oj) return !1;
    var e = cj(n);
    if (e === null) return !0;
    var t = CR.call(e, "constructor") && e.constructor;
    return typeof t == "function" && t instanceof t && JO.call(t) === uj
}
u(OR, "mr");
var lj = 20;

function sw(n) {
    return sp(n) ? n.slice() : n
}
u(sw, "Er");

function YO(n, e, t, r) {
    var i;
    if (t === void 0 && (t = 0), !(t > lj)) {
        if (t++, Sg(n) || Sg(e) || XO(e)) i = sw(e);
        else if (sp(n)) {
            if (i = n.slice(), sp(e))
                for (var o = 0, s = e.length; o < s; o++) i.push(sw(e[o]));
            else if (rd(e))
                for (o = 0, s = (a = Object.keys(e)).length; o < s; o++) i[l = a[o]] = sw(e[l])
        } else if (rd(n))
            if (rd(e)) {
                if (! function(p, y) {
                        return !(!OR(p) || !OR(y))
                    }(n, e)) return e;
                i = Object.assign({}, n);
                var a;
                for (o = 0, s = (a = Object.keys(e)).length; o < s; o++) {
                    var l, d = e[l = a[o]];
                    if (Sg(d)) d === void 0 ? delete i[l] : i[l] = d;
                    else {
                        var c = i[l],
                            h = d;
                        if (DR(n, l, r) || DR(e, l, r)) delete i[l];
                        else {
                            if (rd(c) && rd(h)) {
                                var f = r.get(c) || [],
                                    g = r.get(h) || [];
                                f.push({
                                    obj: n,
                                    key: l
                                }), g.push({
                                    obj: e,
                                    key: l
                                }), r.set(c, f), r.set(h, g)
                            }
                            i[l] = YO(i[l], d, t, r)
                        }
                    }
                }
            } else i = e;
        return i
    }
}
u(YO, "Sr");

function DR(n, e, t) {
    for (var r = t.get(n[e]) || [], i = 0, o = r.length; i < o; i++) {
        var s = r[i];
        if (s.key === e && s.obj === n) return !0
    }
    return !1
}
u(DR, "Or");

function sp(n) {
    return Array.isArray(n)
}
u(sp, "wr");

function XO(n) {
    return typeof n == "function"
}
u(XO, "Lr");

function rd(n) {
    return !Sg(n) && !sp(n) && !XO(n) && typeof n == "object"
}
u(rd, "Ar");

function Sg(n) {
    return typeof n == "string" || typeof n == "number" || typeof n == "boolean" || n === void 0 || n instanceof Date || n instanceof RegExp || n === null
}
u(Sg, "Ir");
var dj = function(n) {
    var e = typeof Symbol == "function" && Symbol.iterator,
        t = e && n[e],
        r = 0;
    if (t) return t.call(n);
    if (n && typeof n.length == "number") return {
        next: u(function() {
            return n && r >= n.length && (n = void 0), {
                value: n && n[r++],
                done: !n
            }
        }, "next")
    };
    throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
};

function NR(n, e) {
    return typeof e == "string" ? n === e : !!n.match(e)
}
u(NR, "Rr");
var hj = function() {
        function n() {
            var e = this;
            this._promise = new Promise(function(t, r) {
                e._resolve = t, e._reject = r
            })
        }
        return u(n, "t"), Object.defineProperty(n.prototype, "promise", {
            get: u(function() {
                return this._promise
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.resolve = function(e) {
            this._resolve(e)
        }, n.prototype.reject = function(e) {
            this._reject(e)
        }, n
    }(),
    fj = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    gj = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    pj = function() {
        function n(e, t) {
            this._callback = e, this._that = t, this._isCalled = !1, this._deferred = new hj
        }
        return u(n, "t"), Object.defineProperty(n.prototype, "isCalled", {
            get: u(function() {
                return this._isCalled
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "promise", {
            get: u(function() {
                return this._deferred.promise
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.call = function() {
            for (var e, t = this, r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
            if (!this._isCalled) {
                this._isCalled = !0;
                try {
                    Promise.resolve((e = this._callback).call.apply(e, gj([this._that], fj(r), !1))).then(function(o) {
                        return t._deferred.resolve(o)
                    }, function(o) {
                        return t._deferred.reject(o)
                    })
                } catch (o) {
                    this._deferred.reject(o)
                }
            }
            return this._deferred.promise
        }, n
    }(),
    GT = class GT {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Id();
            this.instant = e
        }
        static toISOString(e) {
            return t = e.instant, r = "" + "0".repeat(9) + t[1] + "Z", i = r.substr(r.length - 9 - 1), new Date(1e3 * t[0]).toISOString().replace("000Z", i);
            var t, r, i
        }
        static toNanoSeconds(e) {
            return so(e.instant)
        }
    };
u(GT, "jr");
var si = GT,
    gg = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};

function RT(n) {
    return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n
}
u(RT, "Dr");
var LR, Ks, xR, aw, PR, mj = {
        exports: {}
    },
    kR = {
        exports: {}
    };

function vj() {
    return LR ? kR.exports : (LR = 1, kR.exports = function() {
        function n(g) {
            return !isNaN(parseFloat(g)) && isFinite(g)
        }
        u(n, "t");

        function e(g) {
            return g.charAt(0).toUpperCase() + g.substring(1)
        }
        u(e, "e");

        function t(g) {
            return function() {
                return this[g]
            }
        }
        u(t, "r");
        var r = ["isConstructor", "isEval", "isNative", "isToplevel"],
            i = ["columnNumber", "lineNumber"],
            o = ["fileName", "functionName", "source"],
            s = ["args"],
            a = ["evalOrigin"],
            l = r.concat(i, o, s, a);

        function d(g) {
            if (g)
                for (var p = 0; p < l.length; p++) g[l[p]] !== void 0 && this["set" + e(l[p])](g[l[p]])
        }
        u(d, "c"), d.prototype = {
            getArgs: u(function() {
                return this.args
            }, "getArgs"),
            setArgs: u(function(g) {
                if (Object.prototype.toString.call(g) !== "[object Array]") throw new TypeError("Args must be an Array");
                this.args = g
            }, "setArgs"),
            getEvalOrigin: u(function() {
                return this.evalOrigin
            }, "getEvalOrigin"),
            setEvalOrigin: u(function(g) {
                if (g instanceof d) this.evalOrigin = g;
                else {
                    if (!(g instanceof Object)) throw new TypeError("Eval Origin must be an Object or StackFrame");
                    this.evalOrigin = new d(g)
                }
            }, "setEvalOrigin"),
            toString: u(function() {
                var g = this.getFileName() || "",
                    p = this.getLineNumber() || "",
                    y = this.getColumnNumber() || "",
                    b = this.getFunctionName() || "";
                return this.getIsEval() ? g ? "[eval] (" + g + ":" + p + ":" + y + ")" : "[eval]:" + p + ":" + y : b ? b + " (" + g + ":" + p + ":" + y + ")" : g + ":" + p + ":" + y
            }, "toString")
        }, d.fromString = function(g) {
            var p = g.indexOf("("),
                y = g.lastIndexOf(")"),
                b = g.substring(0, p),
                E = g.substring(p + 1, y).split(","),
                S = g.substring(y + 1);
            if (S.indexOf("@") === 0) var _ = /@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(S, ""),
                I = _[1],
                x = _[2],
                L = _[3];
            return new d({
                functionName: b,
                args: E || void 0,
                fileName: I,
                lineNumber: x || void 0,
                columnNumber: L || void 0
            })
        };
        for (var c = 0; c < r.length; c++) d.prototype["get" + e(r[c])] = t(r[c]), d.prototype["set" + e(r[c])] = function(g) {
            return function(p) {
                this[g] = !!p
            }
        }(r[c]);
        for (var h = 0; h < i.length; h++) d.prototype["get" + e(i[h])] = t(i[h]), d.prototype["set" + e(i[h])] = function(g) {
            return function(p) {
                if (!n(p)) throw new TypeError(g + " must be a Number");
                this[g] = Number(p)
            }
        }(i[h]);
        for (var f = 0; f < o.length; f++) d.prototype["get" + e(o[f])] = t(o[f]), d.prototype["set" + e(o[f])] = function(g) {
            return function(p) {
                this[g] = String(p)
            }
        }(o[f]);
        return d
    }())
}
u(vj, "Gr");
var Ig, QO, Ed, _u, UR, eD, tD, yj = RT(mj.exports = (Ks = vj(), xR = /(^|@)\S+:\d+/, aw = /^\s*at .*(\S+:\d+|\(native\))/m, PR = /^(eval@)?(\[native code])?$/, {
        parse: u(function(n) {
            if (n.stacktrace !== void 0 || n["opera#sourceloc"] !== void 0) return this.parseOpera(n);
            if (n.stack && n.stack.match(aw)) return this.parseV8OrIE(n);
            if (n.stack) return this.parseFFOrSafari(n);
            throw new Error("Cannot parse given Error object")
        }, "parse"),
        extractLocation: u(function(n) {
            if (n.indexOf(":") === -1) return [n];
            var e = /(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g, ""));
            return [e[1], e[2] || void 0, e[3] || void 0]
        }, "extractLocation"),
        parseV8OrIE: u(function(n) {
            return n.stack.split(`
`).filter(function(e) {
                return !!e.match(aw)
            }, this).map(function(e) {
                e.indexOf("(eval ") > -1 && (e = e.replace(/eval code/g, "eval").replace(/(\(eval at [^()]*)|(,.*$)/g, ""));
                var t = e.replace(/^\s+/, "").replace(/\(eval code/g, "(").replace(/^.*?\s+/, ""),
                    r = t.match(/ (\(.+\)$)/);
                t = r ? t.replace(r[0], "") : t;
                var i = this.extractLocation(r ? r[1] : t),
                    o = r && t || void 0,
                    s = ["eval", "<anonymous>"].indexOf(i[0]) > -1 ? void 0 : i[0];
                return new Ks({
                    functionName: o,
                    fileName: s,
                    lineNumber: i[1],
                    columnNumber: i[2],
                    source: e
                })
            }, this)
        }, "parseV8OrIE"),
        parseFFOrSafari: u(function(n) {
            return n.stack.split(`
`).filter(function(e) {
                return !e.match(PR)
            }, this).map(function(e) {
                if (e.indexOf(" > eval") > -1 && (e = e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g, ":$1")), e.indexOf("@") === -1 && e.indexOf(":") === -1) return new Ks({
                    functionName: e
                });
                var t = /((.*".+"[^@]*)?[^@]*)(?:@)/,
                    r = e.match(t),
                    i = r && r[1] ? r[1] : void 0,
                    o = this.extractLocation(e.replace(t, ""));
                return new Ks({
                    functionName: i,
                    fileName: o[0],
                    lineNumber: o[1],
                    columnNumber: o[2],
                    source: e
                })
            }, this)
        }, "parseFFOrSafari"),
        parseOpera: u(function(n) {
            return !n.stacktrace || n.message.indexOf(`
`) > -1 && n.message.split(`
`).length > n.stacktrace.split(`
`).length ? this.parseOpera9(n) : n.stack ? this.parseOpera11(n) : this.parseOpera10(n)
        }, "parseOpera"),
        parseOpera9: u(function(n) {
            for (var e = /Line (\d+).*script (?:in )?(\S+)/i, t = n.message.split(`
`), r = [], i = 2, o = t.length; i < o; i += 2) {
                var s = e.exec(t[i]);
                s && r.push(new Ks({
                    fileName: s[2],
                    lineNumber: s[1],
                    source: t[i]
                }))
            }
            return r
        }, "parseOpera9"),
        parseOpera10: u(function(n) {
            for (var e = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i, t = n.stacktrace.split(`
`), r = [], i = 0, o = t.length; i < o; i += 2) {
                var s = e.exec(t[i]);
                s && r.push(new Ks({
                    functionName: s[3] || void 0,
                    fileName: s[2],
                    lineNumber: s[1],
                    source: t[i]
                }))
            }
            return r
        }, "parseOpera10"),
        parseOpera11: u(function(n) {
            return n.stack.split(`
`).filter(function(e) {
                return !!e.match(xR) && !e.match(/^Error created at/)
            }, this).map(function(e) {
                var t, r = e.split("@"),
                    i = this.extractLocation(r.pop()),
                    o = r.shift() || "",
                    s = o.replace(/<anonymous function(: (\w+))?>/, "$2").replace(/\([^)]*\)/g, "") || void 0;
                o.match(/\(([^)]*)\)/) && (t = o.replace(/^[^(]+\(([^)]*)\)$/, "$1"));
                var a = t === void 0 || t === "[arguments not available]" ? void 0 : t.split(",");
                return new Ks({
                    functionName: s,
                    args: a,
                    fileName: i[0],
                    lineNumber: i[1],
                    columnNumber: i[2],
                    source: e
                })
            }, this)
        }, "parseOpera11")
    })),
    KT = class KT {
        constructor(e) {
            this.name = e.name, this.message = e.message, e.stack && (this.stack = D(Ig, Ig, "m", QO).call(Ig, e))
        }
    };
u(KT, "tn");
var ap = KT;
Ig = ap, QO = u(function(n) {
    let e = yj.parse(n),
        t = n,
        r = t != null && t.extraStack ? `ExtraStack: ${t.extraStack}` : "",
        i = e.map(o => o.source).join(`
`);
    return `${n.name}: ${n.message}
${i}
${r}`
}, "Xr");
var JT = class JT {
    constructor(e) {
        let {
            type: t,
            category: r,
            message: i,
            error: o,
            visibility: s,
            timestamp: a = new si,
            span: l,
            errorCode: d,
            attributes: c
        } = e;
        this.type = t, this.category = r, this.message = i, o && (this.error = new ap(o)), this.visibility = s, this.timestamp = a, this.span = l, this.errorCode = d, this.attributes = c
    }
};
u(JT, "en");
var Su = JT,
    ZT = class ZT {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new Map;
            Ed.add(this), _u.set(this, void 0), ge(this, _u, e, "f")
        }
        closeCircuit(e) {
            D(this, _u, "f").delete(e)
        }
        run(e, t) {
            return se(this, void 0, void 0, function*() {
                let r = D(this, _u, "f").get(e);
                return r === void 0 ? D(this, Ed, "m", eD).call(this, e, t) : r.iterationsUntilRetry > 0 ? (r.iterationsUntilRetry--, 2) : D(this, Ed, "m", tD).call(this, e, r, t)
            })
        }
    };
u(ZT, "rn");
var Sw = ZT;
_u = new WeakMap, Ed = new WeakSet, UR = u(function(n) {
    D(this, _u, "f").set(n, {
        retriesFailed: 0,
        iterationsUntilRetry: 5
    })
}, "Kr"), eD = u(function(n, e) {
    return se(this, void 0, void 0, function*() {
        try {
            return yield e(), 0
        } catch (t) {
            return D(this, Ed, "m", UR).call(this, n), console.debug(`Circuit breaker ${n} was opened: ${t}`), 1
        }
    })
}, "Yr"), tD = u(function(n, e, t) {
    return se(this, void 0, void 0, function*() {
        try {
            return yield t(), this.closeCircuit(n), console.debug(`Circuit breaker ${n} was closed`), 0
        } catch (r) {
            return e.retriesFailed++, e.iterationsUntilRetry = Math.min(5 * e.retriesFailed, 10), 1
        }
    })
}, "Qr");
var bj = new Error("request for lock canceled"),
    wj = u(function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    }, "on"),
    YT = class YT {
        constructor(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : bj;
            this._value = e, this._cancelError = t, this._queue = [], this._weightedWaiters = []
        }
        acquire() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1,
                t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            if (e <= 0) throw new Error(`invalid weight ${e}: must be positive`);
            return new Promise((r, i) => {
                let o = {
                        resolve: r,
                        reject: i,
                        weight: e,
                        priority: t
                    },
                    s = MR(this._queue, a => t <= a.priority);
                s === -1 && e <= this._value ? this._dispatchItem(o) : this._queue.splice(s + 1, 0, o)
            })
        }
        runExclusive(e) {
            return wj(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1,
                    o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
                return function*() {
                    let [s, a] = yield r.acquire(i, o);
                    try {
                        return yield t(s)
                    } finally {
                        a()
                    }
                }()
            })
        }
        waitForUnlock() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1,
                t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            if (e <= 0) throw new Error(`invalid weight ${e}: must be positive`);
            return this._couldLockImmediately(e, t) ? Promise.resolve() : new Promise(r => {
                this._weightedWaiters[e - 1] || (this._weightedWaiters[e - 1] = []),
                    function(i, o) {
                        let s = MR(i, a => o.priority <= a.priority);
                        i.splice(s + 1, 0, o)
                    }(this._weightedWaiters[e - 1], {
                        resolve: r,
                        priority: t
                    })
            })
        }
        isLocked() {
            return this._value <= 0
        }
        getValue() {
            return this._value
        }
        setValue(e) {
            this._value = e, this._dispatchQueue()
        }
        release() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;
            if (e <= 0) throw new Error(`invalid weight ${e}: must be positive`);
            this._value += e, this._dispatchQueue()
        }
        cancel() {
            this._queue.forEach(e => e.reject(this._cancelError)), this._queue = []
        }
        _dispatchQueue() {
            for (this._drainUnlockWaiters(); this._queue.length > 0 && this._queue[0].weight <= this._value;) this._dispatchItem(this._queue.shift()), this._drainUnlockWaiters()
        }
        _dispatchItem(e) {
            let t = this._value;
            this._value -= e.weight, e.resolve([t, this._newReleaser(e.weight)])
        }
        _newReleaser(e) {
            let t = !1;
            return () => {
                t || (t = !0, this.release(e))
            }
        }
        _drainUnlockWaiters() {
            if (this._queue.length === 0)
                for (let e = this._value; e > 0; e--) {
                    let t = this._weightedWaiters[e - 1];
                    t && (t.forEach(r => r.resolve()), this._weightedWaiters[e - 1] = [])
                } else {
                    let e = this._queue[0].priority;
                    for (let t = this._value; t > 0; t--) {
                        let r = this._weightedWaiters[t - 1];
                        if (!r) continue;
                        let i = r.findIndex(o => o.priority <= e);
                        (i === -1 ? r : r.splice(0, i)).forEach(o => o.resolve())
                    }
                }
        }
        _couldLockImmediately(e, t) {
            return (this._queue.length === 0 || this._queue[0].priority < t) && e <= this._value
        }
    };
u(YT, "sn");
var Iw = YT;

function MR(n, e) {
    for (let t = n.length - 1; t >= 0; t--)
        if (e(n[t])) return t;
    return -1
}
u(MR, "an");
var es, Tj = u(function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    }, "cn"),
    XT = class XT {
        constructor(e) {
            this._semaphore = new Iw(1, e)
        }
        acquire() {
            return Tj(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
                return function*() {
                    let [, r] = yield e._semaphore.acquire(1, t);
                    return r
                }()
            })
        }
        runExclusive(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            return this._semaphore.runExclusive(() => e(), 1, t)
        }
        isLocked() {
            return this._semaphore.isLocked()
        }
        waitForUnlock() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
            return this._semaphore.waitForUnlock(1, e)
        }
        release() {
            this._semaphore.isLocked() && this._semaphore.release()
        }
        cancel() {
            return this._semaphore.cancel()
        }
    };
u(XT, "ln");
var up = XT;
(function(n) {
    n[n.Debug = 1] = "Debug", n[n.Info = 2] = "Info", n[n.Warning = 3] = "Warning", n[n.Error = 4] = "Error", n[n.Trace = 5] = "Trace"
})(es || (es = {}));
var Ej = {
        Debug: es.Debug,
        Info: es.Info,
        Warning: es.Warning,
        Error: es.Error,
        Trace: es.Trace
    },
    ot = es,
    QT = class QT {
        constructor(e, t, r, i) {
            this.logId = e, this.log = t, this.logType = r, this.transportId = i
        }
    };
u(QT, "pn");
var Aw = QT,
    nD = "logger-offline-db",
    rD = "byTransportId",
    iD = "transportId",
    _j = u((n, e) => e.some(t => n instanceof t), "_n"),
    FR, BR, oD = new WeakMap,
    Cw = new WeakMap,
    sD = new WeakMap,
    uw = new WeakMap,
    Rw = new WeakMap,
    Ow = {
        get(n, e, t) {
            if (n instanceof IDBTransaction) {
                if (e === "done") return Cw.get(n);
                if (e === "objectStoreNames") return n.objectStoreNames || sD.get(n);
                if (e === "store") return t.objectStoreNames[1] ? void 0 : t.objectStore(t.objectStoreNames[0])
            }
            return ts(n[e])
        },
        set: u((n, e, t) => (n[e] = t, !0), "set"),
        has: u((n, e) => n instanceof IDBTransaction && (e === "done" || e === "store") || e in n, "has")
    };

function Sj(n) {
    return n !== IDBDatabase.prototype.transaction || "objectStoreNames" in IDBTransaction.prototype ? (BR || (BR = [IDBCursor.prototype.advance, IDBCursor.prototype.continue, IDBCursor.prototype.continuePrimaryKey])).includes(n) ? function() {
        for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) t[r] = arguments[r];
        return n.apply(cw(this), t), ts(oD.get(this))
    } : function() {
        for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) t[r] = arguments[r];
        return ts(n.apply(cw(this), t))
    } : function(e) {
        for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
        let o = n.call(cw(this), e, ...r);
        return sD.set(o, e.sort ? e.sort() : [e]), ts(o)
    }
}
u(Sj, "Ln");

function Ij(n) {
    return typeof n == "function" ? Sj(n) : (n instanceof IDBTransaction && function(e) {
        if (Cw.has(e)) return;
        let t = new Promise((r, i) => {
            let o = u(() => {
                    e.removeEventListener("complete", s), e.removeEventListener("error", a), e.removeEventListener("abort", a)
                }, "n"),
                s = u(() => {
                    r(), o()
                }, "i"),
                a = u(() => {
                    i(e.error || new DOMException("AbortError", "AbortError")), o()
                }, "o");
            e.addEventListener("complete", s), e.addEventListener("error", a), e.addEventListener("abort", a)
        });
        Cw.set(e, t)
    }(n), _j(n, FR || (FR = [IDBDatabase, IDBObjectStore, IDBIndex, IDBCursor, IDBTransaction])) ? new Proxy(n, Ow) : n)
}
u(Ij, "An");

function ts(n) {
    if (n instanceof IDBRequest) return function(t) {
        let r = new Promise((i, o) => {
            let s = u(() => {
                    t.removeEventListener("success", a), t.removeEventListener("error", l)
                }, "n"),
                a = u(() => {
                    i(ts(t.result)), s()
                }, "i"),
                l = u(() => {
                    o(t.error), s()
                }, "o");
            t.addEventListener("success", a), t.addEventListener("error", l)
        });
        return r.then(i => {
            i instanceof IDBCursor && oD.set(i, t)
        }).catch(() => {}), Rw.set(r, t), r
    }(n);
    if (uw.has(n)) return uw.get(n);
    let e = Ij(n);
    return e !== n && (uw.set(n, e), Rw.set(e, n)), e
}
u(ts, "In");
var cw = u(n => Rw.get(n), "kn"),
    Aj = ["get", "getKey", "getAll", "getAllKeys", "count"],
    Cj = ["put", "add", "delete", "clear"],
    lw = new Map;

function jR(n, e) {
    if (!(n instanceof IDBDatabase) || e in n || typeof e != "string") return;
    if (lw.get(e)) return lw.get(e);
    let t = e.replace(/FromIndex$/, ""),
        r = e !== t,
        i = Cj.includes(t);
    if (!(t in (r ? IDBIndex : IDBObjectStore).prototype) || !i && !Aj.includes(t)) return;
    let o = u(function(a) {
        return Ot(this, arguments, function*(s) {
            let l = this.transaction(s, i ? "readwrite" : "readonly"),
                d = l.store;
            for (var c = arguments.length, h = new Array(c > 1 ? c - 1 : 0), f = 1; f < c; f++) h[f - 1] = arguments[f];
            return r && (d = d.index(h.shift())), (yield Promise.all([d[t](...h), i && l.done]))[0]
        })
    }, "o");
    return lw.set(e, o), o
}
u(jR, "Nn");
var uu, Ag, Sn, ud, Cg, Rg, cp, Dw, Nw;
Ow = (n => Vo(Vt({}, n), {
    get: u((e, t, r) => jR(e, t) || n.get(e, t, r), "get"),
    has: u((e, t) => !!jR(e, t) || n.has(e, t), "has")
}))(Ow);
var $R = "next",
    eE = class eE {
        constructor(e) {
            let {
                dbName: t,
                tableName: r,
                version: i,
                indices: o,
                cursorToRecord: s,
                propertyKey: a
            } = e;
            uu.add(this), Ag.set(this, void 0), Sn.set(this, void 0), ud.set(this, void 0), Cg.set(this, void 0), Rg.set(this, void 0), cp.set(this, void 0), ge(this, Ag, t, "f"), ge(this, Sn, r, "f"), ge(this, Cg, i, "f"), ge(this, Rg, o, "f"), ge(this, cp, s, "f"), ge(this, ud, a, "f")
        }
        open() {
            return se(this, void 0, void 0, function*() {
                let e = D(this, Sn, "f"),
                    t = D(this, Rg, "f"),
                    r = {
                        keyPath: D(this, ud, "f"),
                        autoIncrement: !D(this, ud, "f")
                    };
                return function(i, o) {
                    let {
                        blocked: s,
                        upgrade: a,
                        blocking: l,
                        terminated: d
                    } = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, c = indexedDB.open(i, o), h = ts(c);
                    return a && c.addEventListener("upgradeneeded", f => {
                        a(ts(c.result), f.oldVersion, f.newVersion, ts(c.transaction), f)
                    }), s && c.addEventListener("blocked", f => s(f.oldVersion, f.newVersion, f)), h.then(f => {
                        d && f.addEventListener("close", () => d()), l && f.addEventListener("versionchange", g => l(g.oldVersion, g.newVersion, g))
                    }).catch(() => {}), h
                }(D(this, Ag, "f"), D(this, Cg, "f"), {
                    upgrade(i, o) {
                        if (o < 1) {
                            let s = i.createObjectStore(e, r);
                            for (let a of t) s.createIndex(a.name, a.field)
                        }
                    }
                })
            })
        }
        getAll() {
            return se(this, arguments, void 0, function() {
                var e = this;
                let {
                    maxRecords: t = 100,
                    sortAsc: r = !0
                } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                return function*() {
                    let i = yield e.open();
                    try {
                        let o = i.transaction(D(e, Sn, "f")).objectStore(D(e, Sn, "f"));
                        return yield D(e, uu, "m", Dw).call(e, yield o.openCursor(null, r ? $R : "prev"), t)
                    } finally {
                        i.close()
                    }
                }()
            })
        }
        getByIndex(e, t) {
            return se(this, arguments, void 0, function(r, i) {
                var o = this;
                let s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100,
                    a = arguments.length > 3 ? arguments[3] : void 0;
                return function*() {
                    let l = yield o.open();
                    try {
                        let d = l.transaction(D(o, Sn, "f")).objectStore(D(o, Sn, "f"));
                        return yield D(o, uu, "m", Dw).call(o, yield d.index(r).openCursor(i), s, a)
                    } finally {
                        l.close()
                    }
                }()
            })
        }
        put(e) {
            return se(this, void 0, void 0, function*() {
                let t = yield this.open();
                try {
                    let r = t.transaction(D(this, Sn, "f"), "readwrite").objectStore(D(this, Sn, "f"));
                    for (let i of e) yield r.put(i)
                } finally {
                    t.close()
                }
            })
        }
        count() {
            return se(this, void 0, void 0, function*() {
                let e = yield this.open();
                try {
                    return yield e.count(D(this, Sn, "f"))
                } finally {
                    e.close()
                }
            })
        }
        delete(e) {
            return se(this, void 0, void 0, function*() {
                let t = yield this.open();
                try {
                    yield t.delete(D(this, Sn, "f"), e)
                } finally {
                    t.close()
                }
            })
        }
        deleteMultiple(e) {
            return se(this, void 0, void 0, function*() {
                let t = yield this.open();
                try {
                    let r = e.map(i => t.delete(D(this, Sn, "f"), i));
                    yield Promise.all(r)
                } finally {
                    t.close()
                }
            })
        }
        deleteByIndex(e, t) {
            return se(this, arguments, void 0, function(r, i) {
                var o = this;
                let s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100;
                return function*() {
                    let a = yield o.open();
                    try {
                        let l = a.transaction(D(o, Sn, "f"), "readwrite").objectStore(D(o, Sn, "f"));
                        return yield D(o, uu, "m", Nw).call(o, yield l.index(r).openCursor(i), s)
                    } finally {
                        a.close()
                    }
                }()
            })
        }
        deleteRecords() {
            return se(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 100;
                return function*() {
                    let r = yield e.open();
                    try {
                        let i = r.transaction(D(e, Sn, "f"), "readwrite").objectStore(D(e, Sn, "f"));
                        return yield D(e, uu, "m", Nw).call(e, yield i.openCursor(null, $R), t)
                    } finally {
                        r.close()
                    }
                }()
            })
        }
    };
u(eE, "Vn");
var lp = eE;
Ag = new WeakMap, Sn = new WeakMap, ud = new WeakMap, Cg = new WeakMap, Rg = new WeakMap, cp = new WeakMap, uu = new WeakSet, Dw = u(function(n) {
    return se(this, arguments, void 0, function(e) {
        var t = this;
        let r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100,
            i = arguments.length > 2 ? arguments[2] : void 0;
        return function*() {
            let o = [];
            for (; e && o.length < r;) {
                let s = D(t, cp, "f").call(t, e);
                i && !i(s) || o.push(s), e = yield e.continue()
            }
            return o
        }()
    })
}, "zn"), Nw = u(function(n, e) {
    return se(this, void 0, void 0, function*() {
        let t = 0;
        for (; n && t < e;) yield n.delete(), t++, n = yield n.continue();
        return t
    })
}, "Fn");
var tE = class tE extends lp {
    constructor() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : nD;
        super({
            dbName: e,
            tableName: "logs",
            cursorToRecord: u(t => new Aw(t.primaryKey, t.value.log, t.value.logType, t.value.transportId), "cursorToRecord"),
            indices: [{
                name: rD,
                field: iD
            }, {
                name: "byLogType",
                field: "logType"
            }],
            version: 1
        })
    }
    getByTransportId(e, t) {
        return se(this, void 0, void 0, function*() {
            return this.getByIndex("byTransportId", e, t)
        })
    }
    getByLogType(e, t) {
        return se(this, void 0, void 0, function*() {
            return this.getByIndex("byLogType", e, t)
        })
    }
    putLog(e, t) {
        return se(this, void 0, void 0, function*() {
            return this.put([{
                log: e,
                logType: e.type,
                transportId: t
            }])
        })
    }
    deleteByLogType(e, t) {
        return se(this, void 0, void 0, function*() {
            return this.deleteByIndex("byLogType", e, t)
        })
    }
};
u(tE, "Gn");
var Lw = tE,
    xi, nE = class nE {
        constructor(e) {
            let {
                databaseName: t,
                database: r = new Lw(t)
            } = e;
            xi.set(this, void 0), ge(this, xi, r, "f")
        }
        readLogs(e) {
            return se(this, void 0, void 0, function*() {
                return D(this, xi, "f").getAll({
                    sortAsc: !0,
                    maxRecords: e
                })
            })
        }
        readLogsByTransport(e, t) {
            return se(this, void 0, void 0, function*() {
                return D(this, xi, "f").getByTransportId(e, t)
            })
        }
        removeLogs(e) {
            return se(this, void 0, void 0, function*() {
                return D(this, xi, "f").deleteMultiple(e)
            })
        }
        insertLog(e, t) {
            return se(this, void 0, void 0, function*() {
                return D(this, xi, "f").putLog(e, t)
            })
        }
        countLogs() {
            return se(this, void 0, void 0, function*() {
                return D(this, xi, "f").count()
            })
        }
        isFull() {
            return se(this, void 0, void 0, function*() {
                return (yield D(this, xi, "f").count()) >= 1e4
            })
        }
        discardLogs() {
            return se(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 200;
                return function*() {
                    let r = Object.keys(ot).filter(o => isNaN(Number(o))),
                        i = t;
                    for (let o of r) {
                        let s = Ej[o];
                        if (i -= yield D(e, xi, "f").deleteByLogType(s, i), i <= 0) break
                    }
                    return i
                }()
            })
        }
    };
u(nE, "Xn");
var xw = nE,
    Tt;
xi = new WeakMap,
    function(n) {
        n.IsAggregateProxy = "outsystems.aggregation.proxy", n.AggregationSize = "outsystems.aggregation.size", n.IsOutlier = "outsystems.aggregation.outlier", n.AverageDuration = "outsystems.aggregation.duration.average", n.MaxDuration = "outsystems.aggregation.duration.max", n.MinDuration = "outsystems.aggregation.duration.min", n.IsNonAggregable = "osinternal.spanIsNonAggregable", n.ChildrenNames = "osinternal.childrenNames", n.functionKey = "outsystems.function.key"
    }(Tt || (Tt = {}));

function Rj(n, e) {
    return n < e ? -1 : e < n ? 1 : 0
}
u(Rj, "qn");

function Oj(n) {
    return n.attributes[Tt.functionKey]
}
u(Oj, "Kn");

function aD(n, e, t) {
    var r;
    let i = n.name,
        o = t == null ? void 0 : t(n),
        s = (r = n.attributes[Tt.ChildrenNames]) !== null && r !== void 0 ? r : [];
    return s.sort(Rj), `${n.attributes[Tt.IsNonAggregable]?"NonAggregable.":""}${e}.${i}.${o}(${s.join(",")})`
}
u(aD, "Yn");
var Pw = {
    absolute: u((n, e) => {
        let {
            min: t,
            max: r
        } = n;
        return typeof t == "number" && e < t || typeof r == "number" && e > r
    }, "absolute"),
    relative: u((n, e, t) => {
        let {
            min: r,
            max: i
        } = n;
        return Pw.absolute({
            min: typeof r == "number" ? t + r : void 0,
            max: typeof i == "number" ? t + i : void 0
        }, e)
    }, "relative"),
    ratio: u((n, e, t) => {
        let {
            lower: r,
            upper: i,
            max: o,
            min: s
        } = n;
        return Pw.relative({
            min: typeof r == "number" ? Math.min(t * r, s != null ? s : 1 / 0) : void 0,
            max: typeof i == "number" ? Math.max(t * i, o != null ? o : -1 / 0) : void 0
        }, e, t)
    }, "ratio")
};

function Dj(n, e, t) {
    return Pw[n.type](n, e, t)
}
u(Dj, "Jn");
var Og, Jo, ao, Dg, dp, uD, cD, lD, dD, hD, fD, kw, gD, rE = class rE {
    constructor(e) {
        Og.set(this, void 0), ge(this, Og, e, "f")
    }
    isOutlier(e, t) {
        for (let [r, i] of Object.entries(D(this, Og, "f"))) {
            let o = e.attributes[r],
                s = t.attributes[r];
            if ((o !== void 0 || s !== void 0) && (o === void 0 || s === void 0 || Dj(i, o, s))) return !0
        }
        return !1
    }
};
u(rE, "pi");
var Uw = rE;
Og = new WeakMap;
var iE = class iE {
    constructor(e) {
        let {
            storage: t,
            outlierDetector: r = new Uw({
                [Tt.AverageDuration]: {
                    type: "ratio",
                    upper: .1,
                    max: 5e7
                }
            }),
            getSpanObjectId: i = Oj
        } = e;
        Jo.add(this), ao.set(this, void 0), Dg.set(this, void 0), dp.set(this, void 0), ge(this, ao, t, "f"), ge(this, Dg, r, "f"), ge(this, dp, i, "f")
    }
    aggregate(e, t) {
        return se(this, void 0, void 0, function*() {
            let r = yield D(this, ao, "f").readSpansByParentId(e.spanId), i = D(this, Jo, "m", lD).call(this, e);
            if (! function(a, l) {
                    return !(a.attributes[Tt.IsNonAggregable] || l.some(d => d.attributes[Tt.IsNonAggregable]))
                }(i, r)) return void(yield D(this, ao, "f").insertSpans([D(this, Jo, "m", hD).call(this, i)], t));
            let s = yield D(this, Jo, "m", uD).call(this, i, t);
            if (s)
                if (D(this, Dg, "f").isOutlier(i, s)) yield D(this, ao, "f").insertSpans([D(this, Jo, "m", dD).call(this, i)], t);
                else {
                    let a = D(this, Jo, "m", cD).call(this, e, s),
                        l = D(this, Jo, "m", fD).call(this, r, a);
                    yield D(this, ao, "f").insertSpans([a, ...l], t)
                }
            else yield D(this, ao, "f").insertSpans([i], t)
        })
    }
};
u(iE, "di");
var Mw = iE;
ao = new WeakMap, Dg = new WeakMap, dp = new WeakMap, Jo = new WeakSet, uD = u(function(n, e) {
    return se(this, void 0, void 0, function*() {
        let t = aD(n, e, D(this, dp, "f")),
            [r] = yield D(this, ao, "f").readSpansByAggregateSignature(t);
        return r
    })
}, "oi"), cD = u(function(n, e) {
    var t;
    let r = (t = e.attributes[Tt.AggregationSize]) !== null && t !== void 0 ? t : 1,
        i = e.attributes[Tt.AverageDuration],
        o = e.attributes[Tt.MaxDuration],
        s = e.attributes[Tt.MinDuration],
        a = n.endTimeUnixNano - n.startTimeUnixNano;
    return Object.assign(Object.assign({}, e), {
        attributes: Object.assign(Object.assign({}, e.attributes), {
            [Tt.IsAggregateProxy]: !0,
            [Tt.AggregationSize]: r + 1,
            [Tt.AverageDuration]: (i * r + a) / (r + 1),
            [Tt.MaxDuration]: Math.max(o, a),
            [Tt.MinDuration]: Math.min(s, a)
        }),
        parentSpanId: e.parentSpanId === n.spanId ? n.parentSpanId : e.parentSpanId
    })
}, "si"), lD = u(function(n) {
    let e = n.endTimeUnixNano - n.startTimeUnixNano;
    return Object.assign(Object.assign({}, n), {
        attributes: Object.assign(Object.assign({}, n.attributes), {
            [Tt.IsAggregateProxy]: !1,
            [Tt.AverageDuration]: e,
            [Tt.MaxDuration]: e,
            [Tt.MinDuration]: e
        })
    })
}, "ai"), dD = u(function(n) {
    return Object.assign(Object.assign({}, n), {
        attributes: Object.assign(Object.assign({}, n.attributes), {
            [Tt.IsOutlier]: !0,
            [Tt.IsNonAggregable]: !0
        })
    })
}, "ui"), hD = u(function(n) {
    return Object.assign(Object.assign({}, n), {
        attributes: Object.assign(Object.assign({}, n.attributes), {
            [Tt.IsNonAggregable]: !0
        })
    })
}, "ci"), fD = u(function(n, e) {
    return n.flatMap(t => t.spanId !== e.spanId ? [Object.assign(Object.assign({}, t), {
        parentSpanId: e.spanId
    })] : [])
}, "li");
var oE = class oE {
    constructor(e) {
        let {
            spanId: t,
            span: r,
            transportId: i,
            aggregateSignature: o
        } = e;
        this.spanId = t, this.span = r, this.transportId = i, this.parentId = r.parentSpanId, this.aggregateSignature = o != null ? o : ""
    }
};
u(oE, "gi");
var Fw = oE,
    sE = class sE extends lp {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : nD,
                t = arguments.length > 1 ? arguments[1] : void 0;
            super({
                dbName: e,
                tableName: "spans",
                version: 1,
                propertyKey: t,
                cursorToRecord: u(r => new Fw({
                    spanId: r.primaryKey,
                    span: r.value.span,
                    transportId: r.value.transportId,
                    aggregateSignature: r.value.aggregateSignature
                }), "cursorToRecord"),
                indices: [{
                    name: rD,
                    field: iD
                }, {
                    name: "byAggregateSignature",
                    field: "aggregateSignature"
                }, {
                    name: "byParentId",
                    field: "parentId"
                }]
            }), kw.add(this)
        }
        getByAggregateSignature(e, t) {
            return this.getByIndex("byAggregateSignature", e, t)
        }
        getByParentId(e, t) {
            return this.getByIndex("byParentId", e, t)
        }
        getByTransportId(e, t) {
            return this.getByIndex("byTransportId", e, t)
        }
        getTopLevelByTransportId(e, t) {
            return this.getByIndex("byTransportId", e, t, r => r.parentId === void 0)
        }
        putSpans(e, t) {
            return this.put(e.map(r => D(this, kw, "m", gD).call(this, r, t)))
        }
    };
u(sE, "vi");
var hp = sE,
    rr;
kw = new WeakSet, gD = u(function(n, e) {
    return {
        span: n,
        transportId: e,
        spanId: n.spanId,
        aggregateSignature: aD(n, e, t => t.attributes["outsystems.function.key"]),
        parentId: n.parentSpanId
    }
}, "hi");
var aE = class aE {
    constructor(e) {
        let {
            databaseName: t,
            autoincrement: r = !0,
            database: i = r ? new hp(t) : new hp(t, "spanId")
        } = e;
        rr.set(this, void 0), ge(this, rr, i, "f")
    }
    readSpans(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").getAll({
                sortAsc: !0,
                maxRecords: e
            })
        })
    }
    readSpansByTransport(e, t) {
        return se(this, void 0, void 0, function*() {
            let r = yield D(this, rr, "f").getTopLevelByTransportId(e, t);
            return r.length > 0 ? r : D(this, rr, "f").getByTransportId(e, t)
        })
    }
    readSpansByParentId(e, t) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").getByParentId(e, t)
        })
    }
    readSpansByAggregateSignature(e, t) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").getByAggregateSignature(e, t)
        })
    }
    removeSpans(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").deleteMultiple(e)
        })
    }
    insertSpan(e, t) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").putSpans([e], t)
        })
    }
    insertSerializableSpans(e, t) {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").putSpans(e, t)
        })
    }
    countSpans() {
        return se(this, void 0, void 0, function*() {
            return D(this, rr, "f").count()
        })
    }
    isFull() {
        return se(this, void 0, void 0, function*() {
            return (yield D(this, rr, "f").count()) >= 1e4
        })
    }
    discardSpans() {
        return se(this, arguments, void 0, function() {
            var e = this;
            let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 200;
            return function*() {
                return D(e, rr, "f").deleteRecords(t)
            }()
        })
    }
};
u(aE, "yi");
var fp = aE;

function Nj(n) {
    return new Mw({
        storage: {
            insertSpans: u((e, t) => se(this, void 0, void 0, function*() {
                yield n.insertSerializableSpans(e, t)
            }), "insertSpans"),
            readSpansByAggregateSignature: u(e => se(this, void 0, void 0, function*() {
                return (yield n.readSpansByAggregateSignature(e)).map(t => t.span)
            }), "readSpansByAggregateSignature"),
            readSpansByParentId: u(e => se(this, void 0, void 0, function*() {
                return (yield n.readSpansByParentId(e)).map(t => t.span)
            }), "readSpansByParentId")
        },
        getSpanObjectId: u(e => e.attributes["outsystems.function.key"], "getSpanObjectId")
    })
}
u(Nj, "Ti");
var Pi, Zo, Ng, cd, ld, dd, Lg, cu, hd;
rr = new WeakMap;
var Lj = new up,
    xj = new up,
    uE = class uE {
        constructor(e) {
            let {
                databaseNameSuffix: t,
                isOnline: r = u(() => !0, "e"),
                offlineLogsStorage: i = new xw({
                    databaseName: `logs-${t}`
                }),
                offlineTracesStorage: o = new fp({
                    databaseName: `spans_v2-${t}`,
                    autoincrement: !1
                }),
                legacyOfflineTracesStorage: s = new fp({
                    databaseName: `spans-${t}`
                }),
                flushLegacyTraces: a = !1,
                aggregateSpans: l = !1,
                spanAggregator: d = Nj(o),
                mutexDispatchLogs: c = Lj,
                mutexDispatchSpans: h = xj
            } = e;
            Pi.set(this, void 0), Zo.set(this, void 0), Ng.set(this, void 0), cd.set(this, !0), ld.set(this, void 0), dd.set(this, void 0), Lg.set(this, void 0), cu.set(this, void 0), hd.set(this, void 0), ge(this, Pi, i, "f"), ge(this, Zo, o, "f"), ge(this, Ng, s, "f"), ge(this, ld, r, "f"), ge(this, cd, a, "f"), ge(this, dd, l, "f"), ge(this, Lg, d, "f"), ge(this, hd, c, "f"), ge(this, cu, h, "f")
        }
        setAggregateSpansStatus(e) {
            ge(this, dd, e, "f")
        }
        writeLog(e, t) {
            return se(this, arguments, void 0, function(r, i) {
                var o = this;
                let s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100;
                return function*() {
                    try {
                        (yield D(o, Pi, "f").isFull()) && (yield D(o, Pi, "f").discardLogs()), yield D(o, Pi, "f").insertLog(r, i.getTransportId()), (yield D(o, Pi, "f").countLogs()) >= s && (yield o.flushTransportLogs(i))
                    } catch (a) {
                        console.debug("Error writing log to storage", a)
                    }
                }()
            })
        }
        writeSpan(e, t) {
            return se(this, arguments, void 0, function(r, i) {
                var o = this;
                let s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1e3;
                return function*() {
                    try {
                        (yield D(o, Zo, "f").isFull()) && (yield D(o, Zo, "f").discardSpans()), yield D(o, cu, "f").runExclusive(() => se(o, void 0, void 0, function*() {
                            D(this, dd, "f") ? yield D(this, Lg, "f").aggregate(r, i.getTransportId()): yield D(this, Zo, "f").insertSpan(r, i.getTransportId())
                        })), (yield D(o, Zo, "f").countSpans()) >= s && (yield o.flushTransportSpans(i))
                    } catch (a) {
                        console.debug("Error writing trace to storage", a)
                    }
                }()
            })
        }
        processTransportLogs(e) {
            return se(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
                return function*() {
                    yield D(r, hd, "f").runExclusive(() => se(r, void 0, void 0, function*() {
                        yield this.internalLogProcess(t, i, !0)
                    }))
                }()
            })
        }
        flushTransportLogs(e) {
            return se(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
                return function*() {
                    yield D(r, hd, "f").runExclusive(() => se(r, void 0, void 0, function*() {
                        yield this.internalLogProcess(t, i, !1)
                    }))
                }()
            })
        }
        internalLogProcess(e, t, r) {
            return se(this, void 0, void 0, function*() {
                if (!e.requiresConnectivity() || D(this, ld, "f").call(this)) try {
                    let i = r ? t : 1,
                        o = yield D(this, Pi, "f").readLogsByTransport(e.getTransportId(), t);
                    for (; o.length >= i;) yield e.writeAll(o.map(s => s.log)), yield D(this, Pi, "f").removeLogs(o.map(s => s.logId)), o = yield D(this, Pi, "f").readLogsByTransport(e.getTransportId(), t)
                } catch (i) {
                    throw console.debug("Error in internal log processing", i), i
                }
            })
        }
        processTransportSpans(e) {
            return se(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e3;
                return function*() {
                    yield D(r, cu, "f").runExclusive(() => se(r, void 0, void 0, function*() {
                        yield this.internalSpanProcess(t, i, !0)
                    }))
                }()
            })
        }
        flushTransportSpans(e) {
            return se(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e3;
                return function*() {
                    yield D(r, cu, "f").runExclusive(() => se(r, void 0, void 0, function*() {
                        yield this.internalSpanProcess(t, i, !1)
                    }))
                }()
            })
        }
        internalSpanProcess(e, t, r) {
            return se(this, void 0, void 0, function*() {
                if (!e.requiresConnectivity() || D(this, ld, "f").call(this)) {
                    if (D(this, cd, "f")) try {
                        let i = yield this.writeSpansToTransport({
                            transport: e,
                            spansBatchSize: t,
                            storage: D(this, Ng, "f"),
                            processCompleteBatchOnly: !1
                        });
                        ge(this, cd, i > 0, "f")
                    } catch (i) {
                        console.warn("Error in processing legacy spans", i)
                    }
                    yield this.writeSpansToTransport({
                        transport: e,
                        spansBatchSize: t,
                        processCompleteBatchOnly: r,
                        storage: D(this, Zo, "f")
                    })
                }
            })
        }
        writeSpansToTransport(e) {
            return se(this, arguments, void 0, function(t) {
                let {
                    transport: r,
                    spansBatchSize: i,
                    processCompleteBatchOnly: o,
                    storage: s
                } = t;
                return function*() {
                    try {
                        let a = o ? i : 1,
                            l = yield s.readSpansByTransport(r.getTransportId(), i);
                        if (l.length === 0) return 0;
                        for (; l.length >= a;) yield r.writeAll(l.map(d => d.span)), yield s.removeSpans(l.map(d => d.spanId)), l = yield s.readSpansByTransport(r.getTransportId(), i);
                        return yield s.countSpans()
                    } catch (a) {
                        throw console.debug("Error processing spans", a), a
                    }
                }()
            })
        }
    };
u(uE, "Pi");
var Bw = uE;
Pi = new WeakMap, Zo = new WeakMap, Ng = new WeakMap, cd = new WeakMap, ld = new WeakMap, dd = new WeakMap, Lg = new WeakMap, cu = new WeakMap, hd = new WeakMap;
var cE = class cE {
    constructor() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 6e4;
        this.timerInterval = e, this.tasksToRun = new Map
    }
    scheduleNextRun() {
        this.currentTaskTimeout && clearTimeout(this.currentTaskTimeout), this.currentTaskTimeout = setTimeout(() => this.runTask(), this.timerInterval)
    }
    runTask() {
        return se(this, void 0, void 0, function*() {
            if (this.currentTaskTimeout) {
                this.stop();
                let e = Array.from(this.tasksToRun.values()).map(t => t());
                yield Promise.all(e), this.scheduleNextRun()
            }
        })
    }
    start() {
        this.scheduleNextRun()
    }
    stop() {
        this.currentTaskTimeout && (clearTimeout(this.currentTaskTimeout), this.currentTaskTimeout = void 0)
    }
    addTask(e, t) {
        this.tasksToRun.set(e, t)
    }
    deleteTask(e) {
        this.tasksToRun.delete(e)
    }
    getTask(e) {
        return this.tasksToRun.get(e)
    }
    setTimerInterval(e) {
        this.timerInterval = e, this.start()
    }
};
u(cE, "Ci");
var jw = cE,
    lE = class lE {
        constructor(e) {
            let {
                logTransports: t = [],
                traceTransports: r = [],
                databaseNameSuffix: i,
                isOnline: o,
                aggregateSpans: s,
                offlineManager: a = new Bw({
                    databaseNameSuffix: i,
                    isOnline: o,
                    flushLegacyTraces: !0,
                    aggregateSpans: s
                }),
                taskScheduler: l = new jw,
                circuitBreakerRunner: d = new Sw
            } = e;
            this.logTransports = t, this.traceTransports = r, this.offlineManager = a, this.taskScheduler = l, this.circuitBreakerRunner = d, this.taskScheduler.addTask("flush-logs", () => se(this, void 0, void 0, function*() {
                return this.flushLogs()
            })), this.taskScheduler.addTask("flush-spans", () => se(this, void 0, void 0, function*() {
                return this.flushSpans()
            })), this.taskScheduler.start()
        }
        addLogTransport(e) {
            let t = e.getTransportId();
            this.logTransports.some(r => r.getTransportId() === t) || this.logTransports.push(e)
        }
        addTraceTransport(e) {
            let t = e.getTransportId();
            this.traceTransports.some(r => r.getTransportId() === t) || this.traceTransports.push(e)
        }
        removeLogTransport(e) {
            let t = this.logTransports.findIndex(r => r.getTransportId() === e);
            t !== -1 && (this.logTransports.splice(t, 1), this.circuitBreakerRunner.closeCircuit(e))
        }
        removeTraceTransport(e) {
            let t = this.traceTransports.findIndex(r => r.getTransportId() === e);
            t !== -1 && (this.traceTransports.splice(t, 1), this.circuitBreakerRunner.closeCircuit(e))
        }
        setAllLogTypeBaselines(e) {
            for (let t of this.logTransports) t.setLogTypeBaseline(e)
        }
        setTagId(e) {
            var t, r;
            for (let i of this.traceTransports)(t = i.setTagId) === null || t === void 0 || t.call(i, e);
            for (let i of this.logTransports)(r = i.setTagId) === null || r === void 0 || r.call(i, e)
        }
        setResourceAttributes(e) {
            var t, r;
            for (let i of this.traceTransports)(t = i.setResourceAttributes) === null || t === void 0 || t.call(i, e);
            for (let i of this.logTransports)(r = i.setResourceAttributes) === null || r === void 0 || r.call(i, e)
        }
        enableTracing() {
            for (let e of this.traceTransports) e.enableTracing()
        }
        disableTracing() {
            for (let e of this.traceTransports) e.disableTracing()
        }
        flushLogs() {
            return se(this, void 0, void 0, function*() {
                let e = this.logTransports.map(t => se(this, void 0, void 0, function*() {
                    let r = t.getTransportId();
                    yield this.circuitBreakerRunner.run(r, () => this.offlineManager.flushTransportLogs(t))
                }));
                yield Promise.all(e)
            })
        }
        flushSpans() {
            return se(this, void 0, void 0, function*() {
                let e = this.traceTransports.map(t => se(this, void 0, void 0, function*() {
                    let r = t.getTransportId();
                    yield this.circuitBreakerRunner.run(r, () => t.hasWriteBuffer() || typeof t.flush != "function" ? this.offlineManager.flushTransportSpans(t) : t.flush())
                }));
                yield Promise.all(e)
            })
        }
        processLog(e) {
            return se(this, void 0, void 0, function*() {
                let t = this.logTransports.filter(r => r.getLogTypeBaseline() <= e.type);
                for (let r of t)
                    if (r.hasWriteBuffer()) yield this.offlineManager.writeLog(e, r);
                    else {
                        let i = r.getTransportId();
                        (yield this.circuitBreakerRunner.run(i, () => r.write(e))) !== 0 && (yield this.offlineManager.writeLog(e, r))
                    }
            })
        }
        processSpan(e) {
            return se(this, void 0, void 0, function*() {
                let t = this.traceTransports.filter(r => r.isTracingEnabled());
                for (let r of t)
                    if (r.hasWriteBuffer()) yield this.offlineManager.writeSpan(e, r);
                    else {
                        let i = r.getTransportId();
                        (yield this.circuitBreakerRunner.run(i, () => r.write(e))) !== 0 && (yield this.offlineManager.writeSpan(e, r))
                    }
            })
        }
        setSchedulerTimerInterval(e) {
            this.taskScheduler.setTimerInterval(e)
        }
        setAggregateSpansStatus(e) {
            this.offlineManager.setAggregateSpansStatus(e)
        }
    };
u(lE, "Ni");
var Ad = lE,
    $w;
(function(n) {
    n[n.Internal = 0] = "Internal", n[n.External = 1] = "External", n[n.Client = 2] = "Client"
})($w || ($w = {}));
var Oe = $w,
    pD = typeof gg == "object" && gg && gg.Object === Object && gg,
    Pj = pD,
    kj = typeof self == "object" && self && self.Object === Object && self,
    vo = Pj || kj || Function("return this")(),
    sa = vo.Symbol,
    VR = sa,
    mD = Object.prototype,
    Uj = mD.hasOwnProperty,
    Mj = mD.toString,
    id = VR ? VR.toStringTag : void 0,
    Fj = u(function(n) {
        var e = Uj.call(n, id),
            t = n[id];
        try {
            n[id] = void 0;
            var r = !0
        } catch (o) {}
        var i = Mj.call(n);
        return r && (e ? n[id] = t : delete n[id]), i
    }, "Hi"),
    Bj = Object.prototype.toString,
    jj = Fj,
    $j = u(function(n) {
        return Bj.call(n)
    }, "qi"),
    HR = sa ? sa.toStringTag : void 0,
    Nd = u(function(n) {
        return n == null ? n === void 0 ? "[object Undefined]" : "[object Null]" : HR && HR in Object(n) ? jj(n) : $j(n)
    }, "Yi"),
    Ld = u(function(n) {
        var e = typeof n;
        return n != null && (e == "object" || e == "function")
    }, "Qi"),
    Vj = Nd,
    Hj = Ld,
    zR, vD = u(function(n) {
        if (!Hj(n)) return !1;
        var e = Vj(n);
        return e == "[object Function]" || e == "[object GeneratorFunction]" || e == "[object AsyncFunction]" || e == "[object Proxy]"
    }, "ro"),
    dw = vo["__core-js_shared__"],
    WR = (zR = /[^.]+$/.exec(dw && dw.keys && dw.keys.IE_PROTO || "")) ? "Symbol(src)_1." + zR : "",
    zj = u(function(n) {
        return !!WR && WR in n
    }, "oo"),
    Wj = Function.prototype.toString,
    yD = u(function(n) {
        if (n != null) {
            try {
                return Wj.call(n)
            } catch (e) {}
            try {
                return n + ""
            } catch (e) {}
        }
        return ""
    }, "ao"),
    qj = vD,
    Gj = zj,
    Kj = Ld,
    Jj = yD,
    Zj = /^\[object .+?Constructor\]$/,
    Yj = Function.prototype,
    Xj = Object.prototype,
    Qj = Yj.toString,
    e3 = Xj.hasOwnProperty,
    t3 = RegExp("^" + Qj.call(e3).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
    n3 = u(function(n) {
        return !(!Kj(n) || Gj(n)) && (qj(n) ? t3 : Zj).test(Jj(n))
    }, "To"),
    r3 = u(function(n, e) {
        return n == null ? void 0 : n[e]
    }, "mo"),
    ua = u(function(n, e) {
        var t = r3(n, e);
        return n3(t) ? t : void 0
    }, "bo"),
    i3 = ua,
    o3 = function() {
        try {
            var n = i3(Object, "defineProperty");
            return n({}, "", {}), n
        } catch (e) {}
    }(),
    qR = o3,
    bD = u(function(n, e, t) {
        e == "__proto__" && qR ? qR(n, e, {
            configurable: !0,
            enumerable: !0,
            value: t,
            writable: !0
        }) : n[e] = t
    }, "wo"),
    s3 = function(n) {
        return function(e, t, r) {
            for (var i = -1, o = Object(e), s = r(e), a = s.length; a--;) {
                var l = s[n ? a : ++i];
                if (t(o[l], l, o) === !1) break
            }
            return e
        }
    }(),
    a3 = u(function(n, e) {
        for (var t = -1, r = Array(n); ++t < n;) r[t] = e(t);
        return r
    }, "Ao"),
    xd = u(function(n) {
        return n != null && typeof n == "object"
    }, "Io"),
    u3 = Nd,
    c3 = xd,
    GR = u(function(n) {
        return c3(n) && u3(n) == "[object Arguments]"
    }, "Po"),
    l3 = xd,
    wD = Object.prototype,
    d3 = wD.hasOwnProperty,
    h3 = wD.propertyIsEnumerable,
    TD = GR(function() {
        return arguments
    }()) ? GR : function(n) {
        return l3(n) && d3.call(n, "callee") && !h3.call(n, "callee")
    },
    ns = Array.isArray,
    Vw = {
        exports: {}
    },
    f3 = u(function() {
        return !1
    }, "Uo");
(function(n, e) {
    var t = vo,
        r = f3,
        i = e && !e.nodeType && e,
        o = i && n && !n.nodeType && n,
        s = o && o.exports === i ? t.Buffer : void 0,
        a = (s ? s.isBuffer : void 0) || r;
    n.exports = a
})(Vw, Vw.exports);
var ED = Vw.exports,
    g3 = /^(?:0|[1-9]\d*)$/,
    OT = u(function(n, e) {
        var t = typeof n;
        return !!(e = e == null ? 9007199254740991 : e) && (t == "number" || t != "symbol" && g3.test(n)) && n > -1 && n % 1 == 0 && n < e
    }, "Fo"),
    DT = u(function(n) {
        return typeof n == "number" && n > -1 && n % 1 == 0 && n <= 9007199254740991
    }, "Zo"),
    p3 = Nd,
    m3 = DT,
    v3 = xd,
    Ut = {};
Ut["[object Float32Array]"] = Ut["[object Float64Array]"] = Ut["[object Int8Array]"] = Ut["[object Int16Array]"] = Ut["[object Int32Array]"] = Ut["[object Uint8Array]"] = Ut["[object Uint8ClampedArray]"] = Ut["[object Uint16Array]"] = Ut["[object Uint32Array]"] = !0, Ut["[object Arguments]"] = Ut["[object Array]"] = Ut["[object ArrayBuffer]"] = Ut["[object Boolean]"] = Ut["[object DataView]"] = Ut["[object Date]"] = Ut["[object Error]"] = Ut["[object Function]"] = Ut["[object Map]"] = Ut["[object Number]"] = Ut["[object Object]"] = Ut["[object RegExp]"] = Ut["[object Set]"] = Ut["[object String]"] = Ut["[object WeakMap]"] = !1;
var y3 = u(function(n) {
        return v3(n) && m3(n.length) && !!Ut[p3(n)]
    }, "$o"),
    b3 = u(function(n) {
        return function(e) {
            return n(e)
        }
    }, "qo"),
    Hw = {
        exports: {}
    };
(function(n, e) {
    var t = pD,
        r = e && !e.nodeType && e,
        i = r && n && !n.nodeType && n,
        o = i && i.exports === r && t.process,
        s = function() {
            try {
                var a = i && i.require && i.require("util").types;
                return a || o && o.binding && o.binding("util")
            } catch (l) {}
        }();
    n.exports = s
})(Hw, Hw.exports);
var KR = Hw.exports,
    w3 = y3,
    T3 = b3,
    JR = KR && KR.isTypedArray,
    _D = JR ? T3(JR) : w3,
    E3 = a3,
    _3 = TD,
    S3 = ns,
    I3 = ED,
    A3 = OT,
    C3 = _D,
    R3 = Object.prototype.hasOwnProperty,
    SD = u(function(n, e) {
        var t = S3(n),
            r = !t && _3(n),
            i = !t && !r && I3(n),
            o = !t && !r && !i && C3(n),
            s = t || r || i || o,
            a = s ? E3(n.length, String) : [],
            l = a.length;
        for (var d in n) !e && !R3.call(n, d) || s && (d == "length" || i && (d == "offset" || d == "parent") || o && (d == "buffer" || d == "byteLength" || d == "byteOffset") || A3(d, l)) || a.push(d);
        return a
    }, "cs"),
    O3 = Object.prototype,
    ID = u(function(n) {
        var e = n && n.constructor;
        return n === (typeof e == "function" && e.prototype || O3)
    }, "fs"),
    AD = u(function(n, e) {
        return function(t) {
            return n(e(t))
        }
    }, "hs"),
    D3 = AD(Object.keys, Object),
    N3 = ID,
    L3 = D3,
    x3 = Object.prototype.hasOwnProperty,
    P3 = vD,
    k3 = DT,
    CD = u(function(n) {
        return n != null && k3(n.length) && !P3(n)
    }, "Ts"),
    U3 = SD,
    M3 = u(function(n) {
        if (!N3(n)) return L3(n);
        var e = [];
        for (var t in Object(n)) x3.call(n, t) && t != "constructor" && e.push(t);
        return e
    }, "bs"),
    F3 = CD,
    NT = u(function(n) {
        return F3(n) ? U3(n) : M3(n)
    }, "Ss"),
    B3 = s3,
    j3 = NT,
    $3 = u(function(n, e) {
        return n && B3(n, e, j3)
    }, "Ls"),
    V3 = u(function() {
        this.__data__ = [], this.size = 0
    }, "As"),
    LT = u(function(n, e) {
        return n === e || n != n && e != e
    }, "Is"),
    H3 = LT,
    Op = u(function(n, e) {
        for (var t = n.length; t--;)
            if (H3(n[t][0], e)) return t;
        return -1
    }, "Rs"),
    z3 = Op,
    W3 = Array.prototype.splice,
    q3 = Op,
    G3 = Op,
    K3 = Op,
    J3 = V3,
    Z3 = u(function(n) {
        var e = this.__data__,
            t = z3(e, n);
        return !(t < 0) && (t == e.length - 1 ? e.pop() : W3.call(e, t, 1), --this.size, !0)
    }, "Ds"),
    Y3 = u(function(n) {
        var e = this.__data__,
            t = q3(e, n);
        return t < 0 ? void 0 : e[t][1]
    }, "Bs"),
    X3 = u(function(n) {
        return G3(this.__data__, n) > -1
    }, "Us"),
    Q3 = u(function(n, e) {
        var t = this.__data__,
            r = K3(t, n);
        return r < 0 ? (++this.size, t.push([n, e])) : t[r][1] = e, this
    }, "Ws");

function lu(n) {
    var e = -1,
        t = n == null ? 0 : n.length;
    for (this.clear(); ++e < t;) {
        var r = n[e];
        this.set(r[0], r[1])
    }
}
u(lu, "zs");
lu.prototype.clear = J3, lu.prototype.delete = Z3, lu.prototype.get = Y3, lu.prototype.has = X3, lu.prototype.set = Q3;
var Dp = lu,
    e$ = Dp,
    t$ = u(function() {
        this.__data__ = new e$, this.size = 0
    }, "Vs"),
    n$ = u(function(n) {
        var e = this.__data__,
            t = e.delete(n);
        return this.size = e.size, t
    }, "Gs"),
    r$ = u(function(n) {
        return this.__data__.get(n)
    }, "Hs"),
    i$ = u(function(n) {
        return this.__data__.has(n)
    }, "Xs"),
    xT = ua(vo, "Map"),
    Np = ua(Object, "create"),
    ZR = Np,
    o$ = u(function() {
        this.__data__ = ZR ? ZR(null) : {}, this.size = 0
    }, "Ys"),
    s$ = u(function(n) {
        var e = this.has(n) && delete this.__data__[n];
        return this.size -= e ? 1 : 0, e
    }, "Qs"),
    a$ = Np,
    u$ = Object.prototype.hasOwnProperty,
    c$ = u(function(n) {
        var e = this.__data__;
        if (a$) {
            var t = e[n];
            return t === "__lodash_hash_undefined__" ? void 0 : t
        }
        return u$.call(e, n) ? e[n] : void 0
    }, "ea"),
    l$ = Np,
    d$ = Object.prototype.hasOwnProperty,
    h$ = Np,
    f$ = o$,
    g$ = s$,
    p$ = c$,
    m$ = u(function(n) {
        var e = this.__data__;
        return l$ ? e[n] !== void 0 : d$.call(e, n)
    }, "ua"),
    v$ = u(function(n, e) {
        var t = this.__data__;
        return this.size += this.has(n) ? 0 : 1, t[n] = h$ && e === void 0 ? "__lodash_hash_undefined__" : e, this
    }, "ca");

function du(n) {
    var e = -1,
        t = n == null ? 0 : n.length;
    for (this.clear(); ++e < t;) {
        var r = n[e];
        this.set(r[0], r[1])
    }
}
u(du, "la");
du.prototype.clear = f$, du.prototype.delete = g$, du.prototype.get = p$, du.prototype.has = m$, du.prototype.set = v$;
var YR = du,
    y$ = Dp,
    b$ = xT,
    w$ = u(function(n) {
        var e = typeof n;
        return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? n !== "__proto__" : n === null
    }, "da"),
    Lp = u(function(n, e) {
        var t = n.__data__;
        return w$(e) ? t[typeof e == "string" ? "string" : "hash"] : t.map
    }, "ga"),
    T$ = Lp,
    E$ = Lp,
    _$ = Lp,
    S$ = Lp,
    I$ = u(function() {
        this.size = 0, this.__data__ = {
            hash: new YR,
            map: new(b$ || y$),
            string: new YR
        }
    }, "ma"),
    A$ = u(function(n) {
        var e = T$(this, n).delete(n);
        return this.size -= e ? 1 : 0, e
    }, "ba"),
    C$ = u(function(n) {
        return E$(this, n).get(n)
    }, "Ea"),
    R$ = u(function(n) {
        return _$(this, n).has(n)
    }, "Sa"),
    O$ = u(function(n, e) {
        var t = S$(this, n),
            r = t.size;
        return t.set(n, e), this.size += t.size == r ? 0 : 1, this
    }, "Oa");

function hu(n) {
    var e = -1,
        t = n == null ? 0 : n.length;
    for (this.clear(); ++e < t;) {
        var r = n[e];
        this.set(r[0], r[1])
    }
}
u(hu, "wa");
hu.prototype.clear = I$, hu.prototype.delete = A$, hu.prototype.get = C$, hu.prototype.has = R$, hu.prototype.set = O$;
var PT = hu,
    D$ = Dp,
    N$ = xT,
    L$ = PT,
    x$ = Dp,
    P$ = t$,
    k$ = n$,
    U$ = r$,
    M$ = i$,
    F$ = u(function(n, e) {
        var t = this.__data__;
        if (t instanceof D$) {
            var r = t.__data__;
            if (!N$ || r.length < 199) return r.push([n, e]), this.size = ++t.size, this;
            t = this.__data__ = new L$(r)
        }
        return t.set(n, e), this.size = t.size, this
    }, "ja");

function fu(n) {
    var e = this.__data__ = new x$(n);
    this.size = e.size
}
u(fu, "Ma");
fu.prototype.clear = P$, fu.prototype.delete = k$, fu.prototype.get = U$, fu.prototype.has = M$, fu.prototype.set = F$;
var RD = fu,
    B$ = PT,
    j$ = u(function(n) {
        return this.__data__.set(n, "__lodash_hash_undefined__"), this
    }, "Ua"),
    $$ = u(function(n) {
        return this.__data__.has(n)
    }, "Wa");

function xg(n) {
    var e = -1,
        t = n == null ? 0 : n.length;
    for (this.__data__ = new B$; ++e < t;) this.add(n[e])
}
u(xg, "za");
xg.prototype.add = xg.prototype.push = j$, xg.prototype.has = $$;
var V$ = xg,
    H$ = u(function(n, e) {
        for (var t = -1, r = n == null ? 0 : n.length; ++t < r;)
            if (e(n[t], t, n)) return !0;
        return !1
    }, "Za"),
    z$ = u(function(n, e) {
        return n.has(e)
    }, "Va"),
    OD = u(function(n, e, t, r, i, o) {
        var s = 1 & t,
            a = n.length,
            l = e.length;
        if (a != l && !(s && l > a)) return !1;
        var d = o.get(n),
            c = o.get(e);
        if (d && c) return d == e && c == n;
        var h = -1,
            f = !0,
            g = 2 & t ? new V$ : void 0;
        for (o.set(n, e), o.set(e, n); ++h < a;) {
            var p = n[h],
                y = e[h];
            if (r) var b = s ? r(y, p, h, e, n, o) : r(p, y, h, n, e, o);
            if (b !== void 0) {
                if (b) continue;
                f = !1;
                break
            }
            if (g) {
                if (!H$(e, function(E, S) {
                        if (!z$(g, S) && (p === E || i(p, E, t, r, o))) return g.push(S)
                    })) {
                    f = !1;
                    break
                }
            } else if (p !== y && !i(p, y, t, r, o)) {
                f = !1;
                break
            }
        }
        return o.delete(n), o.delete(e), f
    }, "Ga"),
    XR = vo.Uint8Array,
    W$ = LT,
    q$ = OD,
    G$ = u(function(n) {
        var e = -1,
            t = Array(n.size);
        return n.forEach(function(r, i) {
            t[++e] = [i, r]
        }), t
    }, "qa"),
    K$ = u(function(n) {
        var e = -1,
            t = Array(n.size);
        return n.forEach(function(r) {
            t[++e] = r
        }), t
    }, "Ka"),
    QR = sa ? sa.prototype : void 0,
    hw = QR ? QR.valueOf : void 0,
    J$ = u(function(n, e, t, r, i, o, s) {
        switch (t) {
            case "[object DataView]":
                if (n.byteLength != e.byteLength || n.byteOffset != e.byteOffset) return !1;
                n = n.buffer, e = e.buffer;
            case "[object ArrayBuffer]":
                return !(n.byteLength != e.byteLength || !o(new XR(n), new XR(e)));
            case "[object Boolean]":
            case "[object Date]":
            case "[object Number]":
                return W$(+n, +e);
            case "[object Error]":
                return n.name == e.name && n.message == e.message;
            case "[object RegExp]":
            case "[object String]":
                return n == e + "";
            case "[object Map]":
                var a = G$;
            case "[object Set]":
                var l = 1 & r;
                if (a || (a = K$), n.size != e.size && !l) return !1;
                var d = s.get(n);
                if (d) return d == e;
                r |= 2, s.set(n, e);
                var c = q$(a(n), a(e), r, i, o, s);
                return s.delete(n), c;
            case "[object Symbol]":
                if (hw) return hw.call(n) == hw.call(e)
        }
        return !1
    }, "Ja"),
    DD = u(function(n, e) {
        for (var t = -1, r = e.length, i = n.length; ++t < r;) n[i + t] = e[t];
        return n
    }, "tu"),
    Z$ = DD,
    Y$ = ns,
    ND = u(function(n, e, t) {
        var r = e(n);
        return Y$(n) ? r : Z$(r, t(n))
    }, "nu"),
    LD = u(function() {
        return []
    }, "iu"),
    X$ = u(function(n, e) {
        for (var t = -1, r = n == null ? 0 : n.length, i = 0, o = []; ++t < r;) {
            var s = n[t];
            e(s, t, n) && (o[i++] = s)
        }
        return o
    }, "ou"),
    Q$ = LD,
    e4 = Object.prototype.propertyIsEnumerable,
    eO = Object.getOwnPropertySymbols,
    xD = eO ? function(n) {
        return n == null ? [] : (n = Object(n), X$(eO(n), function(e) {
            return e4.call(n, e)
        }))
    } : Q$,
    t4 = ND,
    n4 = xD,
    r4 = NT,
    tO = u(function(n) {
        return t4(n, r4, n4)
    }, "pu"),
    i4 = Object.prototype.hasOwnProperty,
    o4 = u(function(n, e, t, r, i, o) {
        var s = 1 & t,
            a = tO(n),
            l = a.length;
        if (l != tO(e).length && !s) return !1;
        for (var d = l; d--;) {
            var c = a[d];
            if (!(s ? c in e : i4.call(e, c))) return !1
        }
        var h = o.get(n),
            f = o.get(e);
        if (h && f) return h == e && f == n;
        var g = !0;
        o.set(n, e), o.set(e, n);
        for (var p = s; ++d < l;) {
            var y = n[c = a[d]],
                b = e[c];
            if (r) var E = s ? r(b, y, c, e, n, o) : r(y, b, c, n, e, o);
            if (!(E === void 0 ? y === b || i(y, b, t, r, o) : E)) {
                g = !1;
                break
            }
            p || (p = c == "constructor")
        }
        if (g && !p) {
            var S = n.constructor,
                _ = e.constructor;
            S == _ || !("constructor" in n) || !("constructor" in e) || typeof S == "function" && S instanceof S && typeof _ == "function" && _ instanceof _ || (g = !1)
        }
        return o.delete(n), o.delete(e), g
    }, "gu"),
    zw = ua(vo, "DataView"),
    Ww = xT,
    qw = ua(vo, "Promise"),
    Gw = ua(vo, "Set"),
    Kw = ua(vo, "WeakMap"),
    PD = Nd,
    Nu = yD,
    nO = "[object Map]",
    rO = "[object Promise]",
    iO = "[object Set]",
    oO = "[object WeakMap]",
    sO = "[object DataView]",
    s4 = Nu(zw),
    a4 = Nu(Ww),
    u4 = Nu(qw),
    c4 = Nu(Gw),
    l4 = Nu(Kw),
    Js = PD;
(zw && Js(new zw(new ArrayBuffer(1))) != sO || Ww && Js(new Ww) != nO || qw && Js(qw.resolve()) != rO || Gw && Js(new Gw) != iO || Kw && Js(new Kw) != oO) && (Js = u(function(n) {
    var e = PD(n),
        t = e == "[object Object]" ? n.constructor : void 0,
        r = t ? Nu(t) : "";
    if (r) switch (r) {
        case s4:
            return sO;
        case a4:
            return nO;
        case u4:
            return rO;
        case c4:
            return iO;
        case l4:
            return oO
    }
    return e
}, "Nu"));
var fw = RD,
    d4 = OD,
    h4 = J$,
    f4 = o4,
    aO = Js,
    uO = ns,
    cO = ED,
    g4 = _D,
    lO = "[object Arguments]",
    dO = "[object Array]",
    pg = "[object Object]",
    hO = Object.prototype.hasOwnProperty,
    p4 = u(function(n, e, t, r, i, o) {
        var s = uO(n),
            a = uO(e),
            l = s ? dO : aO(n),
            d = a ? dO : aO(e),
            c = (l = l == lO ? pg : l) == pg,
            h = (d = d == lO ? pg : d) == pg,
            f = l == d;
        if (f && cO(n)) {
            if (!cO(e)) return !1;
            s = !0, c = !1
        }
        if (f && !c) return o || (o = new fw), s || g4(n) ? d4(n, e, t, r, i, o) : h4(n, e, l, t, r, i, o);
        if (!(1 & t)) {
            var g = c && hO.call(n, "__wrapped__"),
                p = h && hO.call(e, "__wrapped__");
            if (g || p) {
                var y = g ? n.value() : n,
                    b = p ? e.value() : e;
                return o || (o = new fw), i(y, b, t, r, o)
            }
        }
        return !!f && (o || (o = new fw), f4(n, e, t, r, i, o))
    }, "Hu"),
    fO = xd,
    kD = u(function n(e, t, r, i, o) {
        return e === t || (e == null || t == null || !fO(e) && !fO(t) ? e != e && t != t : p4(e, t, r, i, n, o))
    }, "t"),
    m4 = RD,
    v4 = kD,
    y4 = Ld,
    UD = u(function(n) {
        return n == n && !y4(n)
    }, "Qu"),
    b4 = UD,
    w4 = NT,
    MD = u(function(n, e) {
        return function(t) {
            return t != null && t[n] === e && (e !== void 0 || n in Object(t))
        }
    }, "ec"),
    T4 = u(function(n, e, t, r) {
        var i = t.length,
            o = i,
            s = !r;
        if (n == null) return !o;
        for (n = Object(n); i--;) {
            var a = t[i];
            if (s && a[2] ? a[1] !== n[a[0]] : !(a[0] in n)) return !1
        }
        for (; ++i < o;) {
            var l = (a = t[i])[0],
                d = n[l],
                c = a[1];
            if (s && a[2]) {
                if (d === void 0 && !(l in n)) return !1
            } else {
                var h = new m4;
                if (r) var f = r(d, c, l, n, e, h);
                if (!(f === void 0 ? v4(c, d, 3, r, h) : f)) return !1
            }
        }
        return !0
    }, "rc"),
    E4 = u(function(n) {
        for (var e = w4(n), t = e.length; t--;) {
            var r = e[t],
                i = n[r];
            e[t] = [r, i, b4(i)]
        }
        return e
    }, "nc"),
    _4 = MD,
    S4 = u(function(n) {
        var e = E4(n);
        return e.length == 1 && e[0][2] ? _4(e[0][0], e[0][1]) : function(t) {
            return t === n || T4(t, n, e)
        }
    }, "oc"),
    I4 = Nd,
    A4 = xd,
    kT = u(function(n) {
        return typeof n == "symbol" || A4(n) && I4(n) == "[object Symbol]"
    }, "uc"),
    C4 = ns,
    R4 = kT,
    O4 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    D4 = /^\w*$/,
    UT = u(function(n, e) {
        if (C4(n)) return !1;
        var t = typeof n;
        return !(t != "number" && t != "symbol" && t != "boolean" && n != null && !R4(n)) || D4.test(n) || !O4.test(n) || e != null && n in Object(e)
    }, "pc"),
    FD = PT;

function MT(n, e) {
    if (typeof n != "function" || e != null && typeof e != "function") throw new TypeError("Expected a function");
    var t = u(function() {
        var r = arguments,
            i = e ? e.apply(this, r) : r[0],
            o = t.cache;
        if (o.has(i)) return o.get(i);
        var s = n.apply(this, r);
        return t.cache = o.set(i, s) || o, s
    }, "r");
    return t.cache = new(MT.Cache || FD), t
}
u(MT, "gc");
MT.Cache = FD;
var N4 = MT,
    L4 = u(function(n) {
        var e = N4(n, function(r) {
                return t.size === 500 && t.clear(), r
            }),
            t = e.cache;
        return e
    }, "_c"),
    x4 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
    P4 = /\\(\\)?/g,
    k4 = L4(function(n) {
        var e = [];
        return n.charCodeAt(0) === 46 && e.push(""), n.replace(x4, function(t, r, i, o) {
            e.push(i ? o.replace(P4, "$1") : r || t)
        }), e
    }),
    BD = u(function(n, e) {
        for (var t = -1, r = n == null ? 0 : n.length, i = Array(r); ++t < r;) i[t] = e(n[t], t, n);
        return i
    }, "bc"),
    U4 = BD,
    M4 = ns,
    F4 = kT,
    gO = sa ? sa.prototype : void 0,
    pO = gO ? gO.toString : void 0,
    B4 = u(function n(e) {
        if (typeof e == "string") return e;
        if (M4(e)) return U4(e, n) + "";
        if (F4(e)) return pO ? pO.call(e) : "";
        var t = e + "";
        return t == "0" && 1 / e == -1 / 0 ? "-0" : t
    }, "t"),
    j4 = B4,
    $4 = ns,
    V4 = UT,
    H4 = k4,
    z4 = u(function(n) {
        return n == null ? "" : j4(n)
    }, "Cc"),
    xp = u(function(n, e) {
        return $4(n) ? n : V4(n, e) ? [n] : H4(z4(n))
    }, "Nc"),
    W4 = kT,
    Pd = u(function(n) {
        if (typeof n == "string" || W4(n)) return n;
        var e = n + "";
        return e == "0" && 1 / n == -1 / 0 ? "-0" : e
    }, "jc"),
    q4 = xp,
    G4 = Pd,
    FT = u(function(n, e) {
        for (var t = 0, r = (e = q4(e, n)).length; n != null && t < r;) n = n[G4(e[t++])];
        return t && t == r ? n : void 0
    }, "Bc"),
    K4 = FT,
    J4 = xp,
    Z4 = TD,
    Y4 = ns,
    X4 = OT,
    Q4 = DT,
    eV = Pd,
    tV = u(function(n, e) {
        return n != null && e in Object(n)
    }, "Hc"),
    nV = u(function(n, e, t) {
        for (var r = -1, i = (e = J4(e, n)).length, o = !1; ++r < i;) {
            var s = eV(e[r]);
            if (!(o = n != null && t(n, s))) break;
            n = n[s]
        }
        return o || ++r != i ? o : !!(i = n == null ? 0 : n.length) && Q4(i) && X4(s, i) && (Y4(n) || Z4(n))
    }, "Xc"),
    rV = kD,
    iV = u(function(n, e, t) {
        var r = n == null ? void 0 : K4(n, e);
        return r === void 0 ? t : r
    }, "qc"),
    oV = u(function(n, e) {
        return n != null && nV(n, e, tV)
    }, "Kc"),
    sV = UT,
    aV = UD,
    uV = MD,
    cV = Pd,
    lV = FT,
    dV = u(function(n) {
        return function(e) {
            return e == null ? void 0 : e[n]
        }
    }, "rl"),
    hV = u(function(n) {
        return function(e) {
            return lV(e, n)
        }
    }, "nl"),
    fV = UT,
    gV = Pd,
    pV = S4,
    mV = u(function(n, e) {
        return sV(n) && aV(e) ? uV(cV(n), e) : function(t) {
            var r = iV(t, n);
            return r === void 0 && r === e ? oV(t, n) : rV(e, r, 3)
        }
    }, "al"),
    vV = u(function(n) {
        return n
    }, "ul"),
    yV = ns,
    bV = u(function(n) {
        return fV(n) ? dV(gV(n)) : hV(n)
    }, "ll"),
    jD = u(function(n) {
        return typeof n == "function" ? n : n == null ? vV : typeof n == "object" ? yV(n) ? mV(n[0], n[1]) : pV(n) : bV(n)
    }, "fl"),
    wV = bD,
    TV = $3,
    EV = jD,
    _V = RT(function(n, e) {
        var t = {};
        return e = EV(e), TV(n, function(r, i, o) {
            wV(t, i, e(r, i, o))
        }), t
    }),
    SV = bD,
    IV = LT,
    AV = Object.prototype.hasOwnProperty,
    CV = u(function(n, e, t) {
        var r = n[e];
        AV.call(n, e) && IV(r, t) && (t !== void 0 || e in n) || SV(n, e, t)
    }, "Tl"),
    RV = xp,
    OV = OT,
    mO = Ld,
    DV = Pd,
    NV = FT,
    LV = u(function(n, e, t, r) {
        if (!mO(n)) return n;
        for (var i = -1, o = (e = RV(e, n)).length, s = o - 1, a = n; a != null && ++i < o;) {
            var l = DV(e[i]),
                d = t;
            if (l === "__proto__" || l === "constructor" || l === "prototype") return n;
            if (i != s) {
                var c = a[l];
                (d = r ? r(c, l, a) : void 0) === void 0 && (d = mO(c) ? c : OV(e[i + 1]) ? [] : {})
            }
            CV(a, l, d), a = a[l]
        }
        return n
    }, "wl"),
    xV = xp,
    PV = u(function(n, e, t) {
        for (var r = -1, i = e.length, o = {}; ++r < i;) {
            var s = e[r],
                a = NV(n, s);
            t(a, s) && LV(o, xV(s, n), a)
        }
        return o
    }, "Al"),
    kV = AD(Object.getPrototypeOf, Object),
    UV = DD,
    MV = kV,
    FV = xD,
    BV = LD,
    jV = Object.getOwnPropertySymbols ? function(n) {
        for (var e = []; n;) UV(e, FV(n)), n = MV(n);
        return e
    } : BV,
    $V = Ld,
    VV = ID,
    HV = u(function(n) {
        var e = [];
        if (n != null)
            for (var t in Object(n)) e.push(t);
        return e
    }, "Ml"),
    zV = Object.prototype.hasOwnProperty,
    WV = SD,
    qV = u(function(n) {
        if (!$V(n)) return HV(n);
        var e = VV(n),
            t = [];
        for (var r in n)(r != "constructor" || !e && zV.call(n, r)) && t.push(r);
        return t
    }, "Ul"),
    GV = CD,
    KV = ND,
    JV = jV,
    ZV = u(function(n) {
        return GV(n) ? WV(n, !0) : qV(n)
    }, "Zl"),
    YV = BD,
    XV = jD,
    QV = PV,
    e6 = u(function(n) {
        return KV(n, ZV, JV)
    }, "Xl"),
    t6 = RT(function(n, e) {
        if (n == null) return {};
        var t = YV(e6(n), function(r) {
            return [r]
        });
        return e = XV(e), QV(n, t, function(r, i) {
            return e(r, i[0])
        })
    }),
    $D = "OS-CLRT-00000",
    fd = u(n => {
        let e = _V(n, t => t());
        return t6(e, t => t != null)
    }, "Kl"),
    Pp = {
        [Oe.Internal]: 1,
        [Oe.External]: 2,
        [Oe.Client]: 3
    },
    VD = u(n => {
        var e, t, r;
        let i = {};
        return n.type === ot.Error && n.error && (i["exception.type"] = n.error.name, i["exception.message"] = HD(n.error.message), i["exception.stacktrace"] = (e = n.error.stack) !== null && e !== void 0 ? e : "", i["outsystems.error.code"] = (r = (t = n.errorCode) === null || t === void 0 ? void 0 : t.toString()) !== null && r !== void 0 ? r : $D.toString()), i
    }, "Ql"),
    gp = u(n => {
        let e = u(t => typeof t == "boolean" ? "boolValue" : typeof t == "number" ? t % 1 == 0 ? "intValue" : "doubleValue" : "stringValue", "e");
        return Object.entries(n).map(t => {
            let [r, i] = t;
            return {
                key: r,
                value: {
                    [e(i)]: i
                }
            }
        })
    }, "Jl"),
    BT = u(n => (n["http.url"] && (n["http.url"] = HD(n["http.url"])), n), "tf"),
    HD = u(n => n.replace(/((outsystems|https|http):\/\/[^ ]*?)\?[^ ]*/g, "$1"), "ef"),
    Tr, Zs, Ys, Ip = class Ip {
        constructor(e) {
            let {
                baseAttributes: t = {},
                transportManager: r,
                getTimestamp: i
            } = e;
            Tr.set(this, void 0), Zs.set(this, void 0), Ys.set(this, void 0), ge(this, Tr, r, "f"), ge(this, Zs, i, "f"), ge(this, Ys, t, "f")
        }
        static build(e) {
            return se(this, arguments, void 0, function(t) {
                let {
                    transports: r = [],
                    baseAttributes: i,
                    databaseNameSuffix: o,
                    transportManager: s = new Ad({
                        databaseNameSuffix: o,
                        logTransports: r
                    }),
                    getTimestamp: a = u(() => new si, "i")
                } = t;
                return function*() {
                    return new Ip({
                        baseAttributes: i,
                        transportManager: s,
                        getTimestamp: a
                    })
                }()
            })
        }
        addTransport(e) {
            D(this, Tr, "f").addLogTransport(e)
        }
        removeTransport(e) {
            D(this, Tr, "f").removeLogTransport(e)
        }
        setLogTypeBaseline() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ot.Error;
            D(this, Tr, "f").setAllLogTypeBaselines(e)
        }
        flush() {
            return se(this, void 0, void 0, function*() {
                D(this, Tr, "f").flushLogs()
            })
        }
        setSchedulerTimerInterval(e) {
            D(this, Tr, "f").setSchedulerTimerInterval(e)
        }
        error(e) {
            let {
                category: t,
                message: r,
                error: i,
                errorCode: o,
                visibility: s = Oe.Internal,
                span: a,
                attributes: l
            } = e, d = new Su({
                type: ot.Error,
                category: t,
                message: r,
                error: i,
                visibility: s,
                timestamp: D(this, Zs, "f").call(this),
                errorCode: o,
                span: a,
                attributes: Object.assign(Object.assign({}, fd(D(this, Ys, "f"))), l)
            });
            D(this, Tr, "f").processLog(d)
        }
        warning(e) {
            let {
                category: t,
                message: r,
                visibility: i = Oe.Internal,
                span: o,
                attributes: s
            } = e, a = new Su({
                type: ot.Warning,
                category: t,
                message: r,
                visibility: i,
                timestamp: D(this, Zs, "f").call(this),
                span: o,
                attributes: Object.assign(Object.assign({}, fd(D(this, Ys, "f"))), s)
            });
            D(this, Tr, "f").processLog(a)
        }
        info(e) {
            let {
                category: t,
                message: r,
                visibility: i = Oe.External,
                span: o,
                attributes: s
            } = e, a = new Su({
                type: ot.Info,
                category: t,
                message: r,
                visibility: i,
                timestamp: D(this, Zs, "f").call(this),
                span: o,
                attributes: Object.assign(Object.assign({}, fd(D(this, Ys, "f"))), s)
            });
            D(this, Tr, "f").processLog(a)
        }
        debug(e) {
            let {
                category: t,
                message: r,
                visibility: i = Oe.Internal,
                span: o,
                attributes: s
            } = e, a = new Su({
                type: ot.Debug,
                category: t,
                message: r,
                visibility: i,
                timestamp: D(this, Zs, "f").call(this),
                span: o,
                attributes: Object.assign(Object.assign({}, fd(D(this, Ys, "f"))), s)
            });
            D(this, Tr, "f").processLog(a)
        }
        log(e) {
            return se(this, void 0, void 0, function*() {
                yield D(this, Tr, "f").processLog(e)
            })
        }
    };
u(Ip, "sf");
var Jw = Ip;
Tr = new WeakMap, Zs = new WeakMap, Ys = new WeakMap;
var vO = "OT_ZONE_CONTEXT",
    n6 = function() {
        function n() {
            this._enabled = !1, this._zoneCounter = 0
        }
        return u(n, "t"), n.prototype._activeContextFromZone = function(e) {
            return e && e.get(vO) || uo
        }, n.prototype._bindFunction = function(e, t) {
            var r = this,
                i = u(function() {
                    for (var o = this, s = [], a = 0; a < arguments.length; a++) s[a] = arguments[a];
                    return r.with(e, function() {
                        return t.apply(o, s)
                    })
                }, "n");
            return Object.defineProperty(i, "length", {
                enumerable: !1,
                configurable: !0,
                writable: !1,
                value: t.length
            }), i
        }, n.prototype._bindListener = function(e, t) {
            var r = t;
            return r.__ot_listeners !== void 0 || (r.__ot_listeners = {}, typeof r.addEventListener == "function" && (r.addEventListener = this._patchAddEventListener(r, r.addEventListener, e)), typeof r.removeEventListener == "function" && (r.removeEventListener = this._patchRemoveEventListener(r, r.removeEventListener))), t
        }, n.prototype._createZoneName = function() {
            this._zoneCounter++;
            var e = Math.random();
            return this._zoneCounter + "-" + e
        }, n.prototype._createZone = function(e, t) {
            var r;
            return Zone.current.fork({
                name: e,
                properties: (r = {}, r[vO] = t, r)
            })
        }, n.prototype._getActiveZone = function() {
            return Zone.current
        }, n.prototype._patchAddEventListener = function(e, t, r) {
            var i = this;
            return function(o, s, a) {
                e.__ot_listeners === void 0 && (e.__ot_listeners = {});
                var l = e.__ot_listeners[o];
                l === void 0 && (l = new WeakMap, e.__ot_listeners[o] = l);
                var d = i.bind(r, s);
                return l.set(s, d), t.call(this, o, d, a)
            }
        }, n.prototype._patchRemoveEventListener = function(e, t) {
            return function(r, i) {
                if (e.__ot_listeners === void 0 || e.__ot_listeners[r] === void 0) return t.call(this, r, i);
                var o = e.__ot_listeners[r],
                    s = o.get(i);
                return o.delete(i), t.call(this, r, s || i)
            }
        }, n.prototype.active = function() {
            if (!this._enabled) return uo;
            var e = this._getActiveZone(),
                t = this._activeContextFromZone(e);
            return t || uo
        }, n.prototype.bind = function(e, t) {
            return e === void 0 && (e = this.active()), typeof t == "function" ? this._bindFunction(e, t) : ((r = t) === void 0 && (r = {}), typeof r.addEventListener == "function" && typeof r.removeEventListener == "function" && this._bindListener(e, t), t);
            var r
        }, n.prototype.disable = function() {
            return this._enabled = !1, this
        }, n.prototype.enable = function() {
            return this._enabled = !0, this
        }, n.prototype.with = function(e, t, r) {
            for (var i = [], o = 3; o < arguments.length; o++) i[o - 3] = arguments[o];
            var s = this._createZoneName();
            return this._createZone(s, e).run(t, r, i)
        }, n
    }();
var ki = globalThis;

function xr(n) {
    return (ki.__Zone_symbol_prefix || "__zone_symbol__") + n
}
u(xr, "lf");
var Cd = Object.getOwnPropertyDescriptor,
    jT = Object.defineProperty,
    $T = Object.getPrototypeOf,
    r6 = Object.create,
    i6 = Array.prototype.slice,
    VT = "addEventListener",
    HT = "removeEventListener",
    gw = xr(VT),
    pw = xr(HT),
    lo = "true",
    ho = "false",
    Rd = xr("");

function zT(n, e) {
    return Zone.current.wrap(n, e)
}
u(zT, "Sf");

function WT(n, e, t, r, i) {
    return Zone.current.scheduleMacroTask(n, e, t, r, i)
}
u(WT, "Of");
var gt = xr,
    kp = typeof window != "undefined",
    Lu = kp ? window : void 0,
    an = kp && Lu || globalThis,
    o6 = "removeAttribute";

function Zw(n, e) {
    for (let t = n.length - 1; t >= 0; t--) typeof n[t] == "function" && (n[t] = zT(n[t], e + "_" + t));
    return n
}
u(Zw, "Rf");

function zD(n) {
    return !n || n.writable !== !1 && !(typeof n.get == "function" && n.set === void 0)
}
u(zD, "Pf");
var WD = typeof WorkerGlobalScope != "undefined" && self instanceof WorkerGlobalScope,
    Up = !("nw" in an) && an.process !== void 0 && an.process.toString() === "[object process]",
    qT = !Up && !WD && !(!kp || !Lu.HTMLElement),
    qD = an.process !== void 0 && an.process.toString() === "[object process]" && !WD && !(!kp || !Lu.HTMLElement),
    pp = {},
    s6 = gt("enable_beforeunload"),
    yO = u(function(n) {
        if (!(n = n || an.event)) return;
        let e = pp[n.type];
        e || (e = pp[n.type] = gt("ON_PROPERTY" + n.type));
        let t = this || n.target || an,
            r = t[e],
            i;
        if (qT && t === Lu && n.type === "error") {
            let o = n;
            i = r && r.call(this, o.message, o.filename, o.lineno, o.colno, o.error), i === !0 && n.preventDefault()
        } else i = r && r.apply(this, arguments), n.type === "beforeunload" && an[s6] && typeof i == "string" ? n.returnValue = i : i == null || i || n.preventDefault();
        return i
    }, "Bf");

function bO(n, e, t) {
    let r = Cd(n, e);
    if (!r && t && Cd(t, e) && (r = {
            enumerable: !0,
            configurable: !0
        }), !r || !r.configurable) return;
    let i = gt("on" + e + "patched");
    if (n.hasOwnProperty(i) && n[i]) return;
    delete r.writable, delete r.value;
    let o = r.get,
        s = r.set,
        a = e.slice(2),
        l = pp[a];
    l || (l = pp[a] = gt("ON_PROPERTY" + a)), r.set = function(d) {
        let c = this;
        c || n !== an || (c = an), c && (typeof c[l] == "function" && c.removeEventListener(a, yO), s && s.call(c, null), c[l] = d, typeof d == "function" && c.addEventListener(a, yO, !1))
    }, r.get = function() {
        let d = this;
        if (d || n !== an || (d = an), !d) return null;
        let c = d[l];
        if (c) return c;
        if (o) {
            let h = o.call(this);
            if (h) return r.set.call(this, h), typeof d[o6] == "function" && d.removeAttribute(e), h
        }
        return null
    }, jT(n, e, r), n[i] = !0
}
u(bO, "Uf");

function GD(n, e, t) {
    if (e)
        for (let r = 0; r < e.length; r++) bO(n, "on" + e[r], t);
    else {
        let r = [];
        for (let i in n) i.slice(0, 2) == "on" && r.push(i);
        for (let i = 0; i < r.length; i++) bO(n, r[i], t)
    }
}
u(GD, "Wf");
var oi = gt("originalInstance");

function od(n) {
    let e = an[n];
    if (!e) return;
    an[gt(n)] = e, an[n] = function() {
        let i = Zw(arguments, n);
        switch (i.length) {
            case 0:
                this[oi] = new e;
                break;
            case 1:
                this[oi] = new e(i[0]);
                break;
            case 2:
                this[oi] = new e(i[0], i[1]);
                break;
            case 3:
                this[oi] = new e(i[0], i[1], i[2]);
                break;
            case 4:
                this[oi] = new e(i[0], i[1], i[2], i[3]);
                break;
            default:
                throw new Error("Arg list too long.")
        }
    }, po(an[n], e);
    let t = new e(function() {}),
        r;
    for (r in t) n === "XMLHttpRequest" && r === "responseBlob" || function(i) {
        typeof t[i] == "function" ? an[n].prototype[i] = function() {
            return this[oi][i].apply(this[oi], arguments)
        } : jT(an[n].prototype, i, {
            set: u(function(o) {
                typeof o == "function" ? (this[oi][i] = zT(o, n + "." + i), po(this[oi][i], o)) : this[oi][i] = o
            }, "set"),
            get: u(function() {
                return this[oi][i]
            }, "get")
        })
    }(r);
    for (r in e) r !== "prototype" && e.hasOwnProperty(r) && (an[n][r] = e[r])
}
u(od, "Ff");

function fo(n, e, t) {
    let r = n;
    for (; r && !r.hasOwnProperty(e);) r = $T(r);
    !r && n[e] && (r = n);
    let i = gt(e),
        o = null;
    if (r && (!(o = r[i]) || !r.hasOwnProperty(i)) && (o = r[i] = r[e], zD(r && Cd(r, e)))) {
        let s = t(o, i, e);
        r[e] = function() {
            return s(this, arguments)
        }, po(r[e], o)
    }
    return o
}
u(fo, "Zf");

function a6(n, e, t) {
    let r = null;

    function i(o) {
        let s = o.data;
        return s.args[s.cbIdx] = function() {
            o.invoke.apply(this, arguments)
        }, r.apply(s.target, s.args), o
    }
    u(i, "i"), r = fo(n, e, o => function(s, a) {
        let l = t(s, a);
        return l.cbIdx >= 0 && typeof a[l.cbIdx] == "function" ? WT(l.name, a[l.cbIdx], l, i) : o.apply(s, a)
    })
}
u(a6, "Vf");

function po(n, e) {
    n[gt("OriginalDelegate")] = e
}
u(po, "Gf");
var wO = !1,
    mw = !1;

function u6() {
    try {
        let n = Lu.navigator.userAgent;
        if (n.indexOf("MSIE ") !== -1 || n.indexOf("Trident/") !== -1) return !0
    } catch (n) {}
    return !1
}
u(u6, "$f");

function c6() {
    if (wO) return mw;
    wO = !0;
    try {
        let n = Lu.navigator.userAgent;
        n.indexOf("MSIE ") === -1 && n.indexOf("Trident/") === -1 && n.indexOf("Edge/") === -1 || (mw = !0)
    } catch (n) {}
    return mw
}
u(c6, "qf");

function TO(n) {
    return typeof n == "function"
}
u(TO, "Kf");

function EO(n) {
    return typeof n == "number"
}
u(EO, "Yf");
var Iu = !1;
if (typeof window != "undefined") try {
    let n = Object.defineProperty({}, "passive", {
        get: u(function() {
            Iu = !0
        }, "get")
    });
    window.addEventListener("test", n, n), window.removeEventListener("test", n, n)
} catch (n) {
    Iu = !1
}
var l6 = {
        useG: !0
    },
    Pr = {},
    KD = {},
    JD = new RegExp("^" + Rd + "(\\w+)(true|false)$"),
    ZD = gt("propagationStopped");

function YD(n, e) {
    let t = (e ? e(n) : n) + ho,
        r = (e ? e(n) : n) + lo,
        i = Rd + t,
        o = Rd + r;
    Pr[n] = {}, Pr[n][ho] = i, Pr[n][lo] = o
}
u(YD, "ih");

function d6(n, e, t, r) {
    let i = r && r.add || VT,
        o = r && r.rm || HT,
        s = r && r.listeners || "eventListeners",
        a = r && r.rmAll || "removeAllListeners",
        l = gt(i),
        d = "." + i + ":",
        c = "prependListener",
        h = "." + c + ":",
        f = u(function(S, _, I) {
            if (S.isRemoved) return;
            let x = S.callback,
                L;
            typeof x == "object" && x.handleEvent && (S.callback = N => x.handleEvent(N), S.originalDelegate = x);
            try {
                S.invoke(S, _, [I])
            } catch (N) {
                L = N
            }
            let U = S.options;
            if (U && typeof U == "object" && U.once) {
                let N = S.originalDelegate ? S.originalDelegate : S.callback;
                _[o].call(_, I.type, N, U)
            }
            return L
        }, "h");

    function g(S, _, I) {
        if (!(_ = _ || n.event)) return;
        let x = S || _.target || n,
            L = x[Pr[_.type][I ? lo : ho]];
        if (L) {
            let U = [];
            if (L.length === 1) {
                let N = f(L[0], x, _);
                N && U.push(N)
            } else {
                let N = L.slice();
                for (let j = 0; j < N.length && (!_ || _[ZD] !== !0); j++) {
                    let q = f(N[j], x, _);
                    q && U.push(q)
                }
            }
            if (U.length === 1) throw U[0];
            for (let N = 0; N < U.length; N++) {
                let j = U[N];
                e.nativeScheduleMicroTask(() => {
                    throw j
                })
            }
        }
    }
    u(g, "p");
    let p = u(function(S) {
            return g(this, S, !1)
        }, "d"),
        y = u(function(S) {
            return g(this, S, !0)
        }, "g");

    function b(S, _) {
        if (!S) return !1;
        let I = !0;
        _ && _.useG !== void 0 && (I = _.useG);
        let x = _ && _.vh,
            L = !0;
        _ && _.chkDup !== void 0 && (L = _.chkDup);
        let U = !1;
        _ && _.rt !== void 0 && (U = _.rt);
        let N = S;
        for (; N && !N.hasOwnProperty(i);) N = $T(N);
        if (!N && S[i] && (N = S), !N || N[l]) return !1;
        let j = _ && _.eventNameToString,
            q = {},
            fe = N[l] = N[i],
            K = N[gt(o)] = N[o],
            ae = N[gt(s)] = N[s],
            Z = N[gt(a)] = N[a],
            ne;
        _ && _.prepend && (ne = N[gt(_.prepend)] = N[_.prepend]);
        let ue = u(function(re) {
                return ne.call(q.target, q.eventName, re.invoke, q.options)
            }, "w"),
            ve = I ? function(re) {
                if (!q.isExisting) return fe.call(q.target, q.eventName, q.capture ? y : p, q.options)
            } : function(re) {
                return fe.call(q.target, q.eventName, re.invoke, q.options)
            },
            Ee = I ? function(re) {
                if (!re.isRemoved) {
                    let B = Pr[re.eventName],
                        P;
                    B && (P = B[re.capture ? lo : ho]);
                    let m = P && re.target[P];
                    if (m) {
                        for (let v = 0; v < m.length; v++)
                            if (m[v] === re) {
                                m.splice(v, 1), re.isRemoved = !0, re.removeAbortListener && (re.removeAbortListener(), re.removeAbortListener = null), m.length === 0 && (re.allRemoved = !0, re.target[P] = null);
                                break
                            }
                    }
                }
                if (re.allRemoved) return K.call(re.target, re.eventName, re.capture ? y : p, re.options)
            } : function(re) {
                return K.call(re.target, re.eventName, re.invoke, re.options)
            },
            be = _ && _.diff ? _.diff : function(re, B) {
                let P = typeof B;
                return P === "function" && re.callback === B || P === "object" && re.originalDelegate === B
            },
            De = Zone[gt("UNPATCHED_EVENTS")],
            Pe = n[gt("PASSIVE_EVENTS")],
            nt = u(function(re, B, P, m) {
                let v = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : !1,
                    w = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : !1;
                return function() {
                    let A = this || n,
                        R = arguments[0];
                    _ && _.transferEventName && (R = _.transferEventName(R));
                    let O = arguments[1];
                    if (!O) return re.apply(this, arguments);
                    if (Up && R === "uncaughtException") return re.apply(this, arguments);
                    let W = !1;
                    if (typeof O != "function") {
                        if (!O.handleEvent) return re.apply(this, arguments);
                        W = !0
                    }
                    if (x && !x(re, O, A, arguments)) return;
                    let ie = Iu && !!Pe && Pe.indexOf(R) !== -1,
                        Se = function(Ze) {
                            if (typeof Ze == "object" && Ze !== null) {
                                let xn = Vt({}, Ze);
                                return Ze.signal && (xn.signal = Ze.signal), xn
                            }
                            return Ze
                        }(function(Ze, xn) {
                            return !Iu && typeof Ze == "object" && Ze ? !!Ze.capture : Iu && xn ? typeof Ze == "boolean" ? {
                                capture: Ze,
                                passive: !0
                            } : Ze ? typeof Ze == "object" && Ze.passive !== !1 ? Vo(Vt({}, Ze), {
                                passive: !0
                            }) : Ze : {
                                passive: !0
                            } : Ze
                        }(arguments[2], ie)),
                        Re = Se == null ? void 0 : Se.signal;
                    if (Re != null && Re.aborted) return;
                    if (De) {
                        for (let Ze = 0; Ze < De.length; Ze++)
                            if (R === De[Ze]) return ie ? re.call(A, R, O, Se) : re.apply(this, arguments)
                    }
                    let ke = !!Se && (typeof Se == "boolean" || Se.capture),
                        _t = !(!Se || typeof Se != "object") && Se.once,
                        we = Zone.current,
                        $e = Pr[R];
                    $e || (YD(R, j), $e = Pr[R]);
                    let ct = $e[ke ? lo : ho],
                        St, hn = A[ct],
                        Ba = !1;
                    if (hn) {
                        if (Ba = !0, L) {
                            for (let Ze = 0; Ze < hn.length; Ze++)
                                if (be(hn[Ze], O)) return
                        }
                    } else hn = A[ct] = [];
                    let Or = A.constructor.name,
                        Os = KD[Or];
                    Os && (St = Os[R]), St || (St = Or + B + (j ? j(R) : R)), q.options = Se, _t && (q.options.once = !1), q.target = A, q.capture = ke, q.eventName = R, q.isExisting = Ba;
                    let Qr = I ? l6 : void 0;
                    Qr && (Qr.taskData = q), Re && (q.options.signal = void 0);
                    let qn = we.scheduleEventTask(St, O, Qr, P, m);
                    if (Re) {
                        q.options.signal = Re;
                        let Ze = u(() => qn.zone.cancelTask(qn), "t");
                        re.call(Re, "abort", Ze, {
                            once: !0
                        }), qn.removeAbortListener = () => Re.removeEventListener("abort", Ze)
                    }
                    return q.target = null, Qr && (Qr.taskData = null), _t && (q.options.once = !0), (Iu || typeof qn.options != "boolean") && (qn.options = Se), qn.target = A, qn.capture = ke, qn.eventName = R, W && (qn.originalDelegate = O), w ? hn.unshift(qn) : hn.push(qn), v ? A : void 0
                }
            }, "P");
        return N[i] = nt(fe, d, ve, Ee, U), ne && (N[c] = nt(ne, h, ue, Ee, U, !0)), N[o] = function() {
            let re = this || n,
                B = arguments[0];
            _ && _.transferEventName && (B = _.transferEventName(B));
            let P = arguments[2],
                m = !!P && (typeof P == "boolean" || P.capture),
                v = arguments[1];
            if (!v) return K.apply(this, arguments);
            if (x && !x(K, v, re, arguments)) return;
            let w = Pr[B],
                A;
            w && (A = w[m ? lo : ho]);
            let R = A && re[A];
            if (R)
                for (let O = 0; O < R.length; O++) {
                    let W = R[O];
                    if (be(W, v)) return R.splice(O, 1), W.isRemoved = !0, R.length === 0 && (W.allRemoved = !0, re[A] = null, !m && typeof B == "string") && (re[Rd + "ON_PROPERTY" + B] = null), W.zone.cancelTask(W), U ? re : void 0
                }
            return K.apply(this, arguments)
        }, N[s] = function() {
            let re = this || n,
                B = arguments[0];
            _ && _.transferEventName && (B = _.transferEventName(B));
            let P = [],
                m = XD(re, j ? j(B) : B);
            for (let v = 0; v < m.length; v++) {
                let w = m[v],
                    A = w.originalDelegate ? w.originalDelegate : w.callback;
                P.push(A)
            }
            return P
        }, N[a] = function() {
            let re = this || n,
                B = arguments[0];
            if (B) {
                _ && _.transferEventName && (B = _.transferEventName(B));
                let P = Pr[B];
                if (P) {
                    let m = P[ho],
                        v = P[lo],
                        w = re[m],
                        A = re[v];
                    if (w) {
                        let R = w.slice();
                        for (let O = 0; O < R.length; O++) {
                            let W = R[O],
                                ie = W.originalDelegate ? W.originalDelegate : W.callback;
                            this[o].call(this, B, ie, W.options)
                        }
                    }
                    if (A) {
                        let R = A.slice();
                        for (let O = 0; O < R.length; O++) {
                            let W = R[O],
                                ie = W.originalDelegate ? W.originalDelegate : W.callback;
                            this[o].call(this, B, ie, W.options)
                        }
                    }
                }
            } else {
                let P = Object.keys(re);
                for (let m = 0; m < P.length; m++) {
                    let v = P[m],
                        w = JD.exec(v),
                        A = w && w[1];
                    A && A !== "removeListener" && this[a].call(this, A)
                }
                this[a].call(this, "removeListener")
            }
            if (U) return this
        }, po(N[i], fe), po(N[o], K), Z && po(N[a], Z), ae && po(N[s], ae), !0
    }
    u(b, "v");
    let E = [];
    for (let S = 0; S < t.length; S++) E[S] = b(t[S], r);
    return E
}
u(d6, "oh");

function XD(n, e) {
    if (!e) {
        let o = [];
        for (let s in n) {
            let a = JD.exec(s),
                l = a && a[1];
            if (l && (!e || l === e)) {
                let d = n[s];
                if (d)
                    for (let c = 0; c < d.length; c++) o.push(d[c])
            }
        }
        return o
    }
    let t = Pr[e];
    t || (YD(e), t = Pr[e]);
    let r = n[t[ho]],
        i = n[t[lo]];
    return r ? i ? r.concat(i) : r.slice() : i ? i.slice() : []
}
u(XD, "sh");

function h6(n, e) {
    let t = n.Event;
    t && t.prototype && e.patchMethod(t.prototype, "stopImmediatePropagation", r => function(i, o) {
        i[ZD] = !0, r && r.apply(i, o)
    })
}
u(h6, "ah");

function f6(n, e) {
    e.patchMethod(n, "queueMicrotask", t => function(r, i) {
        Zone.current.scheduleMicroTask("queueMicrotask", i[0])
    })
}
u(f6, "uh");
var mg = gt("zoneTask");

function su(n, e, t, r) {
    let i = null,
        o = null;
    t += r;
    let s = {};

    function a(d) {
        let c = d.data;
        c.args[0] = function() {
            return d.invoke.apply(this, arguments)
        };
        let h = i.apply(n, c.args);
        return EO(h) ? c.handleId = h : (c.handle = h, c.isRefreshable = TO(h.refresh)), d
    }
    u(a, "a");

    function l(d) {
        let {
            handle: c,
            handleId: h
        } = d.data;
        return o.call(n, c != null ? c : h)
    }
    u(l, "u"), i = fo(n, e += r, d => function(c, h) {
        if (TO(h[0])) {
            var f;
            let g = {
                    isRefreshable: !1,
                    isPeriodic: r === "Interval",
                    delay: r === "Timeout" || r === "Interval" ? h[1] || 0 : void 0,
                    args: h
                },
                p = h[0];
            h[0] = function() {
                try {
                    return p.apply(this, arguments)
                } finally {
                    let {
                        handle: I,
                        handleId: x,
                        isPeriodic: L,
                        isRefreshable: U
                    } = g;
                    L || U || (x ? delete s[x] : I && (I[mg] = null))
                }
            };
            let y = WT(e, h[0], g, a, l);
            if (!y) return y;
            let {
                handleId: b,
                handle: E,
                isRefreshable: S,
                isPeriodic: _
            } = y.data;
            if (b) s[b] = y;
            else if (E && (E[mg] = y, S && !_)) {
                let I = E.refresh;
                E.refresh = function() {
                    let {
                        zone: x,
                        state: L
                    } = y;
                    return L === "notScheduled" ? (y._state = "scheduled", x._updateTaskCount(y, 1)) : L === "running" && (y._state = "scheduling"), I.call(this)
                }
            }
            return (f = E != null ? E : b) !== null && f !== void 0 ? f : y
        }
        return d.apply(n, h)
    }), o = fo(n, t, d => function(c, h) {
        var f;
        let g = h[0],
            p;
        EO(g) ? (p = s[g], delete s[g]) : (p = g == null ? void 0 : g[mg], p ? g[mg] = null : p = g), (f = p) !== null && f !== void 0 && f.type ? p.cancelFn && p.zone.cancelTask(p) : d.apply(n, h)
    })
}
u(su, "lh");

function g6(n, e) {
    if (Zone[e.symbol("patchEventTarget")]) return;
    let {
        eventNames: t,
        zoneSymbolEventNames: r,
        TRUE_STR: i,
        FALSE_STR: o,
        ZONE_SYMBOL_PREFIX: s
    } = e.getGlobalObjects();
    for (let l = 0; l < t.length; l++) {
        let d = t[l],
            c = s + (d + o),
            h = s + (d + i);
        r[d] = {}, r[d][o] = c, r[d][i] = h
    }
    let a = n.EventTarget;
    return a && a.prototype ? (e.patchEventTarget(n, e, [a && a.prototype]), !0) : void 0
}
u(g6, "fh");

function QD(n, e, t) {
    if (!t || t.length === 0) return e;
    let r = t.filter(o => o.target === n);
    if (!r || r.length === 0) return e;
    let i = r[0].ignoreProperties;
    return e.filter(o => i.indexOf(o) === -1)
}
u(QD, "hh");

function _O(n, e, t, r) {
    n && GD(n, QD(n, e, t), r)
}
u(_O, "ph");

function Yw(n) {
    return Object.getOwnPropertyNames(n).filter(e => e.startsWith("on") && e.length > 2).map(e => e.substring(2))
}
u(Yw, "dh");

function p6(n, e) {
    if (Up && !qD || Zone[n.symbol("patchEvents")]) return;
    let t = e.__Zone_ignore_on_properties,
        r = [];
    if (qT) {
        let i = window;
        r = r.concat(["Document", "SVGElement", "Element", "HTMLElement", "HTMLBodyElement", "HTMLMediaElement", "HTMLFrameSetElement", "HTMLFrameElement", "HTMLIFrameElement", "HTMLMarqueeElement", "Worker"]);
        let o = u6() ? [{
            target: i,
            ignoreProperties: ["error"]
        }] : [];
        _O(i, Yw(i), t && t.concat(o), $T(i))
    }
    r = r.concat(["XMLHttpRequest", "XMLHttpRequestEventTarget", "IDBIndex", "IDBRequest", "IDBOpenDBRequest", "IDBDatabase", "IDBTransaction", "IDBCursor", "WebSocket"]);
    for (let i = 0; i < r.length; i++) {
        let o = e[r[i]];
        o && o.prototype && _O(o.prototype, Yw(o.prototype), t)
    }
}
u(p6, "gh");

function m6(n) {
    n.__load_patch("ZoneAwarePromise", (e, t, r) => {
        let i = Object.getOwnPropertyDescriptor,
            o = Object.defineProperty,
            s = r.symbol,
            a = [],
            l = e[s("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")] !== !1,
            d = s("Promise"),
            c = s("then"),
            h = "__creationTrace__";
        r.onUnhandledError = m => {
            if (r.showUncaughtError()) {
                let v = m && m.rejection;
                v ? console.error("Unhandled Promise rejection:", v instanceof Error ? v.message : v, "; Zone:", m.zone.name, "; Task:", m.task && m.task.source, "; Value:", v, v instanceof Error ? v.stack : void 0) : console.error(m)
            }
        }, r.microtaskDrainDone = () => {
            for (; a.length;) {
                let m = a.shift();
                try {
                    m.zone.runGuarded(() => {
                        throw m.throwOriginal ? m.rejection : m
                    })
                } catch (v) {
                    g(v)
                }
            }
        };
        let f = s("unhandledPromiseRejectionHandler");

        function g(m) {
            r.onUnhandledError(m);
            try {
                let v = t[f];
                typeof v == "function" && v.call(this, m)
            } catch (v) {}
        }
        u(g, "h");

        function p(m) {
            return m && m.then
        }
        u(p, "p");

        function y(m) {
            return m
        }
        u(y, "d");

        function b(m) {
            return Pe.reject(m)
        }
        u(b, "g");
        let E = s("state"),
            S = s("value"),
            _ = s("finally"),
            I = s("parentPromiseValue"),
            x = s("parentPromiseState"),
            L = "Promise.then",
            U = null,
            N = !0,
            j = !1,
            q = 0;

        function fe(m, v) {
            return w => {
                try {
                    ne(m, v, w)
                } catch (A) {
                    ne(m, !1, A)
                }
            }
        }
        u(fe, "L");
        let K = u(function() {
                let m = !1;
                return function(v) {
                    return function() {
                        m || (m = !0, v.apply(null, arguments))
                    }
                }
            }, "A"),
            ae = "Promise resolved with itself",
            Z = s("currentTaskTrace");

        function ne(m, v, w) {
            let A = K();
            if (m === w) throw new TypeError(ae);
            if (m[E] === U) {
                let R = null;
                try {
                    typeof w != "object" && typeof w != "function" || (R = w && w.then)
                } catch (O) {
                    return A(() => {
                        ne(m, !1, O)
                    })(), m
                }
                if (v !== j && w instanceof Pe && w.hasOwnProperty(E) && w.hasOwnProperty(S) && w[E] !== U) ve(w), ne(m, w[E], w[S]);
                else if (v !== j && typeof R == "function") try {
                    R.call(w, A(fe(m, v)), A(fe(m, !1)))
                } catch (O) {
                    A(() => {
                        ne(m, !1, O)
                    })()
                } else {
                    m[E] = v;
                    let O = m[S];
                    if (m[S] = w, m[_] === _ && v === N && (m[E] = m[x], m[S] = m[I]), v === j && w instanceof Error) {
                        let W = t.currentTask && t.currentTask.data && t.currentTask.data[h];
                        W && o(w, Z, {
                            configurable: !0,
                            enumerable: !1,
                            writable: !0,
                            value: W
                        })
                    }
                    for (let W = 0; W < O.length;) Ee(m, O[W++], O[W++], O[W++], O[W++]);
                    if (O.length == 0 && v == j) {
                        m[E] = q;
                        let W = w;
                        try {
                            throw new Error("Uncaught (in promise): " + function(ie) {
                                return ie && ie.toString === Object.prototype.toString ? (ie.constructor && ie.constructor.name || "") + ": " + JSON.stringify(ie) : ie ? ie.toString() : Object.prototype.toString.call(ie)
                            }(w) + (w && w.stack ? `
` + w.stack : ""))
                        } catch (ie) {
                            W = ie
                        }
                        l && (W.throwOriginal = !0), W.rejection = w, W.promise = m, W.zone = t.current, W.task = t.currentTask, a.push(W), r.scheduleMicroTask()
                    }
                }
            }
            return m
        }
        u(ne, "R");
        let ue = s("rejectionHandledHandler");

        function ve(m) {
            if (m[E] === q) {
                try {
                    let v = t[ue];
                    v && typeof v == "function" && v.call(this, {
                        rejection: m[S],
                        promise: m
                    })
                } catch (v) {}
                m[E] = j;
                for (let v = 0; v < a.length; v++) m === a[v].promise && a.splice(v, 1)
            }
        }
        u(ve, "C");

        function Ee(m, v, w, A, R) {
            ve(m);
            let O = m[E],
                W = O ? typeof A == "function" ? A : y : typeof R == "function" ? R : b;
            v.scheduleMicroTask(L, () => {
                try {
                    let ie = m[S],
                        Se = !!w && _ === w[_];
                    Se && (w[I] = ie, w[x] = O);
                    let Re = v.run(W, void 0, Se && W !== b && W !== y ? [] : [ie]);
                    ne(w, !0, Re)
                } catch (ie) {
                    ne(w, !1, ie)
                }
            }, w)
        }
        u(Ee, "N");
        let be = u(function() {}, "x"),
            De = e.AggregateError,
            P = class P {
                static toString() {
                    return "function ZoneAwarePromise() { [native code] }"
                }
                static resolve(v) {
                    return v instanceof P ? v : ne(new this(null), N, v)
                }
                static reject(v) {
                    return ne(new this(null), j, v)
                }
                static withResolvers() {
                    let v = {};
                    return v.promise = new P((w, A) => {
                        v.resolve = w, v.reject = A
                    }), v
                }
                static any(v) {
                    if (!v || typeof v[Symbol.iterator] != "function") return Promise.reject(new De([], "All promises were rejected"));
                    let w = [],
                        A = 0;
                    try {
                        for (let W of v) A++, w.push(P.resolve(W))
                    } catch (W) {
                        return Promise.reject(new De([], "All promises were rejected"))
                    }
                    if (A === 0) return Promise.reject(new De([], "All promises were rejected"));
                    let R = !1,
                        O = [];
                    return new P((W, ie) => {
                        for (let Se = 0; Se < w.length; Se++) w[Se].then(Re => {
                            R || (R = !0, W(Re))
                        }, Re => {
                            O.push(Re), A--, A === 0 && (R = !0, ie(new De(O, "All promises were rejected")))
                        })
                    })
                }
                static race(v) {
                    let w, A, R = new this((ie, Se) => {
                        w = ie, A = Se
                    });

                    function O(ie) {
                        w(ie)
                    }
                    u(O, "i");

                    function W(ie) {
                        A(ie)
                    }
                    u(W, "o");
                    for (let ie of v) p(ie) || (ie = this.resolve(ie)), ie.then(O, W);
                    return R
                }
                static all(v) {
                    return P.allWithCallback(v)
                }
                static allSettled(v) {
                    return (this && this.prototype instanceof P ? this : P).allWithCallback(v, {
                        thenCallback: u(w => ({
                            status: "fulfilled",
                            value: w
                        }), "thenCallback"),
                        errorCallback: u(w => ({
                            status: "rejected",
                            reason: w
                        }), "errorCallback")
                    })
                }
                static allWithCallback(v, w) {
                    let A, R, O = new this((Re, ke) => {
                            A = Re, R = ke
                        }),
                        W = 2,
                        ie = 0,
                        Se = [];
                    for (let Re of v) {
                        p(Re) || (Re = this.resolve(Re));
                        let ke = ie;
                        try {
                            Re.then(_t => {
                                Se[ke] = w ? w.thenCallback(_t) : _t, W--, W === 0 && A(Se)
                            }, _t => {
                                w ? (Se[ke] = w.errorCallback(_t), W--, W === 0 && A(Se)) : R(_t)
                            })
                        } catch (_t) {
                            R(_t)
                        }
                        W++, ie++
                    }
                    return W -= 2, W === 0 && A(Se), O
                }
                constructor(v) {
                    let w = this;
                    if (!(w instanceof P)) throw new Error("Must be an instanceof Promise.");
                    w[E] = U, w[S] = [];
                    try {
                        let A = K();
                        v && v(A(fe(w, N)), A(fe(w, j)))
                    } catch (A) {
                        ne(w, !1, A)
                    }
                }
                get[Symbol.toStringTag]() {
                    return "Promise"
                }
                get[Symbol.species]() {
                    return P
                }
                then(v, w) {
                    var A;
                    let R = (A = this.constructor) === null || A === void 0 ? void 0 : A[Symbol.species];
                    R && typeof R == "function" || (R = this.constructor || P);
                    let O = new R(be),
                        W = t.current;
                    return this[E] == U ? this[S].push(W, O, v, w) : Ee(this, W, O, v, w), O
                } catch (v) {
                    return this.then(null, v)
                } finally(v) {
                    var w;
                    let A = (w = this.constructor) === null || w === void 0 ? void 0 : w[Symbol.species];
                    A && typeof A == "function" || (A = P);
                    let R = new A(be);
                    R[_] = _;
                    let O = t.current;
                    return this[E] == U ? this[S].push(O, R, v, v) : Ee(this, O, R, v, v), R
                }
            };
        u(P, "M");
        let Pe = P;
        Pe.resolve = Pe.resolve, Pe.reject = Pe.reject, Pe.race = Pe.race, Pe.all = Pe.all;
        let nt = e[d] = e.Promise;
        e.Promise = Pe;
        let re = s("thenPatched");

        function B(m) {
            let v = m.prototype,
                w = i(v, "then");
            if (w && (w.writable === !1 || !w.configurable)) return;
            let A = v.then;
            v[c] = A, m.prototype.then = function(R, O) {
                return new Pe((W, ie) => {
                    A.call(this, W, ie)
                }).then(R, O)
            }, m[re] = !0
        }
        return u(B, "U"), r.patchThen = B, nt && (B(nt), fo(e, "fetch", m => {
            return v = m,
                function(w, A) {
                    let R = v.apply(w, A);
                    if (R instanceof Pe) return R;
                    let O = R.constructor;
                    return O[re] || B(O), R
                };
            var v
        })), Promise[t.__symbol__("uncaughtPromiseErrors")] = a, Pe
    })
}
u(m6, "vh");

function v6(n, e, t, r, i) {
    let o = Zone.__symbol__(r);
    if (e[o]) return;
    let s = e[o] = e[r];
    e[r] = function(a, l, d) {
        return l && l.prototype && i.forEach(function(c) {
            let h = `${t}.${r}::` + c,
                f = l.prototype;
            try {
                if (f.hasOwnProperty(c)) {
                    let g = n.ObjectGetOwnPropertyDescriptor(f, c);
                    g && g.value ? (g.value = n.wrapWithCurrentZone(g.value, h), n._redefineProperty(l.prototype, c, g)) : f[c] && (f[c] = n.wrapWithCurrentZone(f[c], h))
                } else f[c] && (f[c] = n.wrapWithCurrentZone(f[c], h))
            } catch (g) {}
        }), s.call(e, a, l, d)
    }, n.attachOriginToPatched(e[r], s)
}
u(v6, "_h");
var SO = function(n) {
    let e = globalThis,
        t = e[xr("forceDuplicateZoneCheck")] === !0;
    if (e.Zone && (t || typeof e.Zone.__symbol__ != "function")) throw new Error("Zone already loaded.");
    return (n = e.Zone) !== null && n !== void 0 || (e.Zone = function(r) {
        let i = ki.performance;

        function o(re) {
            i && i.mark && i.mark(re)
        }
        u(o, "e");

        function s(re, B) {
            i && i.measure && i.measure(re, B)
        }
        u(s, "r"), o("Zone");
        let De = class De {
            static assertZonePatched() {
                if (ki.Promise !== Z.ZoneAwarePromise) throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")
            }
            static get root() {
                let B = De.current;
                for (; B.parent;) B = B.parent;
                return B
            }
            static get current() {
                return ue.zone
            }
            static get currentTask() {
                return ve
            }
            static __load_patch(B, P) {
                let m = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1;
                if (Z.hasOwnProperty(B)) {
                    let v = ki[xr("forceDuplicateZoneCheck")] === !0;
                    if (!m && v) throw Error("Already loaded patch: " + B)
                } else if (!ki["__Zone_disable_" + B]) {
                    let v = "Zone:" + B;
                    o(v), Z[B] = P(ki, De, ne), s(v, v)
                }
            }
            get parent() {
                return this._parent
            }
            get name() {
                return this._name
            }
            constructor(B, P) {
                this._parent = B, this._name = P ? P.name || "unnamed" : "<root>", this._properties = P && P.properties || {}, this._zoneDelegate = new d(this, this._parent && this._parent._zoneDelegate, P)
            }
            get(B) {
                let P = this.getZoneWith(B);
                if (P) return P._properties[B]
            }
            getZoneWith(B) {
                let P = this;
                for (; P;) {
                    if (P._properties.hasOwnProperty(B)) return P;
                    P = P._parent
                }
                return null
            }
            fork(B) {
                if (!B) throw new Error("ZoneSpec required!");
                return this._zoneDelegate.fork(this, B)
            }
            wrap(B, P) {
                if (typeof B != "function") throw new Error("Expecting function got: " + B);
                let m = this._zoneDelegate.intercept(this, B, P),
                    v = this;
                return function() {
                    return v.runGuarded(m, this, arguments, P)
                }
            }
            run(B, P, m, v) {
                ue = {
                    parent: ue,
                    zone: this
                };
                try {
                    return this._zoneDelegate.invoke(this, B, P, m, v)
                } finally {
                    ue = ue.parent
                }
            }
            runGuarded(B) {
                let P = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null,
                    m = arguments.length > 2 ? arguments[2] : void 0,
                    v = arguments.length > 3 ? arguments[3] : void 0;
                ue = {
                    parent: ue,
                    zone: this
                };
                try {
                    try {
                        return this._zoneDelegate.invoke(this, B, P, m, v)
                    } catch (w) {
                        if (this._zoneDelegate.handleError(this, w)) throw w
                    }
                } finally {
                    ue = ue.parent
                }
            }
            runTask(B, P, m) {
                if (B.zone != this) throw new Error("A task can only be run in the zone of creation! (Creation: " + (B.zone || I).name + "; Execution: " + this.name + ")");
                let v = B,
                    {
                        type: w,
                        data: {
                            isPeriodic: A = !1,
                            isRefreshable: R = !1
                        } = {}
                    } = B;
                if (B.state === x && (w === ae || w === K)) return;
                let O = B.state != N;
                O && v._transitionTo(N, U);
                let W = ve;
                ve = v, ue = {
                    parent: ue,
                    zone: this
                };
                try {
                    w != K || !B.data || A || R || (B.cancelFn = void 0);
                    try {
                        return this._zoneDelegate.invokeTask(this, v, P, m)
                    } catch (ie) {
                        if (this._zoneDelegate.handleError(this, ie)) throw ie
                    }
                } finally {
                    let ie = B.state;
                    if (ie !== x && ie !== q)
                        if (w == ae || A || R && ie === L) O && v._transitionTo(U, N, L);
                        else {
                            let Se = v._zoneDelegates;
                            this._updateTaskCount(v, -1), O && v._transitionTo(x, N, x), R && (v._zoneDelegates = Se)
                        } ue = ue.parent, ve = W
                }
            }
            scheduleTask(B) {
                if (B.zone && B.zone !== this) {
                    let m = this;
                    for (; m;) {
                        if (m === B.zone) throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${B.zone.name}`);
                        m = m.parent
                    }
                }
                B._transitionTo(L, x);
                let P = [];
                B._zoneDelegates = P, B._zone = this;
                try {
                    B = this._zoneDelegate.scheduleTask(this, B)
                } catch (m) {
                    throw B._transitionTo(q, L, x), this._zoneDelegate.handleError(this, m), m
                }
                return B._zoneDelegates === P && this._updateTaskCount(B, 1), B.state == L && B._transitionTo(U, L), B
            }
            scheduleMicroTask(B, P, m, v) {
                return this.scheduleTask(new c(fe, B, P, m, v, void 0))
            }
            scheduleMacroTask(B, P, m, v, w) {
                return this.scheduleTask(new c(K, B, P, m, v, w))
            }
            scheduleEventTask(B, P, m, v, w) {
                return this.scheduleTask(new c(ae, B, P, m, v, w))
            }
            cancelTask(B) {
                if (B.zone != this) throw new Error("A task can only be cancelled in the zone of creation! (Creation: " + (B.zone || I).name + "; Execution: " + this.name + ")");
                if (B.state === U || B.state === N) {
                    B._transitionTo(j, U, N);
                    try {
                        this._zoneDelegate.cancelTask(this, B)
                    } catch (P) {
                        throw B._transitionTo(q, j), this._zoneDelegate.handleError(this, P), P
                    }
                    return this._updateTaskCount(B, -1), B._transitionTo(x, j), B.runCount = -1, B
                }
            }
            _updateTaskCount(B, P) {
                let m = B._zoneDelegates;
                P == -1 && (B._zoneDelegates = null);
                for (let v = 0; v < m.length; v++) m[v]._updateTaskCount(B.type, P)
            }
        };
        u(De, "n");
        let a = De;
        r = a, r.__symbol__ = xr;
        let l = {
                name: "",
                onHasTask: u((re, B, P, m) => re.hasTask(P, m), "onHasTask"),
                onScheduleTask: u((re, B, P, m) => re.scheduleTask(P, m), "onScheduleTask"),
                onInvokeTask: u((re, B, P, m, v, w) => re.invokeTask(P, m, v, w), "onInvokeTask"),
                onCancelTask: u((re, B, P, m) => re.cancelTask(P, m), "onCancelTask")
            },
            Pe = class Pe {
                get zone() {
                    return this._zone
                }
                constructor(B, P, m) {
                    this._taskCounts = {
                        microTask: 0,
                        macroTask: 0,
                        eventTask: 0
                    }, this._zone = B, this._parentDelegate = P, this._forkZS = m && (m && m.onFork ? m : P._forkZS), this._forkDlgt = m && (m.onFork ? P : P._forkDlgt), this._forkCurrZone = m && (m.onFork ? this._zone : P._forkCurrZone), this._interceptZS = m && (m.onIntercept ? m : P._interceptZS), this._interceptDlgt = m && (m.onIntercept ? P : P._interceptDlgt), this._interceptCurrZone = m && (m.onIntercept ? this._zone : P._interceptCurrZone), this._invokeZS = m && (m.onInvoke ? m : P._invokeZS), this._invokeDlgt = m && (m.onInvoke ? P : P._invokeDlgt), this._invokeCurrZone = m && (m.onInvoke ? this._zone : P._invokeCurrZone), this._handleErrorZS = m && (m.onHandleError ? m : P._handleErrorZS), this._handleErrorDlgt = m && (m.onHandleError ? P : P._handleErrorDlgt), this._handleErrorCurrZone = m && (m.onHandleError ? this._zone : P._handleErrorCurrZone), this._scheduleTaskZS = m && (m.onScheduleTask ? m : P._scheduleTaskZS), this._scheduleTaskDlgt = m && (m.onScheduleTask ? P : P._scheduleTaskDlgt), this._scheduleTaskCurrZone = m && (m.onScheduleTask ? this._zone : P._scheduleTaskCurrZone), this._invokeTaskZS = m && (m.onInvokeTask ? m : P._invokeTaskZS), this._invokeTaskDlgt = m && (m.onInvokeTask ? P : P._invokeTaskDlgt), this._invokeTaskCurrZone = m && (m.onInvokeTask ? this._zone : P._invokeTaskCurrZone), this._cancelTaskZS = m && (m.onCancelTask ? m : P._cancelTaskZS), this._cancelTaskDlgt = m && (m.onCancelTask ? P : P._cancelTaskDlgt), this._cancelTaskCurrZone = m && (m.onCancelTask ? this._zone : P._cancelTaskCurrZone), this._hasTaskZS = null, this._hasTaskDlgt = null, this._hasTaskDlgtOwner = null, this._hasTaskCurrZone = null;
                    let v = m && m.onHasTask,
                        w = P && P._hasTaskZS;
                    (v || w) && (this._hasTaskZS = v ? m : l, this._hasTaskDlgt = P, this._hasTaskDlgtOwner = this, this._hasTaskCurrZone = this._zone, m.onScheduleTask || (this._scheduleTaskZS = l, this._scheduleTaskDlgt = P, this._scheduleTaskCurrZone = this._zone), m.onInvokeTask || (this._invokeTaskZS = l, this._invokeTaskDlgt = P, this._invokeTaskCurrZone = this._zone), m.onCancelTask || (this._cancelTaskZS = l, this._cancelTaskDlgt = P, this._cancelTaskCurrZone = this._zone))
                }
                fork(B, P) {
                    return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, B, P) : new a(B, P)
                }
                intercept(B, P, m) {
                    return this._interceptZS ? this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, B, P, m) : P
                }
                invoke(B, P, m, v, w) {
                    return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, B, P, m, v, w) : P.apply(m, v)
                }
                handleError(B, P) {
                    return !this._handleErrorZS || this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, B, P)
                }
                scheduleTask(B, P) {
                    let m = P;
                    if (this._scheduleTaskZS) this._hasTaskZS && m._zoneDelegates.push(this._hasTaskDlgtOwner), m = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, B, P), m || (m = P);
                    else if (P.scheduleFn) P.scheduleFn(P);
                    else {
                        if (P.type != fe) throw new Error("Task is missing scheduleFn.");
                        S(P)
                    }
                    return m
                }
                invokeTask(B, P, m, v) {
                    return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, B, P, m, v) : P.callback.apply(m, v)
                }
                cancelTask(B, P) {
                    let m;
                    if (this._cancelTaskZS) m = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, B, P);
                    else {
                        if (!P.cancelFn) throw Error("Task is not cancelable");
                        m = P.cancelFn(P)
                    }
                    return m
                }
                hasTask(B, P) {
                    try {
                        this._hasTaskZS && this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, B, P)
                    } catch (m) {
                        this.handleError(B, m)
                    }
                }
                _updateTaskCount(B, P) {
                    let m = this._taskCounts,
                        v = m[B],
                        w = m[B] = v + P;
                    if (w < 0) throw new Error("More tasks executed then were scheduled.");
                    if (v == 0 || w == 0) {
                        let A = {
                            microTask: m.microTask > 0,
                            macroTask: m.macroTask > 0,
                            eventTask: m.eventTask > 0,
                            change: B
                        };
                        this.hasTask(this._zone, A)
                    }
                }
            };
        u(Pe, "o");
        let d = Pe,
            nt = class nt {
                constructor(B, P, m, v, w, A) {
                    if (this._zone = null, this.runCount = 0, this._zoneDelegates = null, this._state = "notScheduled", this.type = B, this.source = P, this.data = v, this.scheduleFn = w, this.cancelFn = A, !m) throw new Error("callback is not defined");
                    this.callback = m;
                    let R = this;
                    B === ae && v && v.useG ? this.invoke = nt.invokeTask : this.invoke = function() {
                        return nt.invokeTask.call(ki, R, this, arguments)
                    }
                }
                static invokeTask(B, P, m) {
                    B || (B = this), Ee++;
                    try {
                        return B.runCount++, B.zone.runTask(B, P, m)
                    } finally {
                        Ee == 1 && _(), Ee--
                    }
                }
                get zone() {
                    return this._zone
                }
                get state() {
                    return this._state
                }
                cancelScheduleRequest() {
                    this._transitionTo(x, L)
                }
                _transitionTo(B, P, m) {
                    if (this._state !== P && this._state !== m) throw new Error(`${this.type} '${this.source}': can not transition to '${B}', expecting state '${P}'${m?" or '"+m+"'":""}, was '${this._state}'.`);
                    this._state = B, B == x && (this._zoneDelegates = null)
                }
                toString() {
                    return this.data && this.data.handleId !== void 0 ? this.data.handleId.toString() : Object.prototype.toString.call(this)
                }
                toJSON() {
                    return {
                        type: this.type,
                        state: this.state,
                        source: this.source,
                        zone: this.zone.name,
                        runCount: this.runCount
                    }
                }
            };
        u(nt, "s");
        let c = nt,
            h = xr("setTimeout"),
            f = xr("Promise"),
            g = xr("then"),
            p, y = [],
            b = !1;

        function E(re) {
            if (p || ki[f] && (p = ki[f].resolve(0)), p) {
                let B = p[g];
                B || (B = p.then), B.call(p, re)
            } else ki[h](re, 0)
        }
        u(E, "p");

        function S(re) {
            Ee === 0 && y.length === 0 && E(_), re && y.push(re)
        }
        u(S, "d");

        function _() {
            if (!b) {
                for (b = !0; y.length;) {
                    let re = y;
                    y = [];
                    for (let B = 0; B < re.length; B++) {
                        let P = re[B];
                        try {
                            P.zone.runTask(P, null, null)
                        } catch (m) {
                            ne.onUnhandledError(m)
                        }
                    }
                }
                ne.microtaskDrainDone(), b = !1
            }
        }
        u(_, "g");
        let I = {
                name: "NO ZONE"
            },
            x = "notScheduled",
            L = "scheduling",
            U = "scheduled",
            N = "running",
            j = "canceling",
            q = "unknown",
            fe = "microTask",
            K = "macroTask",
            ae = "eventTask",
            Z = {},
            ne = {
                symbol: xr,
                currentZoneFrame: u(() => ue, "currentZoneFrame"),
                onUnhandledError: be,
                microtaskDrainDone: be,
                scheduleMicroTask: S,
                showUncaughtError: u(() => !a[xr("ignoreConsoleErrorUncaughtError")], "showUncaughtError"),
                patchEventTarget: u(() => [], "patchEventTarget"),
                patchOnProperties: be,
                patchMethod: u(() => be, "patchMethod"),
                bindArguments: u(() => [], "bindArguments"),
                patchThen: u(() => be, "patchThen"),
                patchMacroTask: u(() => be, "patchMacroTask"),
                patchEventPrototype: u(() => be, "patchEventPrototype"),
                isIEOrEdge: u(() => !1, "isIEOrEdge"),
                getGlobalObjects: u(() => {}, "getGlobalObjects"),
                ObjectDefineProperty: u(() => be, "ObjectDefineProperty"),
                ObjectGetOwnPropertyDescriptor: u(() => {}, "ObjectGetOwnPropertyDescriptor"),
                ObjectCreate: u(() => {}, "ObjectCreate"),
                ArraySlice: u(() => [], "ArraySlice"),
                patchClass: u(() => be, "patchClass"),
                wrapWithCurrentZone: u(() => be, "wrapWithCurrentZone"),
                filterProperties: u(() => [], "filterProperties"),
                attachOriginToPatched: u(() => be, "attachOriginToPatched"),
                _redefineProperty: u(() => be, "_redefineProperty"),
                patchCallbacks: u(() => be, "patchCallbacks"),
                nativeScheduleMicroTask: E
            },
            ue = {
                parent: null,
                zone: new a(null, null)
            },
            ve = null,
            Ee = 0;

        function be() {}
        return u(be, "P"), s("Zone", "Zone"), a
    }()), e.Zone
}();
(function(n) {
    m6(n),
        function(e) {
            e.__load_patch("toString", t => {
                let r = Function.prototype.toString,
                    i = gt("OriginalDelegate"),
                    o = gt("Promise"),
                    s = gt("Error"),
                    a = u(function() {
                        if (typeof this == "function") {
                            let d = this[i];
                            if (d) return typeof d == "function" ? r.call(d) : Object.prototype.toString.call(d);
                            if (this === Promise) {
                                let c = t[o];
                                if (c) return r.call(c)
                            }
                            if (this === Error) {
                                let c = t[s];
                                if (c) return r.call(c)
                            }
                        }
                        return r.call(this)
                    }, "o");
                a[i] = r, Function.prototype.toString = a;
                let l = Object.prototype.toString;
                Object.prototype.toString = function() {
                    return typeof Promise == "function" && this instanceof Promise ? "[object Promise]" : l.call(this)
                }
            })
        }(n),
        function(e) {
            e.__load_patch("util", (t, r, i) => {
                let o = Yw(t);
                i.patchOnProperties = GD, i.patchMethod = fo, i.bindArguments = Zw, i.patchMacroTask = a6;
                let s = r.__symbol__("BLACK_LISTED_EVENTS"),
                    a = r.__symbol__("UNPATCHED_EVENTS");
                t[a] && (t[s] = t[a]), t[s] && (r[s] = r[a] = t[s]), i.patchEventPrototype = h6, i.patchEventTarget = d6, i.isIEOrEdge = c6, i.ObjectDefineProperty = jT, i.ObjectGetOwnPropertyDescriptor = Cd, i.ObjectCreate = r6, i.ArraySlice = i6, i.patchClass = od, i.wrapWithCurrentZone = zT, i.filterProperties = QD, i.attachOriginToPatched = po, i._redefineProperty = Object.defineProperty, i.patchCallbacks = v6, i.getGlobalObjects = () => ({
                    globalSources: KD,
                    zoneSymbolEventNames: Pr,
                    eventNames: o,
                    isBrowser: qT,
                    isMix: qD,
                    isNode: Up,
                    TRUE_STR: lo,
                    FALSE_STR: ho,
                    ZONE_SYMBOL_PREFIX: Rd,
                    ADD_EVENT_LISTENER_STR: VT,
                    REMOVE_EVENT_LISTENER_STR: HT
                })
            })
        }(n)
})(SO),
function(n) {
    n.__load_patch("legacy", e => {
        let t = e[n.__symbol__("legacyPatch")];
        t && t()
    }), n.__load_patch("timers", e => {
        let t = "set",
            r = "clear";
        su(e, t, r, "Timeout"), su(e, t, r, "Interval"), su(e, t, r, "Immediate")
    }), n.__load_patch("requestAnimationFrame", e => {
        su(e, "request", "cancel", "AnimationFrame"), su(e, "mozRequest", "mozCancel", "AnimationFrame"), su(e, "webkitRequest", "webkitCancel", "AnimationFrame")
    }), n.__load_patch("blocking", (e, t) => {
        let r = ["alert", "prompt", "confirm"];
        for (let i = 0; i < r.length; i++) fo(e, r[i], (o, s, a) => function(l, d) {
            return t.current.run(o, e, d, a)
        })
    }), n.__load_patch("EventTarget", (e, t, r) => {
        (function(o, s) {
            s.patchEventPrototype(o, s)
        })(e, r), g6(e, r);
        let i = e.XMLHttpRequestEventTarget;
        i && i.prototype && r.patchEventTarget(e, r, [i.prototype])
    }), n.__load_patch("MutationObserver", (e, t, r) => {
        od("MutationObserver"), od("WebKitMutationObserver")
    }), n.__load_patch("IntersectionObserver", (e, t, r) => {
        od("IntersectionObserver")
    }), n.__load_patch("FileReader", (e, t, r) => {
        od("FileReader")
    }), n.__load_patch("on_property", (e, t, r) => {
        p6(r, e)
    }), n.__load_patch("customElements", (e, t, r) => {
        (function(i, o) {
            let {
                isBrowser: s,
                isMix: a
            } = o.getGlobalObjects();
            !s && !a || !i.customElements || !("customElements" in i) || o.patchCallbacks(o, i.customElements, "customElements", "define", ["connectedCallback", "disconnectedCallback", "adoptedCallback", "attributeChangedCallback", "formAssociatedCallback", "formDisabledCallback", "formResetCallback", "formStateRestoreCallback"])
        })(e, r)
    }), n.__load_patch("XHR", (e, t) => {
        (function(d) {
            let c = d.XMLHttpRequest;
            if (!c) return;
            let h = c.prototype,
                f = h[gw],
                g = h[pw];
            if (!f) {
                let N = d.XMLHttpRequestEventTarget;
                if (N) {
                    let j = N.prototype;
                    f = j[gw], g = j[pw]
                }
            }
            let p = "readystatechange",
                y = "scheduled";

            function b(N) {
                let j = N.data,
                    q = j.target;
                q[s] = !1, q[l] = !1;
                let fe = q[o];
                f || (f = q[gw], g = q[pw]), fe && g.call(q, p, fe);
                let K = q[o] = () => {
                    if (q.readyState === q.DONE)
                        if (!j.aborted && q[s] && N.state === y) {
                            let ae = q[t.__symbol__("loadfalse")];
                            if (q.status !== 0 && ae && ae.length > 0) {
                                let Z = N.invoke;
                                N.invoke = function() {
                                    let ne = q[t.__symbol__("loadfalse")];
                                    for (let ue = 0; ue < ne.length; ue++) ne[ue] === N && ne.splice(ue, 1);
                                    j.aborted || N.state !== y || Z.call(N)
                                }, ae.push(N)
                            } else N.invoke()
                        } else j.aborted || q[s] !== !1 || (q[l] = !0)
                };
                return f.call(q, p, K), q[r] || (q[r] = N), L.apply(q, j.args), q[s] = !0, N
            }
            u(b, "d");

            function E() {}
            u(E, "g");

            function S(N) {
                let j = N.data;
                return j.aborted = !0, U.apply(j.target, j.args)
            }
            u(S, "v");
            let _ = fo(h, "open", () => function(N, j) {
                    return N[i] = j[2] == 0, N[a] = j[1], _.apply(N, j)
                }),
                I = gt("fetchTaskAborting"),
                x = gt("fetchTaskScheduling"),
                L = fo(h, "send", () => function(N, j) {
                    if (t.current[x] === !0 || N[i]) return L.apply(N, j); {
                        let q = {
                                target: N,
                                url: N[a],
                                isPeriodic: !1,
                                args: j,
                                aborted: !1
                            },
                            fe = WT("XMLHttpRequest.send", E, q, b, S);
                        N && N[l] === !0 && !q.aborted && fe.state === y && fe.invoke()
                    }
                }),
                U = fo(h, "abort", () => function(N, j) {
                    let q = N[r];
                    if (q && typeof q.type == "string") {
                        if (q.cancelFn == null || q.data && q.data.aborted) return;
                        q.zone.cancelTask(q)
                    } else if (t.current[I] === !0) return U.apply(N, j)
                })
        })(e);
        let r = gt("xhrTask"),
            i = gt("xhrSync"),
            o = gt("xhrListener"),
            s = gt("xhrScheduled"),
            a = gt("xhrURL"),
            l = gt("xhrErrorBeforeScheduled")
    }), n.__load_patch("geolocation", e => {
        e.navigator && e.navigator.geolocation && function(t, r) {
            let i = t.constructor.name;
            for (let o = 0; o < r.length; o++) {
                let s = r[o],
                    a = t[s];
                if (a) {
                    if (!zD(Cd(t, s))) continue;
                    t[s] = (l => {
                        let d = u(function() {
                            return l.apply(this, Zw(arguments, i + "." + s))
                        }, "e");
                        return po(d, l), d
                    })(a)
                }
            }
        }(e.navigator.geolocation, ["getCurrentPosition", "watchPosition"])
    }), n.__load_patch("PromiseRejectionEvent", (e, t) => {
        function r(i) {
            return function(o) {
                XD(e, i).forEach(s => {
                    let a = e.PromiseRejectionEvent;
                    if (a) {
                        let l = new a(i, {
                            promise: o.promise,
                            reason: o.rejection
                        });
                        s.invoke(l)
                    }
                })
            }
        }
        u(r, "r"), e.PromiseRejectionEvent && (t[gt("unhandledPromiseRejectionHandler")] = r("unhandledrejection"), t[gt("rejectionHandledHandler")] = r("rejectionhandled"))
    }), n.__load_patch("queueMicrotask", (e, t, r) => {
        f6(e, r)
    })
}(SO);
var y6 = function() {
        function n() {}
        return u(n, "t"), n.prototype.emit = function(e) {}, n
    }(),
    IO = new(function() {
        function n() {}
        return u(n, "t"), n.prototype.getLogger = function(e, t, r) {
            return new y6
        }, n
    }()),
    b6 = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {},
    vg = Symbol.for("io.opentelemetry.js.api.logs"),
    sd = b6,
    w6 = function() {
        function n() {}
        return u(n, "t"), n.getInstance = function() {
            return this._instance || (this._instance = new n), this._instance
        }, n.prototype.setGlobalLoggerProvider = function(e) {
            return sd[vg] ? this.getLoggerProvider() : (sd[vg] = (t = 1, r = e, i = IO, function(o) {
                return o === t ? r : i
            }), e);
            var t, r, i
        }, n.prototype.getLoggerProvider = function() {
            var e, t;
            return (t = (e = sd[vg]) === null || e === void 0 ? void 0 : e.call(sd, 1)) !== null && t !== void 0 ? t : IO
        }, n.prototype.getLogger = function(e, t, r) {
            return this.getLoggerProvider().getLogger(e, t, r)
        }, n.prototype.disable = function() {
            delete sd[vg]
        }, n
    }(),
    T6 = w6.getInstance();

function Xw(n) {
    return typeof n == "function"
}
u(Xw, "Lh");
var Kn = console.error.bind(console);

function ad(n, e, t) {
    var r = !!n[e] && n.propertyIsEnumerable(e);
    Object.defineProperty(n, e, {
        configurable: !0,
        enumerable: r,
        writable: !0,
        value: t
    })
}
u(ad, "Ih");

function gd(n) {
    n && n.logger && (Xw(n.logger) ? Kn = n.logger : Kn("new logger isn't a function, not replacing"))
}
u(gd, "kh");

function AO(n, e, t) {
    if (n && n[e]) {
        if (!t) return Kn("no wrapper function"), void Kn(new Error().stack);
        if (Xw(n[e]) && Xw(t)) {
            var r = n[e],
                i = t(r, e);
            return ad(i, "__original", r), ad(i, "__unwrap", function() {
                n[e] === i && ad(n, e, r)
            }), ad(i, "__wrapped", !0), ad(n, e, i), i
        }
        Kn("original object and wrapper must be functions")
    } else Kn("no original function " + e + " to wrap")
}
u(AO, "Rh");

function CO(n, e) {
    return n && n[e] ? n[e].__unwrap ? n[e].__unwrap() : void Kn("no original to unwrap to -- has " + e + " already been unwrapped?") : (Kn("no function to unwrap."), void Kn(new Error().stack))
}
u(CO, "Ph");
gd.wrap = AO, gd.massWrap = function(n, e, t) {
    if (!n) return Kn("must provide one or more modules to patch"), void Kn(new Error().stack);
    Array.isArray(n) || (n = [n]), e && Array.isArray(e) ? n.forEach(function(r) {
        e.forEach(function(i) {
            AO(r, i, t)
        })
    }) : Kn("must provide one or more functions to wrap on modules")
}, gd.unwrap = CO, gd.massUnwrap = function(n, e) {
    if (!n) return Kn("must provide one or more modules to patch"), void Kn(new Error().stack);
    Array.isArray(n) || (n = [n]), e && Array.isArray(e) ? n.forEach(function(t) {
        e.forEach(function(r) {
            CO(t, r)
        })
    }) : Kn("must provide one or more functions to unwrap on modules")
};
var yg = gd,
    Qw = function() {
        return Qw = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, Qw.apply(this, arguments)
    },
    E6 = function() {
        function n(e, t, r) {
            this.instrumentationName = e, this.instrumentationVersion = t, this._config = {}, this._wrap = yg.wrap, this._unwrap = yg.unwrap, this._massWrap = yg.massWrap, this._massUnwrap = yg.massUnwrap, this.setConfig(r), this._diag = pt.createComponentLogger({
                namespace: e
            }), this._tracer = Gn.getTracer(e, t), this._meter = IB.getMeter(e, t), this._logger = T6.getLogger(e, t), this._updateMetricInstruments()
        }
        return u(n, "t"), Object.defineProperty(n.prototype, "meter", {
            get: u(function() {
                return this._meter
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.setMeterProvider = function(e) {
            this._meter = e.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments()
        }, Object.defineProperty(n.prototype, "logger", {
            get: u(function() {
                return this._logger
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.setLoggerProvider = function(e) {
            this._logger = e.getLogger(this.instrumentationName, this.instrumentationVersion)
        }, n.prototype.getModuleDefinitions = function() {
            var e, t = (e = this.init()) !== null && e !== void 0 ? e : [];
            return Array.isArray(t) ? t : [t]
        }, n.prototype._updateMetricInstruments = function() {}, n.prototype.getConfig = function() {
            return this._config
        }, n.prototype.setConfig = function(e) {
            this._config = Qw({
                enabled: !0
            }, e)
        }, n.prototype.setTracerProvider = function(e) {
            this._tracer = e.getTracer(this.instrumentationName, this.instrumentationVersion)
        }, Object.defineProperty(n.prototype, "tracer", {
            get: u(function() {
                return this._tracer
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype._runSpanCustomizationHook = function(e, t, r, i) {
            if (e) try {
                e(r, i)
            } catch (o) {
                this._diag.error("Error running span customization hook due to exception in handler", {
                    triggerName: t
                }, o)
            }
        }, n
    }(),
    _6 = function() {
        var n = u(function(e, t) {
            return n = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(r, i) {
                r.__proto__ = i
            } || function(r, i) {
                for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o])
            }, n(e, t)
        }, "t");
        return function(e, t) {
            if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function r() {
                this.constructor = e
            }
            u(r, "n"), n(e, t), e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r)
        }
    }(),
    S6 = function(n) {
        function e(t, r, i) {
            var o = n.call(this, t, r, i) || this;
            return o._config.enabled && o.enable(), o
        }
        return u(e, "e"), _6(e, n), e
    }(E6),
    Du, I6 = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    RO = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    A6 = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    C6 = function() {
        function n(e, t, r, i, o, s, a, l, d, c) {
            a === void 0 && (a = []), this.attributes = {}, this.links = [], this.events = [], this._droppedAttributesCount = 0, this._droppedEventsCount = 0, this._droppedLinksCount = 0, this.status = {
                code: rp.UNSET
            }, this.endTime = [0, 0], this._ended = !1, this._duration = [-1, -1], this.name = r, this._spanContext = i, this.parentSpanId = s, this.kind = o, this.links = a;
            var h = Date.now();
            this._performanceStartTime = Cu.now(), this._performanceOffset = h - (this._performanceStartTime + AT()), this._startTimeProvided = l != null, this.startTime = this._getTime(l != null ? l : h), this.resource = e.resource, this.instrumentationLibrary = e.instrumentationLibrary, this._spanLimits = e.getSpanLimits(), this._attributeValueLengthLimit = this._spanLimits.attributeValueLengthLimit || 0, c != null && this.setAttributes(c), this._spanProcessor = e.getActiveSpanProcessor(), this._spanProcessor.onStart(this, t)
        }
        return u(n, "t"), n.prototype.spanContext = function() {
            return this._spanContext
        }, n.prototype.setAttribute = function(e, t) {
            return t == null || this._isSpanEnded() ? this : e.length === 0 ? (pt.warn("Invalid attribute key: " + e), this) : WO(t) ? Object.keys(this.attributes).length >= this._spanLimits.attributeCountLimit && !Object.prototype.hasOwnProperty.call(this.attributes, e) ? (this._droppedAttributesCount++, this) : (this.attributes[e] = this._truncateToSize(t), this) : (pt.warn("Invalid attribute value set for key: " + e), this)
        }, n.prototype.setAttributes = function(e) {
            var t, r;
            try {
                for (var i = I6(Object.entries(e)), o = i.next(); !o.done; o = i.next()) {
                    var s = RO(o.value, 2),
                        a = s[0],
                        l = s[1];
                    this.setAttribute(a, l)
                }
            } catch (d) {
                t = {
                    error: d
                }
            } finally {
                try {
                    o && !o.done && (r = i.return) && r.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
            return this
        }, n.prototype.addEvent = function(e, t, r) {
            if (this._isSpanEnded()) return this;
            if (this._spanLimits.eventCountLimit === 0) return pt.warn("No events allowed."), this._droppedEventsCount++, this;
            this.events.length >= this._spanLimits.eventCountLimit && (this._droppedEventsCount === 0 && pt.debug("Dropping extra events."), this.events.shift(), this._droppedEventsCount++), SR(t) && (SR(r) || (r = t), t = void 0);
            var i = Tg(t);
            return this.events.push({
                name: e,
                attributes: i,
                time: this._getTime(r),
                droppedAttributesCount: 0
            }), this
        }, n.prototype.addLink = function(e) {
            return this.links.push(e), this
        }, n.prototype.addLinks = function(e) {
            var t;
            return (t = this.links).push.apply(t, A6([], RO(e), !1)), this
        }, n.prototype.setStatus = function(e) {
            return this._isSpanEnded() || (this.status = e), this
        }, n.prototype.updateName = function(e) {
            return this._isSpanEnded() || (this.name = e), this
        }, n.prototype.end = function(e) {
            this._isSpanEnded() ? pt.error(this.name + " " + this._spanContext.traceId + "-" + this._spanContext.spanId + " - You can only call end() on a span once.") : (this._ended = !0, this.endTime = this._getTime(e), this._duration = function(t, r) {
                var i = r[0] - t[0],
                    o = r[1] - t[1];
                return o < 0 && (i -= 1, o += op), [i, o]
            }(this.startTime, this.endTime), this._duration[0] < 0 && (pt.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.", this.startTime, this.endTime), this.endTime = this.startTime.slice(), this._duration = [0, 0]), this._droppedEventsCount > 0 && pt.warn("Dropped " + this._droppedEventsCount + " events because eventCountLimit reached"), this._spanProcessor.onEnd(this))
        }, n.prototype._getTime = function(e) {
            if (typeof e == "number" && e < Cu.now()) return Id(e + this._performanceOffset);
            if (typeof e == "number") return go(e);
            if (e instanceof Date) return go(e.getTime());
            if (CT(e)) return e;
            if (this._startTimeProvided) return go(Date.now());
            var t = Cu.now() - this._performanceStartTime;
            return KO(this.startTime, go(t))
        }, n.prototype.isRecording = function() {
            return this._ended === !1
        }, n.prototype.recordException = function(e, t) {
            var r = {};
            typeof e == "string" ? r[tw] = e : e && (e.code ? r[ew] = e.code.toString() : e.name && (r[ew] = e.name), e.message && (r[tw] = e.message), e.stack && (r["exception.stacktrace"] = e.stack)), r[ew] || r[tw] ? this.addEvent("exception", r, t) : pt.warn("Failed to record an exception " + e)
        }, Object.defineProperty(n.prototype, "duration", {
            get: u(function() {
                return this._duration
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "ended", {
            get: u(function() {
                return this._ended
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "droppedAttributesCount", {
            get: u(function() {
                return this._droppedAttributesCount
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "droppedEventsCount", {
            get: u(function() {
                return this._droppedEventsCount
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "droppedLinksCount", {
            get: u(function() {
                return this._droppedLinksCount
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype._isSpanEnded = function() {
            return this._ended && pt.warn("Can not execute the operation on ended Span {traceId: " + this._spanContext.traceId + ", spanId: " + this._spanContext.spanId + "}"), this._ended
        }, n.prototype._truncateToLimitUtil = function(e, t) {
            return e.length <= t ? e : e.substr(0, t)
        }, n.prototype._truncateToSize = function(e) {
            var t = this,
                r = this._attributeValueLengthLimit;
            return r <= 0 ? (pt.warn("Attribute value limit must be positive, got " + r), e) : typeof e == "string" ? this._truncateToLimitUtil(e, r) : Array.isArray(e) ? e.map(function(i) {
                return typeof i == "string" ? t._truncateToLimitUtil(i, r) : i
            }) : e
        }, n
    }();
(function(n) {
    n[n.NOT_RECORD = 0] = "NOT_RECORD", n[n.RECORD = 1] = "RECORD", n[n.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED"
})(Du || (Du = {}));
var mp = function() {
        function n() {}
        return u(n, "t"), n.prototype.shouldSample = function() {
            return {
                decision: Du.NOT_RECORD
            }
        }, n.prototype.toString = function() {
            return "AlwaysOffSampler"
        }, n
    }(),
    Ru = function() {
        function n() {}
        return u(n, "t"), n.prototype.shouldSample = function() {
            return {
                decision: Du.RECORD_AND_SAMPLED
            }
        }, n.prototype.toString = function() {
            return "AlwaysOnSampler"
        }, n
    }(),
    vw = function() {
        function n(e) {
            var t, r, i, o;
            this._root = e.root, this._root || (ip(new Error("ParentBasedSampler must have a root sampler configured")), this._root = new Ru), this._remoteParentSampled = (t = e.remoteParentSampled) !== null && t !== void 0 ? t : new Ru, this._remoteParentNotSampled = (r = e.remoteParentNotSampled) !== null && r !== void 0 ? r : new mp, this._localParentSampled = (i = e.localParentSampled) !== null && i !== void 0 ? i : new Ru, this._localParentNotSampled = (o = e.localParentNotSampled) !== null && o !== void 0 ? o : new mp
        }
        return u(n, "t"), n.prototype.shouldSample = function(e, t, r, i, o, s) {
            var a = Gn.getSpanContext(e);
            return a && Rp(a) ? a.isRemote ? a.traceFlags & mo.SAMPLED ? this._remoteParentSampled.shouldSample(e, t, r, i, o, s) : this._remoteParentNotSampled.shouldSample(e, t, r, i, o, s) : a.traceFlags & mo.SAMPLED ? this._localParentSampled.shouldSample(e, t, r, i, o, s) : this._localParentNotSampled.shouldSample(e, t, r, i, o, s) : this._root.shouldSample(e, t, r, i, o, s)
        }, n.prototype.toString = function() {
            return "ParentBased{root=" + this._root.toString() + ", remoteParentSampled=" + this._remoteParentSampled.toString() + ", remoteParentNotSampled=" + this._remoteParentNotSampled.toString() + ", localParentSampled=" + this._localParentSampled.toString() + ", localParentNotSampled=" + this._localParentNotSampled.toString() + "}"
        }, n
    }(),
    OO = function() {
        function n(e) {
            e === void 0 && (e = 0), this._ratio = e, this._ratio = this._normalize(e), this._upperBound = Math.floor(4294967295 * this._ratio)
        }
        return u(n, "t"), n.prototype.shouldSample = function(e, t) {
            return {
                decision: jO(t) && this._accumulate(t) < this._upperBound ? Du.RECORD_AND_SAMPLED : Du.NOT_RECORD
            }
        }, n.prototype.toString = function() {
            return "TraceIdRatioBased{" + this._ratio + "}"
        }, n.prototype._normalize = function(e) {
            return typeof e != "number" || isNaN(e) ? 0 : e >= 1 ? 1 : e <= 0 ? 0 : e
        }, n.prototype._accumulate = function(e) {
            for (var t = 0, r = 0; r < e.length / 8; r++) {
                var i = 8 * r;
                t = (t ^ parseInt(e.slice(i, i + 8), 16)) >>> 0
            }
            return t
        }, n
    }(),
    R6 = Ou(),
    O6 = Ui.AlwaysOn,
    au = 1;

function eN() {
    var n = Ou();
    return {
        sampler: tN(R6),
        forceFlushTimeoutMillis: 3e4,
        generalLimits: {
            attributeValueLengthLimit: n.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,
            attributeCountLimit: n.OTEL_ATTRIBUTE_COUNT_LIMIT
        },
        spanLimits: {
            attributeValueLengthLimit: n.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,
            attributeCountLimit: n.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,
            linkCountLimit: n.OTEL_SPAN_LINK_COUNT_LIMIT,
            eventCountLimit: n.OTEL_SPAN_EVENT_COUNT_LIMIT,
            attributePerEventCountLimit: n.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,
            attributePerLinkCountLimit: n.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT
        }
    }
}
u(eN, "qh");

function tN(n) {
    switch (n === void 0 && (n = Ou()), n.OTEL_TRACES_SAMPLER) {
        case Ui.AlwaysOn:
            return new Ru;
        case Ui.AlwaysOff:
            return new mp;
        case Ui.ParentBasedAlwaysOn:
            return new vw({
                root: new Ru
            });
        case Ui.ParentBasedAlwaysOff:
            return new vw({
                root: new mp
            });
        case Ui.TraceIdRatio:
            return new OO(DO(n));
        case Ui.ParentBasedTraceIdRatio:
            return new vw({
                root: new OO(DO(n))
            });
        default:
            return pt.error('OTEL_TRACES_SAMPLER value "' + n.OTEL_TRACES_SAMPLER + " invalid, defaulting to " + O6 + '".'), new Ru
    }
}
u(tN, "Kh");

function DO(n) {
    if (n.OTEL_TRACES_SAMPLER_ARG === void 0 || n.OTEL_TRACES_SAMPLER_ARG === "") return pt.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to " + au + "."), au;
    var e = Number(n.OTEL_TRACES_SAMPLER_ARG);
    return isNaN(e) ? (pt.error("OTEL_TRACES_SAMPLER_ARG=" + n.OTEL_TRACES_SAMPLER_ARG + " was given, but it is invalid, defaulting to " + au + "."), au) : e < 0 || e > 1 ? (pt.error("OTEL_TRACES_SAMPLER_ARG=" + n.OTEL_TRACES_SAMPLER_ARG + " was given, but it is out of range ([0..1]), defaulting to " + au + "."), au) : e
}
u(DO, "Yh");

function D6(n) {
    var e, t, r, i, o, s, a, l, d, c, h, f, g = Object.assign({}, n.spanLimits),
        p = GO(Td);
    return g.attributeCountLimit = (s = (o = (i = (t = (e = n.spanLimits) === null || e === void 0 ? void 0 : e.attributeCountLimit) !== null && t !== void 0 ? t : (r = n.generalLimits) === null || r === void 0 ? void 0 : r.attributeCountLimit) !== null && i !== void 0 ? i : p.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) !== null && o !== void 0 ? o : p.OTEL_ATTRIBUTE_COUNT_LIMIT) !== null && s !== void 0 ? s : _g, g.attributeValueLengthLimit = (f = (h = (c = (l = (a = n.spanLimits) === null || a === void 0 ? void 0 : a.attributeValueLengthLimit) !== null && l !== void 0 ? l : (d = n.generalLimits) === null || d === void 0 ? void 0 : d.attributeValueLengthLimit) !== null && c !== void 0 ? c : p.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && h !== void 0 ? h : p.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && f !== void 0 ? f : Eg, Object.assign({}, n, {
        spanLimits: g
    })
}
u(D6, "Qh");
var N6 = function() {
        function n(e, t) {
            this._exporter = e, this._isExporting = !1, this._finishedSpans = [], this._droppedSpansCount = 0;
            var r = Ou();
            this._maxExportBatchSize = typeof(t == null ? void 0 : t.maxExportBatchSize) == "number" ? t.maxExportBatchSize : r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE, this._maxQueueSize = typeof(t == null ? void 0 : t.maxQueueSize) == "number" ? t.maxQueueSize : r.OTEL_BSP_MAX_QUEUE_SIZE, this._scheduledDelayMillis = typeof(t == null ? void 0 : t.scheduledDelayMillis) == "number" ? t.scheduledDelayMillis : r.OTEL_BSP_SCHEDULE_DELAY, this._exportTimeoutMillis = typeof(t == null ? void 0 : t.exportTimeoutMillis) == "number" ? t.exportTimeoutMillis : r.OTEL_BSP_EXPORT_TIMEOUT, this._shutdownOnce = new pj(this._shutdown, this), this._maxExportBatchSize > this._maxQueueSize && (pt.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"), this._maxExportBatchSize = this._maxQueueSize)
        }
        return u(n, "t"), n.prototype.forceFlush = function() {
            return this._shutdownOnce.isCalled ? this._shutdownOnce.promise : this._flushAll()
        }, n.prototype.onStart = function(e, t) {}, n.prototype.onEnd = function(e) {
            this._shutdownOnce.isCalled || e.spanContext().traceFlags & mo.SAMPLED && this._addToBuffer(e)
        }, n.prototype.shutdown = function() {
            return this._shutdownOnce.call()
        }, n.prototype._shutdown = function() {
            var e = this;
            return Promise.resolve().then(function() {
                return e.onShutdown()
            }).then(function() {
                return e._flushAll()
            }).then(function() {
                return e._exporter.shutdown()
            })
        }, n.prototype._addToBuffer = function(e) {
            if (this._finishedSpans.length >= this._maxQueueSize) return this._droppedSpansCount === 0 && pt.debug("maxQueueSize reached, dropping spans"), void this._droppedSpansCount++;
            this._droppedSpansCount > 0 && (pt.warn("Dropped " + this._droppedSpansCount + " spans because maxQueueSize reached"), this._droppedSpansCount = 0), this._finishedSpans.push(e), this._maybeStartTimer()
        }, n.prototype._flushAll = function() {
            var e = this;
            return new Promise(function(t, r) {
                for (var i = [], o = 0, s = Math.ceil(e._finishedSpans.length / e._maxExportBatchSize); o < s; o++) i.push(e._flushOneBatch());
                Promise.all(i).then(function() {
                    t()
                }).catch(r)
            })
        }, n.prototype._flushOneBatch = function() {
            var e = this;
            return this._clearTimer(), this._finishedSpans.length === 0 ? Promise.resolve() : new Promise(function(t, r) {
                var i = setTimeout(function() {
                    r(new Error("Timeout"))
                }, e._exportTimeoutMillis);
                or.with(function(o) {
                    return o.setValue(HO, !0)
                }(or.active()), function() {
                    var o;
                    e._finishedSpans.length <= e._maxExportBatchSize ? (o = e._finishedSpans, e._finishedSpans = []) : o = e._finishedSpans.splice(0, e._maxExportBatchSize);
                    for (var s = function() {
                            return e._exporter.export(o, function(h) {
                                var f;
                                clearTimeout(i), h.code === _w.SUCCESS ? t() : r((f = h.error) !== null && f !== void 0 ? f : new Error("BatchSpanProcessor: span export failed"))
                            })
                        }, a = null, l = 0, d = o.length; l < d; l++) {
                        var c = o[l];
                        c.resource.asyncAttributesPending && c.resource.waitForAsyncAttributes && (a != null || (a = []), a.push(c.resource.waitForAsyncAttributes()))
                    }
                    a === null ? s() : Promise.all(a).then(s, function(h) {
                        ip(h), r(h)
                    })
                })
            })
        }, n.prototype._maybeStartTimer = function() {
            var e = this;
            if (!this._isExporting) {
                var t = u(function() {
                    e._isExporting = !0, e._flushOneBatch().finally(function() {
                        e._isExporting = !1, e._finishedSpans.length > 0 && (e._clearTimer(), e._maybeStartTimer())
                    }).catch(function(r) {
                        e._isExporting = !1, ip(r)
                    })
                }, "e");
                if (this._finishedSpans.length >= this._maxExportBatchSize) return t();
                this._timer === void 0 && (this._timer = setTimeout(function() {
                    return t()
                }, this._scheduledDelayMillis), this._timer)
            }
        }, n.prototype._clearTimer = function() {
            this._timer !== void 0 && (clearTimeout(this._timer), this._timer = void 0)
        }, n
    }(),
    L6 = function() {
        var n = u(function(e, t) {
            return n = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(r, i) {
                r.__proto__ = i
            } || function(r, i) {
                for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o])
            }, n(e, t)
        }, "t");
        return function(e, t) {
            if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function r() {
                this.constructor = e
            }
            u(r, "n"), n(e, t), e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r)
        }
    }(),
    x6 = function(n) {
        function e(t, r) {
            var i = n.call(this, t, r) || this;
            return i.onInit(r), i
        }
        return u(e, "e"), L6(e, n), e.prototype.onInit = function(t) {
            var r = this;
            (t == null ? void 0 : t.disableAutoFlushOnDocumentHide) !== !0 && typeof document != "undefined" && (this._visibilityChangeListener = function() {
                document.visibilityState === "hidden" && r.forceFlush()
            }, this._pageHideListener = function() {
                r.forceFlush()
            }, document.addEventListener("visibilitychange", this._visibilityChangeListener), document.addEventListener("pagehide", this._pageHideListener))
        }, e.prototype.onShutdown = function() {
            typeof document != "undefined" && (this._visibilityChangeListener && document.removeEventListener("visibilitychange", this._visibilityChangeListener), this._pageHideListener && document.removeEventListener("pagehide", this._pageHideListener))
        }, e
    }(N6),
    P6 = u(function() {
        this.generateTraceId = NO(16), this.generateSpanId = NO(8)
    }, "rp"),
    bg = Array(32);

function NO(n) {
    return function() {
        for (var e = 0; e < 2 * n; e++) bg[e] = Math.floor(16 * Math.random()) + 48, bg[e] >= 58 && (bg[e] += 39);
        return String.fromCharCode.apply(null, bg.slice(0, 2 * n))
    }
}
u(NO, "ip");
var k6 = function() {
        function n(e, t, r) {
            this._tracerProvider = r;
            var i, o, s, a, l = (i = t, o = {
                sampler: tN()
            }, s = eN(), (a = Object.assign({}, s, o, i)).generalLimits = Object.assign({}, s.generalLimits, i.generalLimits || {}), a.spanLimits = Object.assign({}, s.spanLimits, i.spanLimits || {}), a);
            this._sampler = l.sampler, this._generalLimits = l.generalLimits, this._spanLimits = l.spanLimits, this._idGenerator = t.idGenerator || new P6, this.resource = r.resource, this.instrumentationLibrary = e
        }
        return u(n, "t"), n.prototype.startSpan = function(e, t, r) {
            var i, o, s;
            t === void 0 && (t = {}), r === void 0 && (r = or.active()), t.root && (r = Gn.deleteSpan(r));
            var a = Gn.getSpan(r);
            if (IT(r)) return pt.debug("Instrumentation suppressed, returning Noop Span"), Gn.wrapSpanContext(FO);
            var l, d, c, h = a == null ? void 0 : a.spanContext(),
                f = this._idGenerator.generateSpanId();
            h && Gn.isSpanContextValid(h) ? (l = h.traceId, d = h.traceState, c = h.spanId) : l = this._idGenerator.generateTraceId();
            var g = (i = t.kind) !== null && i !== void 0 ? i : np.INTERNAL,
                p = ((o = t.links) !== null && o !== void 0 ? o : []).map(function(_) {
                    return {
                        context: _.context,
                        attributes: Tg(_.attributes)
                    }
                }),
                y = Tg(t.attributes),
                b = this._sampler.shouldSample(r, l, e, g, y, p);
            d = (s = b.traceState) !== null && s !== void 0 ? s : d;
            var E = {
                traceId: l,
                spanId: f,
                traceFlags: b.decision === tp.RECORD_AND_SAMPLED ? mo.SAMPLED : mo.NONE,
                traceState: d
            };
            if (b.decision === tp.NOT_RECORD) return pt.debug("Recording is off, propagating context in a non-recording span"), Gn.wrapSpanContext(E);
            var S = Tg(Object.assign(y, b.attributes));
            return new C6(this, r, e, E, g, c, p, t.startTime, void 0, S)
        }, n.prototype.startActiveSpan = function(e, t, r, i) {
            var o, s, a;
            if (!(arguments.length < 2)) {
                arguments.length === 2 ? a = t : arguments.length === 3 ? (o = t, a = r) : (o = t, s = r, a = i);
                var l = s != null ? s : or.active(),
                    d = this.startSpan(e, o, l),
                    c = Gn.setSpan(l, d);
                return or.with(c, a, void 0, d)
            }
        }, n.prototype.getGeneralLimits = function() {
            return this._generalLimits
        }, n.prototype.getSpanLimits = function() {
            return this._spanLimits
        }, n.prototype.getActiveSpanProcessor = function() {
            return this._tracerProvider.getActiveSpanProcessor()
        }, n
    }(),
    ea, Qo = function() {
        return Qo = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, Qo.apply(this, arguments)
    },
    U6 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    M6 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    F6 = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    LO = function() {
        function n(e, t) {
            var r, i = this;
            this._attributes = e, this.asyncAttributesPending = t != null, this._syncAttributes = (r = this._attributes) !== null && r !== void 0 ? r : {}, this._asyncAttributesPromise = t == null ? void 0 : t.then(function(o) {
                return i._attributes = Object.assign({}, i._attributes, o), i.asyncAttributesPending = !1, o
            }, function(o) {
                return pt.debug("a resource's async attributes promise rejected: %s", o), i.asyncAttributesPending = !1, {}
            })
        }
        return u(n, "t"), n.empty = function() {
            return n.EMPTY
        }, n.default = function() {
            var e;
            return new n(((e = {})["service.name"] = "unknown_service", e[Tw] = nw[Tw], e[ww] = nw[ww], e[Ew] = nw[Ew], e))
        }, Object.defineProperty(n.prototype, "attributes", {
            get: u(function() {
                var e;
                return this.asyncAttributesPending && pt.error("Accessing resource attributes before async attributes settled"), (e = this._attributes) !== null && e !== void 0 ? e : {}
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.waitForAsyncAttributes = function() {
            return U6(this, void 0, void 0, function() {
                return M6(this, function(e) {
                    switch (e.label) {
                        case 0:
                            return this.asyncAttributesPending ? [4, this._asyncAttributesPromise] : [3, 2];
                        case 1:
                            e.sent(), e.label = 2;
                        case 2:
                            return [2]
                    }
                })
            })
        }, n.prototype.merge = function(e) {
            var t, r = this;
            if (!e) return this;
            var i = Qo(Qo({}, this._syncAttributes), (t = e._syncAttributes) !== null && t !== void 0 ? t : e.attributes);
            if (!this._asyncAttributesPromise && !e._asyncAttributesPromise) return new n(i);
            var o = Promise.all([this._asyncAttributesPromise, e._asyncAttributesPromise]).then(function(s) {
                var a, l = F6(s, 2),
                    d = l[0],
                    c = l[1];
                return Qo(Qo(Qo(Qo({}, r._syncAttributes), d), (a = e._syncAttributes) !== null && a !== void 0 ? a : e.attributes), c)
            });
            return new n(i, o)
        }, n.EMPTY = new n({}), n
    }(),
    wg = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    B6 = function() {
        function n(e) {
            this._spanProcessors = e
        }
        return u(n, "t"), n.prototype.forceFlush = function() {
            var e, t, r = [];
            try {
                for (var i = wg(this._spanProcessors), o = i.next(); !o.done; o = i.next()) {
                    var s = o.value;
                    r.push(s.forceFlush())
                }
            } catch (a) {
                e = {
                    error: a
                }
            } finally {
                try {
                    o && !o.done && (t = i.return) && t.call(i)
                } finally {
                    if (e) throw e.error
                }
            }
            return new Promise(function(a) {
                Promise.all(r).then(function() {
                    a()
                }).catch(function(l) {
                    ip(l || new Error("MultiSpanProcessor: forceFlush failed")), a()
                })
            })
        }, n.prototype.onStart = function(e, t) {
            var r, i;
            try {
                for (var o = wg(this._spanProcessors), s = o.next(); !s.done; s = o.next()) s.value.onStart(e, t)
            } catch (a) {
                r = {
                    error: a
                }
            } finally {
                try {
                    s && !s.done && (i = o.return) && i.call(o)
                } finally {
                    if (r) throw r.error
                }
            }
        }, n.prototype.onEnd = function(e) {
            var t, r;
            try {
                for (var i = wg(this._spanProcessors), o = i.next(); !o.done; o = i.next()) o.value.onEnd(e)
            } catch (s) {
                t = {
                    error: s
                }
            } finally {
                try {
                    o && !o.done && (r = i.return) && r.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
        }, n.prototype.shutdown = function() {
            var e, t, r = [];
            try {
                for (var i = wg(this._spanProcessors), o = i.next(); !o.done; o = i.next()) {
                    var s = o.value;
                    r.push(s.shutdown())
                }
            } catch (a) {
                e = {
                    error: a
                }
            } finally {
                try {
                    o && !o.done && (t = i.return) && t.call(i)
                } finally {
                    if (e) throw e.error
                }
            }
            return new Promise(function(a, l) {
                Promise.all(r).then(function() {
                    a()
                }, l)
            })
        }, n
    }(),
    j6 = function() {
        function n() {}
        return u(n, "t"), n.prototype.onStart = function(e, t) {}, n.prototype.onEnd = function(e) {}, n.prototype.shutdown = function() {
            return Promise.resolve()
        }, n.prototype.forceFlush = function() {
            return Promise.resolve()
        }, n
    }();
(function(n) {
    n[n.resolved = 0] = "resolved", n[n.timeout = 1] = "timeout", n[n.error = 2] = "error", n[n.unresolved = 3] = "unresolved"
})(ea || (ea = {}));
var Mt, yw, vp, $6 = function() {
        function n(e) {
            var t;
            e === void 0 && (e = {}), this._registeredSpanProcessors = [], this._tracers = new Map;
            var r = function() {
                for (var s = [], a = 0; a < arguments.length; a++) s[a] = arguments[a];
                for (var l = s.shift(), d = new WeakMap; s.length > 0;) l = YO(l, s.shift(), 0, d);
                return l
            }({}, eN(), D6(e));
            this.resource = (t = r.resource) !== null && t !== void 0 ? t : LO.empty(), this.resource = LO.default().merge(this.resource), this._config = Object.assign({}, r, {
                resource: this.resource
            });
            var i = this._buildExporterFromEnv();
            if (i !== void 0) {
                var o = new x6(i);
                this.activeSpanProcessor = o
            } else this.activeSpanProcessor = new j6
        }
        return u(n, "t"), n.prototype.getTracer = function(e, t, r) {
            var i = e + "@" + (t || "") + ":" + ((r == null ? void 0 : r.schemaUrl) || "");
            return this._tracers.has(i) || this._tracers.set(i, new k6({
                name: e,
                version: t,
                schemaUrl: r == null ? void 0 : r.schemaUrl
            }, this._config, this)), this._tracers.get(i)
        }, n.prototype.addSpanProcessor = function(e) {
            this._registeredSpanProcessors.length === 0 && this.activeSpanProcessor.shutdown().catch(function(t) {
                return pt.error("Error while trying to shutdown current span processor", t)
            }), this._registeredSpanProcessors.push(e), this.activeSpanProcessor = new B6(this._registeredSpanProcessors)
        }, n.prototype.getActiveSpanProcessor = function() {
            return this.activeSpanProcessor
        }, n.prototype.register = function(e) {
            e === void 0 && (e = {}), Gn.setGlobalTracerProvider(this), e.propagator === void 0 && (e.propagator = this._buildPropagatorFromEnv()), e.contextManager && or.setGlobalContextManager(e.contextManager), e.propagator && co.setGlobalPropagator(e.propagator)
        }, n.prototype.forceFlush = function() {
            var e = this._config.forceFlushTimeoutMillis,
                t = this._registeredSpanProcessors.map(function(r) {
                    return new Promise(function(i) {
                        var o, s = setTimeout(function() {
                            i(new Error("Span processor did not completed within timeout period of " + e + " ms")), o = ea.timeout
                        }, e);
                        r.forceFlush().then(function() {
                            clearTimeout(s), o !== ea.timeout && (o = ea.resolved, i(o))
                        }).catch(function(a) {
                            clearTimeout(s), o = ea.error, i(a)
                        })
                    })
                });
            return new Promise(function(r, i) {
                Promise.all(t).then(function(o) {
                    var s = o.filter(function(a) {
                        return a !== ea.resolved
                    });
                    s.length > 0 ? i(s) : r()
                }).catch(function(o) {
                    return i([o])
                })
            })
        }, n.prototype.shutdown = function() {
            return this.activeSpanProcessor.shutdown()
        }, n.prototype._getPropagator = function(e) {
            var t;
            return (t = this.constructor._registeredPropagators.get(e)) === null || t === void 0 ? void 0 : t()
        }, n.prototype._getSpanExporter = function(e) {
            var t;
            return (t = this.constructor._registeredExporters.get(e)) === null || t === void 0 ? void 0 : t()
        }, n.prototype._buildPropagatorFromEnv = function() {
            var e = this,
                t = Array.from(new Set(Ou().OTEL_PROPAGATORS)),
                r = t.map(function(i) {
                    var o = e._getPropagator(i);
                    return o || pt.warn('Propagator "' + i + '" requested through environment variable is unavailable.'), o
                }).reduce(function(i, o) {
                    return o && i.push(o), i
                }, []);
            return r.length === 0 ? void 0 : t.length === 1 ? r[0] : new XB({
                propagators: r
            })
        }, n.prototype._buildExporterFromEnv = function() {
            var e = Ou().OTEL_TRACES_EXPORTER;
            if (e !== "none" && e !== "") {
                var t = this._getSpanExporter(e);
                return t || pt.error('Exporter "' + e + '" requested through environment variable is unavailable.'), t
            }
        }, n._registeredPropagators = new Map([
            ["tracecontext", function() {
                return new ij
            }],
            ["baggage", function() {
                return new PB
            }]
        ]), n._registeredExporters = new Map, n
    }(),
    V6 = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    H6 = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    z6 = function() {
        function n() {
            this._enabled = !1, this._currentContext = uo
        }
        return u(n, "t"), n.prototype._bindFunction = function(e, t) {
            e === void 0 && (e = uo);
            var r = this,
                i = u(function() {
                    for (var o = this, s = [], a = 0; a < arguments.length; a++) s[a] = arguments[a];
                    return r.with(e, function() {
                        return t.apply(o, s)
                    })
                }, "n");
            return Object.defineProperty(i, "length", {
                enumerable: !1,
                configurable: !0,
                writable: !1,
                value: t.length
            }), i
        }, n.prototype.active = function() {
            return this._currentContext
        }, n.prototype.bind = function(e, t) {
            return e === void 0 && (e = this.active()), typeof t == "function" ? this._bindFunction(e, t) : t
        }, n.prototype.disable = function() {
            return this._currentContext = uo, this._enabled = !1, this
        }, n.prototype.enable = function() {
            return this._enabled || (this._enabled = !0, this._currentContext = uo), this
        }, n.prototype.with = function(e, t, r) {
            for (var i = [], o = 3; o < arguments.length; o++) i[o - 3] = arguments[o];
            var s = this._currentContext;
            this._currentContext = e || uo;
            try {
                return t.call.apply(t, H6([r], V6(i), !1))
            } finally {
                this._currentContext = s
            }
        }, n
    }(),
    W6 = function() {
        var n = u(function(e, t) {
            return n = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(r, i) {
                r.__proto__ = i
            } || function(r, i) {
                for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o])
            }, n(e, t)
        }, "t");
        return function(e, t) {
            if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function r() {
                this.constructor = e
            }
            u(r, "n"), n(e, t), e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r)
        }
    }(),
    q6 = function(n) {
        function e(t) {
            t === void 0 && (t = {});
            var r = n.call(this, t) || this;
            if (t.contextManager) throw "contextManager should be defined in register method not in constructor";
            if (t.propagator) throw "propagator should be defined in register method not in constructor";
            return r
        }
        return u(e, "e"), W6(e, n), e.prototype.register = function(t) {
            t === void 0 && (t = {}), t.contextManager === void 0 && (t.contextManager = new z6), t.contextManager && t.contextManager.enable(), n.prototype.register.call(this, t)
        }, e
    }($6);

function eT(n, e) {
    return e in n
}
u(eT, "Op");

function oo(n, e, t, r) {
    var i = void 0,
        o = void 0;
    eT(t, e) && typeof t[e] == "number" && (i = t[e]);
    var s = Mt.FETCH_START;
    if (eT(t, s) && typeof t[s] == "number" && (o = t[s]), i !== void 0 && o !== void 0 && i >= o) return n.addEvent(e, i), n
}
u(oo, "wp");

function xO(n, e) {
    oo(n, Mt.FETCH_START, e), oo(n, Mt.DOMAIN_LOOKUP_START, e), oo(n, Mt.DOMAIN_LOOKUP_END, e), oo(n, Mt.CONNECT_START, e), eT(e, "name") && e.name.startsWith("https:") && oo(n, Mt.SECURE_CONNECTION_START, e), oo(n, Mt.CONNECT_END, e), oo(n, Mt.REQUEST_START, e), oo(n, Mt.RESPONSE_START, e), oo(n, Mt.RESPONSE_END, e);
    var t = e[Mt.ENCODED_BODY_SIZE];
    t !== void 0 && n.setAttribute("http.response_content_length", t);
    var r = e[Mt.DECODED_BODY_SIZE];
    r !== void 0 && t !== r && n.setAttribute("http.response_content_length_uncompressed", r)
}
u(xO, "Lp");

function nN() {
    return typeof location != "undefined" ? location.origin : void 0
}
u(nN, "Ap");

function G6(n, e, t, r, i, o) {
    i === void 0 && (i = new WeakSet);
    var s = Pg(n),
        a = function(f, g, p, y, b, E) {
            var S = so(g),
                _ = so(p),
                I = y.filter(function(x) {
                    var L = so(nd(x[Mt.FETCH_START])),
                        U = so(nd(x[Mt.RESPONSE_END]));
                    return x.initiatorType.toLowerCase() === E && x.name === f && L >= S && U <= _
                });
            return I.length > 0 && (I = I.filter(function(x) {
                return !b.has(x)
            })), I
        }(n = s.toString(), e, t, r, i, o);
    if (a.length === 0) return {
        mainRequest: void 0
    };
    if (a.length === 1) return {
        mainRequest: a[0]
    };
    var l = function(f) {
        return f.slice().sort(function(g, p) {
            var y = g[Mt.FETCH_START],
                b = p[Mt.FETCH_START];
            return y > b ? 1 : y < b ? -1 : 0
        })
    }(a);
    if (s.origin !== nN() && l.length > 1) {
        var d = l[0],
            c = function(f, g, p) {
                for (var y, b = so(p), E = so(nd(g)), S = f[1], _ = f.length, I = 1; I < _; I++) {
                    var x = f[I],
                        L = so(nd(x[Mt.FETCH_START])),
                        U = b - so(nd(x[Mt.RESPONSE_END]));
                    L >= E && (!y || U < y) && (y = U, S = x)
                }
                return S
            }(l, d[Mt.RESPONSE_END], t),
            h = d[Mt.RESPONSE_END];
        return c[Mt.FETCH_START] < h && (c = d, d = void 0), {
            corsPreFlightRequest: d,
            mainRequest: c
        }
    }
    return {
        mainRequest: a[0]
    }
}
u(G6, "Ip");

function Pg(n) {
    if (typeof URL == "function") return new URL(n, typeof document != "undefined" ? document.baseURI : typeof location != "undefined" ? location.href : void 0);
    var e = (yw || (yw = document.createElement("a")), yw);
    return e.href = n, e
}
u(Pg, "kp");
(function(n) {
    n.CONNECT_END = "connectEnd", n.CONNECT_START = "connectStart", n.DECODED_BODY_SIZE = "decodedBodySize", n.DOM_COMPLETE = "domComplete", n.DOM_CONTENT_LOADED_EVENT_END = "domContentLoadedEventEnd", n.DOM_CONTENT_LOADED_EVENT_START = "domContentLoadedEventStart", n.DOM_INTERACTIVE = "domInteractive", n.DOMAIN_LOOKUP_END = "domainLookupEnd", n.DOMAIN_LOOKUP_START = "domainLookupStart", n.ENCODED_BODY_SIZE = "encodedBodySize", n.FETCH_START = "fetchStart", n.LOAD_EVENT_END = "loadEventEnd", n.LOAD_EVENT_START = "loadEventStart", n.NAVIGATION_START = "navigationStart", n.REDIRECT_END = "redirectEnd", n.REDIRECT_START = "redirectStart", n.REQUEST_START = "requestStart", n.RESPONSE_END = "responseEnd", n.RESPONSE_START = "responseStart", n.SECURE_CONNECTION_START = "secureConnectionStart", n.UNLOAD_EVENT_END = "unloadEventEnd", n.UNLOAD_EVENT_START = "unloadEventStart"
})(Mt || (Mt = {})),
function(n) {
    n.COMPONENT = "component", n.HTTP_ERROR_NAME = "http.error_name", n.HTTP_STATUS_TEXT = "http.status_text"
}(vp || (vp = {}));
var bw, tT, yp, na, kg, Ug, rN, PO = "0.53.0",
    K6 = function() {
        var n = u(function(e, t) {
            return n = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(r, i) {
                r.__proto__ = i
            } || function(r, i) {
                for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o])
            }, n(e, t)
        }, "t");
        return function(e, t) {
            if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function r() {
                this.constructor = e
            }
            u(r, "n"), n(e, t), e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r)
        }
    }(),
    kO = typeof process == "object" && ((bw = process.release) === null || bw === void 0 ? void 0 : bw.name) === "node",
    J6 = function(n) {
        function e(t) {
            t === void 0 && (t = {});
            var r = n.call(this, "@opentelemetry/instrumentation-fetch", PO, t) || this;
            return r.component = "fetch", r.version = PO, r.moduleName = r.component, r._usedResources = new WeakSet, r._tasksCount = 0, r
        }
        return u(e, "e"), K6(e, n), e.prototype.init = function() {}, e.prototype._addChildSpan = function(t, r) {
            var i = this.tracer.startSpan("CORS Preflight", {
                startTime: r[Mt.FETCH_START]
            }, Gn.setSpan(or.active(), t));
            this.getConfig().ignoreNetworkEvents || xO(i, r), i.end(r[Mt.RESPONSE_END])
        }, e.prototype._addFinalSpanAttributes = function(t, r) {
            var i = Pg(r.url);
            t.setAttribute("http.status_code", r.status), r.statusText != null && t.setAttribute(vp.HTTP_STATUS_TEXT, r.statusText), t.setAttribute("http.host", i.host), t.setAttribute("http.scheme", i.protocol.replace(":", "")), typeof navigator != "undefined" && t.setAttribute("http.user_agent", navigator.userAgent)
        }, e.prototype._addHeaders = function(t, r) {
            if (! function(o, s) {
                    var a = s || [];
                    return (typeof a == "string" || a instanceof RegExp) && (a = [a]), Pg(o).origin === nN() || a.some(function(l) {
                        return NR(o, l)
                    })
                }(r, this.getConfig().propagateTraceHeaderCorsUrls)) {
                var i = {};
                return co.inject(or.active(), i), void(Object.keys(i).length > 0 && this._diag.debug("headers inject skipped due to CORS policy"))
            }
            t instanceof Request ? co.inject(or.active(), t.headers, {
                set: u(function(o, s, a) {
                    return o.set(s, typeof a == "string" ? a : String(a))
                }, "set")
            }) : t.headers instanceof Headers ? co.inject(or.active(), t.headers, {
                set: u(function(o, s, a) {
                    return o.set(s, typeof a == "string" ? a : String(a))
                }, "set")
            }) : t.headers instanceof Map ? co.inject(or.active(), t.headers, {
                set: u(function(o, s, a) {
                    return o.set(s, typeof a == "string" ? a : String(a))
                }, "set")
            }) : (i = {}, co.inject(or.active(), i), t.headers = Object.assign({}, i, t.headers || {}))
        }, e.prototype._clearResources = function() {
            this._tasksCount === 0 && this.getConfig().clearTimingResources && (performance.clearResourceTimings(), this._usedResources = new WeakSet)
        }, e.prototype._createSpan = function(t, r) {
            var i;
            if (r === void 0 && (r = {}), ! function(a, l) {
                    var d, c;
                    if (!l) return !1;
                    try {
                        for (var h = dj(l), f = h.next(); !f.done; f = h.next())
                            if (NR(a, f.value)) return !0
                    } catch (g) {
                        d = {
                            error: g
                        }
                    } finally {
                        try {
                            f && !f.done && (c = h.return) && c.call(h)
                        } finally {
                            if (d) throw d.error
                        }
                    }
                    return !1
                }(t, this.getConfig().ignoreUrls)) {
                var o = (r.method || "GET").toUpperCase(),
                    s = "HTTP " + o;
                return this.tracer.startSpan(s, {
                    kind: np.CLIENT,
                    attributes: (i = {}, i[vp.COMPONENT] = this.moduleName, i["http.method"] = o, i["http.url"] = t, i)
                })
            }
            this._diag.debug("ignoring span as url matches ignored url")
        }, e.prototype._findResourceAndAddNetworkEvents = function(t, r, i) {
            var o = r.entries;
            if (!o.length) {
                if (!performance.getEntriesByType) return;
                o = performance.getEntriesByType("resource")
            }
            var s = G6(r.spanUrl, r.startTime, i, o, this._usedResources, "fetch");
            if (s.mainRequest) {
                var a = s.mainRequest;
                this._markResourceAsUsed(a);
                var l = s.corsPreFlightRequest;
                l && (this._addChildSpan(t, l), this._markResourceAsUsed(l)), this.getConfig().ignoreNetworkEvents || xO(t, a)
            }
        }, e.prototype._markResourceAsUsed = function(t) {
            this._usedResources.add(t)
        }, e.prototype._endSpan = function(t, r, i) {
            var o = this,
                s = go(Date.now()),
                a = Id();
            this._addFinalSpanAttributes(t, i), setTimeout(function() {
                var l;
                (l = r.observer) === null || l === void 0 || l.disconnect(), o._findResourceAndAddNetworkEvents(t, r, a), o._tasksCount--, o._clearResources(), t.end(s)
            }, 300)
        }, e.prototype._patchConstructor = function() {
            var t = this;
            return function(r) {
                var i = t;
                return function() {
                    for (var o = [], s = 0; s < arguments.length; s++) o[s] = arguments[s];
                    var a = this,
                        l = Pg(o[0] instanceof Request ? o[0].url : String(o[0])).href,
                        d = o[0] instanceof Request ? o[0] : o[1] || {},
                        c = i._createSpan(l, d);
                    if (!c) return r.apply(this, o);
                    var h = i._prepareSpanData(l);

                    function f(b, E) {
                        i._applyAttributesAfterFetch(b, d, E), i._endSpan(b, h, {
                            status: E.status || 0,
                            statusText: E.message,
                            url: l
                        })
                    }
                    u(f, "c");

                    function g(b, E) {
                        i._applyAttributesAfterFetch(b, d, E), E.status >= 200 && E.status < 400 ? i._endSpan(b, h, E) : i._endSpan(b, h, {
                            status: E.status,
                            statusText: E.statusText,
                            url: l
                        })
                    }
                    u(g, "l");

                    function p(b, E, S) {
                        try {
                            var _ = S.clone(),
                                I = S.clone(),
                                x = _.body;
                            if (x) {
                                var L = x.getReader(),
                                    U = u(function() {
                                        L.read().then(function(N) {
                                            N.done ? g(b, I) : U()
                                        }, function(N) {
                                            f(b, N)
                                        })
                                    }, "a");
                                U()
                            } else g(b, S)
                        } finally {
                            E(S)
                        }
                    }
                    u(p, "f");

                    function y(b, E, S) {
                        try {
                            f(b, S)
                        } finally {
                            E(S)
                        }
                    }
                    return u(y, "h"), new Promise(function(b, E) {
                        return or.with(Gn.setSpan(or.active(), c), function() {
                            return i._addHeaders(d, l), i._tasksCount++, r.apply(a, d instanceof Request ? [d] : [l, d]).then(p.bind(a, c, b), y.bind(a, c, E))
                        })
                    })
                }
            }
        }, e.prototype._applyAttributesAfterFetch = function(t, r, i) {
            var o = this,
                s = this.getConfig().applyCustomAttributesOnSpan;
            s && function(a, l, d) {
                var c, h;
                try {
                    h = a()
                } catch (f) {
                    c = f
                } finally {
                    if (l(c, h), c && !d) throw c;
                    return h
                }
            }(function() {
                return s(t, r, i)
            }, function(a) {
                a && o._diag.error("applyCustomAttributesOnSpan", a)
            }, !0)
        }, e.prototype._prepareSpanData = function(t) {
            var r = Id(),
                i = [];
            if (typeof PerformanceObserver != "function") return {
                entries: i,
                startTime: r,
                spanUrl: t
            };
            var o = new PerformanceObserver(function(s) {
                s.getEntries().forEach(function(a) {
                    a.initiatorType === "fetch" && a.name === t && i.push(a)
                })
            });
            return o.observe({
                entryTypes: ["resource"]
            }), {
                entries: i,
                observer: o,
                startTime: r,
                spanUrl: t
            }
        }, e.prototype.enable = function() {
            kO ? this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()") : (function(t) {
                return typeof t == "function" && typeof t.__original == "function" && typeof t.__unwrap == "function" && t.__wrapped === !0
            }(fetch) && (this._unwrap(Td, "fetch"), this._diag.debug("removing previous patch for constructor")), this._wrap(Td, "fetch", this._patchConstructor()))
        }, e.prototype.disable = function() {
            kO || (this._unwrap(Td, "fetch"), this._usedResources = new WeakSet)
        }, e
    }(S6);

function iN(n) {
    let e = n.getSpanInformation(),
        t = n.getContext();
    return {
        traceId: t.traceId,
        spanId: t.spanId,
        parentSpanId: e.parentSpanId,
        name: e.name,
        startTimeUnixNano: e.startTime,
        endTimeUnixNano: e.endTime,
        attributes: t.attributes,
        kind: e.kind,
        status: e.status
    }
}
u(iN, "zp");
var dE = class dE {
    constructor(e) {
        let {
            transportManager: t,
            promiseMap: r = new Map,
            tracer: i
        } = e;
        tT.add(this), yp.set(this, void 0), na.set(this, void 0), kg.set(this, 0), Ug.set(this, void 0), ge(this, yp, t, "f"), ge(this, na, r, "f"), ge(this, Ug, i, "f")
    }
    shutdown() {
        return se(this, void 0, void 0, function*() {
            yield Promise.all(D(this, na, "f").values())
        })
    }
    forceFlush() {
        return se(this, void 0, void 0, function*() {
            yield Promise.all(D(this, na, "f").values())
        })
    }
    onStart() {}
    onEnd(e) {
        let t = D(this, Ug, "f").fromOTSpan(e);
        D(this, tT, "m", rN).call(this, t)
    }
};
u(dE, "Fp");
var nT = dE;
yp = new WeakMap, na = new WeakMap, kg = new WeakMap, Ug = new WeakMap, tT = new WeakSet, rN = u(function(n) {
    var e, t;
    let r = (ge(this, kg, (t = D(this, kg, "f"), e = t++, t), "f"), e),
        i = iN(n);
    D(this, na, "f").set(r, se(this, void 0, void 0, function*() {
        yield D(this, yp, "f").processSpan(i), D(this, na, "f").delete(r)
    }))
}, "Mp");
var ai = {
        Tag: "outsystems.log.message.tag",
        Visibility: "outsystems.otel.access.visibility",
        AccessType: "outsystems.otel.access.type",
        ChildrenNames: Tt.ChildrenNames,
        IsNonAggregable: Tt.IsNonAggregable
    },
    Z6 = [ai.IsNonAggregable, ai.ChildrenNames],
    en, Mg, Fg, pd, rT, Yo, gu, pu, Xs, Bg, mu, jg, Au, bp, oN, iT, wp, sN, hE = class hE {
        constructor(e) {
            let {
                visibility: t,
                attributes: r = {},
                span: i,
                activateSpan: o,
                explicitChildren: s = []
            } = e;
            en.set(this, void 0), Mg.set(this, void 0), Fg.set(this, void 0), pd.set(this, void 0), ge(this, en, i, "f"), ge(this, Mg, o, "f"), ge(this, pd, s, "f"), t !== void 0 && D(this, en, "f").setAttribute(ai.Visibility, Pp[t]), D(this, en, "f").setAttributes(r), this.ended = new Promise(a => {
                ge(this, Fg, a, "f")
            })
        }
        setAttribute(e, t) {
            D(this, en, "f").setAttribute(e, t)
        }
        setStatus(e, t) {
            D(this, en, "f").setStatus({
                code: e,
                message: t
            })
        }
        raiseError(e, t) {
            D(this, en, "f").recordException(e), this.setStatus(2, t)
        }
        getContext() {
            let e = D(this, en, "f").spanContext();
            return {
                spanId: e.spanId,
                traceId: e.traceId,
                attributes: D(this, en, "f").attributes,
                sampled: !!(1 & e.traceFlags)
            }
        }
        addEvent(e, t) {
            D(this, en, "f").addEvent(e, t)
        }
        end() {
            return se(this, void 0, void 0, function*() {
                var e;
                yield Promise.all(D(this, pd, "f").map(t => t.ended)), D(this, en, "f").end(), (e = D(this, Fg, "f")) === null || e === void 0 || e.call(this)
            })
        }
        fail() {
            D(this, en, "f").setStatus({
                code: rp.ERROR
            })
        }
        getSpanInformation() {
            return {
                name: D(this, en, "f").name,
                kind: D(this, en, "f").kind,
                status: D(this, en, "f").status.code,
                parentSpanId: D(this, en, "f").parentSpanId,
                startTime: si.toNanoSeconds(new si(D(this, en, "f").startTime)),
                endTime: si.toNanoSeconds(new si(D(this, en, "f").endTime)),
                childrenNames: D(this, en, "f").attributes[Tt.ChildrenNames]
            }
        }
        activate() {
            return D(this, Mg, "f").call(this)
        }
        addExplicitChild(e) {
            D(this, pd, "f").push(e)
        }
    };
u(hE, "cd");
var oT = hE;
en = new WeakMap, Mg = new WeakMap, Fg = new WeakMap, pd = new WeakMap;
var fE = class fE {
    constructor(e) {
        let {
            transports: t,
            baseAttributes: r = {},
            staticAttributes: i = [],
            databaseNameSuffix: o,
            transportManager: s = new Ad({
                traceTransports: t,
                databaseNameSuffix: o
            }),
            tracerProvider: a = new q6,
            contextManager: l = new n6,
            tracer: d = a.getTracer("@outsystems/logger-js", "3.1.0"),
            exporter: c,
            enabled: h = !0,
            getActiveSpan: f = u(() => Gn.getActiveSpan(), "h"),
            setSpan: g = u((y, b) => Gn.setSpan(y, b), "p")
        } = e;
        rT.add(this), Yo.set(this, void 0), gu.set(this, void 0), pu.set(this, void 0), Xs.set(this, void 0), Bg.set(this, void 0), mu.set(this, void 0), jg.set(this, void 0), Au.set(this, void 0), bp.set(this, void 0), ge(this, Yo, s, "f"), ge(this, Xs, d, "f"), ge(this, pu, h, "f"), ge(this, mu, f, "f"), ge(this, gu, a, "f"), ge(this, jg, g, "f"), ge(this, Bg, l, "f"), ge(this, Au, r, "f"), ge(this, bp, i, "f");
        let p = c != null ? c : new nT({
            transportManager: s,
            tracer: this
        });
        D(this, gu, "f").register({
            contextManager: l
        }), D(this, gu, "f").addSpanProcessor(p)
    }
    addTransport(e) {
        D(this, Yo, "f").addTraceTransport(e)
    }
    removeTransport(e) {
        D(this, Yo, "f").removeTraceTransport(e)
    }
    startSpan(e, t, r, i) {
        if (D(this, pu, "f")) {
            (function(a, l) {
                var d, c;
                if (l) {
                    let h = (c = (d = l.getSpanInformation()) === null || d === void 0 ? void 0 : d.childrenNames) !== null && c !== void 0 ? c : [];
                    h.push(a), l.setAttribute(Tt.ChildrenNames, h)
                }
            })(e, r != null ? r : D(this, mu, "f").call(this) ? this.fromOTSpan(D(this, mu, "f").call(this)) : void 0);
            let o = r ? D(this, Xs, "f").startSpan(e, {
                    attributes: {},
                    kind: i
                }, r.activate()) : D(this, Xs, "f").startSpan(e, {
                    kind: i
                }),
                s = this.fromOTSpan(o, t);
            return r == null || r.addExplicitChild(s), s
        }
    }
    startActiveSpan(e, t, r, i, o) {
        if (D(this, pu, "f")) {
            let s = u(a => {
                let l = this.fromOTSpan(a, r);
                return i == null || i.addExplicitChild(l), t(l)
            }, "s");
            return i ? D(this, Xs, "f").startActiveSpan(e, {
                attributes: {},
                kind: o
            }, i.activate(), s) : D(this, Xs, "f").startActiveSpan(e, {
                kind: o
            }, s)
        }
        return t(void 0)
    }
    getActiveSpan() {
        let e = D(this, mu, "f").call(this);
        return e ? this.fromOTSpan(e) : void 0
    }
    setStatus(e) {
        ge(this, pu, e, "f")
    }
    addBaseSpanAttributes(e) {
        ge(this, Au, Object.assign(Object.assign({}, D(this, Au, "f")), e), "f")
    }
    enableFetchInstrumentation() {
        (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new J6).setTracerProvider(D(this, gu, "f"))
    }
    span(e) {
        return se(this, void 0, void 0, function*() {
            yield D(this, Yo, "f").processSpan(e)
        })
    }
    flush() {
        return se(this, void 0, void 0, function*() {
            D(this, Yo, "f").flushSpans()
        })
    }
    setSchedulerTimerInterval(e) {
        D(this, Yo, "f").setSchedulerTimerInterval(e)
    }
    fromOTSpan(e, t) {
        let r = D(this, rT, "m", oN).call(this, e);
        return new oT({
            span: e,
            attributes: fd(r),
            activateSpan: u(() => D(this, jg, "f").call(this, D(this, Bg, "f").active(), e), "activateSpan"),
            visibility: t
        })
    }
};
u(fE, "ld");
var sT = fE;
Yo = new WeakMap, gu = new WeakMap, pu = new WeakMap, Xs = new WeakMap, Bg = new WeakMap, mu = new WeakMap, jg = new WeakMap, Au = new WeakMap, bp = new WeakMap, rT = new WeakSet, oN = u(function(n) {
    let e = Object.assign({}, D(this, Au, "f"));
    return n.parentSpanId === void 0 || Object.keys(e).forEach(t => {
        D(this, bp, "f").includes(t) && delete e[t]
    }), e
}, "od");
var gE = class gE {
    constructor(e) {
        let {
            transportId: t,
            logTypeBaseline: r = ot.Debug,
            formatter: i,
            transportConsole: o = console,
            shouldWriteLogsOnConsoles: s = u(() => !1, "i")
        } = e;
        iT.add(this), wp.set(this, void 0), this.formatConsoleLog = a => {
            var l, d, c, h;
            let f = a.type === ot.Error ? (l = a.errorCode) !== null && l !== void 0 ? l : $D : void 0,
                g = (d = a.category) !== null && d !== void 0 ? d : "Application",
                p = (h = (c = a == null ? void 0 : a.error) === null || c === void 0 ? void 0 : c.message) !== null && h !== void 0 ? h : a.message;
            return `${si.toISOString(a.timestamp)}:${f?" "+f:""} [${g}] ${p}`
        }, this.transportId = t, this.logTypeBaseline = r, this.formatter = i, this.transportConsole = o, ge(this, wp, s, "f")
    }
    getTransportId() {
        return this.transportId
    }
    requiresConnectivity() {
        return !1
    }
    hasWriteBuffer() {
        return !1
    }
    getLogTypeBaseline() {
        return this.logTypeBaseline
    }
    setLogTypeBaseline(e) {
        this.logTypeBaseline = e
    }
    write(e) {
        return se(this, void 0, void 0, function*() {
            if (!D(this, iT, "m", sN).call(this, e)) return;
            let t = this.formatter ? this.formatter.format(e) : this.formatConsoleLog(e);
            switch (e.type) {
                case ot.Debug:
                    this.transportConsole.debug(t);
                    break;
                case ot.Info:
                    this.transportConsole.log(t);
                    break;
                case ot.Warning:
                    this.transportConsole.warn(t);
                    break;
                case ot.Error:
                    this.transportConsole.error(t, e.error);
                    break;
                default:
                    this.transportConsole.log(t)
            }
        })
    }
    writeAll(e) {
        return se(this, void 0, void 0, function*() {
            for (let t of e) yield this.write(t)
        })
    }
};
u(gE, "fd");
var aT = gE;

function aN(n) {
    let e = {};
    return n.category && (e[ai.Tag] = n.category), e
}
u(aN, "hd");
wp = new WeakMap, iT = new WeakSet, sN = u(function(n) {
    return n.visibility === Oe.External || D(this, wp, "f").call(this)
}, "ud");
var pE = class pE {
    format(e) {
        var t, r;
        let i = (t = e.visibility) !== null && t !== void 0 ? t : Oe.External,
            o = VD(e),
            s = aN(e),
            a = Object.assign(Object.assign(Object.assign({
                [ai.Visibility]: Pp[i]
            }, o), s), e.attributes),
            l = BT(a),
            d = si.toISOString(e.timestamp);
        return {
            message: (r = e.message) !== null && r !== void 0 ? r : "",
            attributes: l,
            instant: d
        }
    }
};
u(pE, "pd");
var uT = pE,
    Y6 = {
        [ot.Debug]: "logDebug",
        [ot.Info]: "logInfo",
        [ot.Warning]: "logWarning",
        [ot.Error]: "logError",
        [ot.Trace]: "logTrace"
    },
    mE = class mE {
        constructor(e) {
            let {
                transportId: t,
                logTypeBaseline: r,
                nativeLoggerV2: i,
                formatter: o = new uT
            } = e;
            this.transportId = t, this.logTypeBaseline = r, this.nativeLoggerV2 = i, this.formatter = o
        }
        getTransportId() {
            return this.transportId
        }
        requiresConnectivity() {
            return !1
        }
        hasWriteBuffer() {
            return !1
        }
        getLogTypeBaseline() {
            return this.logTypeBaseline
        }
        setLogTypeBaseline(e) {
            this.logTypeBaseline = e
        }
        write(e) {
            return se(this, void 0, void 0, function*() {
                let t = this.formatter.format(e),
                    r = Y6[e.type];
                return this.nativeLoggerV2[r](t)
            })
        }
        writeAll(e) {
            return se(this, void 0, void 0, function*() {
                for (let t of e) yield this.write(t)
            })
        }
    };
u(mE, "gd");
var cT = mE,
    md, X6 = {
        [ot.Trace]: 1,
        [ot.Debug]: 5,
        [ot.Info]: 9,
        [ot.Warning]: 13,
        [ot.Error]: 17
    },
    Q6 = {
        [ot.Debug]: "Debug",
        [ot.Info]: "Information",
        [ot.Warning]: "Warning",
        [ot.Error]: "Error",
        [ot.Trace]: "Trace"
    },
    vE = class vE {
        constructor() {
            let {
                resourceAttributes: e = {}
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            md.set(this, void 0), ge(this, md, e, "f")
        }
        setResourceAttributes(e) {
            ge(this, md, e != null ? e : {}, "f")
        }
        format(e) {
            return this.formatAll([e])
        }
        formatAll(e) {
            let t = Object.assign({
                    [ai.AccessType]: 3
                }, D(this, md, "f")),
                r = gp(t),
                i = e.map(o => function(s) {
                    var a;
                    let l = (a = s.visibility) !== null && a !== void 0 ? a : Oe.External,
                        d = VD(s),
                        c = (_ => {
                            let I = {},
                                x = _.span;
                            return x && (I.traceId = x.traceId, I.spanId = x.spanId), I
                        })(s),
                        h = aN(s),
                        f = Object.assign(Object.assign(Object.assign({
                            [ai.Visibility]: Pp[l]
                        }, d), h), s.attributes),
                        g = BT(f),
                        p = gp(g),
                        y = X6[s.type],
                        b = Q6[s.type],
                        E = si.toNanoSeconds(s.timestamp),
                        S = (_ => {
                            let I = {
                                body: {
                                    stringValue: ""
                                }
                            };
                            if (_.message) {
                                let x = _.message.length > 2e3 ? `${_.message.substring(0,1997)}...` : _.message;
                                I.body = {
                                    stringValue: x
                                }
                            }
                            return I
                        })(s);
                    return Object.assign(Object.assign(Object.assign({}, S), c), {
                        timeUnixNano: E,
                        severityNumber: y,
                        severityText: b,
                        attributes: p
                    })
                }(o));
            return function(o, s) {
                return {
                    resourceLogs: [{
                        resource: {
                            attributes: s
                        },
                        scopeLogs: [{
                            scope: {
                                name: "@outsystems/logger-js",
                                version: "3.1.0"
                            },
                            logRecords: o
                        }]
                    }]
                }
            }(i, r)
        }
    };
u(vE, "Td");
var lT = vE,
    $g, ra, Tp, dT;
md = new WeakMap;
var yE = class yE {
    constructor(e) {
        let {
            transportId: t,
            resourceAttributes: r,
            logTypeBaseline: i,
            logsEndpoint: o = "/v2/logs",
            logsCollectorBaseUrl: s,
            tagId: a,
            enableWriteBuffer: l = !0,
            httpClient: d = new io({
                baseUrl: s,
                headers: a ? {
                    "api-key": a,
                    "tag-id": a
                } : {}
            }),
            formatter: c = new lT({
                resourceAttributes: r
            })
        } = e;
        $g.add(this), ra.set(this, void 0), Tp.set(this, void 0), this.transportId = t, this.logTypeBaseline = i, this.logsEndpoint = o, this.enableWriteBuffer = l, this.httpClient = d, this.formatter = c, ge(this, ra, a, "f"), ge(this, Tp, s, "f")
    }
    getTransportId() {
        return this.transportId
    }
    requiresConnectivity() {
        return !0
    }
    hasWriteBuffer() {
        return this.enableWriteBuffer
    }
    getLogTypeBaseline() {
        return this.logTypeBaseline
    }
    setLogTypeBaseline(e) {
        this.logTypeBaseline = e
    }
    setTagId(e) {
        ge(this, ra, e, "f")
    }
    setResourceAttributes(e) {
        var t, r;
        (r = (t = this.formatter).setResourceAttributes) === null || r === void 0 || r.call(t, e)
    }
    write(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, $g, "m", dT).call(this, this.formatter.format(e))
        })
    }
    writeAll(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, $g, "m", dT).call(this, this.formatter.formatAll(e))
        })
    }
};
u(yE, "Od");
var hT = yE,
    fT, vd, uN, Vg, vu, ia, Ep, gT;
ra = new WeakMap, Tp = new WeakMap, $g = new WeakSet, dT = u(function(n) {
    return se(this, void 0, void 0, function*() {
        return this.httpClient.post({
            url: this.logsEndpoint,
            payload: n,
            contentType: _n.Json,
            headers: D(this, ra, "f") ? {
                "api-key": D(this, ra, "f"),
                "tag-id": D(this, ra, "f")
            } : {},
            baseURL: D(this, Tp, "f")
        })
    })
}, "Sd");
var bE = class bE {
    constructor() {
        let {
            resourceAttributes: e = {}
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        fT.add(this), vd.set(this, void 0), ge(this, vd, e, "f")
    }
    setResourceAttributes(e) {
        ge(this, vd, e != null ? e : {}, "f")
    }
    format(e) {
        return this.formatAll([e])
    }
    formatAll(e) {
        let t = Object.assign({
                [ai.AccessType]: 3
            }, D(this, vd, "f")),
            r = gp(t);
        return function(i, o) {
            return {
                resourceSpans: [{
                    resource: {
                        attributes: o
                    },
                    scopeSpans: [{
                        scope: {
                            name: "@outsystems/logger-js",
                            version: "3.1.0"
                        },
                        spans: i
                    }]
                }]
            }
        }(e.map(i => {
            let o = Object.assign({
                    [ai.Visibility]: Pp[Oe.External]
                }, D(this, fT, "m", uN).call(this, i.attributes)),
                s = BT(o),
                a = gp(s);
            return Object.assign({
                traceId: i.traceId,
                spanId: i.spanId,
                parentSpanId: i.parentSpanId,
                name: i.name,
                startTimeUnixNano: i.startTimeUnixNano,
                endTimeUnixNano: i.endTimeUnixNano,
                status: {
                    code: i.status !== 0 ? i.status : 1
                },
                attributes: a
            }, i.kind ? {
                kind: i.kind
            } : {})
        }), r)
    }
};
u(bE, "Nd");
var pT = bE;
vd = new WeakMap, fT = new WeakSet, uN = u(function(n) {
    return Object.entries(n).reduce((e, t) => {
        let [r, i] = t;
        return Z6.includes(r) || (e[r] = i), e
    }, {})
}, "Ad");
var wE = class wE {
    constructor(e) {
        let {
            transportId: t,
            resourceAttributes: r,
            enabled: i = !0,
            tracesEndpoint: o = "/v2/traces",
            tracesCollectorBaseUrl: s,
            tagId: a,
            enableWriteBuffer: l = !0,
            httpClient: d = new io({
                baseUrl: s,
                headers: a ? {
                    "api-key": a,
                    "tag-id": a
                } : {}
            }),
            formatter: c = new pT({
                resourceAttributes: r
            })
        } = e;
        Vg.add(this), vu.set(this, void 0), ia.set(this, void 0), Ep.set(this, void 0), this.transportId = t, ge(this, vu, i, "f"), this.tracesEndpoint = o, this.enableWriteBuffer = l, this.httpClient = d, this.formatter = c, ge(this, ia, a, "f"), ge(this, Ep, s, "f")
    }
    getTransportId() {
        return this.transportId
    }
    isTracingEnabled() {
        return D(this, vu, "f")
    }
    enableTracing() {
        ge(this, vu, !0, "f")
    }
    disableTracing() {
        ge(this, vu, !1, "f")
    }
    requiresConnectivity() {
        return !0
    }
    hasWriteBuffer() {
        return this.enableWriteBuffer
    }
    setTagId(e) {
        ge(this, ia, e, "f")
    }
    setResourceAttributes(e) {
        var t, r;
        (r = (t = this.formatter).setResourceAttributes) === null || r === void 0 || r.call(t, e)
    }
    write(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, Vg, "m", gT).call(this, this.formatter.format(e))
        })
    }
    writeAll(e) {
        return se(this, void 0, void 0, function*() {
            return D(this, Vg, "m", gT).call(this, this.formatter.formatAll(e))
        })
    }
};
u(wE, "xd");
var mT = wE,
    Xo, Hg, yu, yd, zg, Qs, Wg, qg, Gg, Kg, Jg, bu, wu, ir, Tu, Eu, Zg, Yg, Xg, Qg, ep, bd, _p;
vu = new WeakMap, ia = new WeakMap, Ep = new WeakMap, Vg = new WeakSet, gT = u(function(n) {
    return se(this, void 0, void 0, function*() {
        return this.httpClient.post({
            url: this.tracesEndpoint,
            payload: n,
            contentType: _n.Json,
            headers: D(this, ia, "f") ? {
                "api-key": D(this, ia, "f"),
                "tag-id": D(this, ia, "f")
            } : {},
            baseURL: D(this, Ep, "f")
        })
    })
}, "Cd");
var TE = class TE {
    constructor() {
        let {
            sw: e,
            container: t = navigator.serviceWorker
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        var r;
        if (Xo.set(this, void 0), Hg.set(this, void 0), yu.set(this, []), yd.set(this, !1), !t) throw new Error("No service worker container available");
        ge(this, Xo, (r = e != null ? e : t == null ? void 0 : t.controller) !== null && r !== void 0 ? r : void 0, "f"), ge(this, Hg, t, "f"), this.waitForSW()
    }
    get pendingMessages() {
        return D(this, yu, "f")
    }
    isServiceWorkerAvailable() {
        return !!D(this, Xo, "f") && D(this, Xo, "f").state === "activated"
    }
    send(e, t) {
        this.sendMessage({
            kind: e,
            data: t
        })
    }
    sendMessage(e, t) {
        var r;
        this.isServiceWorkerAvailable() ? (r = D(this, Xo, "f")) === null || r === void 0 || r.postMessage(e, t) : (D(this, yu, "f").push({
            message: e,
            options: t
        }), this.waitForSW())
    }
    waitForSW() {
        return se(this, void 0, void 0, function*() {
            if (this.isServiceWorkerAvailable() || D(this, yd, "f")) return;
            ge(this, yd, !0, "f");
            let {
                active: e
            } = yield D(this, Hg, "f").ready;
            ge(this, Xo, e != null ? e : void 0, "f"), ge(this, yd, !1, "f"), this.flushMessages()
        })
    }
    flushMessages() {
        var e;
        if (this.isServiceWorkerAvailable()) {
            for (let {
                    message: t,
                    options: r
                } of D(this, yu, "f"))(e = D(this, Xo, "f")) === null || e === void 0 || e.postMessage(t, r);
            ge(this, yu, [], "f")
        } else this.waitForSW()
    }
};
u(TE, "ig");
var vT = TE;
Xo = new WeakMap, Hg = new WeakMap, yu = new WeakMap, yd = new WeakMap;
var EE = class EE {
    constructor(e) {
        let {
            transportId: t,
            tagId: r,
            collectorBaseUrl: i,
            databaseSuffix: o,
            swTransport: s = new vT,
            enabled: a = !0,
            attributes: l = {},
            aggregateSpans: d = !1
        } = e;
        zg.set(this, void 0), Qs.set(this, void 0), Wg.set(this, void 0), qg.set(this, void 0), Gg.set(this, void 0), Kg.set(this, void 0), Jg.set(this, void 0), bu.set(this, void 0), ge(this, zg, t, "f"), ge(this, Qs, s, "f"), ge(this, bu, a, "f"), ge(this, Wg, l, "f"), ge(this, qg, r, "f"), ge(this, Gg, i, "f"), ge(this, Kg, o, "f"), ge(this, Jg, d, "f")
    }
    getTransportId() {
        return D(this, zg, "f")
    }
    requiresConnectivity() {
        return !1
    }
    isTracingEnabled() {
        return D(this, bu, "f")
    }
    enableTracing() {
        ge(this, bu, !0, "f")
    }
    disableTracing() {
        ge(this, bu, !1, "f")
    }
    hasWriteBuffer() {
        return !1
    }
    write(e) {
        return D(this, Qs, "f").send("Span", e), Promise.resolve()
    }
    writeAll(e) {
        for (let t of e) D(this, Qs, "f").send("Span", t);
        return Promise.resolve()
    }
    flush() {
        return D(this, Qs, "f").send("Flush", {
            kind: "Spans"
        }), Promise.resolve()
    }
    initialize() {
        D(this, Qs, "f").send("SpansInitialization", {
            databaseSuffix: D(this, Kg, "f"),
            resourceAttributes: D(this, Wg, "f"),
            collectorBaseUrl: D(this, Gg, "f"),
            apiKey: D(this, qg, "f"),
            aggregateSpans: D(this, Jg, "f")
        })
    }
};
u(EE, "og");
var yT = EE;
zg = new WeakMap, Qs = new WeakMap, Wg = new WeakMap, qg = new WeakMap, Gg = new WeakMap, Kg = new WeakMap, Jg = new WeakMap, bu = new WeakMap;
var _E = class _E {
    constructor(e) {
        let {
            databaseNameSuffix: t,
            logTransports: r,
            traceTransports: i,
            baseLogAttributes: o = {},
            baseSpanAttributes: s = {},
            staticSpanAttributes: a = [],
            isOnline: l,
            aggregateSpans: d,
            transportManager: c = new Ad({
                databaseNameSuffix: t,
                logTransports: r,
                traceTransports: i,
                isOnline: l,
                aggregateSpans: d
            }),
            tracerInstance: h,
            loggerInstance: f
        } = e;
        wu.add(this), ir.set(this, void 0), Tu.set(this, void 0), Eu.set(this, void 0), Zg.set(this, void 0), Yg.set(this, void 0), Xg.set(this, void 0), Qg.set(this, void 0), ep.set(this, void 0), ge(this, ir, c, "f"), ge(this, Tu, h, "f"), ge(this, Eu, f, "f"), ge(this, Zg, () => Oi.isEnabled(eo.WriteLogsOnConsoles), "f"), ge(this, Yg, o, "f"), ge(this, Xg, s, "f"), ge(this, Qg, a, "f"), ge(this, ep, t, "f")
    }
    init() {
        return se(this, void 0, void 0, function*() {
            yield this.getLogger(), this.getTracer()
        })
    }
    getLogger() {
        return se(this, void 0, void 0, function*() {
            return D(this, Eu, "f") || ge(this, Eu, yield Jw.build({
                transportManager: D(this, ir, "f"),
                baseAttributes: D(this, Yg, "f")
            }), "f"), D(this, Eu, "f")
        })
    }
    getTracer() {
        return D(this, Tu, "f") || ge(this, Tu, new sT({
            transportManager: D(this, ir, "f"),
            baseAttributes: D(this, Xg, "f"),
            staticAttributes: D(this, Qg, "f")
        }), "f"), D(this, Tu, "f")
    }
    useNativeLoggerTransport(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                plugin: i,
                logTypeBaseline: o
            } = t;
            return function*() {
                (yield r.getLogger()).addTransport(new cT({
                    transportId: "native-logger-transport",
                    nativeLoggerV2: i,
                    logTypeBaseline: o
                }))
            }()
        })
    }
    useOpenTelemetryLoggerTransport(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                resourceAttributes: i,
                logTypeBaseline: o,
                collectorBaseUrl: s,
                tagId: a,
                httpClient: l
            } = t;
            return function*() {
                (yield r.getLogger()).addTransport(new hT({
                    transportId: "otel-logger-transport",
                    resourceAttributes: i,
                    logTypeBaseline: o,
                    logsCollectorBaseUrl: s,
                    tagId: a,
                    httpClient: l
                }))
            }()
        })
    }
    useConsoleLoggerTransport(e) {
        return se(this, void 0, void 0, function*() {
            (yield this.getLogger()).addTransport(new aT({
                transportId: "console-transport",
                logTypeBaseline: e,
                shouldWriteLogsOnConsoles: D(this, Zg, "f")
            }))
        })
    }
    useServiceWorkerTracerTransport(e) {
        let {
            resourceAttributes: t,
            enabled: r = !0,
            collectorBaseUrl: i,
            tagId: o,
            swTransport: s,
            aggregateSpans: a = !1
        } = e, l = this.getTracer(), d = new yT({
            transportId: "sw-tracer-transport",
            attributes: t,
            enabled: r,
            tagId: o,
            collectorBaseUrl: i,
            databaseSuffix: D(this, ep, "f"),
            swTransport: s,
            aggregateSpans: a
        });
        d.initialize(), l.addTransport(d)
    }
    useOpenTelemetryTracerTransport(e) {
        let {
            resourceAttributes: t,
            enabled: r = !0,
            collectorBaseUrl: i,
            tagId: o,
            httpClient: s
        } = e, a = this.getTracer(), l = new mT({
            transportId: "otel-tracer-transport",
            resourceAttributes: t,
            enabled: r,
            tagId: o,
            tracesCollectorBaseUrl: i,
            httpClient: s
        });
        a.addTransport(l)
    }
    useConsoleTracerTransport() {
        return se(this, void 0, void 0, function*() {
            throw new Error("Not implemented")
        })
    }
    useFetchInstrumentation() {
        this.getTracer().enableFetchInstrumentation()
    }
    setLogLevel(e) {
        D(this, ir, "f").setAllLogTypeBaselines(e)
    }
    setTracerStatus(e) {
        this.getTracer().setStatus(e)
    }
    setTagId(e) {
        D(this, ir, "f").setTagId(e)
    }
    setAggregateSpansStatus(e) {
        D(this, ir, "f").setAggregateSpansStatus(e)
    }
    setResourceAttributes(e) {
        D(this, ir, "f").setResourceAttributes(e)
    }
    setSchedulerTimerInterval(e) {
        D(this, ir, "f").setSchedulerTimerInterval(e)
    }
    flushInstrumentationData() {
        return se(this, void 0, void 0, function*() {
            yield Promise.all([D(this, ir, "f").flushLogs(), D(this, ir, "f").flushSpans()])
        })
    }
    logError(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                category: i,
                message: o,
                error: s,
                errorCode: a,
                visibility: l,
                failSpan: d = !0,
                attributes: c
            } = t;
            return function*() {
                if (d) {
                    let h = r.getTracer().getActiveSpan();
                    h == null || h.fail()
                }(yield r.getLogger()).error({
                    category: i,
                    message: o,
                    error: s,
                    errorCode: a,
                    visibility: l,
                    span: D(r, wu, "m", bd).call(r),
                    attributes: c
                })
            }()
        })
    }
    logWarning(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                category: i,
                message: o,
                visibility: s,
                attributes: a
            } = t;
            return function*() {
                (yield r.getLogger()).warning({
                    category: i,
                    message: o,
                    visibility: s,
                    span: D(r, wu, "m", bd).call(r),
                    attributes: a
                })
            }()
        })
    }
    logInfo(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                category: i,
                message: o,
                visibility: s,
                attributes: a
            } = t;
            return function*() {
                (yield r.getLogger()).info({
                    category: i,
                    message: o,
                    visibility: s,
                    span: D(r, wu, "m", bd).call(r),
                    attributes: a
                })
            }()
        })
    }
    logDebug(e) {
        return se(this, arguments, void 0, function(t) {
            var r = this;
            let {
                category: i,
                message: o,
                visibility: s,
                attributes: a
            } = t;
            return function*() {
                (yield r.getLogger()).debug({
                    category: i,
                    message: o,
                    visibility: s,
                    span: D(r, wu, "m", bd).call(r),
                    attributes: a
                })
            }()
        })
    }
    log(e) {
        return se(this, void 0, void 0, function*() {
            yield(yield this.getLogger()).log(e)
        })
    }
    span(e) {
        return se(this, void 0, void 0, function*() {
            yield this.getTracer().span(e)
        })
    }
    flushLogs() {
        return se(this, void 0, void 0, function*() {
            yield D(this, ir, "f").flushLogs()
        })
    }
    flushSpans() {
        return se(this, void 0, void 0, function*() {
            yield D(this, ir, "f").flushSpans()
        })
    }
    startSpan(e, t, r, i) {
        return this.getTracer().startSpan(e, t, r, i)
    }
    startActiveSpan(e, t, r, i, o) {
        return this.getTracer().startActiveSpan(e, t, r, i, o)
    }
    getActiveSpan() {
        return this.getTracer().getActiveSpan()
    }
};
u(_E, "sg");
var Sp = _E;
ir = new WeakMap, Tu = new WeakMap, Eu = new WeakMap, Zg = new WeakMap, Yg = new WeakMap, Xg = new WeakMap, Qg = new WeakMap, ep = new WeakMap, wu = new WeakSet, bd = u(function() {
        let n = this.getTracer().getActiveSpan();
        return n ? iN(n) : void 0
    }, "rg"),
    function(n) {
        n[n.Internal = 0] = "Internal", n[n.Client = 2] = "Client"
    }(_p || (_p = {}));
var zE = u(function(n, e) {
    return zE = Object.setPrototypeOf || {
        __proto__: []
    }
    instanceof Array && function(t, r) {
        t.__proto__ = r
    } || function(t, r) {
        for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i])
    }, zE(n, e)
}, "i");

function Cm(n, e) {
    if (typeof e != "function" && e !== null) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");

    function t() {
        this.constructor = n
    }
    u(t, "n"), zE(n, e), n.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t)
}
u(Cm, "o");
var un = u(function() {
    return un = Object.assign || function(n) {
        for (var e, t = 1, r = arguments.length; t < r; t++)
            for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
        return n
    }, un.apply(this, arguments)
}, "s");

function nL(n, e) {
    var t = {};
    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && e.indexOf(r) < 0 && (t[r] = n[r]);
    if (n != null && typeof Object.getOwnPropertySymbols == "function") {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(n); i < r.length; i++) e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(n, r[i]) && (t[r[i]] = n[r[i]])
    }
    return t
}
u(nL, "a");

function rL(n, e, t, r) {
    var i, o = arguments.length,
        s = o < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, t) : r;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function") s = Reflect.decorate(n, e, t, r);
    else
        for (var a = n.length - 1; a >= 0; a--)(i = n[a]) && (s = (o < 3 ? i(s) : o > 3 ? i(e, t, s) : i(e, t)) || s);
    return o > 3 && s && Object.defineProperty(e, t, s), s
}
u(rL, "u");

function iL(n, e) {
    return function(t, r) {
        e(t, r, n)
    }
}
u(iL, "c");

function oL(n, e) {
    if (typeof Reflect == "object" && typeof Reflect.metadata == "function") return Reflect.metadata(n, e)
}
u(oL, "l");

function Ae(n, e, t, r) {
    return new(t || (t = Promise))(function(i, o) {
        function s(d) {
            try {
                l(r.next(d))
            } catch (c) {
                o(c)
            }
        }
        u(s, "s");

        function a(d) {
            try {
                l(r.throw(d))
            } catch (c) {
                o(c)
            }
        }
        u(a, "a");

        function l(d) {
            var c;
            d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                h(c)
            })).then(s, a)
        }
        u(l, "u"), l((r = r.apply(n, e || [])).next())
    })
}
u(Ae, "h");

function st(n, e) {
    var t, r, i, o, s = {
        label: 0,
        sent: u(function() {
            if (1 & i[0]) throw i[1];
            return i[1]
        }, "sent"),
        trys: [],
        ops: []
    };
    return o = {
        next: a(0),
        throw: a(1),
        return: a(2)
    }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
        return this
    }), o;

    function a(l) {
        return function(d) {
            return function(c) {
                if (t) throw new TypeError("Generator is already executing.");
                for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                    if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                    switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                        case 0:
                        case 1:
                            i = c;
                            break;
                        case 4:
                            return s.label++, {
                                value: c[1],
                                done: !1
                            };
                        case 5:
                            s.label++, r = c[1], c = [0];
                            continue;
                        case 7:
                            c = s.ops.pop(), s.trys.pop();
                            continue;
                        default:
                            if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                s = 0;
                                continue
                            }
                            if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                s.label = c[1];
                                break
                            }
                            if (c[0] === 6 && s.label < i[1]) {
                                s.label = i[1], i = c;
                                break
                            }
                            if (i && s.label < i[2]) {
                                s.label = i[2], s.ops.push(c);
                                break
                            }
                            i[2] && s.ops.pop(), s.trys.pop();
                            continue
                    }
                    c = e.call(n, s)
                } catch (h) {
                    c = [6, h], r = 0
                } finally {
                    t = i = 0
                }
                if (5 & c[0]) throw c[1];
                return {
                    value: c[0] ? c[1] : void 0,
                    done: !0
                }
            }([l, d])
        }
    }
}
u(st, "f");
var Rm = Object.create ? function(n, e, t, r) {
    r === void 0 && (r = t);
    var i = Object.getOwnPropertyDescriptor(e, t);
    i && !("get" in i ? !e.__esModule : i.writable || i.configurable) || (i = {
        enumerable: !0,
        get: u(function() {
            return e[t]
        }, "get")
    }), Object.defineProperty(n, r, i)
} : function(n, e, t, r) {
    r === void 0 && (r = t), n[r] = e[t]
};

function sL(n, e) {
    for (var t in n) t === "default" || Object.prototype.hasOwnProperty.call(e, t) || Rm(e, n, t)
}
u(sL, "p");

function A_(n) {
    var e = typeof Symbol == "function" && Symbol.iterator,
        t = e && n[e],
        r = 0;
    if (t) return t.call(n);
    if (n && typeof n.length == "number") return {
        next: u(function() {
            return n && r >= n.length && (n = void 0), {
                value: n && n[r++],
                done: !n
            }
        }, "next")
    };
    throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
u(A_, "g");

function Ur(n, e) {
    var t = typeof Symbol == "function" && n[Symbol.iterator];
    if (!t) return n;
    var r, i, o = t.call(n),
        s = [];
    try {
        for (;
            (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
    } catch (a) {
        i = {
            error: a
        }
    } finally {
        try {
            r && !r.done && (t = o.return) && t.call(o)
        } finally {
            if (i) throw i.error
        }
    }
    return s
}
u(Ur, "y");

function aL() {
    for (var n = [], e = 0; e < arguments.length; e++) n = n.concat(Ur(arguments[e]));
    return n
}
u(aL, "v");

function uL() {
    for (var n = 0, e = 0, t = arguments.length; e < t; e++) n += arguments[e].length;
    var r = Array(n),
        i = 0;
    for (e = 0; e < t; e++)
        for (var o = arguments[e], s = 0, a = o.length; s < a; s++, i++) r[i] = o[s];
    return r
}
u(uL, "m");

function cL(n, e, t) {
    if (t || arguments.length === 2)
        for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
    return n.concat(r || Array.prototype.slice.call(e))
}
u(cL, "w");

function nc(n) {
    return this instanceof nc ? (this.v = n, this) : new nc(n)
}
u(nc, "b");

function lL(n, e, t) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var r, i = t.apply(n, e || []),
        o = [];
    return r = {}, s("next"), s("throw"), s("return", function(h) {
        return function(f) {
            return Promise.resolve(f).then(h, d)
        }
    }), r[Symbol.asyncIterator] = function() {
        return this
    }, r;

    function s(h, f) {
        i[h] && (r[h] = function(g) {
            return new Promise(function(p, y) {
                o.push([h, g, p, y]) > 1 || a(h, g)
            })
        }, f && (r[h] = f(r[h])))
    }

    function a(h, f) {
        try {
            (function(g) {
                g.value instanceof nc ? Promise.resolve(g.value.v).then(l, d) : c(o[0][2], g)
            })(i[h](f))
        } catch (g) {
            c(o[0][3], g)
        }
    }

    function l(h) {
        a("next", h)
    }

    function d(h) {
        a("throw", h)
    }

    function c(h, f) {
        h(f), o.shift(), o.length && a(o[0][0], o[0][1])
    }
}
u(lL, "_");

function dL(n) {
    var e, t;
    return e = {}, r("next"), r("throw", function(i) {
        throw i
    }), r("return"), e[Symbol.iterator] = function() {
        return this
    }, e;

    function r(i, o) {
        e[i] = n[i] ? function(s) {
            return (t = !t) ? {
                value: nc(n[i](s)),
                done: !1
            } : o ? o(s) : s
        } : o
    }
}
u(dL, "S");

function hL(n) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var e, t = n[Symbol.asyncIterator];
    return t ? t.call(n) : (n = A_(n), e = {}, r("next"), r("throw"), r("return"), e[Symbol.asyncIterator] = function() {
        return this
    }, e);

    function r(i) {
        e[i] = n[i] && function(o) {
            return new Promise(function(s, a) {
                (function(l, d, c, h) {
                    Promise.resolve(h).then(function(f) {
                        l({
                            value: f,
                            done: c
                        })
                    }, d)
                })(s, a, (o = n[i](o)).done, o.value)
            })
        }
    }
}
u(hL, "A");

function fL(n, e) {
    return Object.defineProperty ? Object.defineProperty(n, "raw", {
        value: e
    }) : n.raw = e, n
}
u(fL, "I");
var e5 = Object.create ? function(n, e) {
    Object.defineProperty(n, "default", {
        enumerable: !0,
        value: e
    })
} : function(n, e) {
    n.default = e
};

function gL(n) {
    if (n && n.__esModule) return n;
    var e = {};
    if (n != null)
        for (var t in n) t !== "default" && Object.prototype.hasOwnProperty.call(n, t) && Rm(e, n, t);
    return e5(e, n), e
}
u(gL, "E");

function pL(n) {
    return n && n.__esModule ? n : {
        default: n
    }
}
u(pL, "T");

function $(n, e, t, r) {
    if (t === "a" && !r) throw new TypeError("Private accessor was defined without a getter");
    if (typeof e == "function" ? n !== e || !r : !e.has(n)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return t === "m" ? r : t === "a" ? r.call(n) : r ? r.value : e.get(n)
}
u($, "U");

function Ce(n, e, t, r, i) {
    if (r === "m") throw new TypeError("Private method is not writable");
    if (r === "a" && !i) throw new TypeError("Private accessor was defined without a setter");
    if (typeof e == "function" ? n !== e || !i : !e.has(n)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return r === "a" ? i.call(n, t) : i ? i.value = t : e.set(n, t), t
}
u(Ce, "k");

function mL(n, e) {
    if (e === null || typeof e != "object" && typeof e != "function") throw new TypeError("Cannot use 'in' operator on non-object");
    return typeof n == "function" ? e === n : n.has(e)
}
u(mL, "P");

function vL(n, e, t) {
    if (e != null) {
        if (typeof e != "object" && typeof e != "function") throw new TypeError("Object expected.");
        var r, i;
        if (t) {
            if (!Symbol.asyncDispose) throw new TypeError("Symbol.asyncDispose is not defined.");
            r = e[Symbol.asyncDispose]
        }
        if (r === void 0) {
            if (!Symbol.dispose) throw new TypeError("Symbol.dispose is not defined.");
            r = e[Symbol.dispose], t && (i = r)
        }
        if (typeof r != "function") throw new TypeError("Object not disposable.");
        i && (r = u(function() {
            try {
                i.call(this)
            } catch (o) {
                return Promise.reject(o)
            }
        }, "r")), n.stack.push({
            value: e,
            dispose: r,
            async: t
        })
    } else t && n.stack.push({
        async: !0
    });
    return e
}
u(vL, "O");
var t5 = typeof SuppressedError == "function" ? SuppressedError : function(n, e, t) {
    var r = new Error(t);
    return r.name = "SuppressedError", r.error = n, r.suppressed = e, r
};

function yL(n) {
    function e(t) {
        n.error = n.hasError ? new t5(t, n.error, "An error was suppressed during disposal.") : t, n.hasError = !0
    }
    return u(e, "t"), u(function t() {
        for (; n.stack.length;) {
            var r = n.stack.pop();
            try {
                var i = r.dispose && r.dispose.call(r.value);
                if (r.async) return Promise.resolve(i).then(t, function(o) {
                    return e(o), t()
                })
            } catch (o) {
                e(o)
            }
        }
        if (n.hasError) throw n.error
    }, "n")()
}
u(yL, "D");
var cm, ft, cN, n5 = {
        __extends: Cm,
        __assign: un,
        __rest: nL,
        __decorate: rL,
        __param: iL,
        __metadata: oL,
        __awaiter: Ae,
        __generator: st,
        __createBinding: Rm,
        __exportStar: sL,
        __values: A_,
        __read: Ur,
        __spread: aL,
        __spreadArrays: uL,
        __spreadArray: cL,
        __await: nc,
        __asyncGenerator: lL,
        __asyncDelegator: dL,
        __asyncValues: hL,
        __makeTemplateObject: fL,
        __importStar: gL,
        __importDefault: pL,
        __classPrivateFieldGet: $,
        __classPrivateFieldSet: Ce,
        __classPrivateFieldIn: mL,
        __addDisposableResource: vL,
        __disposeResources: yL
    },
    r5 = Object.freeze({
        __proto__: null,
        __addDisposableResource: vL,
        get __assign() {
            return un
        },
        __asyncDelegator: dL,
        __asyncGenerator: lL,
        __asyncValues: hL,
        __await: nc,
        __awaiter: Ae,
        __classPrivateFieldGet: $,
        __classPrivateFieldIn: mL,
        __classPrivateFieldSet: Ce,
        __createBinding: Rm,
        __decorate: rL,
        __disposeResources: yL,
        __esDecorate: u(function(n, e, t, r, i, o) {
            function s(E) {
                if (E !== void 0 && typeof E != "function") throw new TypeError("Function expected");
                return E
            }
            u(s, "s");
            for (var a, l = r.kind, d = l === "getter" ? "get" : l === "setter" ? "set" : "value", c = !e && n ? r.static ? n : n.prototype : null, h = e || (c ? Object.getOwnPropertyDescriptor(c, r.name) : {}), f = !1, g = t.length - 1; g >= 0; g--) {
                var p = {};
                for (var y in r) p[y] = y === "access" ? {} : r[y];
                for (var y in r.access) p.access[y] = r.access[y];
                p.addInitializer = function(E) {
                    if (f) throw new TypeError("Cannot add initializers after decoration has completed");
                    o.push(s(E || null))
                };
                var b = (0, t[g])(l === "accessor" ? {
                    get: h.get,
                    set: h.set
                } : h[d], p);
                if (l === "accessor") {
                    if (b === void 0) continue;
                    if (b === null || typeof b != "object") throw new TypeError("Object expected");
                    (a = s(b.get)) && (h.get = a), (a = s(b.set)) && (h.set = a), (a = s(b.init)) && i.unshift(a)
                } else(a = s(b)) && (l === "field" ? i.unshift(a) : h[d] = a)
            }
            c && Object.defineProperty(c, r.name, h), f = !0
        }, "__esDecorate"),
        __exportStar: sL,
        __extends: Cm,
        __generator: st,
        __importDefault: pL,
        __importStar: gL,
        __makeTemplateObject: fL,
        __metadata: oL,
        __param: iL,
        __propKey: u(function(n) {
            return typeof n == "symbol" ? n : "".concat(n)
        }, "__propKey"),
        __read: Ur,
        __rest: nL,
        __runInitializers: u(function(n, e, t) {
            for (var r = arguments.length > 2, i = 0; i < e.length; i++) t = r ? e[i].call(n, t) : e[i].call(n);
            return r ? t : void 0
        }, "__runInitializers"),
        __setFunctionName: u(function(n, e, t) {
            return typeof e == "symbol" && (e = e.description ? "[".concat(e.description, "]") : ""), Object.defineProperty(n, "name", {
                configurable: !0,
                value: t ? "".concat(t, " ", e) : e
            })
        }, "__setFunctionName"),
        __spread: aL,
        __spreadArray: cL,
        __spreadArrays: uL,
        __values: A_,
        default: n5
    });

function SE(n) {
    return n && !!["provider"].find(function(e) {
        return n.hasOwnProperty(e)
    })
}
u(SE, "L");

function fa(n) {
    return n.redirectSignIn !== void 0
}
u(fa, "B");
(function(n) {
    n.Cognito = "COGNITO", n.Google = "Google", n.Facebook = "Facebook", n.Amazon = "LoginWithAmazon", n.Apple = "SignInWithApple"
})(cm || (cm = {})),
function(n) {
    n.NoConfig = "noConfig", n.MissingAuthConfig = "missingAuthConfig", n.EmptyUsername = "emptyUsername", n.InvalidUsername = "invalidUsername", n.EmptyPassword = "emptyPassword", n.EmptyCode = "emptyCode", n.SignUpError = "signUpError", n.NoMFA = "noMFA", n.InvalidMFA = "invalidMFA", n.EmptyChallengeResponse = "emptyChallengeResponse", n.NoUserSession = "noUserSession", n.Default = "default", n.DeviceConfig = "deviceConfig", n.NetworkError = "networkError", n.AutoSignInError = "autoSignInError"
}(ft || (ft = {})),
function(n) {
    n.API_KEY = "API_KEY", n.AWS_IAM = "AWS_IAM", n.OPENID_CONNECT = "OPENID_CONNECT", n.AMAZON_COGNITO_USER_POOLS = "AMAZON_COGNITO_USER_POOLS", n.AWS_LAMBDA = "AWS_LAMBDA"
}(cN || (cN = {}));
var ui, i5 = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    xu = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    Pu = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    lN = {
        VERBOSE: 1,
        DEBUG: 2,
        INFO: 3,
        WARN: 4,
        ERROR: 5
    };
(function(n) {
    n.DEBUG = "DEBUG", n.ERROR = "ERROR", n.INFO = "INFO", n.WARN = "WARN", n.VERBOSE = "VERBOSE"
})(ui || (ui = {}));
var Gt, WE, dN, hN, qE, fN, gN, pN, mN, vN, yN, bN, wN, di = function() {
        function n(e, t) {
            t === void 0 && (t = ui.WARN), this.name = e, this.level = t, this._pluggables = []
        }
        return u(n, "e"), n.prototype._padding = function(e) {
            return e < 10 ? "0" + e : "" + e
        }, n.prototype._ts = function() {
            var e = new Date;
            return [this._padding(e.getMinutes()), this._padding(e.getSeconds())].join(":") + "." + e.getMilliseconds()
        }, n.prototype.configure = function(e) {
            return e ? (this._config = e, this._config) : this._config
        }, n.prototype._log = function(e) {
            for (var t, r, i = [], o = 1; o < arguments.length; o++) i[o - 1] = arguments[o];
            var s = this.level;
            if (n.LOG_LEVEL && (s = n.LOG_LEVEL), typeof window != "undefined" && window.LOG_LEVEL && (s = window.LOG_LEVEL), lN[e] >= lN[s]) {
                var a = console.log.bind(console);
                e === ui.ERROR && console.error && (a = console.error.bind(console)), e === ui.WARN && console.warn && (a = console.warn.bind(console));
                var l = "[".concat(e, "] ").concat(this._ts(), " ").concat(this.name),
                    d = "";
                if (i.length === 1 && typeof i[0] == "string") a(d = "".concat(l, " - ").concat(i[0]));
                else if (i.length === 1) d = "".concat(l, " ").concat(i[0]), a(l, i[0]);
                else if (typeof i[0] == "string") {
                    var c = i.slice(1);
                    c.length === 1 && (c = c[0]), d = "".concat(l, " - ").concat(i[0], " ").concat(c), a("".concat(l, " - ").concat(i[0]), c)
                } else d = "".concat(l, " ").concat(i), a(l, i);
                try {
                    for (var h = i5(this._pluggables), f = h.next(); !f.done; f = h.next()) {
                        var g = f.value,
                            p = {
                                message: d,
                                timestamp: Date.now()
                            };
                        g.pushLogs([p])
                    }
                } catch (y) {
                    t = {
                        error: y
                    }
                } finally {
                    try {
                        f && !f.done && (r = h.return) && r.call(h)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }
        }, n.prototype.log = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.INFO], xu(e), !1))
        }, n.prototype.info = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.INFO], xu(e), !1))
        }, n.prototype.warn = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.WARN], xu(e), !1))
        }, n.prototype.error = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.ERROR], xu(e), !1))
        }, n.prototype.debug = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.DEBUG], xu(e), !1))
        }, n.prototype.verbose = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this._log.apply(this, Pu([ui.VERBOSE], xu(e), !1))
        }, n.prototype.addPluggable = function(e) {
            e && e.getCategoryName() === "Logging" && (this._pluggables.push(e), e.configure(this._config))
        }, n.prototype.listPluggables = function() {
            return this._pluggables
        }, n.LOG_LEVEL = null, n
    }(),
    o5 = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    IE = new di("Amplify"),
    oh = new(function() {
        function n() {
            this._components = [], this._config = {}, this._modules = {}, this.Auth = null, this.Analytics = null, this.API = null, this.Credentials = null, this.Storage = null, this.I18n = null, this.Cache = null, this.PubSub = null, this.Interactions = null, this.Pushnotification = null, this.UI = null, this.XR = null, this.Predictions = null, this.DataStore = null, this.Geo = null, this.Notifications = null, this.Logger = di, this.ServiceWorker = null
        }
        return u(n, "e"), n.prototype.register = function(e) {
            IE.debug("component registered in amplify", e), this._components.push(e), typeof e.getModuleName == "function" ? (this._modules[e.getModuleName()] = e, this[e.getModuleName()] = e) : IE.debug("no getModuleName method for component", e), e.configure(this._config)
        }, n.prototype.configure = function(e) {
            var t = this;
            return e ? (this._config = Object.assign(this._config, e), IE.debug("amplify config", this._config), Object.entries(this._modules).forEach(function(r) {
                var i = o5(r, 2);
                i[0];
                var o = i[1];
                Object.keys(o).forEach(function(s) {
                    t._modules[s] && (o[s] = t._modules[s])
                })
            }), this._components.map(function(r) {
                r.configure(t._config)
            }), this._config) : this._config
        }, n.prototype.addPluggable = function(e) {
            e && e.getCategory && typeof e.getCategory == "function" && this._components.map(function(t) {
                t.addPluggable && typeof t.addPluggable == "function" && t.addPluggable(e)
            })
        }, n
    }());
(function(n) {
    n.WebUnknown = "0", n.React = "1", n.NextJs = "2", n.Angular = "3", n.VueJs = "4", n.Nuxt = "5", n.Svelte = "6", n.ServerSideUnknown = "100", n.ReactSSR = "101", n.NextJsSSR = "102", n.AngularSSR = "103", n.VueJsSSR = "104", n.NuxtSSR = "105", n.SvelteSSR = "106", n.ReactNative = "201", n.Expo = "202"
})(Gt || (Gt = {})),
function(n) {
    n.API = "api", n.Auth = "auth", n.Analytics = "analytics", n.DataStore = "datastore", n.Geo = "geo", n.InAppMessaging = "inappmessaging", n.Interactions = "interactions", n.Predictions = "predictions", n.PubSub = "pubsub", n.PushNotification = "pushnotification", n.Storage = "storage"
}(WE || (WE = {})),
function(n) {
    n.Record = "1", n.UpdateEndpoint = "2"
}(dN || (dN = {})),
function(n) {
    n.GraphQl = "1", n.Get = "2", n.Post = "3", n.Put = "4", n.Patch = "5", n.Del = "6", n.Head = "7"
}(hN || (hN = {})),
function(n) {
    n.FederatedSignIn = "30"
}(qE || (qE = {})),
function(n) {
    n.Subscribe = "1", n.GraphQl = "2"
}(fN || (fN = {})),
function(n) {
    n.None = "0"
}(gN || (gN = {})),
function(n) {
    n.None = "0"
}(pN || (pN = {})),
function(n) {
    n.None = "0"
}(mN || (mN = {})),
function(n) {
    n.Convert = "1", n.Identify = "2", n.Interpret = "3"
}(vN || (vN = {})),
function(n) {
    n.Subscribe = "1"
}(yN || (yN = {})),
function(n) {
    n.None = "0"
}(bN || (bN = {})),
function(n) {
    n.Put = "1", n.Get = "2", n.List = "3", n.Copy = "4", n.Remove = "5", n.GetProperties = "6"
}(wN || (wN = {}));
var bL = "5.3.11",
    Mp = u(function() {
        return typeof global != "undefined"
    }, "le"),
    ku = u(function() {
        return typeof window != "undefined"
    }, "he"),
    TN = u(function() {
        return typeof document != "undefined"
    }, "fe"),
    AE = u(function() {
        return typeof process != "undefined"
    }, "de"),
    kd = u(function(n, e) {
        return !!Object.keys(n).find(function(t) {
            return t.startsWith(e)
        })
    }, "pe"),
    zd, s5 = [{
        platform: Gt.Expo,
        detectionMethod: u(function() {
            return Mp() && global.expo !== void 0
        }, "detectionMethod")
    }, {
        platform: Gt.ReactNative,
        detectionMethod: u(function() {
            return typeof navigator != "undefined" && navigator.product !== void 0 && navigator.product === "ReactNative"
        }, "detectionMethod")
    }, {
        platform: Gt.NextJs,
        detectionMethod: u(function() {
            return ku() && window.next && typeof window.next == "object"
        }, "detectionMethod")
    }, {
        platform: Gt.Nuxt,
        detectionMethod: u(function() {
            return ku() && (window.__NUXT__ !== void 0 || window.$nuxt !== void 0)
        }, "detectionMethod")
    }, {
        platform: Gt.Angular,
        detectionMethod: u(function() {
            var n = !!(TN() && document.querySelector("[ng-version]")),
                e = !!(ku() && window.ng !== void 0);
            return n || e
        }, "detectionMethod")
    }, {
        platform: Gt.React,
        detectionMethod: u(function() {
            var n = u(function(e) {
                return e.startsWith("_react") || e.startsWith("__react")
            }, "e");
            return TN() && Array.from(document.querySelectorAll("[id]")).some(function(e) {
                return Object.keys(e).find(n)
            })
        }, "detectionMethod")
    }, {
        platform: Gt.VueJs,
        detectionMethod: u(function() {
            return ku() && kd(window, "__VUE")
        }, "detectionMethod")
    }, {
        platform: Gt.Svelte,
        detectionMethod: u(function() {
            return ku() && kd(window, "__SVELTE")
        }, "detectionMethod")
    }, {
        platform: Gt.WebUnknown,
        detectionMethod: u(function() {
            return ku()
        }, "detectionMethod")
    }, {
        platform: Gt.NextJsSSR,
        detectionMethod: u(function() {
            return Mp() && (kd(global, "__next") || kd(global, "__NEXT"))
        }, "detectionMethod")
    }, {
        platform: Gt.NuxtSSR,
        detectionMethod: u(function() {
            return Mp() && global.__NUXT_PATHS__ !== void 0
        }, "detectionMethod")
    }, {
        platform: Gt.ReactSSR,
        detectionMethod: u(function() {
            return AE() && process.env !== void 0 && !!Object.keys(process.env).find(function(n) {
                return n.includes("react")
            })
        }, "detectionMethod")
    }, {
        platform: Gt.VueJsSSR,
        detectionMethod: u(function() {
            return Mp() && kd(global, "__VUE")
        }, "detectionMethod")
    }, {
        platform: Gt.AngularSSR,
        detectionMethod: u(function() {
            var n;
            return AE() && typeof process.env == "object" && ((n = process.env.npm_lifecycle_script) === null || n === void 0 ? void 0 : n.startsWith("ng ")) || !1
        }, "detectionMethod")
    }, {
        platform: Gt.SvelteSSR,
        detectionMethod: u(function() {
            return AE() && process.env !== void 0 && !!Object.keys(process.env).find(function(n) {
                return n.includes("svelte")
            })
        }, "detectionMethod")
    }],
    qp = [],
    lm = !1,
    C_ = u(function() {
        if (!zd) {
            if (zd = ((n = s5.find(function(e) {
                    return e.detectionMethod()
                })) === null || n === void 0 ? void 0 : n.platform) || Gt.ServerSideUnknown, lm)
                for (; qp.length;) qp.pop()();
            else qp.forEach(function(e) {
                return e()
            });
            EN(Gt.ServerSideUnknown, 10), EN(Gt.WebUnknown, 10)
        }
        var n;
        return zd
    }, "we"),
    wL = u(function(n) {
        lm || qp.push(n)
    }, "be");

function EN(n, e) {
    zd !== n || lm || setTimeout(function() {
        zd = void 0, lm = !0, setTimeout(C_, 1e3)
    }, e)
}
u(EN, "_e");
var a5 = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    TL = "aws-amplify",
    CE = new(function() {
        function n() {
            this.userAgent = "".concat(TL, "/").concat(bL)
        }
        return u(n, "e"), Object.defineProperty(n.prototype, "framework", {
            get: u(function() {
                return C_()
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(n.prototype, "isReactNative", {
            get: u(function() {
                return this.framework === Gt.ReactNative || this.framework === Gt.Expo
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.observeFrameworkChanges = function(e) {
            wL(e)
        }, n
    }()),
    R_ = u(function(n) {
        return function(e) {
            var t = e === void 0 ? {} : e,
                r = t.category,
                i = t.action;
            t.framework;
            var o = [
                [TL, bL]
            ];
            return r && o.push([r, i]), o.push(["framework", C_()]), o
        }(n).map(function(e) {
            var t = a5(e, 2),
                r = t[0],
                i = t[1];
            return "".concat(r, "/").concat(i)
        }).join(" ")
    }, "Ce"),
    Wd = function() {
        return Wd = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, Wd.apply(this, arguments)
    },
    RE = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    _N = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    yo = new di("Hub"),
    u5 = typeof Symbol != "undefined" && typeof Symbol.for == "function" ? Symbol.for("amplify_default") : "@@amplify_default",
    c5 = function() {
        function n(e) {
            this.listeners = [], this.patterns = [], this.protectedChannels = ["core", "auth", "api", "analytics", "interactions", "pubsub", "storage", "ui", "xr"], this.name = e
        }
        return u(n, "e"), n.prototype._remove = function(e, t) {
            if (e instanceof RegExp) {
                var r = this.patterns.find(function(o) {
                    return o.pattern.source === e.source
                });
                if (!r) return void yo.warn("No listeners for ".concat(e));
                this.patterns = _N([], RE(this.patterns.filter(function(o) {
                    return o !== r
                })), !1)
            } else {
                var i = this.listeners[e];
                if (!i) return void yo.warn("No listeners for ".concat(e));
                this.listeners[e] = _N([], RE(i.filter(function(o) {
                    return o.callback !== t
                })), !1)
            }
        }, n.prototype.remove = function(e, t) {
            this._remove(e, t)
        }, n.prototype.dispatch = function(e, t, r, i) {
            r === void 0 && (r = ""), this.protectedChannels.indexOf(e) > -1 && (i === u5 || yo.warn("WARNING: ".concat(e, " is protected and dispatching on it can have unintended consequences")));
            var o = {
                channel: e,
                payload: Wd({}, t),
                source: r,
                patternInfo: []
            };
            try {
                this._toListeners(o)
            } catch (s) {
                yo.error(s)
            }
        }, n.prototype.listen = function(e, t, r) {
            var i, o = this;
            if (r === void 0 && (r = "noname"), function(a) {
                    return a.onHubCapsule !== void 0
                }(t)) yo.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."), i = t.onHubCapsule.bind(t);
            else {
                if (typeof t != "function") throw new Error("No callback supplied to Hub");
                i = t
            }
            if (e instanceof RegExp) this.patterns.push({
                pattern: e,
                callback: i
            });
            else {
                var s = this.listeners[e];
                s || (s = [], this.listeners[e] = s), s.push({
                    name: r,
                    callback: i
                })
            }
            return function() {
                o._remove(e, i)
            }
        }, n.prototype._toListeners = function(e) {
            var t = e.channel,
                r = e.payload,
                i = this.listeners[t];
            if (i && i.forEach(function(s) {
                    yo.debug("Dispatching to ".concat(t, " with "), r);
                    try {
                        s.callback(e)
                    } catch (a) {
                        yo.error(a)
                    }
                }), this.patterns.length > 0) {
                if (!r.message) return void yo.warn("Cannot perform pattern matching without a message key");
                var o = r.message;
                this.patterns.forEach(function(s) {
                    var a = o.match(s.pattern);
                    if (a) {
                        var l = RE(a).slice(1),
                            d = Wd(Wd({}, e), {
                                patternInfo: l
                            });
                        try {
                            s.callback(d)
                        } catch (c) {
                            yo.error(c)
                        }
                    }
                })
            }
        }, n
    }(),
    Eo = new c5("__default__"),
    Ao = u(function() {
        return {
            isBrowser: typeof window != "undefined" && window.document !== void 0,
            isNode: typeof process != "undefined" && process.versions != null && process.versions.node != null
        }
    }, "De"),
    l5 = function() {
        var n = u(function(e, t) {
            return n = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(r, i) {
                r.__proto__ = i
            } || function(r, i) {
                for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o])
            }, n(e, t)
        }, "e");
        return function(e, t) {
            if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function r() {
                this.constructor = e
            }
            u(r, "r"), n(e, t), e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r)
        }
    }(),
    SN = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    OE = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    d5 = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    h5 = function(n, e, t) {
        if (t || arguments.length === 2)
            for (var r, i = 0, o = e.length; i < o; i++) !r && i in e || (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]);
        return n.concat(r || Array.prototype.slice.call(e))
    },
    Fp = new di("Util"),
    ga = function(n) {
        function e(t) {
            var r = n.call(this, t) || this;
            return r.nonRetryable = !0, r
        }
        return u(e, "t"), l5(e, n), e
    }(Error);

function EL(n) {
    return n === void 0 && (n = 3e5),
        function(e) {
            var t = 100 * Math.pow(2, e) + 100 * Math.random();
            return !(t > n) && t
        }
}
u(EL, "Ve");
var f5 = u(function(n, e, t, r) {
        return function(i, o, s, a) {
            return SN(this, void 0, void 0, function() {
                var l = this;
                return OE(this, function(d) {
                    if (typeof i != "function") throw Error("functionToRetry must be a function");
                    return [2, new Promise(function(c, h) {
                        return SN(l, void 0, void 0, function() {
                            var f, g, p, y, b, E;
                            return OE(this, function(S) {
                                switch (S.label) {
                                    case 0:
                                        f = 0, g = !1, p = u(function() {}, "a"), b = u(function() {
                                            var _, I, x, L;
                                            return OE(this, function(U) {
                                                switch (U.label) {
                                                    case 0:
                                                        f++, Fp.debug("".concat(i.name, " attempt #").concat(f, " with this vars: ").concat(JSON.stringify(o))), U.label = 1;
                                                    case 1:
                                                        return U.trys.push([1, 3, , 7]), _ = {}, I = c, [4, i.apply(void 0, h5([], d5(o), !1))];
                                                    case 2:
                                                        return [2, (_.value = I.apply(void 0, [U.sent()]), _)];
                                                    case 3:
                                                        return x = U.sent(), y = x, Fp.debug("error on ".concat(i.name), x), (N = x) && N.nonRetryable ? (Fp.debug("".concat(i.name, " non retryable error"), x), [2, {
                                                            value: h(x)
                                                        }]) : (L = s(f, o, x), Fp.debug("".concat(i.name, " retrying in ").concat(L, " ms")), L === !1 || g ? [2, {
                                                            value: h(x)
                                                        }] : [3, 4]);
                                                    case 4:
                                                        return [4, new Promise(function(j) {
                                                            p = j, setTimeout(p, L)
                                                        })];
                                                    case 5:
                                                        U.sent(), U.label = 6;
                                                    case 6:
                                                        return [3, 7];
                                                    case 7:
                                                        return [2]
                                                }
                                                var N
                                            })
                                        }, "c"), S.label = 1;
                                    case 1:
                                        return g ? [3, 3] : [5, b()];
                                    case 2:
                                        return typeof(E = S.sent()) == "object" ? [2, E.value] : [3, 1];
                                    case 3:
                                        return h(y), [2]
                                }
                            })
                        })
                    })]
                })
            })
        }(n, e, EL(t))
    }, "Ke"),
    Cn = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};

function O_(n) {
    return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n
}
u(O_, "We");

function D_(n) {
    if (n.__esModule) return n;
    var e = n.default;
    if (typeof e == "function") {
        var t = u(function r() {
            return this instanceof r ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments)
        }, "e");
        t.prototype = e.prototype
    } else t = {};
    return Object.defineProperty(t, "__esModule", {
        value: !0
    }), Object.keys(n).forEach(function(r) {
        var i = Object.getOwnPropertyDescriptor(n, r);
        Object.defineProperty(t, r, i.get ? i : {
            enumerable: !0,
            get: u(function() {
                return n[r]
            }, "get")
        })
    }), t
}
u(D_, "Ge");
var pa = {},
    _L = D_(r5),
    dm = {},
    Er = {};
Object.defineProperty(Er, "__esModule", {
    value: !0
}), Er.MAX_HASHABLE_LENGTH = Er.INIT = Er.KEY = Er.DIGEST_LENGTH = Er.BLOCK_SIZE = void 0, Er.BLOCK_SIZE = 64, Er.DIGEST_LENGTH = 32, Er.KEY = new Uint32Array([1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298]), Er.INIT = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225], Er.MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;
var hm = {};
Object.defineProperty(hm, "__esModule", {
    value: !0
}), hm.RawSha256 = void 0;
var kr = Er,
    g5 = function() {
        function n() {
            this.state = Int32Array.from(kr.INIT), this.temp = new Int32Array(64), this.buffer = new Uint8Array(64), this.bufferLength = 0, this.bytesHashed = 0, this.finished = !1
        }
        return u(n, "e"), n.prototype.update = function(e) {
            if (this.finished) throw new Error("Attempted to update an already finished hash.");
            var t = 0,
                r = e.byteLength;
            if (this.bytesHashed += r, 8 * this.bytesHashed > kr.MAX_HASHABLE_LENGTH) throw new Error("Cannot hash more than 2^53 - 1 bits");
            for (; r > 0;) this.buffer[this.bufferLength++] = e[t++], r--, this.bufferLength === kr.BLOCK_SIZE && (this.hashBuffer(), this.bufferLength = 0)
        }, n.prototype.digest = function() {
            if (!this.finished) {
                var e = 8 * this.bytesHashed,
                    t = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength),
                    r = this.bufferLength;
                if (t.setUint8(this.bufferLength++, 128), r % kr.BLOCK_SIZE >= kr.BLOCK_SIZE - 8) {
                    for (var i = this.bufferLength; i < kr.BLOCK_SIZE; i++) t.setUint8(i, 0);
                    this.hashBuffer(), this.bufferLength = 0
                }
                for (i = this.bufferLength; i < kr.BLOCK_SIZE - 8; i++) t.setUint8(i, 0);
                t.setUint32(kr.BLOCK_SIZE - 8, Math.floor(e / 4294967296), !0), t.setUint32(kr.BLOCK_SIZE - 4, e), this.hashBuffer(), this.finished = !0
            }
            var o = new Uint8Array(kr.DIGEST_LENGTH);
            for (i = 0; i < 8; i++) o[4 * i] = this.state[i] >>> 24 & 255, o[4 * i + 1] = this.state[i] >>> 16 & 255, o[4 * i + 2] = this.state[i] >>> 8 & 255, o[4 * i + 3] = this.state[i] >>> 0 & 255;
            return o
        }, n.prototype.hashBuffer = function() {
            for (var e = this.buffer, t = this.state, r = t[0], i = t[1], o = t[2], s = t[3], a = t[4], l = t[5], d = t[6], c = t[7], h = 0; h < kr.BLOCK_SIZE; h++) {
                if (h < 16) this.temp[h] = (255 & e[4 * h]) << 24 | (255 & e[4 * h + 1]) << 16 | (255 & e[4 * h + 2]) << 8 | 255 & e[4 * h + 3];
                else {
                    var f = this.temp[h - 2],
                        g = (f >>> 17 | f << 15) ^ (f >>> 19 | f << 13) ^ f >>> 10,
                        p = ((f = this.temp[h - 15]) >>> 7 | f << 25) ^ (f >>> 18 | f << 14) ^ f >>> 3;
                    this.temp[h] = (g + this.temp[h - 7] | 0) + (p + this.temp[h - 16] | 0)
                }
                var y = (((a >>> 6 | a << 26) ^ (a >>> 11 | a << 21) ^ (a >>> 25 | a << 7)) + (a & l ^ ~a & d) | 0) + (c + (kr.KEY[h] + this.temp[h] | 0) | 0) | 0,
                    b = ((r >>> 2 | r << 30) ^ (r >>> 13 | r << 19) ^ (r >>> 22 | r << 10)) + (r & i ^ r & o ^ i & o) | 0;
                c = d, d = l, l = a, a = s + y | 0, s = o, o = i, i = r, r = y + b | 0
            }
            t[0] += r, t[1] += i, t[2] += o, t[3] += s, t[4] += a, t[5] += l, t[6] += d, t[7] += c
        }, n
    }();
hm.RawSha256 = g5;
var SL = {},
    fm = {},
    p5 = Object.freeze({
        __proto__: null,
        fromUtf8: u(n => typeof TextEncoder == "function" ? function(e) {
            return new TextEncoder().encode(e)
        }(n) : (e => {
            let t = [];
            for (let r = 0, i = e.length; r < i; r++) {
                let o = e.charCodeAt(r);
                if (o < 128) t.push(o);
                else if (o < 2048) t.push(o >> 6 | 192, 63 & o | 128);
                else if (r + 1 < e.length && (64512 & o) == 55296 && (64512 & e.charCodeAt(r + 1)) == 56320) {
                    let s = 65536 + ((1023 & o) << 10) + (1023 & e.charCodeAt(++r));
                    t.push(s >> 18 | 240, s >> 12 & 63 | 128, s >> 6 & 63 | 128, 63 & s | 128)
                } else t.push(o >> 12 | 224, o >> 6 & 63 | 128, 63 & o | 128)
            }
            return Uint8Array.from(t)
        })(n), "fromUtf8"),
        toUtf8: u(n => typeof TextDecoder == "function" ? function(e) {
            return new TextDecoder("utf-8").decode(e)
        }(n) : (e => {
            let t = "";
            for (let r = 0, i = e.length; r < i; r++) {
                let o = e[r];
                if (o < 128) t += String.fromCharCode(o);
                else if (192 <= o && o < 224) {
                    let s = e[++r];
                    t += String.fromCharCode((31 & o) << 6 | 63 & s)
                } else if (240 <= o && o < 365) {
                    let s = "%" + [o, e[++r], e[++r], e[++r]].map(a => a.toString(16)).join("%");
                    t += decodeURIComponent(s)
                } else t += String.fromCharCode((15 & o) << 12 | (63 & e[++r]) << 6 | 63 & e[++r])
            }
            return t
        })(n), "toUtf8")
    }),
    m5 = D_(p5);
Object.defineProperty(fm, "__esModule", {
    value: !0
}), fm.convertToBuffer = void 0;
var v5 = m5,
    y5 = typeof Buffer != "undefined" && Buffer.from ? function(n) {
        return Buffer.from(n, "utf8")
    } : v5.fromUtf8;
fm.convertToBuffer = function(n) {
    return n instanceof Uint8Array ? n : typeof n == "string" ? y5(n) : ArrayBuffer.isView(n) ? new Uint8Array(n.buffer, n.byteOffset, n.byteLength / Uint8Array.BYTES_PER_ELEMENT) : new Uint8Array(n)
};
var Gp = {};
Object.defineProperty(Gp, "__esModule", {
    value: !0
}), Gp.isEmptyData = void 0, Gp.isEmptyData = function(n) {
    return typeof n == "string" ? n.length === 0 : n.byteLength === 0
};
var Kp = {};
Object.defineProperty(Kp, "__esModule", {
    value: !0
}), Kp.numToUint8 = void 0, Kp.numToUint8 = function(n) {
    return new Uint8Array([(4278190080 & n) >> 24, (16711680 & n) >> 16, (65280 & n) >> 8, 255 & n])
};
var Bp = {};
Object.defineProperty(Bp, "__esModule", {
        value: !0
    }), Bp.uint32ArrayFrom = void 0, Bp.uint32ArrayFrom = function(n) {
        if (!Array.from) {
            for (var e = new Uint32Array(n.length); 0 < n.length;) e[0] = n[0];
            return e
        }
        return Uint32Array.from(n)
    },
    function(n) {
        Object.defineProperty(n, "__esModule", {
            value: !0
        }), n.uint32ArrayFrom = n.numToUint8 = n.isEmptyData = n.convertToBuffer = void 0;
        var e = fm;
        Object.defineProperty(n, "convertToBuffer", {
            enumerable: !0,
            get: u(function() {
                return e.convertToBuffer
            }, "get")
        });
        var t = Gp;
        Object.defineProperty(n, "isEmptyData", {
            enumerable: !0,
            get: u(function() {
                return t.isEmptyData
            }, "get")
        });
        var r = Kp;
        Object.defineProperty(n, "numToUint8", {
            enumerable: !0,
            get: u(function() {
                return r.numToUint8
            }, "get")
        });
        var i = Bp;
        Object.defineProperty(n, "uint32ArrayFrom", {
            enumerable: !0,
            get: u(function() {
                return i.uint32ArrayFrom
            }, "get")
        })
    }(SL), Object.defineProperty(dm, "__esModule", {
        value: !0
    }), dm.Sha256 = void 0;
var DE, IN = _L,
    jp = Er,
    NE = hm,
    LE = SL,
    b5 = function() {
        function n(e) {
            if (this.hash = new NE.RawSha256, e) {
                this.outer = new NE.RawSha256;
                var t = function(o) {
                        var s = (0, LE.convertToBuffer)(o);
                        if (s.byteLength > jp.BLOCK_SIZE) {
                            var a = new NE.RawSha256;
                            a.update(s), s = a.digest()
                        }
                        var l = new Uint8Array(jp.BLOCK_SIZE);
                        return l.set(s), l
                    }(e),
                    r = new Uint8Array(jp.BLOCK_SIZE);
                r.set(t);
                for (var i = 0; i < jp.BLOCK_SIZE; i++) t[i] ^= 54, r[i] ^= 92;
                for (this.hash.update(t), this.outer.update(r), i = 0; i < t.byteLength; i++) t[i] = 0
            }
        }
        return u(n, "e"), n.prototype.update = function(e) {
            if (!(0, LE.isEmptyData)(e) && !this.error) try {
                this.hash.update((0, LE.convertToBuffer)(e))
            } catch (t) {
                this.error = t
            }
        }, n.prototype.digestSync = function() {
            if (this.error) throw this.error;
            return this.outer ? (this.outer.finished || this.outer.update(this.hash.digest()), this.outer.digest()) : this.hash.digest()
        }, n.prototype.digest = function() {
            return (0, IN.__awaiter)(this, void 0, void 0, function() {
                return (0, IN.__generator)(this, function(e) {
                    return [2, this.digestSync()]
                })
            })
        }, n
    }();
dm.Sha256 = b5, DE = pa, Object.defineProperty(DE, "__esModule", {
    value: !0
}), (0, _L.__exportStar)(dm, DE);
var gm = function() {
        return gm = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, gm.apply(this, arguments)
    },
    w5 = new di("Parser"),
    IL = u(function(n) {
        var e, t = {};
        if (n.aws_mobile_analytics_app_id) {
            var r = {
                AWSPinpoint: {
                    appId: n.aws_mobile_analytics_app_id,
                    region: n.aws_mobile_analytics_app_region
                }
            };
            t.Analytics = r
        }
        return (n.aws_cognito_identity_pool_id || n.aws_user_pools_id) && (t.Auth = {
            userPoolId: n.aws_user_pools_id,
            userPoolWebClientId: n.aws_user_pools_web_client_id,
            region: n.aws_cognito_region,
            identityPoolId: n.aws_cognito_identity_pool_id,
            identityPoolRegion: n.aws_cognito_region,
            mandatorySignIn: n.aws_mandatory_sign_in === "enable",
            signUpVerificationMethod: n.aws_cognito_sign_up_verification_method || "code"
        }), e = n.aws_user_files_s3_bucket ? {
            AWSS3: {
                bucket: n.aws_user_files_s3_bucket,
                region: n.aws_user_files_s3_bucket_region,
                dangerouslyConnectToHttpEndpointForTesting: n.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing
            }
        } : n ? n.Storage || n : {}, n.Logging && (t.Logging = gm(gm({}, n.Logging), {
            region: n.aws_project_region
        })), n.geo && (t.Geo = Object.assign({}, n.geo), n.geo.amazon_location_service && (t.Geo = {
            AmazonLocationService: n.geo.amazon_location_service
        })), t.Analytics = Object.assign({}, t.Analytics, n.Analytics), t.Auth = Object.assign({}, t.Auth, n.Auth), t.Storage = Object.assign({}, e), t.Logging = Object.assign({}, t.Logging, n.Logging), w5.debug("parse config", n, "to amplifyconfig", t), t
    }, "yt"),
    T5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    E5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    os = new di("CognitoCredentials"),
    _5 = new Promise(function(n, e) {
        return Ao().isBrowser ? window.gapi && window.gapi.auth2 && window.gapi.auth2 ? (os.debug("google api already loaded"), n()) : void setTimeout(function() {
            return n()
        }, 2e3) : (os.debug("not in the browser, directly resolved"), n())
    }),
    S5 = function() {
        function n() {
            this.initialized = !1, this.refreshGoogleToken = this.refreshGoogleToken.bind(this), this._refreshGoogleTokenImpl = this._refreshGoogleTokenImpl.bind(this)
        }
        return u(n, "e"), n.prototype.refreshGoogleToken = function() {
            return T5(this, void 0, void 0, function() {
                return E5(this, function(e) {
                    switch (e.label) {
                        case 0:
                            return this.initialized ? [3, 2] : (os.debug("need to wait for the Google SDK loaded"), [4, _5]);
                        case 1:
                            e.sent(), this.initialized = !0, os.debug("finish waiting"), e.label = 2;
                        case 2:
                            return [2, this._refreshGoogleTokenImpl()]
                    }
                })
            })
        }, n.prototype._refreshGoogleTokenImpl = function() {
            var e = null;
            return Ao().isBrowser && (e = window.gapi && window.gapi.auth2 ? window.gapi.auth2 : null), e ? new Promise(function(t, r) {
                e.getAuthInstance().then(function(i) {
                    i || (os.debug("google Auth undefined"), r(new ga("google Auth undefined")));
                    var o = i.currentUser.get();
                    o.isSignedIn() ? (os.debug("refreshing the google access token"), o.reloadAuthResponse().then(function(s) {
                        var a = s.id_token,
                            l = s.expires_at;
                        t({
                            token: a,
                            expires_at: l
                        })
                    }).catch(function(s) {
                        s && s.error === "network_error" ? r("Network error reloading google auth response") : r(new ga("Failed to reload google auth response"))
                    })) : r(new ga("User is not signed in with Google"))
                }).catch(function(i) {
                    os.debug("Failed to refresh google token", i), r(new ga("Failed to refresh google token"))
                })
            }) : (os.debug("no gapi auth2 available"), Promise.reject("no gapi auth2 available"))
        }, n
    }(),
    I5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    A5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    la = new di("CognitoCredentials"),
    C5 = new Promise(function(n, e) {
        return Ao().isBrowser ? window.FB ? (la.debug("FB SDK already loaded"), n()) : void setTimeout(function() {
            return n()
        }, 2e3) : (la.debug("not in the browser, directly resolved"), n())
    }),
    R5 = function() {
        function n() {
            this.initialized = !1, this.refreshFacebookToken = this.refreshFacebookToken.bind(this), this._refreshFacebookTokenImpl = this._refreshFacebookTokenImpl.bind(this)
        }
        return u(n, "e"), n.prototype.refreshFacebookToken = function() {
            return I5(this, void 0, void 0, function() {
                return A5(this, function(e) {
                    switch (e.label) {
                        case 0:
                            return this.initialized ? [3, 2] : (la.debug("need to wait for the Facebook SDK loaded"), [4, C5]);
                        case 1:
                            e.sent(), this.initialized = !0, la.debug("finish waiting"), e.label = 2;
                        case 2:
                            return [2, this._refreshFacebookTokenImpl()]
                    }
                })
            })
        }, n.prototype._refreshFacebookTokenImpl = function() {
            var e = null;
            if (Ao().isBrowser && (e = window.FB), !e) {
                var t = "no fb sdk available";
                return la.debug(t), Promise.reject(new ga(t))
            }
            return new Promise(function(r, i) {
                e.getLoginStatus(function(o) {
                    if (o && o.authResponse) {
                        var s = o.authResponse,
                            a = s.accessToken,
                            l = 1e3 * s.expiresIn + new Date().getTime();
                        a || (d = "the jwtToken is undefined", la.debug(d), i(new ga(d))), r({
                            token: a,
                            expires_at: l
                        })
                    } else {
                        var d = "no response from facebook when refreshing the jwt token";
                        la.debug(d), i(new ga(d))
                    }
                }, {
                    scope: "public_profile,email"
                })
            })
        }, n
    }(),
    O5 = new S5,
    D5 = new R5,
    Uu = {},
    N5 = function() {
        function n() {}
        return u(n, "e"), n.setItem = function(e, t) {
            return Uu[e] = t, Uu[e]
        }, n.getItem = function(e) {
            return Object.prototype.hasOwnProperty.call(Uu, e) ? Uu[e] : void 0
        }, n.removeItem = function(e) {
            return delete Uu[e]
        }, n.clear = function() {
            return Uu = {}
        }, n
    }(),
    AL = function() {
        function n() {
            try {
                this.storageWindow = window.localStorage, this.storageWindow.setItem("aws.amplify.test-ls", 1), this.storageWindow.removeItem("aws.amplify.test-ls")
            } catch (e) {
                this.storageWindow = N5
            }
        }
        return u(n, "e"), n.prototype.getStorage = function() {
            return this.storageWindow
        }, n
    }(),
    CL = {
        id: "aws",
        outputs: {
            dnsSuffix: "amazonaws.com"
        },
        regionRegex: "^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",
        regions: ["aws-global"]
    },
    L5 = {
        partitions: [CL, {
            id: "aws-cn",
            outputs: {
                dnsSuffix: "amazonaws.com.cn"
            },
            regionRegex: "^cn\\-\\w+\\-\\d+$",
            regions: ["aws-cn-global"]
        }]
    },
    x5 = function(n) {
        var e = typeof Symbol == "function" && Symbol.iterator,
            t = e && n[e],
            r = 0;
        if (t) return t.call(n);
        if (n && typeof n.length == "number") return {
            next: u(function() {
                return n && r >= n.length && (n = void 0), {
                    value: n && n[r++],
                    done: !n
                }
            }, "next")
        };
        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
    },
    P5 = u(function(n) {
        var e, t, r = L5.partitions;
        try {
            for (var i = x5(r), o = i.next(); !o.done; o = i.next()) {
                var s = o.value,
                    a = s.regions,
                    l = s.outputs,
                    d = s.regionRegex,
                    c = new RegExp(d);
                if (a.includes(n) || c.test(n)) return l.dnsSuffix
            }
        } catch (h) {
            e = {
                error: h
            }
        } finally {
            try {
                o && !o.done && (t = i.return) && t.call(i)
            } finally {
                if (e) throw e.error
            }
        }
        return CL.outputs.dnsSuffix
    }, "Ft"),
    k5 = Object.freeze({
        __proto__: null,
        default: u(function(n, e) {
            return e = e || {}, new Promise(function(t, r) {
                var i = new XMLHttpRequest,
                    o = [],
                    s = [],
                    a = {},
                    l = u(function() {
                        return {
                            ok: (i.status / 100 | 0) == 2,
                            statusText: i.statusText,
                            status: i.status,
                            url: i.responseURL,
                            text: u(function() {
                                return Promise.resolve(i.responseText)
                            }, "text"),
                            json: u(function() {
                                return Promise.resolve(i.responseText).then(JSON.parse)
                            }, "json"),
                            blob: u(function() {
                                return Promise.resolve(new Blob([i.response]))
                            }, "blob"),
                            clone: l,
                            headers: {
                                keys: u(function() {
                                    return o
                                }, "keys"),
                                entries: u(function() {
                                    return s
                                }, "entries"),
                                get: u(function(c) {
                                    return a[c.toLowerCase()]
                                }, "get"),
                                has: u(function(c) {
                                    return c.toLowerCase() in a
                                }, "has")
                            }
                        }
                    }, "u");
                for (var d in i.open(e.method || "get", n, !0), i.onload = function() {
                        i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm, function(c, h, f) {
                            o.push(h = h.toLowerCase()), s.push([h, f]), a[h] = a[h] ? a[h] + "," + f : f
                        }), t(l())
                    }, i.onerror = r, i.withCredentials = e.credentials == "include", e.headers) i.setRequestHeader(d, e.headers[d]);
                i.send(e.body || null)
            })
        }, "default")
    }),
    AN = D_(k5);
self.fetch || (self.fetch = AN.default || AN);
var CN, xE = u(function(n) {
        var e;
        return function() {
            return e || (e = n()), e
        }
    }, "Lt"),
    pm = function() {
        return pm = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, pm.apply(this, arguments)
    },
    U5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    M5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    F5 = u(function(n) {
        return !["HEAD", "GET", "DELETE"].includes(n.toUpperCase())
    }, "qt"),
    mm = function() {
        return mm = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, mm.apply(this, arguments)
    },
    B5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    j5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    $5 = u(function(n, e) {
        if (e != null && e.aborted) return Promise.resolve();
        var t, r, i = new Promise(function(o) {
            r = o, t = setTimeout(o, n)
        });
        return e == null || e.addEventListener("abort", u(function o(s) {
            clearTimeout(t), e == null || e.removeEventListener("abort", o), r()
        }, "e")), i
    }, "zt"),
    RN = u(function(n, e) {
        var t;
        Object.prototype.toString.call(n) === "[object Object]" && (n.$metadata = mm(mm({}, (t = n.$metadata) !== null && t !== void 0 ? t : {}), {
            attempts: e
        }))
    }, "Jt"),
    ON = 3e5,
    V5 = ["AuthFailure", "InvalidSignatureException", "RequestExpired", "RequestInTheFuture", "RequestTimeTooSkewed", "SignatureDoesNotMatch", "BadRequestException"],
    H5 = u(function(n) {
        return V5.includes(n)
    }, "Zt"),
    z5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    W5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    q5 = ["BandwidthLimitExceeded", "EC2ThrottledException", "LimitExceededException", "PriorRequestNotComplete", "ProvisionedThroughputExceededException", "RequestLimitExceeded", "RequestThrottled", "RequestThrottledException", "SlowDown", "ThrottledException", "Throttling", "ThrottlingException", "TooManyRequestsException"],
    G5 = ["TimeoutError", "RequestTimeout", "RequestTimeoutException"],
    K5 = u(function(n, e) {
        return n === 429 || q5.includes(e)
    }, "nn"),
    J5 = u(function(n) {
        return (n == null ? void 0 : n.name) === "Network error"
    }, "rn"),
    Z5 = u(function(n, e) {
        return [500, 502, 503, 504].includes(n) || G5.includes(e)
    }, "on"),
    Y5 = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    X5 = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    RL = u(function(n, e) {
        return function(t, r) {
            for (var i = {}, o = function(a) {
                    return n(a, r)
                }, s = e.length - 1; s >= 0; s--) o = (0, e[s])(r)(o, i);
            return o(t)
        }
    }, "un"),
    Q5 = RL(function(n, e) {
        var t = n.url,
            r = n.method,
            i = n.headers,
            o = n.body,
            s = e.abortSignal;
        return U5(void 0, void 0, void 0, function() {
            var a, l, d, c, h, f, g;
            return M5(this, function(p) {
                switch (p.label) {
                    case 0:
                        return p.trys.push([0, 2, , 3]), [4, fetch(t, {
                            method: r,
                            headers: i,
                            body: F5(r) ? o : void 0,
                            signal: s
                        })];
                    case 1:
                        return a = p.sent(), [3, 3];
                    case 2:
                        throw (l = p.sent()) instanceof TypeError ? new Error("Network error") : l;
                    case 3:
                        return d = {}, (f = a.headers) === null || f === void 0 || f.forEach(function(y, b) {
                            d[b.toLowerCase()] = y
                        }), c = {
                            statusCode: a.status,
                            headers: d,
                            body: null
                        }, h = Object.assign((g = a.body) !== null && g !== void 0 ? g : {}, {
                            text: xE(function() {
                                return a.text()
                            }),
                            blob: xE(function() {
                                return a.blob()
                            }),
                            json: xE(function() {
                                return a.json()
                            })
                        }), [2, pm(pm({}, c), {
                            body: h
                        })]
                }
            })
        })
    }, [function(n) {
        var e = n.userAgentHeader,
            t = e === void 0 ? "x-amz-user-agent" : e,
            r = n.userAgentValue,
            i = r === void 0 ? "" : r;
        return function(o) {
            return function(s) {
                return Y5(this, void 0, void 0, function() {
                    var a;
                    return X5(this, function(l) {
                        switch (l.label) {
                            case 0:
                                return i.trim().length !== 0 ? [3, 2] : [4, o(s)];
                            case 1:
                                return [2, l.sent()];
                            case 2:
                                return a = t.toLowerCase(), s.headers[a] = s.headers[a] ? "".concat(s.headers[a], " ").concat(i) : i, [4, o(s)];
                            case 3:
                                return [2, l.sent()]
                        }
                    })
                })
            }
        }
    }, function(n) {
        var e = n.maxAttempts,
            t = e === void 0 ? 3 : e,
            r = n.retryDecider,
            i = n.computeDelay,
            o = n.abortSignal;
        if (t < 1) throw new Error("maxAttempts must be greater than 0");
        return function(s, a) {
            return function(l) {
                var d;
                return B5(this, void 0, void 0, function() {
                    var c, h, f, g, p, y;
                    return j5(this, function(b) {
                        switch (b.label) {
                            case 0:
                                h = (d = a.attemptsCount) !== null && d !== void 0 ? d : 0, g = u(function() {
                                    if (f) return RN(f, h), f;
                                    throw RN(c, h), c
                                }, "h"), b.label = 1;
                            case 1:
                                if (o != null && o.aborted || !(h < t)) return [3, 11];
                                b.label = 2;
                            case 2:
                                return b.trys.push([2, 4, , 5]), [4, s(l)];
                            case 3:
                                return f = b.sent(), c = void 0, [3, 5];
                            case 4:
                                return p = b.sent(), c = p, f = void 0, [3, 5];
                            case 5:
                                return h = a.attemptsCount > h ? a.attemptsCount : h + 1, a.attemptsCount = h, [4, r(f, c)];
                            case 6:
                                return b.sent() ? !(o != null && o.aborted) && h < t ? (y = i(h), [4, $5(y, o)]) : [3, 8] : [3, 9];
                            case 7:
                                b.sent(), b.label = 8;
                            case 8:
                                return [3, 1];
                            case 9:
                                return [2, g()];
                            case 10:
                                return [3, 1];
                            case 11:
                                if (o != null && o.aborted) throw new Error("Request aborted.");
                                return [2, g()]
                        }
                    })
                })
            }
        }
    }]),
    vm = function() {
        return vm = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, vm.apply(this, arguments)
    },
    Om = u(function(n) {
        var e, t, r = n.headers,
            i = n.statusCode;
        return vm(vm({}, eH(n) ? n.$metadata : {}), {
            httpStatusCode: i,
            requestId: (t = (e = r["x-amzn-requestid"]) !== null && e !== void 0 ? e : r["x-amzn-request-id"]) !== null && t !== void 0 ? t : r["x-amz-request-id"],
            extendedRequestId: r["x-amz-id-2"],
            cfId: r["x-amz-cf-id"]
        })
    }, "hn"),
    eH = u(function(n) {
        return typeof(n == null ? void 0 : n.$metadata) == "object"
    }, "fn"),
    OL = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    DL = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    tH = function(n, e) {
        var t = typeof Symbol == "function" && n[Symbol.iterator];
        if (!t) return n;
        var r, i, o = t.call(n),
            s = [];
        try {
            for (;
                (e === void 0 || e-- > 0) && !(r = o.next()).done;) s.push(r.value)
        } catch (a) {
            i = {
                error: a
            }
        } finally {
            try {
                r && !r.done && (t = o.return) && t.call(o)
            } finally {
                if (i) throw i.error
            }
        }
        return s
    },
    N_ = u(function(n) {
        return OL(void 0, void 0, void 0, function() {
            var e, t, r, i, o, s, a, l, d;
            return DL(this, function(c) {
                switch (c.label) {
                    case 0:
                        return !n || n.statusCode < 300 ? [2] : [4, L_(n)];
                    case 1:
                        return e = c.sent(), t = function(h) {
                            var f = tH(h.toString().split(/[\,\:]+/), 1)[0];
                            return f.includes("#") ? f.split("#")[1] : f
                        }((a = (s = (o = n.headers["x-amzn-errortype"]) !== null && o !== void 0 ? o : e.code) !== null && s !== void 0 ? s : e.__type) !== null && a !== void 0 ? a : "UnknownError"), r = (d = (l = e.message) !== null && l !== void 0 ? l : e.Message) !== null && d !== void 0 ? d : "Unknown error", i = new Error(r), [2, Object.assign(i, {
                            name: t,
                            $metadata: Om(n)
                        })]
                }
            })
        })
    }, "yn"),
    L_ = u(function(n) {
        return OL(void 0, void 0, void 0, function() {
            var e;
            return DL(this, function(t) {
                switch (t.label) {
                    case 0:
                        if (!n.body) throw new Error("Missing response payload");
                        return [4, n.body.json()];
                    case 1:
                        return e = t.sent(), [2, Object.assign(e, {
                            $metadata: Om(n)
                        })]
                }
            })
        })
    }, "vn"),
    nH = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    rH = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    NL = RL(Q5, [function() {
        return function(n, e) {
            return function(t) {
                return nH(this, void 0, void 0, function() {
                    return rH(this, function(r) {
                        return t.headers["cache-control"] = "no-store", [2, n(t)]
                    })
                })
            }
        }
    }]),
    x_ = {
        service: "cognito-identity",
        endpointResolver: u(function(n) {
            var e = n.region;
            return {
                url: new URL("https://cognito-identity.".concat(e, ".").concat(P5(e)))
            }
        }, "endpointResolver"),
        retryDecider: (CN = N_, function(n, e) {
            return z5(void 0, void 0, void 0, function() {
                var t, r, i, o;
                return W5(this, function(s) {
                    switch (s.label) {
                        case 0:
                            return e == null ? [3, 1] : (r = e, [3, 3]);
                        case 1:
                            return [4, CN(n)];
                        case 2:
                            r = s.sent(), s.label = 3;
                        case 3:
                            return t = ((o = r) !== null && o !== void 0 ? o : {}).name, i = n == null ? void 0 : n.statusCode, [2, J5(e) || K5(i, t) || H5(t) || Z5(i, t)]
                    }
                })
            })
        }),
        computeDelay: u(function(n) {
            var e = EL(ON)(n);
            return e === !1 ? ON : e
        }, "computeDelay"),
        userAgentValue: R_()
    };
wL(function() {
    x_.userAgentValue = R_()
});
var LL = u(function(n) {
        return {
            "content-type": "application/x-amz-json-1.1",
            "x-amz-target": "AWSCognitoIdentityService.".concat(n)
        }
    }, "Sn"),
    xL = u(function(n, e, t) {
        return {
            headers: e,
            url: n.url,
            body: t,
            method: "POST"
        }
    }, "An"),
    qd = function() {
        return qd = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, qd.apply(this, arguments)
    },
    iH = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    oH = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    PL = u(function(n, e, t, r) {
        return function(i, o) {
            return iH(void 0, void 0, void 0, function() {
                var s, a, l, d;
                return oH(this, function(c) {
                    switch (c.label) {
                        case 0:
                            return [4, (s = qd(qd({}, r), i)).endpointResolver(s, o)];
                        case 1:
                            return a = c.sent(), [4, e(o, a)];
                        case 2:
                            return l = c.sent(), [4, n(l, qd({}, s))];
                        case 3:
                            return d = c.sent(), [4, t(d)];
                        case 4:
                            return [2, c.sent()]
                    }
                })
            })
        }
    }, "Tn"),
    sH = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    aH = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    $p = PL(NL, function(n, e) {
        var t = LL("GetId"),
            r = JSON.stringify(n);
        return xL(e, t, r)
    }, function(n) {
        return sH(void 0, void 0, void 0, function() {
            return aH(this, function(e) {
                switch (e.label) {
                    case 0:
                        return n.statusCode >= 300 ? [4, N_(n)] : [3, 2];
                    case 1:
                        throw e.sent();
                    case 2:
                        return [4, L_(n)];
                    case 3:
                        return [2, {
                            IdentityId: e.sent().IdentityId,
                            $metadata: Om(n)
                        }]
                }
            })
        })
    }, x_),
    uH = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    cH = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    lH = u(function(n) {
        return n === void 0 && (n = {}), {
            AccessKeyId: n.AccessKeyId,
            SecretKey: n.SecretKey,
            SessionToken: n.SessionToken,
            Expiration: new Date(1e3 * n.Expiration)
        }
    }, "Dn"),
    Vp = PL(NL, function(n, e) {
        var t = LL("GetCredentialsForIdentity"),
            r = JSON.stringify(n);
        return xL(e, t, r)
    }, function(n) {
        return uH(void 0, void 0, void 0, function() {
            var e;
            return cH(this, function(t) {
                switch (t.label) {
                    case 0:
                        return n.statusCode >= 300 ? [4, N_(n)] : [3, 2];
                    case 1:
                        throw t.sent();
                    case 2:
                        return [4, L_(n)];
                    case 3:
                        return [2, {
                            IdentityId: (e = t.sent()).IdentityId,
                            Credentials: lH(e.Credentials),
                            $metadata: Om(n)
                        }]
                }
            })
        })
    }, x_),
    ym = function() {
        return ym = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, ym.apply(this, arguments)
    },
    Fn = function(n, e, t, r) {
        return new(t || (t = Promise))(function(i, o) {
            function s(d) {
                try {
                    l(r.next(d))
                } catch (c) {
                    o(c)
                }
            }
            u(s, "s");

            function a(d) {
                try {
                    l(r.throw(d))
                } catch (c) {
                    o(c)
                }
            }
            u(a, "a");

            function l(d) {
                var c;
                d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                    h(c)
                })).then(s, a)
            }
            u(l, "u"), l((r = r.apply(n, e || [])).next())
        })
    },
    Bn = function(n, e) {
        var t, r, i, o, s = {
            label: 0,
            sent: u(function() {
                if (1 & i[0]) throw i[1];
                return i[1]
            }, "sent"),
            trys: [],
            ops: []
        };
        return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
            return this
        }), o;

        function a(l) {
            return function(d) {
                return function(c) {
                    if (t) throw new TypeError("Generator is already executing.");
                    for (; o && (o = 0, c[0] && (s = 0)), s;) try {
                        if (t = 1, r && (i = 2 & c[0] ? r.return : c[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, c[1])).done) return i;
                        switch (r = 0, i && (c = [2 & c[0], i.value]), c[0]) {
                            case 0:
                            case 1:
                                i = c;
                                break;
                            case 4:
                                return s.label++, {
                                    value: c[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, r = c[1], c = [0];
                                continue;
                            case 7:
                                c = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (i = s.trys, !((i = i.length > 0 && i[i.length - 1]) || c[0] !== 6 && c[0] !== 2)) {
                                    s = 0;
                                    continue
                                }
                                if (c[0] === 3 && (!i || c[1] > i[0] && c[1] < i[3])) {
                                    s.label = c[1];
                                    break
                                }
                                if (c[0] === 6 && s.label < i[1]) {
                                    s.label = i[1], i = c;
                                    break
                                }
                                if (i && s.label < i[2]) {
                                    s.label = i[2], s.ops.push(c);
                                    break
                                }
                                i[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        c = e.call(n, s)
                    } catch (h) {
                        c = [6, h], r = 0
                    } finally {
                        t = i = 0
                    }
                    if (5 & c[0]) throw c[1];
                    return {
                        value: c[0] ? c[1] : void 0,
                        done: !0
                    }
                }([l, d])
            }
        }
    },
    Ke = new di("Credentials"),
    dH = typeof Symbol != "undefined" && typeof Symbol.for == "function" ? Symbol.for("amplify_default") : "@@amplify_default",
    hH = function() {
        function n(e) {
            this._gettingCredPromise = null, this._refreshHandlers = {}, this.Auth = void 0, this.configure(e), this._refreshHandlers.google = O5.refreshGoogleToken, this._refreshHandlers.facebook = D5.refreshFacebookToken
        }
        return u(n, "e"), n.prototype.getModuleName = function() {
            return "Credentials"
        }, n.prototype.getCredSource = function() {
            return this._credentials_source
        }, n.prototype.configure = function(e) {
            if (!e) return this._config || {};
            this._config = Object.assign({}, this._config, e);
            var t, r, i, o = this._config.refreshHandlers;
            return o && (this._refreshHandlers = ym(ym({}, this._refreshHandlers), o)), this._storage = this._config.storage, this._storage || (this._storage = new AL().getStorage()), this._storageSync = Promise.resolve(), typeof this._storage.sync == "function" && (this._storageSync = this._storage.sync()), t = "credentials_configured", r = null, i = "Credentials has been configured successfully", Eo.dispatch("core", {
                event: t,
                data: r,
                message: i
            }, "Credentials", dH), this._config
        }, n.prototype.get = function() {
            return Ke.debug("getting credentials"), this._pickupCredentials()
        }, n.prototype._getCognitoIdentityIdStorageKey = function(e) {
            return "".concat("CognitoIdentityId-").concat(e)
        }, n.prototype._pickupCredentials = function() {
            return Ke.debug("picking up credentials"), this._gettingCredPromise && this._gettingCredPromise.isPending() ? Ke.debug("getting old cred promise") : (Ke.debug("getting new cred promise"), this._gettingCredPromise = function(e) {
                if (e.isResolved) return e;
                var t = !0,
                    r = !1,
                    i = !1,
                    o = e.then(function(s) {
                        return i = !0, t = !1, s
                    }, function(s) {
                        throw r = !0, t = !1, s
                    });
                return o.isFullfilled = function() {
                    return i
                }, o.isPending = function() {
                    return t
                }, o.isRejected = function() {
                    return r
                }, o
            }(this._keepAlive())), this._gettingCredPromise
        }, n.prototype._keepAlive = function() {
            return Fn(this, void 0, void 0, function() {
                var e, t, r, i, o, s, a;
                return Bn(this, function(l) {
                    switch (l.label) {
                        case 0:
                            if (Ke.debug("checking if credentials exists and not expired"), (e = this._credentials) && !this._isExpired(e) && !this._isPastTTL()) return Ke.debug("credentials not changed and not expired, directly return"), [2, Promise.resolve(e)];
                            if (Ke.debug("need to get a new credential or refresh the existing one"), t = this.Auth, !(r = t === void 0 ? oh.Auth : t) || typeof r.currentUserCredentials != "function") return [2, this._setCredentialsForGuest()];
                            if (this._isExpired(e) || !this._isPastTTL()) return [3, 6];
                            Ke.debug("ttl has passed but token is not yet expired"), l.label = 1;
                        case 1:
                            return l.trys.push([1, 5, , 6]), [4, r.currentUserPoolUser()];
                        case 2:
                            return i = l.sent(), [4, r.currentSession()];
                        case 3:
                            return o = l.sent(), s = o.refreshToken, [4, new Promise(function(d, c) {
                                i.refreshSession(s, function(h, f) {
                                    return h ? c(h) : d(f)
                                })
                            })];
                        case 4:
                            return l.sent(), [3, 6];
                        case 5:
                            return a = l.sent(), Ke.debug("Error attempting to refreshing the session", a), [3, 6];
                        case 6:
                            return [2, r.currentUserCredentials()]
                    }
                })
            })
        }, n.prototype.refreshFederatedToken = function(e) {
            Ke.debug("Getting federated credentials");
            var t = e.provider,
                r = e.user,
                i = e.token,
                o = e.identity_id,
                s = e.expires_at;
            s = new Date(s).getFullYear() === 1970 ? 1e3 * s : s;
            var a = this;
            return Ke.debug("checking if federated jwt token expired"), s > new Date().getTime() ? (Ke.debug("token not expired"), this._setCredentialsFromFederation({
                provider: t,
                token: i,
                user: r,
                identity_id: o,
                expires_at: s
            })) : a._refreshHandlers[t] && typeof a._refreshHandlers[t] == "function" ? (Ke.debug("getting refreshed jwt token from federation provider"), this._providerRefreshWithRetry({
                refreshHandler: a._refreshHandlers[t],
                provider: t,
                user: r
            })) : (Ke.debug("no refresh handler for provider:", t), this.clear(), Promise.reject("no refresh handler for provider"))
        }, n.prototype._providerRefreshWithRetry = function(e) {
            var t = this,
                r = e.refreshHandler,
                i = e.provider,
                o = e.user;
            return f5(r, [], 1e4).then(function(s) {
                return Ke.debug("refresh federated token sucessfully", s), t._setCredentialsFromFederation({
                    provider: i,
                    token: s.token,
                    user: o,
                    identity_id: s.identity_id,
                    expires_at: s.expires_at
                })
            }).catch(function(s) {
                return typeof s == "string" && s.toLowerCase().lastIndexOf("network error", s.length) === 0 || t.clear(), Ke.debug("refresh federated token failed", s), Promise.reject("refreshing federation token failed: " + s)
            })
        }, n.prototype._isExpired = function(e) {
            if (!e) return Ke.debug("no credentials for expiration check"), !0;
            Ke.debug("are these credentials expired?", e);
            var t = Date.now();
            return e.expiration.getTime() <= t
        }, n.prototype._isPastTTL = function() {
            return this._nextCredentialsRefresh <= Date.now()
        }, n.prototype._setCredentialsForGuest = function() {
            var e;
            return Fn(this, void 0, void 0, function() {
                var t, r, i, o, s, a, l, d, c, h, f = this;
                return Bn(this, function(g) {
                    switch (g.label) {
                        case 0:
                            return Ke.debug("setting credentials for guest"), !((e = this._config) === null || e === void 0) && e.identityPoolId || (this._config = Object.assign({}, this._config, IL(this._config || {}).Auth)), t = this._config, r = t.identityPoolId, i = t.region, o = t.mandatorySignIn, s = t.identityPoolRegion, o ? [2, Promise.reject("cannot get guest credentials when mandatory signin enabled")] : r ? s || i ? (l = this, [4, this._getGuestIdentityId()]) : (Ke.debug("region is not configured for getting the credentials"), [2, Promise.reject("region is not configured for getting the credentials")]) : (Ke.debug("No Cognito Identity pool provided for unauthenticated access"), [2, Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);
                        case 1:
                            return a = l._identityId = g.sent(), d = {
                                region: s != null ? s : i
                            }, c = u(function() {
                                return Fn(f, void 0, void 0, function() {
                                    var p, y;
                                    return Bn(this, function(b) {
                                        switch (b.label) {
                                            case 0:
                                                return a ? [3, 2] : [4, $p(d, {
                                                    IdentityPoolId: r
                                                })];
                                            case 1:
                                                p = b.sent().IdentityId, this._identityId = p, b.label = 2;
                                            case 2:
                                                return [4, Vp(d, {
                                                    IdentityId: this._identityId
                                                })];
                                            case 3:
                                                return y = b.sent().Credentials, [2, {
                                                    identityId: this._identityId,
                                                    accessKeyId: y.AccessKeyId,
                                                    secretAccessKey: y.SecretKey,
                                                    sessionToken: y.SessionToken,
                                                    expiration: y.Expiration
                                                }]
                                        }
                                    })
                                })
                            }, "c"), h = c().catch(function(p) {
                                return Fn(f, void 0, void 0, function() {
                                    return Bn(this, function(y) {
                                        throw p
                                    })
                                })
                            }), [2, this._loadCredentials(h, "guest", !1, null).then(function(p) {
                                return p
                            }).catch(function(p) {
                                return Fn(f, void 0, void 0, function() {
                                    var y, b = this;
                                    return Bn(this, function(E) {
                                        switch (E.label) {
                                            case 0:
                                                return p.name !== "ResourceNotFoundException" || p.message !== "Identity '".concat(a, "' not found.") ? [3, 2] : (Ke.debug("Failed to load guest credentials"), [4, this._removeGuestIdentityId()]);
                                            case 1:
                                                return E.sent(), y = u(function() {
                                                    return Fn(b, void 0, void 0, function() {
                                                        var S, _;
                                                        return Bn(this, function(I) {
                                                            switch (I.label) {
                                                                case 0:
                                                                    return [4, $p(d, {
                                                                        IdentityPoolId: r
                                                                    })];
                                                                case 1:
                                                                    return S = I.sent().IdentityId, this._identityId = S, [4, Vp(d, {
                                                                        IdentityId: S
                                                                    })];
                                                                case 2:
                                                                    return _ = I.sent().Credentials, [2, {
                                                                        identityId: S,
                                                                        accessKeyId: _.AccessKeyId,
                                                                        secretAccessKey: _.SecretKey,
                                                                        sessionToken: _.SessionToken,
                                                                        expiration: _.Expiration
                                                                    }]
                                                            }
                                                        })
                                                    })
                                                }, "t"), h = y().catch(function(S) {
                                                    return Fn(b, void 0, void 0, function() {
                                                        return Bn(this, function(_) {
                                                            throw S
                                                        })
                                                    })
                                                }), [2, this._loadCredentials(h, "guest", !1, null)];
                                            case 2:
                                                return [2, p]
                                        }
                                    })
                                })
                            })]
                    }
                })
            })
        }, n.prototype._setCredentialsFromFederation = function(e) {
            var t = this,
                r = e.provider,
                i = e.token,
                o = e.identity_id,
                s = {
                    google: "accounts.google.com",
                    facebook: "graph.facebook.com",
                    amazon: "www.amazon.com",
                    developer: "cognito-identity.amazonaws.com"
                } [r] || r;
            if (!s) return Promise.reject("You must specify a federated provider");
            var a = {};
            a[s] = i;
            var l = this._config,
                d = l.identityPoolId,
                c = l.region,
                h = l.identityPoolRegion;
            if (!d) return Ke.debug("No Cognito Federated Identity pool provided"), Promise.reject("No Cognito Federated Identity pool provided");
            if (!h && !c) return Ke.debug("region is not configured for getting the credentials"), Promise.reject("region is not configured for getting the credentials");
            var f = {
                    region: h != null ? h : c
                },
                g = Fn(t, void 0, void 0, function() {
                    var p, y;
                    return Bn(this, function(b) {
                        switch (b.label) {
                            case 0:
                                return o ? [3, 2] : [4, $p(f, {
                                    IdentityPoolId: d,
                                    Logins: a
                                })];
                            case 1:
                                p = b.sent().IdentityId, o = p, b.label = 2;
                            case 2:
                                return [4, Vp(f, {
                                    IdentityId: o,
                                    Logins: a
                                })];
                            case 3:
                                return y = b.sent().Credentials, [2, {
                                    identityId: o,
                                    accessKeyId: y.AccessKeyId,
                                    secretAccessKey: y.SecretKey,
                                    sessionToken: y.SessionToken,
                                    expiration: y.Expiration
                                }]
                        }
                    })
                }).catch(function(p) {
                    return Fn(t, void 0, void 0, function() {
                        return Bn(this, function(y) {
                            throw p
                        })
                    })
                });
            return this._loadCredentials(g, "federated", !0, e)
        }, n.prototype._setCredentialsFromSession = function(e) {
            var t = this;
            Ke.debug("set credentials from session");
            var r = e.getIdToken().getJwtToken(),
                i = this._config,
                o = i.region,
                s = i.userPoolId,
                a = i.identityPoolId,
                l = i.identityPoolRegion;
            if (!a) return Ke.debug("No Cognito Federated Identity pool provided"), Promise.reject("No Cognito Federated Identity pool provided");
            if (!l && !o) return Ke.debug("region is not configured for getting the credentials"), Promise.reject("region is not configured for getting the credentials");
            var d = {};
            d["cognito-idp." + o + ".amazonaws.com/" + s] = r;
            var c = {
                    region: l != null ? l : o
                },
                h = Fn(t, void 0, void 0, function() {
                    var f, g, p, y, b, E, S, _, I, x;
                    return Bn(this, function(L) {
                        switch (L.label) {
                            case 0:
                                return [4, this._getGuestIdentityId()];
                            case 1:
                                return (f = L.sent()) ? [3, 3] : [4, $p(c, {
                                    IdentityPoolId: a,
                                    Logins: d
                                })];
                            case 2:
                                p = L.sent().IdentityId, g = p, L.label = 3;
                            case 3:
                                return [4, Vp(c, {
                                    IdentityId: f || g,
                                    Logins: d
                                })];
                            case 4:
                                return y = L.sent(), b = y.Credentials, E = b.AccessKeyId, S = b.Expiration, _ = b.SecretKey, I = b.SessionToken, x = y.IdentityId, this._identityId = x, f ? (Ke.debug("The guest identity ".concat(f, " has been successfully linked to the logins")), f === x && Ke.debug("The guest identity ".concat(f, " has become the primary identity")), [4, this._removeGuestIdentityId()]) : [3, 6];
                            case 5:
                                L.sent(), L.label = 6;
                            case 6:
                                return [2, {
                                    accessKeyId: E,
                                    secretAccessKey: _,
                                    sessionToken: I,
                                    expiration: S,
                                    identityId: x
                                }]
                        }
                    })
                }).catch(function(f) {
                    return Fn(t, void 0, void 0, function() {
                        return Bn(this, function(g) {
                            throw f
                        })
                    })
                });
            return this._loadCredentials(h, "userPool", !0, null)
        }, n.prototype._loadCredentials = function(e, t, r, i) {
            var o = this,
                s = this;
            return new Promise(function(a, l) {
                e.then(function(d) {
                    return Fn(o, void 0, void 0, function() {
                        var c, h, f, g, p;
                        return Bn(this, function(y) {
                            switch (y.label) {
                                case 0:
                                    if (Ke.debug("Load credentials successfully", d), this._identityId && !d.identityId && (d.identityId = this._identityId), s._credentials = d, s._credentials.authenticated = r, s._credentials_source = t, s._nextCredentialsRefresh = new Date().getTime() + 3e6, t === "federated") {
                                        c = Object.assign({
                                            id: this._credentials.identityId
                                        }, i.user), h = i.provider, f = i.token, g = i.expires_at, p = i.identity_id;
                                        try {
                                            this._storage.setItem("aws-amplify-federatedInfo", JSON.stringify({
                                                provider: h,
                                                token: f,
                                                user: c,
                                                expires_at: g,
                                                identity_id: p
                                            }))
                                        } catch (b) {
                                            Ke.debug("Failed to put federated info into auth storage", b)
                                        }
                                    }
                                    return t !== "guest" ? [3, 2] : [4, this._setGuestIdentityId(d.identityId)];
                                case 1:
                                    y.sent(), y.label = 2;
                                case 2:
                                    return a(s._credentials), [2]
                            }
                        })
                    })
                }).catch(function(d) {
                    if (d) return Ke.debug("Failed to load credentials", e), Ke.debug("Error loading credentials", d), void l(d)
                })
            })
        }, n.prototype.set = function(e, t) {
            return t === "session" ? this._setCredentialsFromSession(e) : t === "federation" ? this._setCredentialsFromFederation(e) : t === "guest" ? this._setCredentialsForGuest() : (Ke.debug("no source specified for setting credentials"), Promise.reject("invalid source"))
        }, n.prototype.clear = function() {
            return Fn(this, void 0, void 0, function() {
                return Bn(this, function(e) {
                    return this._credentials = null, this._credentials_source = null, Ke.debug("removing aws-amplify-federatedInfo from storage"), this._storage.removeItem("aws-amplify-federatedInfo"), [2]
                })
            })
        }, n.prototype._getGuestIdentityId = function() {
            return Fn(this, void 0, void 0, function() {
                var e, t;
                return Bn(this, function(r) {
                    switch (r.label) {
                        case 0:
                            e = this._config.identityPoolId, r.label = 1;
                        case 1:
                            return r.trys.push([1, 3, , 4]), [4, this._storageSync];
                        case 2:
                            return r.sent(), [2, this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];
                        case 3:
                            return t = r.sent(), Ke.debug("Failed to get the cached guest identityId", t), [3, 4];
                        case 4:
                            return [2]
                    }
                })
            })
        }, n.prototype._setGuestIdentityId = function(e) {
            return Fn(this, void 0, void 0, function() {
                var t, r;
                return Bn(this, function(i) {
                    switch (i.label) {
                        case 0:
                            t = this._config.identityPoolId, i.label = 1;
                        case 1:
                            return i.trys.push([1, 3, , 4]), [4, this._storageSync];
                        case 2:
                            return i.sent(), this._storage.setItem(this._getCognitoIdentityIdStorageKey(t), e), [3, 4];
                        case 3:
                            return r = i.sent(), Ke.debug("Failed to cache guest identityId", r), [3, 4];
                        case 4:
                            return [2]
                    }
                })
            })
        }, n.prototype._removeGuestIdentityId = function() {
            return Fn(this, void 0, void 0, function() {
                var e;
                return Bn(this, function(t) {
                    return e = this._config.identityPoolId, Ke.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(e), " from storage")), this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)), [2]
                })
            })
        }, n.prototype.shear = function(e) {
            return {
                accessKeyId: e.accessKeyId,
                sessionToken: e.sessionToken,
                secretAccessKey: e.secretAccessKey,
                identityId: e.identityId,
                authenticated: e.authenticated
            }
        }, n
    }(),
    kL = new hH(null);
oh.register(kL);
var DN = u(function(n, e) {
        if (typeof n != "string") throw new TypeError("argument str must be a string");
        for (var t = {}, r = e || {}, i = n.split(";"), o = r.decode || fH, s = 0; s < i.length; s++) {
            var a = i[s],
                l = a.indexOf("=");
            if (!(l < 0)) {
                var d = a.substring(0, l).trim();
                if (t[d] == null) {
                    var c = a.substring(l + 1, a.length).trim();
                    c[0] === '"' && (c = c.slice(1, -1)), t[d] = pH(c, o)
                }
            }
        }
        return t
    }, "Kn"),
    NN = u(function(n, e, t) {
        var r = t || {},
            i = r.encode || gH;
        if (typeof i != "function") throw new TypeError("option encode is invalid");
        if (!Hp.test(n)) throw new TypeError("argument name is invalid");
        var o = i(e);
        if (o && !Hp.test(o)) throw new TypeError("argument val is invalid");
        var s = n + "=" + o;
        if (r.maxAge != null) {
            var a = r.maxAge - 0;
            if (isNaN(a) || !isFinite(a)) throw new TypeError("option maxAge is invalid");
            s += "; Max-Age=" + Math.floor(a)
        }
        if (r.domain) {
            if (!Hp.test(r.domain)) throw new TypeError("option domain is invalid");
            s += "; Domain=" + r.domain
        }
        if (r.path) {
            if (!Hp.test(r.path)) throw new TypeError("option path is invalid");
            s += "; Path=" + r.path
        }
        if (r.expires) {
            if (typeof r.expires.toUTCString != "function") throw new TypeError("option expires is invalid");
            s += "; Expires=" + r.expires.toUTCString()
        }
        if (r.httpOnly && (s += "; HttpOnly"), r.secure && (s += "; Secure"), r.sameSite) switch (typeof r.sameSite == "string" ? r.sameSite.toLowerCase() : r.sameSite) {
            case !0:
                s += "; SameSite=Strict";
                break;
            case "lax":
                s += "; SameSite=Lax";
                break;
            case "strict":
                s += "; SameSite=Strict";
                break;
            case "none":
                s += "; SameSite=None";
                break;
            default:
                throw new TypeError("option sameSite is invalid")
        }
        return s
    }, "qn"),
    fH = decodeURIComponent,
    gH = encodeURIComponent,
    Hp = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;

function pH(n, e) {
    try {
        return e(n)
    } catch (t) {
        return n
    }
}
u(pH, "zn");

function LN(n, e) {
    e === void 0 && (e = {});
    var t = function(r) {
        return r && r[0] === "j" && r[1] === ":" ? r.substr(2) : r
    }(n);
    if (function(r, i) {
            return i === void 0 && (i = !r || r[0] !== "{" && r[0] !== "[" && r[0] !== '"'), !i
        }(t, e.doNotParse)) try {
        return JSON.parse(t)
    } catch (r) {}
    return n
}
u(LN, "Jn");
for (rs = function() {
        return rs = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, rs.apply(this, arguments)
    }, zp = function() {
        function n(e, t) {
            var r = this;
            this.changeListeners = [], this.HAS_DOCUMENT_COOKIE = !1, this.cookies = function(i, o) {
                return typeof i == "string" ? DN(i, o) : typeof i == "object" && i !== null ? i : {}
            }(e, t), new Promise(function() {
                r.HAS_DOCUMENT_COOKIE = typeof document == "object" && typeof document.cookie == "string"
            }).catch(function() {})
        }
        return u(n, "e"), n.prototype._updateBrowserValues = function(e) {
            this.HAS_DOCUMENT_COOKIE && (this.cookies = DN(document.cookie, e))
        }, n.prototype._emitChange = function(e) {
            for (var t = 0; t < this.changeListeners.length; ++t) this.changeListeners[t](e)
        }, n.prototype.get = function(e, t, r) {
            return t === void 0 && (t = {}), this._updateBrowserValues(r), LN(this.cookies[e], t)
        }, n.prototype.getAll = function(e, t) {
            e === void 0 && (e = {}), this._updateBrowserValues(t);
            var r = {};
            for (var i in this.cookies) r[i] = LN(this.cookies[i], e);
            return r
        }, n.prototype.set = function(e, t, r) {
            var i;
            typeof t == "object" && (t = JSON.stringify(t)), this.cookies = rs(rs({}, this.cookies), ((i = {})[e] = t, i)), this.HAS_DOCUMENT_COOKIE && (document.cookie = NN(e, t, r)), this._emitChange({
                name: e,
                value: t,
                options: r
            })
        }, n.prototype.remove = function(e, t) {
            var r = t = rs(rs({}, t), {
                expires: new Date(1970, 1, 1, 0, 0, 1),
                maxAge: 0
            });
            this.cookies = rs({}, this.cookies), delete this.cookies[e], this.HAS_DOCUMENT_COOKIE && (document.cookie = NN(e, "", r)), this._emitChange({
                name: e,
                value: void 0,
                options: t
            })
        }, n.prototype.addChangeListener = function(e) {
            this.changeListeners.push(e)
        }, n.prototype.removeChangeListener = function(e) {
            var t = this.changeListeners.indexOf(e);
            t >= 0 && this.changeListeners.splice(t, 1)
        }, n
    }(), Ud = function() {
        return Ud = Object.assign || function(n) {
            for (var e, t = 1, r = arguments.length; t < r; t++)
                for (var i in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]);
            return n
        }, Ud.apply(this, arguments)
    }, PE = Ao().isBrowser, UL = function() {
        function n(e) {
            e === void 0 && (e = {}), this.cookies = new zp, this.store = PE ? window.localStorage : Object.create(null), this.cookies = e.req ? new zp(decodeURIComponent(e.req.headers.cookie)) : new zp, Object.assign(this.store, this.cookies.getAll())
        }
        return u(n, "e"), Object.defineProperty(n.prototype, "length", {
            get: u(function() {
                return Object.entries(this.store).length
            }, "get"),
            enumerable: !1,
            configurable: !0
        }), n.prototype.clear = function() {
            var e = this;
            Array.from(new Array(this.length)).map(function(t, r) {
                return e.key(r)
            }).forEach(function(t) {
                return e.removeItem(t)
            })
        }, n.prototype.getItem = function(e) {
            return this.getLocalItem(e)
        }, n.prototype.getLocalItem = function(e) {
            return Object.prototype.hasOwnProperty.call(this.store, e) ? this.store[e] : null
        }, n.prototype.getUniversalItem = function(e) {
            return this.cookies.get(e)
        }, n.prototype.key = function(e) {
            return Object.keys(this.store)[e]
        }, n.prototype.removeItem = function(e) {
            this.removeLocalItem(e), this.removeUniversalItem(e)
        }, n.prototype.removeLocalItem = function(e) {
            delete this.store[e]
        }, n.prototype.removeUniversalItem = function(e) {
            this.cookies.remove(e, {
                path: "/"
            })
        }, n.prototype.setItem = function(e, t) {
            this.setLocalItem(e, t);
            var r = e.split(".").pop();
            ["LastAuthUser", "accessToken", "refreshToken", "idToken"].includes(r != null ? r : "") && this.setUniversalItem(e, t, {
                expires: new Date(Date.now() + 31536e6)
            })
        }, n.prototype.setLocalItem = function(e, t) {
            this.store[e] = t
        }, n.prototype.setUniversalItem = function(e, t, r) {
            r === void 0 && (r = {}), this.cookies.set(e, t, Ud(Ud({}, r), {
                path: "/",
                sameSite: !0,
                secure: !PE || window.location.hostname !== "localhost"
            }))
        }, n
    }(), GE = function() {
        function n(t) {
            var r = t || {},
                i = r.ValidationData,
                o = r.Username,
                s = r.Password,
                a = r.AuthParameters,
                l = r.ClientMetadata;
            this.validationData = i || {}, this.authParameters = a || {}, this.clientMetadata = l || {}, this.username = o, this.password = s
        }
        u(n, "e");
        var e = n.prototype;
        return e.getUsername = function() {
            return this.username
        }, e.getPassword = function() {
            return this.password
        }, e.getValidationData = function() {
            return this.validationData
        }, e.getAuthParameters = function() {
            return this.authParameters
        }, e.getClientMetadata = function() {
            return this.clientMetadata
        }, n
    }(), Et = {}, ML = {
        byteLength: u(function(n) {
            var e = PN(n),
                t = e[0],
                r = e[1];
            return 3 * (t + r) / 4 - r
        }, "byteLength"),
        toByteArray: u(function(n) {
            var e, t, r = PN(n),
                i = r[0],
                o = r[1],
                s = new xN(function(d, c, h) {
                    return 3 * (c + h) / 4 - h
                }(0, i, o)),
                a = 0,
                l = o > 0 ? i - 4 : i;
            for (t = 0; t < l; t += 4) e = _r[n.charCodeAt(t)] << 18 | _r[n.charCodeAt(t + 1)] << 12 | _r[n.charCodeAt(t + 2)] << 6 | _r[n.charCodeAt(t + 3)], s[a++] = e >> 16 & 255, s[a++] = e >> 8 & 255, s[a++] = 255 & e;
            return o === 2 && (e = _r[n.charCodeAt(t)] << 2 | _r[n.charCodeAt(t + 1)] >> 4, s[a++] = 255 & e), o === 1 && (e = _r[n.charCodeAt(t)] << 10 | _r[n.charCodeAt(t + 1)] << 4 | _r[n.charCodeAt(t + 2)] >> 2, s[a++] = e >> 8 & 255, s[a++] = 255 & e), s
        }, "toByteArray"),
        fromByteArray: u(function(n) {
            for (var e, t = n.length, r = t % 3, i = [], o = 16383, s = 0, a = t - r; s < a; s += o) i.push(mH(n, s, s + o > a ? a : s + o));
            return r === 1 ? (e = n[t - 1], i.push(ci[e >> 2] + ci[e << 4 & 63] + "==")) : r === 2 && (e = (n[t - 2] << 8) + n[t - 1], i.push(ci[e >> 10] + ci[e >> 4 & 63] + ci[e << 2 & 63] + "=")), i.join("")
        }, "fromByteArray")
    }, ci = [], _r = [], xN = typeof Uint8Array != "undefined" ? Uint8Array : Array, kE = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", ca = 0; ca < 64; ++ca) ci[ca] = kE[ca], _r[kE.charCodeAt(ca)] = ca;
var rs, zp, Ud, PE, UL, GE, Et, ML, ci, _r, xN, kE, ca;

function PN(n) {
    var e = n.length;
    if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
    var t = n.indexOf("=");
    return t === -1 && (t = e), [t, t === e ? 0 : 4 - t % 4]
}
u(PN, "ur");

function mH(n, e, t) {
    for (var r, i, o = [], s = e; s < t; s += 3) r = (n[s] << 16 & 16711680) + (n[s + 1] << 8 & 65280) + (255 & n[s + 2]), o.push(ci[(i = r) >> 18 & 63] + ci[i >> 12 & 63] + ci[i >> 6 & 63] + ci[63 & i]);
    return o.join("")
}
u(mH, "cr");
_r[45] = 62, _r[95] = 63;
var Mr, vH = {
        read: u(function(n, e, t, r, i) {
            var o, s, a = 8 * i - r - 1,
                l = (1 << a) - 1,
                d = l >> 1,
                c = -7,
                h = t ? i - 1 : 0,
                f = t ? -1 : 1,
                g = n[e + h];
            for (h += f, o = g & (1 << -c) - 1, g >>= -c, c += a; c > 0; o = 256 * o + n[e + h], h += f, c -= 8);
            for (s = o & (1 << -c) - 1, o >>= -c, c += r; c > 0; s = 256 * s + n[e + h], h += f, c -= 8);
            if (o === 0) o = 1 - d;
            else {
                if (o === l) return s ? NaN : 1 / 0 * (g ? -1 : 1);
                s += Math.pow(2, r), o -= d
            }
            return (g ? -1 : 1) * s * Math.pow(2, o - r)
        }, "read"),
        write: u(function(n, e, t, r, i, o) {
            var s, a, l, d = 8 * o - i - 1,
                c = (1 << d) - 1,
                h = c >> 1,
                f = i === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                g = r ? 0 : o - 1,
                p = r ? 1 : -1,
                y = e < 0 || e === 0 && 1 / e < 0 ? 1 : 0;
            for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = c) : (s = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -s)) < 1 && (s--, l *= 2), (e += s + h >= 1 ? f / l : f * Math.pow(2, 1 - h)) * l >= 2 && (s++, l /= 2), s + h >= c ? (a = 0, s = c) : s + h >= 1 ? (a = (e * l - 1) * Math.pow(2, i), s += h) : (a = e * Math.pow(2, h - 1) * Math.pow(2, i), s = 0)); i >= 8; n[t + g] = 255 & a, g += p, a /= 256, i -= 8);
            for (s = s << i | a, d += i; d > 0; n[t + g] = 255 & s, g += p, s /= 256, d -= 8);
            n[t + g - p] |= 128 * y
        }, "write")
    },
    yH = {}.toString,
    bH = Array.isArray || function(n) {
        return yH.call(n) == "[object Array]"
    };
if (function(n) {
        var e = ML,
            t = vH,
            r = bH;

        function i() {
            return s.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
        }
        u(i, "i");

        function o(m, v) {
            if (i() < v) throw new RangeError("Invalid typed array length");
            return s.TYPED_ARRAY_SUPPORT ? (m = new Uint8Array(v)).__proto__ = s.prototype : (m === null && (m = new s(v)), m.length = v), m
        }
        u(o, "o");

        function s(m, v, w) {
            if (!(s.TYPED_ARRAY_SUPPORT || this instanceof s)) return new s(m, v, w);
            if (typeof m == "number") {
                if (typeof v == "string") throw new Error("If encoding is specified then the first argument must be a string");
                return d(this, m)
            }
            return a(this, m, v, w)
        }
        u(s, "s");

        function a(m, v, w, A) {
            if (typeof v == "number") throw new TypeError('"value" argument must not be a number');
            return typeof ArrayBuffer != "undefined" && v instanceof ArrayBuffer ? function(R, O, W, ie) {
                if (O.byteLength, W < 0 || O.byteLength < W) throw new RangeError("'offset' is out of bounds");
                if (O.byteLength < W + (ie || 0)) throw new RangeError("'length' is out of bounds");
                return O = W === void 0 && ie === void 0 ? new Uint8Array(O) : ie === void 0 ? new Uint8Array(O, W) : new Uint8Array(O, W, ie), s.TYPED_ARRAY_SUPPORT ? (R = O).__proto__ = s.prototype : R = c(R, O), R
            }(m, v, w, A) : typeof v == "string" ? function(R, O, W) {
                if (typeof W == "string" && W !== "" || (W = "utf8"), !s.isEncoding(W)) throw new TypeError('"encoding" must be a valid string encoding');
                var ie = 0 | f(O, W);
                R = o(R, ie);
                var Se = R.write(O, W);
                return Se !== ie && (R = R.slice(0, Se)), R
            }(m, v, w) : function(R, O) {
                if (s.isBuffer(O)) {
                    var W = 0 | h(O.length);
                    return (R = o(R, W)).length === 0 || O.copy(R, 0, 0, W), R
                }
                if (O) {
                    if (typeof ArrayBuffer != "undefined" && O.buffer instanceof ArrayBuffer || "length" in O) return typeof O.length != "number" || (ie = O.length) != ie ? o(R, 0) : c(R, O);
                    if (O.type === "Buffer" && r(O.data)) return c(R, O.data)
                }
                var ie;
                throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
            }(m, v)
        }
        u(a, "a");

        function l(m) {
            if (typeof m != "number") throw new TypeError('"size" argument must be a number');
            if (m < 0) throw new RangeError('"size" argument must not be negative')
        }
        u(l, "u");

        function d(m, v) {
            if (l(v), m = o(m, v < 0 ? 0 : 0 | h(v)), !s.TYPED_ARRAY_SUPPORT)
                for (var w = 0; w < v; ++w) m[w] = 0;
            return m
        }
        u(d, "c");

        function c(m, v) {
            var w = v.length < 0 ? 0 : 0 | h(v.length);
            m = o(m, w);
            for (var A = 0; A < w; A += 1) m[A] = 255 & v[A];
            return m
        }
        u(c, "l");

        function h(m) {
            if (m >= i()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i().toString(16) + " bytes");
            return 0 | m
        }
        u(h, "h");

        function f(m, v) {
            if (s.isBuffer(m)) return m.length;
            if (typeof ArrayBuffer != "undefined" && typeof ArrayBuffer.isView == "function" && (ArrayBuffer.isView(m) || m instanceof ArrayBuffer)) return m.byteLength;
            typeof m != "string" && (m = "" + m);
            var w = m.length;
            if (w === 0) return 0;
            for (var A = !1;;) switch (v) {
                case "ascii":
                case "latin1":
                case "binary":
                    return w;
                case "utf8":
                case "utf-8":
                case void 0:
                    return re(m).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return 2 * w;
                case "hex":
                    return w >>> 1;
                case "base64":
                    return B(m).length;
                default:
                    if (A) return re(m).length;
                    v = ("" + v).toLowerCase(), A = !0
            }
        }
        u(f, "f");

        function g(m, v, w) {
            var A = !1;
            if ((v === void 0 || v < 0) && (v = 0), v > this.length || ((w === void 0 || w > this.length) && (w = this.length), w <= 0) || (w >>>= 0) <= (v >>>= 0)) return "";
            for (m || (m = "utf8");;) switch (m) {
                case "hex":
                    return K(this, v, w);
                case "utf8":
                case "utf-8":
                    return N(this, v, w);
                case "ascii":
                    return q(this, v, w);
                case "latin1":
                case "binary":
                    return fe(this, v, w);
                case "base64":
                    return U(this, v, w);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return ae(this, v, w);
                default:
                    if (A) throw new TypeError("Unknown encoding: " + m);
                    m = (m + "").toLowerCase(), A = !0
            }
        }
        u(g, "d");

        function p(m, v, w) {
            var A = m[v];
            m[v] = m[w], m[w] = A
        }
        u(p, "p");

        function y(m, v, w, A, R) {
            if (m.length === 0) return -1;
            if (typeof w == "string" ? (A = w, w = 0) : w > 2147483647 ? w = 2147483647 : w < -2147483648 && (w = -2147483648), w = +w, isNaN(w) && (w = R ? 0 : m.length - 1), w < 0 && (w = m.length + w), w >= m.length) {
                if (R) return -1;
                w = m.length - 1
            } else if (w < 0) {
                if (!R) return -1;
                w = 0
            }
            if (typeof v == "string" && (v = s.from(v, A)), s.isBuffer(v)) return v.length === 0 ? -1 : b(m, v, w, A, R);
            if (typeof v == "number") return v &= 255, s.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf == "function" ? R ? Uint8Array.prototype.indexOf.call(m, v, w) : Uint8Array.prototype.lastIndexOf.call(m, v, w) : b(m, [v], w, A, R);
            throw new TypeError("val must be string, number or Buffer")
        }
        u(y, "g");

        function b(m, v, w, A, R) {
            var O, W = 1,
                ie = m.length,
                Se = v.length;
            if (A !== void 0 && ((A = String(A).toLowerCase()) === "ucs2" || A === "ucs-2" || A === "utf16le" || A === "utf-16le")) {
                if (m.length < 2 || v.length < 2) return -1;
                W = 2, ie /= 2, Se /= 2, w /= 2
            }

            function Re($e, ct) {
                return W === 1 ? $e[ct] : $e.readUInt16BE(ct * W)
            }
            if (u(Re, "c"), R) {
                var ke = -1;
                for (O = w; O < ie; O++)
                    if (Re(m, O) === Re(v, ke === -1 ? 0 : O - ke)) {
                        if (ke === -1 && (ke = O), O - ke + 1 === Se) return ke * W
                    } else ke !== -1 && (O -= O - ke), ke = -1
            } else
                for (w + Se > ie && (w = ie - Se), O = w; O >= 0; O--) {
                    for (var _t = !0, we = 0; we < Se; we++)
                        if (Re(m, O + we) !== Re(v, we)) {
                            _t = !1;
                            break
                        } if (_t) return O
                }
            return -1
        }
        u(b, "y");

        function E(m, v, w, A) {
            w = Number(w) || 0;
            var R = m.length - w;
            A ? (A = Number(A)) > R && (A = R) : A = R;
            var O = v.length;
            if (O % 2 != 0) throw new TypeError("Invalid hex string");
            A > O / 2 && (A = O / 2);
            for (var W = 0; W < A; ++W) {
                var ie = parseInt(v.substr(2 * W, 2), 16);
                if (isNaN(ie)) return W;
                m[w + W] = ie
            }
            return W
        }
        u(E, "v");

        function S(m, v, w, A) {
            return P(re(v, m.length - w), m, w, A)
        }
        u(S, "m");

        function _(m, v, w, A) {
            return P(function(R) {
                for (var O = [], W = 0; W < R.length; ++W) O.push(255 & R.charCodeAt(W));
                return O
            }(v), m, w, A)
        }
        u(_, "w");

        function I(m, v, w, A) {
            return _(m, v, w, A)
        }
        u(I, "b");

        function x(m, v, w, A) {
            return P(B(v), m, w, A)
        }
        u(x, "_");

        function L(m, v, w, A) {
            return P(function(R, O) {
                for (var W, ie, Se, Re = [], ke = 0; ke < R.length && !((O -= 2) < 0); ++ke) ie = (W = R.charCodeAt(ke)) >> 8, Se = W % 256, Re.push(Se), Re.push(ie);
                return Re
            }(v, m.length - w), m, w, A)
        }
        u(L, "S");

        function U(m, v, w) {
            return v === 0 && w === m.length ? e.fromByteArray(m) : e.fromByteArray(m.slice(v, w))
        }
        u(U, "A");

        function N(m, v, w) {
            w = Math.min(m.length, w);
            for (var A = [], R = v; R < w;) {
                var O, W, ie, Se, Re = m[R],
                    ke = null,
                    _t = Re > 239 ? 4 : Re > 223 ? 3 : Re > 191 ? 2 : 1;
                if (R + _t <= w) switch (_t) {
                    case 1:
                        Re < 128 && (ke = Re);
                        break;
                    case 2:
                        (192 & (O = m[R + 1])) == 128 && (Se = (31 & Re) << 6 | 63 & O) > 127 && (ke = Se);
                        break;
                    case 3:
                        O = m[R + 1], W = m[R + 2], (192 & O) == 128 && (192 & W) == 128 && (Se = (15 & Re) << 12 | (63 & O) << 6 | 63 & W) > 2047 && (Se < 55296 || Se > 57343) && (ke = Se);
                        break;
                    case 4:
                        O = m[R + 1], W = m[R + 2], ie = m[R + 3], (192 & O) == 128 && (192 & W) == 128 && (192 & ie) == 128 && (Se = (15 & Re) << 18 | (63 & O) << 12 | (63 & W) << 6 | 63 & ie) > 65535 && Se < 1114112 && (ke = Se)
                }
                ke === null ? (ke = 65533, _t = 1) : ke > 65535 && (ke -= 65536, A.push(ke >>> 10 & 1023 | 55296), ke = 56320 | 1023 & ke), A.push(ke), R += _t
            }
            return function(we) {
                var $e = we.length;
                if ($e <= j) return String.fromCharCode.apply(String, we);
                for (var ct = "", St = 0; St < $e;) ct += String.fromCharCode.apply(String, we.slice(St, St += j));
                return ct
            }(A)
        }
        u(N, "I"), n.Buffer = s, n.SlowBuffer = function(m) {
            return +m != m && (m = 0), s.alloc(+m)
        }, n.INSPECT_MAX_BYTES = 50, s.TYPED_ARRAY_SUPPORT = Cn.TYPED_ARRAY_SUPPORT !== void 0 ? Cn.TYPED_ARRAY_SUPPORT : function() {
            try {
                var m = new Uint8Array(1);
                return m.__proto__ = {
                    __proto__: Uint8Array.prototype,
                    foo: u(function() {
                        return 42
                    }, "foo")
                }, m.foo() === 42 && typeof m.subarray == "function" && m.subarray(1, 1).byteLength === 0
            } catch (v) {
                return !1
            }
        }(), n.kMaxLength = i(), s.poolSize = 8192, s._augment = function(m) {
            return m.__proto__ = s.prototype, m
        }, s.from = function(m, v, w) {
            return a(null, m, v, w)
        }, s.TYPED_ARRAY_SUPPORT && (s.prototype.__proto__ = Uint8Array.prototype, s.__proto__ = Uint8Array, typeof Symbol != "undefined" && Symbol.species && s[Symbol.species] === s && Object.defineProperty(s, Symbol.species, {
            value: null,
            configurable: !0
        })), s.alloc = function(m, v, w) {
            return function(A, R, O, W) {
                return l(R), R <= 0 ? o(A, R) : O !== void 0 ? typeof W == "string" ? o(A, R).fill(O, W) : o(A, R).fill(O) : o(A, R)
            }(null, m, v, w)
        }, s.allocUnsafe = function(m) {
            return d(null, m)
        }, s.allocUnsafeSlow = function(m) {
            return d(null, m)
        }, s.isBuffer = function(m) {
            return !(m == null || !m._isBuffer)
        }, s.compare = function(m, v) {
            if (!s.isBuffer(m) || !s.isBuffer(v)) throw new TypeError("Arguments must be Buffers");
            if (m === v) return 0;
            for (var w = m.length, A = v.length, R = 0, O = Math.min(w, A); R < O; ++R)
                if (m[R] !== v[R]) {
                    w = m[R], A = v[R];
                    break
                } return w < A ? -1 : A < w ? 1 : 0
        }, s.isEncoding = function(m) {
            switch (String(m).toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "latin1":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return !0;
                default:
                    return !1
            }
        }, s.concat = function(m, v) {
            if (!r(m)) throw new TypeError('"list" argument must be an Array of Buffers');
            if (m.length === 0) return s.alloc(0);
            var w;
            if (v === void 0)
                for (v = 0, w = 0; w < m.length; ++w) v += m[w].length;
            var A = s.allocUnsafe(v),
                R = 0;
            for (w = 0; w < m.length; ++w) {
                var O = m[w];
                if (!s.isBuffer(O)) throw new TypeError('"list" argument must be an Array of Buffers');
                O.copy(A, R), R += O.length
            }
            return A
        }, s.byteLength = f, s.prototype._isBuffer = !0, s.prototype.swap16 = function() {
            var m = this.length;
            if (m % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var v = 0; v < m; v += 2) p(this, v, v + 1);
            return this
        }, s.prototype.swap32 = function() {
            var m = this.length;
            if (m % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var v = 0; v < m; v += 4) p(this, v, v + 3), p(this, v + 1, v + 2);
            return this
        }, s.prototype.swap64 = function() {
            var m = this.length;
            if (m % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var v = 0; v < m; v += 8) p(this, v, v + 7), p(this, v + 1, v + 6), p(this, v + 2, v + 5), p(this, v + 3, v + 4);
            return this
        }, s.prototype.toString = function() {
            var m = 0 | this.length;
            return m === 0 ? "" : arguments.length === 0 ? N(this, 0, m) : g.apply(this, arguments)
        }, s.prototype.equals = function(m) {
            if (!s.isBuffer(m)) throw new TypeError("Argument must be a Buffer");
            return this === m || s.compare(this, m) === 0
        }, s.prototype.inspect = function() {
            var m = "",
                v = n.INSPECT_MAX_BYTES;
            return this.length > 0 && (m = this.toString("hex", 0, v).match(/.{2}/g).join(" "), this.length > v && (m += " ... ")), "<Buffer " + m + ">"
        }, s.prototype.compare = function(m, v, w, A, R) {
            if (!s.isBuffer(m)) throw new TypeError("Argument must be a Buffer");
            if (v === void 0 && (v = 0), w === void 0 && (w = m ? m.length : 0), A === void 0 && (A = 0), R === void 0 && (R = this.length), v < 0 || w > m.length || A < 0 || R > this.length) throw new RangeError("out of range index");
            if (A >= R && v >= w) return 0;
            if (A >= R) return -1;
            if (v >= w) return 1;
            if (this === m) return 0;
            for (var O = (R >>>= 0) - (A >>>= 0), W = (w >>>= 0) - (v >>>= 0), ie = Math.min(O, W), Se = this.slice(A, R), Re = m.slice(v, w), ke = 0; ke < ie; ++ke)
                if (Se[ke] !== Re[ke]) {
                    O = Se[ke], W = Re[ke];
                    break
                } return O < W ? -1 : W < O ? 1 : 0
        }, s.prototype.includes = function(m, v, w) {
            return this.indexOf(m, v, w) !== -1
        }, s.prototype.indexOf = function(m, v, w) {
            return y(this, m, v, w, !0)
        }, s.prototype.lastIndexOf = function(m, v, w) {
            return y(this, m, v, w, !1)
        }, s.prototype.write = function(m, v, w, A) {
            if (v === void 0) A = "utf8", w = this.length, v = 0;
            else if (w === void 0 && typeof v == "string") A = v, w = this.length, v = 0;
            else {
                if (!isFinite(v)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                v |= 0, isFinite(w) ? (w |= 0, A === void 0 && (A = "utf8")) : (A = w, w = void 0)
            }
            var R = this.length - v;
            if ((w === void 0 || w > R) && (w = R), m.length > 0 && (w < 0 || v < 0) || v > this.length) throw new RangeError("Attempt to write outside buffer bounds");
            A || (A = "utf8");
            for (var O = !1;;) switch (A) {
                case "hex":
                    return E(this, m, v, w);
                case "utf8":
                case "utf-8":
                    return S(this, m, v, w);
                case "ascii":
                    return _(this, m, v, w);
                case "latin1":
                case "binary":
                    return I(this, m, v, w);
                case "base64":
                    return x(this, m, v, w);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return L(this, m, v, w);
                default:
                    if (O) throw new TypeError("Unknown encoding: " + A);
                    A = ("" + A).toLowerCase(), O = !0
            }
        }, s.prototype.toJSON = function() {
            return {
                type: "Buffer",
                data: Array.prototype.slice.call(this._arr || this, 0)
            }
        };
        var j = 4096;

        function q(m, v, w) {
            var A = "";
            w = Math.min(m.length, w);
            for (var R = v; R < w; ++R) A += String.fromCharCode(127 & m[R]);
            return A
        }
        u(q, "E");

        function fe(m, v, w) {
            var A = "";
            w = Math.min(m.length, w);
            for (var R = v; R < w; ++R) A += String.fromCharCode(m[R]);
            return A
        }
        u(fe, "T");

        function K(m, v, w) {
            var A = m.length;
            (!v || v < 0) && (v = 0), (!w || w < 0 || w > A) && (w = A);
            for (var R = "", O = v; O < w; ++O) R += nt(m[O]);
            return R
        }
        u(K, "U");

        function ae(m, v, w) {
            for (var A = m.slice(v, w), R = "", O = 0; O < A.length; O += 2) R += String.fromCharCode(A[O] + 256 * A[O + 1]);
            return R
        }
        u(ae, "k");

        function Z(m, v, w) {
            if (m % 1 != 0 || m < 0) throw new RangeError("offset is not uint");
            if (m + v > w) throw new RangeError("Trying to access beyond buffer length")
        }
        u(Z, "P");

        function ne(m, v, w, A, R, O) {
            if (!s.isBuffer(m)) throw new TypeError('"buffer" argument must be a Buffer instance');
            if (v > R || v < O) throw new RangeError('"value" argument is out of bounds');
            if (w + A > m.length) throw new RangeError("Index out of range")
        }
        u(ne, "O");

        function ue(m, v, w, A) {
            v < 0 && (v = 65535 + v + 1);
            for (var R = 0, O = Math.min(m.length - w, 2); R < O; ++R) m[w + R] = (v & 255 << 8 * (A ? R : 1 - R)) >>> 8 * (A ? R : 1 - R)
        }
        u(ue, "R");

        function ve(m, v, w, A) {
            v < 0 && (v = 4294967295 + v + 1);
            for (var R = 0, O = Math.min(m.length - w, 4); R < O; ++R) m[w + R] = v >>> 8 * (A ? R : 3 - R) & 255
        }
        u(ve, "D");

        function Ee(m, v, w, A, R, O) {
            if (w + A > m.length) throw new RangeError("Index out of range");
            if (w < 0) throw new RangeError("Index out of range")
        }
        u(Ee, "x");

        function be(m, v, w, A, R) {
            return R || Ee(m, 0, w, 4), t.write(m, v, w, A, 23, 4), w + 4
        }
        u(be, "F");

        function De(m, v, w, A, R) {
            return R || Ee(m, 0, w, 8), t.write(m, v, w, A, 52, 8), w + 8
        }
        u(De, "M"), s.prototype.slice = function(m, v) {
            var w, A = this.length;
            if ((m = ~~m) < 0 ? (m += A) < 0 && (m = 0) : m > A && (m = A), (v = v === void 0 ? A : ~~v) < 0 ? (v += A) < 0 && (v = 0) : v > A && (v = A), v < m && (v = m), s.TYPED_ARRAY_SUPPORT)(w = this.subarray(m, v)).__proto__ = s.prototype;
            else {
                var R = v - m;
                w = new s(R, void 0);
                for (var O = 0; O < R; ++O) w[O] = this[O + m]
            }
            return w
        }, s.prototype.readUIntLE = function(m, v, w) {
            m |= 0, v |= 0, w || Z(m, v, this.length);
            for (var A = this[m], R = 1, O = 0; ++O < v && (R *= 256);) A += this[m + O] * R;
            return A
        }, s.prototype.readUIntBE = function(m, v, w) {
            m |= 0, v |= 0, w || Z(m, v, this.length);
            for (var A = this[m + --v], R = 1; v > 0 && (R *= 256);) A += this[m + --v] * R;
            return A
        }, s.prototype.readUInt8 = function(m, v) {
            return v || Z(m, 1, this.length), this[m]
        }, s.prototype.readUInt16LE = function(m, v) {
            return v || Z(m, 2, this.length), this[m] | this[m + 1] << 8
        }, s.prototype.readUInt16BE = function(m, v) {
            return v || Z(m, 2, this.length), this[m] << 8 | this[m + 1]
        }, s.prototype.readUInt32LE = function(m, v) {
            return v || Z(m, 4, this.length), (this[m] | this[m + 1] << 8 | this[m + 2] << 16) + 16777216 * this[m + 3]
        }, s.prototype.readUInt32BE = function(m, v) {
            return v || Z(m, 4, this.length), 16777216 * this[m] + (this[m + 1] << 16 | this[m + 2] << 8 | this[m + 3])
        }, s.prototype.readIntLE = function(m, v, w) {
            m |= 0, v |= 0, w || Z(m, v, this.length);
            for (var A = this[m], R = 1, O = 0; ++O < v && (R *= 256);) A += this[m + O] * R;
            return A >= (R *= 128) && (A -= Math.pow(2, 8 * v)), A
        }, s.prototype.readIntBE = function(m, v, w) {
            m |= 0, v |= 0, w || Z(m, v, this.length);
            for (var A = v, R = 1, O = this[m + --A]; A > 0 && (R *= 256);) O += this[m + --A] * R;
            return O >= (R *= 128) && (O -= Math.pow(2, 8 * v)), O
        }, s.prototype.readInt8 = function(m, v) {
            return v || Z(m, 1, this.length), 128 & this[m] ? -1 * (255 - this[m] + 1) : this[m]
        }, s.prototype.readInt16LE = function(m, v) {
            v || Z(m, 2, this.length);
            var w = this[m] | this[m + 1] << 8;
            return 32768 & w ? 4294901760 | w : w
        }, s.prototype.readInt16BE = function(m, v) {
            v || Z(m, 2, this.length);
            var w = this[m + 1] | this[m] << 8;
            return 32768 & w ? 4294901760 | w : w
        }, s.prototype.readInt32LE = function(m, v) {
            return v || Z(m, 4, this.length), this[m] | this[m + 1] << 8 | this[m + 2] << 16 | this[m + 3] << 24
        }, s.prototype.readInt32BE = function(m, v) {
            return v || Z(m, 4, this.length), this[m] << 24 | this[m + 1] << 16 | this[m + 2] << 8 | this[m + 3]
        }, s.prototype.readFloatLE = function(m, v) {
            return v || Z(m, 4, this.length), t.read(this, m, !0, 23, 4)
        }, s.prototype.readFloatBE = function(m, v) {
            return v || Z(m, 4, this.length), t.read(this, m, !1, 23, 4)
        }, s.prototype.readDoubleLE = function(m, v) {
            return v || Z(m, 8, this.length), t.read(this, m, !0, 52, 8)
        }, s.prototype.readDoubleBE = function(m, v) {
            return v || Z(m, 8, this.length), t.read(this, m, !1, 52, 8)
        }, s.prototype.writeUIntLE = function(m, v, w, A) {
            m = +m, v |= 0, w |= 0, A || ne(this, m, v, w, Math.pow(2, 8 * w) - 1, 0);
            var R = 1,
                O = 0;
            for (this[v] = 255 & m; ++O < w && (R *= 256);) this[v + O] = m / R & 255;
            return v + w
        }, s.prototype.writeUIntBE = function(m, v, w, A) {
            m = +m, v |= 0, w |= 0, A || ne(this, m, v, w, Math.pow(2, 8 * w) - 1, 0);
            var R = w - 1,
                O = 1;
            for (this[v + R] = 255 & m; --R >= 0 && (O *= 256);) this[v + R] = m / O & 255;
            return v + w
        }, s.prototype.writeUInt8 = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 1, 255, 0), s.TYPED_ARRAY_SUPPORT || (m = Math.floor(m)), this[v] = 255 & m, v + 1
        }, s.prototype.writeUInt16LE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[v] = 255 & m, this[v + 1] = m >>> 8) : ue(this, m, v, !0), v + 2
        }, s.prototype.writeUInt16BE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[v] = m >>> 8, this[v + 1] = 255 & m) : ue(this, m, v, !1), v + 2
        }, s.prototype.writeUInt32LE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[v + 3] = m >>> 24, this[v + 2] = m >>> 16, this[v + 1] = m >>> 8, this[v] = 255 & m) : ve(this, m, v, !0), v + 4
        }, s.prototype.writeUInt32BE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[v] = m >>> 24, this[v + 1] = m >>> 16, this[v + 2] = m >>> 8, this[v + 3] = 255 & m) : ve(this, m, v, !1), v + 4
        }, s.prototype.writeIntLE = function(m, v, w, A) {
            if (m = +m, v |= 0, !A) {
                var R = Math.pow(2, 8 * w - 1);
                ne(this, m, v, w, R - 1, -R)
            }
            var O = 0,
                W = 1,
                ie = 0;
            for (this[v] = 255 & m; ++O < w && (W *= 256);) m < 0 && ie === 0 && this[v + O - 1] !== 0 && (ie = 1), this[v + O] = (m / W >> 0) - ie & 255;
            return v + w
        }, s.prototype.writeIntBE = function(m, v, w, A) {
            if (m = +m, v |= 0, !A) {
                var R = Math.pow(2, 8 * w - 1);
                ne(this, m, v, w, R - 1, -R)
            }
            var O = w - 1,
                W = 1,
                ie = 0;
            for (this[v + O] = 255 & m; --O >= 0 && (W *= 256);) m < 0 && ie === 0 && this[v + O + 1] !== 0 && (ie = 1), this[v + O] = (m / W >> 0) - ie & 255;
            return v + w
        }, s.prototype.writeInt8 = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 1, 127, -128), s.TYPED_ARRAY_SUPPORT || (m = Math.floor(m)), m < 0 && (m = 255 + m + 1), this[v] = 255 & m, v + 1
        }, s.prototype.writeInt16LE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[v] = 255 & m, this[v + 1] = m >>> 8) : ue(this, m, v, !0), v + 2
        }, s.prototype.writeInt16BE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[v] = m >>> 8, this[v + 1] = 255 & m) : ue(this, m, v, !1), v + 2
        }, s.prototype.writeInt32LE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 4, 2147483647, -2147483648), s.TYPED_ARRAY_SUPPORT ? (this[v] = 255 & m, this[v + 1] = m >>> 8, this[v + 2] = m >>> 16, this[v + 3] = m >>> 24) : ve(this, m, v, !0), v + 4
        }, s.prototype.writeInt32BE = function(m, v, w) {
            return m = +m, v |= 0, w || ne(this, m, v, 4, 2147483647, -2147483648), m < 0 && (m = 4294967295 + m + 1), s.TYPED_ARRAY_SUPPORT ? (this[v] = m >>> 24, this[v + 1] = m >>> 16, this[v + 2] = m >>> 8, this[v + 3] = 255 & m) : ve(this, m, v, !1), v + 4
        }, s.prototype.writeFloatLE = function(m, v, w) {
            return be(this, m, v, !0, w)
        }, s.prototype.writeFloatBE = function(m, v, w) {
            return be(this, m, v, !1, w)
        }, s.prototype.writeDoubleLE = function(m, v, w) {
            return De(this, m, v, !0, w)
        }, s.prototype.writeDoubleBE = function(m, v, w) {
            return De(this, m, v, !1, w)
        }, s.prototype.copy = function(m, v, w, A) {
            if (w || (w = 0), A || A === 0 || (A = this.length), v >= m.length && (v = m.length), v || (v = 0), A > 0 && A < w && (A = w), A === w || m.length === 0 || this.length === 0) return 0;
            if (v < 0) throw new RangeError("targetStart out of bounds");
            if (w < 0 || w >= this.length) throw new RangeError("sourceStart out of bounds");
            if (A < 0) throw new RangeError("sourceEnd out of bounds");
            A > this.length && (A = this.length), m.length - v < A - w && (A = m.length - v + w);
            var R, O = A - w;
            if (this === m && w < v && v < A)
                for (R = O - 1; R >= 0; --R) m[R + v] = this[R + w];
            else if (O < 1e3 || !s.TYPED_ARRAY_SUPPORT)
                for (R = 0; R < O; ++R) m[R + v] = this[R + w];
            else Uint8Array.prototype.set.call(m, this.subarray(w, w + O), v);
            return O
        }, s.prototype.fill = function(m, v, w, A) {
            if (typeof m == "string") {
                if (typeof v == "string" ? (A = v, v = 0, w = this.length) : typeof w == "string" && (A = w, w = this.length), m.length === 1) {
                    var R = m.charCodeAt(0);
                    R < 256 && (m = R)
                }
                if (A !== void 0 && typeof A != "string") throw new TypeError("encoding must be a string");
                if (typeof A == "string" && !s.isEncoding(A)) throw new TypeError("Unknown encoding: " + A)
            } else typeof m == "number" && (m &= 255);
            if (v < 0 || this.length < v || this.length < w) throw new RangeError("Out of range index");
            if (w <= v) return this;
            var O;
            if (v >>>= 0, w = w === void 0 ? this.length : w >>> 0, m || (m = 0), typeof m == "number")
                for (O = v; O < w; ++O) this[O] = m;
            else {
                var W = s.isBuffer(m) ? m : re(new s(m, A).toString()),
                    ie = W.length;
                for (O = 0; O < w - v; ++O) this[O + v] = W[O % ie]
            }
            return this
        };
        var Pe = /[^+\/0-9A-Za-z-_]/g;

        function nt(m) {
            return m < 16 ? "0" + m.toString(16) : m.toString(16)
        }
        u(nt, "N");

        function re(m, v) {
            var w;
            v = v || 1 / 0;
            for (var A = m.length, R = null, O = [], W = 0; W < A; ++W) {
                if ((w = m.charCodeAt(W)) > 55295 && w < 57344) {
                    if (!R) {
                        if (w > 56319) {
                            (v -= 3) > -1 && O.push(239, 191, 189);
                            continue
                        }
                        if (W + 1 === A) {
                            (v -= 3) > -1 && O.push(239, 191, 189);
                            continue
                        }
                        R = w;
                        continue
                    }
                    if (w < 56320) {
                        (v -= 3) > -1 && O.push(239, 191, 189), R = w;
                        continue
                    }
                    w = 65536 + (R - 55296 << 10 | w - 56320)
                } else R && (v -= 3) > -1 && O.push(239, 191, 189);
                if (R = null, w < 128) {
                    if ((v -= 1) < 0) break;
                    O.push(w)
                } else if (w < 2048) {
                    if ((v -= 2) < 0) break;
                    O.push(w >> 6 | 192, 63 & w | 128)
                } else if (w < 65536) {
                    if ((v -= 3) < 0) break;
                    O.push(w >> 12 | 224, w >> 6 & 63 | 128, 63 & w | 128)
                } else {
                    if (!(w < 1114112)) throw new Error("Invalid code point");
                    if ((v -= 4) < 0) break;
                    O.push(w >> 18 | 240, w >> 12 & 63 | 128, w >> 6 & 63 | 128, 63 & w | 128)
                }
            }
            return O
        }
        u(re, "L");

        function B(m) {
            return e.toByteArray(function(v) {
                if ((v = function(w) {
                        return w.trim ? w.trim() : w.replace(/^\s+|\s+$/g, "")
                    }(v).replace(Pe, "")).length < 2) return "";
                for (; v.length % 4 != 0;) v += "=";
                return v
            }(m))
        }
        u(B, "B");

        function P(m, v, w, A) {
            for (var R = 0; R < A && !(R + w >= v.length || R >= m.length); ++R) v[R + w] = m[R];
            return R
        }
        u(P, "V")
    }(Et), typeof window != "undefined" && window.crypto && (Mr = window.crypto), !Mr && typeof window != "undefined" && window.msCrypto && (Mr = window.msCrypto), !Mr && typeof global != "undefined" && global.crypto && (Mr = global.crypto), !Mr && typeof Lr == "function") try {
    Mr = Lr("crypto")
} catch (n) {}

function wH() {
    if (Mr) {
        if (typeof Mr.getRandomValues == "function") try {
            return Mr.getRandomValues(new Uint32Array(1))[0]
        } catch (n) {}
        if (typeof Mr.randomBytes == "function") try {
            return Mr.randomBytes(4).readInt32LE()
        } catch (n) {}
    }
    throw new Error("Native crypto module could not be used to get secure random number.")
}
u(wH, "pr");
var ss, TH = function() {
    function n(t, r) {
        t = this.words = t || [], this.sigBytes = r != null ? r : 4 * t.length
    }
    u(n, "e");
    var e = n.prototype;
    return e.random = function(t) {
        for (var r = [], i = 0; i < t; i += 4) r.push(wH());
        return new n(r, t)
    }, e.toString = function() {
        return function(t) {
            for (var r = t.words, i = t.sigBytes, o = [], s = 0; s < i; s++) {
                var a = r[s >>> 2] >>> 24 - s % 4 * 8 & 255;
                o.push((a >>> 4).toString(16)), o.push((15 & a).toString(16))
            }
            return o.join("")
        }(this)
    }, n
}();

function Ie(n, e) {
    n != null && this.fromString(n, e)
}
u(Ie, "vr");

function Jn() {
    return new Ie(null)
}
u(Jn, "mr");
var kN = typeof navigator != "undefined";
kN && navigator.appName == "Microsoft Internet Explorer" ? (Ie.prototype.am = function(n, e, t, r, i, o) {
    for (var s = 32767 & e, a = e >> 15; --o >= 0;) {
        var l = 32767 & this[n],
            d = this[n++] >> 15,
            c = a * l + d * s;
        i = ((l = s * l + ((32767 & c) << 15) + t[r] + (1073741823 & i)) >>> 30) + (c >>> 15) + a * d + (i >>> 30), t[r++] = 1073741823 & l
    }
    return i
}, ss = 30) : kN && navigator.appName != "Netscape" ? (Ie.prototype.am = function(n, e, t, r, i, o) {
    for (; --o >= 0;) {
        var s = e * this[n++] + t[r] + i;
        i = Math.floor(s / 67108864), t[r++] = 67108863 & s
    }
    return i
}, ss = 26) : (Ie.prototype.am = function(n, e, t, r, i, o) {
    for (var s = 16383 & e, a = e >> 14; --o >= 0;) {
        var l = 16383 & this[n],
            d = this[n++] >> 14,
            c = a * l + d * s;
        i = ((l = s * l + ((16383 & c) << 14) + t[r] + i) >> 28) + (c >> 14) + a * d, t[r++] = 268435455 & l
    }
    return i
}, ss = 28), Ie.prototype.DB = ss, Ie.prototype.DM = (1 << ss) - 1, Ie.prototype.DV = 1 << ss;
Ie.prototype.FV = Math.pow(2, 52), Ie.prototype.F1 = 52 - ss, Ie.prototype.F2 = 2 * ss - 52;
var rc, Br, EH = "0123456789abcdefghijklmnopqrstuvwxyz",
    Dm = new Array;
for (rc = 48, Br = 0; Br <= 9; ++Br) Dm[rc++] = Br;
for (rc = 97, Br = 10; Br < 36; ++Br) Dm[rc++] = Br;
for (rc = 65, Br = 10; Br < 36; ++Br) Dm[rc++] = Br;

function UN(n) {
    return EH.charAt(n)
}
u(UN, "Ir");

function _H(n, e) {
    var t = Dm[n.charCodeAt(e)];
    return t == null ? -1 : t
}
u(_H, "Cr");

function UE(n) {
    var e = Jn();
    return e.fromInt(n), e
}
u(UE, "Er");

function ME(n) {
    var e, t = 1;
    return (e = n >>> 16) != 0 && (n = e, t += 16), (e = n >> 8) != 0 && (n = e, t += 8), (e = n >> 4) != 0 && (n = e, t += 4), (e = n >> 2) != 0 && (n = e, t += 2), (e = n >> 1) != 0 && (n = e, t += 1), t
}
u(ME, "Tr");

function Mu(n) {
    this.m = n, this.mp = n.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << n.DB - 15) - 1, this.mt2 = 2 * n.t
}
u(Mu, "Ur");

function FE(n) {
    return Et.Buffer.from(new TH().random(n).toString(), "hex")
}
u(FE, "kr");
Mu.prototype.convert = function(n) {
    var e = Jn();
    return n.abs().dlShiftTo(this.m.t, e), e.divRemTo(this.m, null, e), n.s < 0 && e.compareTo(Ie.ZERO) > 0 && this.m.subTo(e, e), e
}, Mu.prototype.revert = function(n) {
    var e = Jn();
    return n.copyTo(e), this.reduce(e), e
}, Mu.prototype.reduce = function(n) {
    for (; n.t <= this.mt2;) n[n.t++] = 0;
    for (var e = 0; e < this.m.t; ++e) {
        var t = 32767 & n[e],
            r = t * this.mpl + ((t * this.mph + (n[e] >> 15) * this.mpl & this.um) << 15) & n.DM;
        for (n[t = e + this.m.t] += this.m.am(0, r, n, e, 0, this.m.t); n[t] >= n.DV;) n[t] -= n.DV, n[++t]++
    }
    n.clamp(), n.drShiftTo(this.m.t, n), n.compareTo(this.m) >= 0 && n.subTo(this.m, n)
}, Mu.prototype.mulTo = function(n, e, t) {
    n.multiplyTo(e, t), this.reduce(t)
}, Mu.prototype.sqrTo = function(n, e) {
    n.squareTo(e), this.reduce(e)
}, Ie.prototype.copyTo = function(n) {
    for (var e = this.t - 1; e >= 0; --e) n[e] = this[e];
    n.t = this.t, n.s = this.s
}, Ie.prototype.fromInt = function(n) {
    this.t = 1, this.s = n < 0 ? -1 : 0, n > 0 ? this[0] = n : n < -1 ? this[0] = n + this.DV : this.t = 0
}, Ie.prototype.fromString = function(n, e) {
    var t;
    if (e == 16) t = 4;
    else if (e == 8) t = 3;
    else if (e == 2) t = 1;
    else if (e == 32) t = 5;
    else {
        if (e != 4) throw new Error("Only radix 2, 4, 8, 16, 32 are supported");
        t = 2
    }
    this.t = 0, this.s = 0;
    for (var r = n.length, i = !1, o = 0; --r >= 0;) {
        var s = _H(n, r);
        s < 0 ? n.charAt(r) == "-" && (i = !0) : (i = !1, o == 0 ? this[this.t++] = s : o + t > this.DB ? (this[this.t - 1] |= (s & (1 << this.DB - o) - 1) << o, this[this.t++] = s >> this.DB - o) : this[this.t - 1] |= s << o, (o += t) >= this.DB && (o -= this.DB))
    }
    this.clamp(), i && Ie.ZERO.subTo(this, this)
}, Ie.prototype.clamp = function() {
    for (var n = this.s & this.DM; this.t > 0 && this[this.t - 1] == n;) --this.t
}, Ie.prototype.dlShiftTo = function(n, e) {
    var t;
    for (t = this.t - 1; t >= 0; --t) e[t + n] = this[t];
    for (t = n - 1; t >= 0; --t) e[t] = 0;
    e.t = this.t + n, e.s = this.s
}, Ie.prototype.drShiftTo = function(n, e) {
    for (var t = n; t < this.t; ++t) e[t - n] = this[t];
    e.t = Math.max(this.t - n, 0), e.s = this.s
}, Ie.prototype.lShiftTo = function(n, e) {
    var t, r = n % this.DB,
        i = this.DB - r,
        o = (1 << i) - 1,
        s = Math.floor(n / this.DB),
        a = this.s << r & this.DM;
    for (t = this.t - 1; t >= 0; --t) e[t + s + 1] = this[t] >> i | a, a = (this[t] & o) << r;
    for (t = s - 1; t >= 0; --t) e[t] = 0;
    e[s] = a, e.t = this.t + s + 1, e.s = this.s, e.clamp()
}, Ie.prototype.rShiftTo = function(n, e) {
    e.s = this.s;
    var t = Math.floor(n / this.DB);
    if (t >= this.t) e.t = 0;
    else {
        var r = n % this.DB,
            i = this.DB - r,
            o = (1 << r) - 1;
        e[0] = this[t] >> r;
        for (var s = t + 1; s < this.t; ++s) e[s - t - 1] |= (this[s] & o) << i, e[s - t] = this[s] >> r;
        r > 0 && (e[this.t - t - 1] |= (this.s & o) << i), e.t = this.t - t, e.clamp()
    }
}, Ie.prototype.subTo = function(n, e) {
    for (var t = 0, r = 0, i = Math.min(n.t, this.t); t < i;) r += this[t] - n[t], e[t++] = r & this.DM, r >>= this.DB;
    if (n.t < this.t) {
        for (r -= n.s; t < this.t;) r += this[t], e[t++] = r & this.DM, r >>= this.DB;
        r += this.s
    } else {
        for (r += this.s; t < n.t;) r -= n[t], e[t++] = r & this.DM, r >>= this.DB;
        r -= n.s
    }
    e.s = r < 0 ? -1 : 0, r < -1 ? e[t++] = this.DV + r : r > 0 && (e[t++] = r), e.t = t, e.clamp()
}, Ie.prototype.multiplyTo = function(n, e) {
    var t = this.abs(),
        r = n.abs(),
        i = t.t;
    for (e.t = i + r.t; --i >= 0;) e[i] = 0;
    for (i = 0; i < r.t; ++i) e[i + t.t] = t.am(0, r[i], e, i, 0, t.t);
    e.s = 0, e.clamp(), this.s != n.s && Ie.ZERO.subTo(e, e)
}, Ie.prototype.squareTo = function(n) {
    for (var e = this.abs(), t = n.t = 2 * e.t; --t >= 0;) n[t] = 0;
    for (t = 0; t < e.t - 1; ++t) {
        var r = e.am(t, e[t], n, 2 * t, 0, 1);
        (n[t + e.t] += e.am(t + 1, 2 * e[t], n, 2 * t + 1, r, e.t - t - 1)) >= e.DV && (n[t + e.t] -= e.DV, n[t + e.t + 1] = 1)
    }
    n.t > 0 && (n[n.t - 1] += e.am(t, e[t], n, 2 * t, 0, 1)), n.s = 0, n.clamp()
}, Ie.prototype.divRemTo = function(n, e, t) {
    var r = n.abs();
    if (!(r.t <= 0)) {
        var i = this.abs();
        if (i.t < r.t) return e != null && e.fromInt(0), void(t != null && this.copyTo(t));
        t == null && (t = Jn());
        var o = Jn(),
            s = this.s,
            a = n.s,
            l = this.DB - ME(r[r.t - 1]);
        l > 0 ? (r.lShiftTo(l, o), i.lShiftTo(l, t)) : (r.copyTo(o), i.copyTo(t));
        var d = o.t,
            c = o[d - 1];
        if (c != 0) {
            var h = c * (1 << this.F1) + (d > 1 ? o[d - 2] >> this.F2 : 0),
                f = this.FV / h,
                g = (1 << this.F1) / h,
                p = 1 << this.F2,
                y = t.t,
                b = y - d,
                E = e == null ? Jn() : e;
            for (o.dlShiftTo(b, E), t.compareTo(E) >= 0 && (t[t.t++] = 1, t.subTo(E, t)), Ie.ONE.dlShiftTo(d, E), E.subTo(o, o); o.t < d;) o[o.t++] = 0;
            for (; --b >= 0;) {
                var S = t[--y] == c ? this.DM : Math.floor(t[y] * f + (t[y - 1] + p) * g);
                if ((t[y] += o.am(0, S, t, b, 0, d)) < S)
                    for (o.dlShiftTo(b, E), t.subTo(E, t); t[y] < --S;) t.subTo(E, t)
            }
            e != null && (t.drShiftTo(d, e), s != a && Ie.ZERO.subTo(e, e)), t.t = d, t.clamp(), l > 0 && t.rShiftTo(l, t), s < 0 && Ie.ZERO.subTo(t, t)
        }
    }
}, Ie.prototype.invDigit = function() {
    if (this.t < 1) return 0;
    var n = this[0];
    if (!(1 & n)) return 0;
    var e = 3 & n;
    return (e = (e = (e = (e = e * (2 - (15 & n) * e) & 15) * (2 - (255 & n) * e) & 255) * (2 - ((65535 & n) * e & 65535)) & 65535) * (2 - n * e % this.DV) % this.DV) > 0 ? this.DV - e : -e
}, Ie.prototype.addTo = function(n, e) {
    for (var t = 0, r = 0, i = Math.min(n.t, this.t); t < i;) r += this[t] + n[t], e[t++] = r & this.DM, r >>= this.DB;
    if (n.t < this.t) {
        for (r += n.s; t < this.t;) r += this[t], e[t++] = r & this.DM, r >>= this.DB;
        r += this.s
    } else {
        for (r += this.s; t < n.t;) r += n[t], e[t++] = r & this.DM, r >>= this.DB;
        r += n.s
    }
    e.s = r < 0 ? -1 : 0, r > 0 ? e[t++] = r : r < -1 && (e[t++] = this.DV + r), e.t = t, e.clamp()
}, Ie.prototype.toString = function(n) {
    if (this.s < 0) return "-" + this.negate().toString(n);
    var e;
    if (n == 16) e = 4;
    else if (n == 8) e = 3;
    else if (n == 2) e = 1;
    else if (n == 32) e = 5;
    else {
        if (n != 4) throw new Error("Only radix 2, 4, 8, 16, 32 are supported");
        e = 2
    }
    var t, r = (1 << e) - 1,
        i = !1,
        o = "",
        s = this.t,
        a = this.DB - s * this.DB % e;
    if (s-- > 0)
        for (a < this.DB && (t = this[s] >> a) > 0 && (i = !0, o = UN(t)); s >= 0;) a < e ? (t = (this[s] & (1 << a) - 1) << e - a, t |= this[--s] >> (a += this.DB - e)) : (t = this[s] >> (a -= e) & r, a <= 0 && (a += this.DB, --s)), t > 0 && (i = !0), i && (o += UN(t));
    return i ? o : "0"
}, Ie.prototype.negate = function() {
    var n = Jn();
    return Ie.ZERO.subTo(this, n), n
}, Ie.prototype.abs = function() {
    return this.s < 0 ? this.negate() : this
}, Ie.prototype.compareTo = function(n) {
    var e = this.s - n.s;
    if (e != 0) return e;
    var t = this.t;
    if ((e = t - n.t) != 0) return this.s < 0 ? -e : e;
    for (; --t >= 0;)
        if ((e = this[t] - n[t]) != 0) return e;
    return 0
}, Ie.prototype.bitLength = function() {
    return this.t <= 0 ? 0 : this.DB * (this.t - 1) + ME(this[this.t - 1] ^ this.s & this.DM)
}, Ie.prototype.mod = function(n) {
    var e = Jn();
    return this.abs().divRemTo(n, null, e), this.s < 0 && e.compareTo(Ie.ZERO) > 0 && n.subTo(e, e), e
}, Ie.prototype.equals = function(n) {
    return this.compareTo(n) == 0
}, Ie.prototype.add = function(n) {
    var e = Jn();
    return this.addTo(n, e), e
}, Ie.prototype.subtract = function(n) {
    var e = Jn();
    return this.subTo(n, e), e
}, Ie.prototype.multiply = function(n) {
    var e = Jn();
    return this.multiplyTo(n, e), e
}, Ie.prototype.divide = function(n) {
    var e = Jn();
    return this.divRemTo(n, e, null), e
}, Ie.prototype.modPow = function(n, e, t) {
    var r, i = n.bitLength(),
        o = UE(1),
        s = new Mu(e);
    if (i <= 0) return o;
    r = i < 18 ? 1 : i < 48 ? 3 : i < 144 ? 4 : i < 768 ? 5 : 6;
    var a = new Array,
        l = 3,
        d = r - 1,
        c = (1 << r) - 1;
    if (a[1] = s.convert(this), r > 1) {
        var h = Jn();
        for (s.sqrTo(a[1], h); l <= c;) a[l] = Jn(), s.mulTo(h, a[l - 2], a[l]), l += 2
    }
    var f, g, p = n.t - 1,
        y = !0,
        b = Jn();
    for (i = ME(n[p]) - 1; p >= 0;) {
        for (i >= d ? f = n[p] >> i - d & c : (f = (n[p] & (1 << i + 1) - 1) << d - i, p > 0 && (f |= n[p - 1] >> this.DB + i - d)), l = r; !(1 & f);) f >>= 1, --l;
        if ((i -= l) < 0 && (i += this.DB, --p), y) a[f].copyTo(o), y = !1;
        else {
            for (; l > 1;) s.sqrTo(o, b), s.sqrTo(b, o), l -= 2;
            l > 0 ? s.sqrTo(o, b) : (g = o, o = b, b = g), s.mulTo(b, a[f], o)
        }
        for (; p >= 0 && !(n[p] & 1 << i);) s.sqrTo(o, b), g = o, o = b, b = g, --i < 0 && (i = this.DB - 1, --p)
    }
    var E = s.revert(o);
    return t(null, E), E
}, Ie.ZERO = UE(0), Ie.ONE = UE(1);
var SH = /^[89a-f]/i,
    Fu = function() {
        function n(t) {
            this.N = new Ie("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF", 16), this.g = new Ie("2", 16), this.k = new Ie(this.hexHash("" + this.padHex(this.N) + this.padHex(this.g)), 16), this.smallAValue = this.generateRandomSmallA(), this.getLargeAValue(function() {}), this.infoBits = Et.Buffer.from("Caldera Derived Key", "utf8"), this.poolName = t
        }
        u(n, "e");
        var e = n.prototype;
        return e.getSmallAValue = function() {
            return this.smallAValue
        }, e.getLargeAValue = function(t) {
            var r = this;
            this.largeAValue ? t(null, this.largeAValue) : this.calculateA(this.smallAValue, function(i, o) {
                i && t(i, null), r.largeAValue = o, t(null, r.largeAValue)
            })
        }, e.generateRandomSmallA = function() {
            return new Ie(FE(128).toString("hex"), 16)
        }, e.generateRandomString = function() {
            return FE(40).toString("base64")
        }, e.getRandomPassword = function() {
            return this.randomPassword
        }, e.getSaltDevices = function() {
            return this.SaltToHashDevices
        }, e.getVerifierDevices = function() {
            return this.verifierDevices
        }, e.generateHashDevice = function(t, r, i) {
            var o = this;
            this.randomPassword = this.generateRandomString();
            var s = "" + t + r + ":" + this.randomPassword,
                a = this.hash(s),
                l = FE(16).toString("hex");
            this.SaltToHashDevices = this.padHex(new Ie(l, 16)), this.g.modPow(new Ie(this.hexHash(this.SaltToHashDevices + a), 16), this.N, function(d, c) {
                d && i(d, null), o.verifierDevices = o.padHex(c), i(null, null)
            })
        }, e.calculateA = function(t, r) {
            var i = this;
            this.g.modPow(t, this.N, function(o, s) {
                o && r(o, null), s.mod(i.N).equals(Ie.ZERO) && r(new Error("Illegal paramater. A mod N cannot be 0."), null), r(null, s)
            })
        }, e.calculateU = function(t, r) {
            return this.UHexHash = this.hexHash(this.padHex(t) + this.padHex(r)), new Ie(this.UHexHash, 16)
        }, e.hash = function(t) {
            var r = new pa.Sha256;
            r.update(t);
            var i = r.digestSync(),
                o = Et.Buffer.from(i).toString("hex");
            return new Array(64 - o.length).join("0") + o
        }, e.hexHash = function(t) {
            return this.hash(Et.Buffer.from(t, "hex"))
        }, e.computehkdf = function(t, r) {
            var i = Et.Buffer.concat([this.infoBits, Et.Buffer.from("", "utf8")]),
                o = new pa.Sha256(r);
            o.update(t);
            var s = o.digestSync(),
                a = new pa.Sha256(s);
            return a.update(i), a.digestSync().slice(0, 16)
        }, e.getPasswordAuthenticationKey = function(t, r, i, o, s) {
            var a = this;
            if (i.mod(this.N).equals(Ie.ZERO)) throw new Error("B cannot be zero.");
            if (this.UValue = this.calculateU(this.largeAValue, i), this.UValue.equals(Ie.ZERO)) throw new Error("U cannot be zero.");
            var l = "" + this.poolName + t + ":" + r,
                d = this.hash(l),
                c = new Ie(this.hexHash(this.padHex(o) + d), 16);
            this.calculateS(c, i, function(h, f) {
                h && s(h, null);
                var g = a.computehkdf(Et.Buffer.from(a.padHex(f), "hex"), Et.Buffer.from(a.padHex(a.UValue), "hex"));
                s(null, g)
            })
        }, e.calculateS = function(t, r, i) {
            var o = this;
            this.g.modPow(t, this.N, function(s, a) {
                s && i(s, null), r.subtract(o.k.multiply(a)).modPow(o.smallAValue.add(o.UValue.multiply(t)), o.N, function(l, d) {
                    l && i(l, null), i(null, d.mod(o.N))
                })
            })
        }, e.getNewPasswordRequiredChallengeUserAttributePrefix = function() {
            return "userAttributes."
        }, e.padHex = function(t) {
            if (!(t instanceof Ie)) throw new Error("Not a BigInteger");
            var r = t.compareTo(Ie.ZERO) < 0,
                i = t.abs().toString(16);
            if (i = i.length % 2 != 0 ? "0" + i : i, i = SH.test(i) ? "00" + i : i, r) {
                var o = i.split("").map(function(s) {
                    var a = 15 & ~parseInt(s, 16);
                    return "0123456789ABCDEF".charAt(a)
                }).join("");
                (i = new Ie(o, 16).add(Ie.ONE).toString(16)).toUpperCase().startsWith("FF8") && (i = i.substring(2))
            }
            return i
        }, n
    }(),
    FL = function() {
        function n(t) {
            this.jwtToken = t || "", this.payload = this.decodePayload()
        }
        u(n, "e");
        var e = n.prototype;
        return e.getJwtToken = function() {
            return this.jwtToken
        }, e.getExpiration = function() {
            return this.payload.exp
        }, e.getIssuedAt = function() {
            return this.payload.iat
        }, e.decodePayload = function() {
            var t = this.jwtToken.split(".")[1];
            try {
                return JSON.parse(Et.Buffer.from(t, "base64").toString("utf8"))
            } catch (r) {
                return {}
            }
        }, n
    }();

function KE(n, e) {
    return KE = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, r) {
        return t.__proto__ = r, t
    }, KE(n, e)
}
u(KE, "Dr");
var JE = function(n) {
    var e, t;

    function r(i) {
        var o = (i === void 0 ? {} : i).AccessToken;
        return n.call(this, o || "") || this
    }
    return u(r, "r"), t = n, (e = r).prototype = Object.create(t.prototype), e.prototype.constructor = e, KE(e, t), r
}(FL);

function ZE(n, e) {
    return ZE = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, r) {
        return t.__proto__ = r, t
    }, ZE(n, e)
}
u(ZE, "Fr");
var YE = function(n) {
        var e, t;

        function r(i) {
            var o = (i === void 0 ? {} : i).IdToken;
            return n.call(this, o || "") || this
        }
        return u(r, "r"), t = n, (e = r).prototype = Object.create(t.prototype), e.prototype.constructor = e, ZE(e, t), r
    }(FL),
    XE = function() {
        function n(e) {
            var t = (e === void 0 ? {} : e).RefreshToken;
            this.token = t || ""
        }
        return u(n, "e"), n.prototype.getToken = function() {
            return this.token
        }, n
    }(),
    BL = {
        userAgent: "aws-amplify/5.0.4",
        isReactNative: typeof navigator != "undefined" && navigator.product === "ReactNative"
    },
    QE = function() {
        function n(t) {
            var r = t === void 0 ? {} : t,
                i = r.IdToken,
                o = r.RefreshToken,
                s = r.AccessToken,
                a = r.ClockDrift;
            if (s == null || i == null) throw new Error("Id token and Access Token must be present.");
            this.idToken = i, this.refreshToken = o, this.accessToken = s, this.clockDrift = a === void 0 ? this.calculateClockDrift() : a
        }
        u(n, "e");
        var e = n.prototype;
        return e.getIdToken = function() {
            return this.idToken
        }, e.getRefreshToken = function() {
            return this.refreshToken
        }, e.getAccessToken = function() {
            return this.accessToken
        }, e.getClockDrift = function() {
            return this.clockDrift
        }, e.calculateClockDrift = function() {
            return Math.floor(new Date / 1e3) - Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt())
        }, e.isValid = function() {
            var t = Math.floor(new Date / 1e3) - this.clockDrift;
            return t < this.accessToken.getExpiration() && t < this.idToken.getExpiration()
        }, n
    }(),
    IH = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    AH = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    MN = function() {
        function n() {}
        return u(n, "e"), n.prototype.getNowString = function() {
            var e = new Date,
                t = AH[e.getUTCDay()],
                r = IH[e.getUTCMonth()],
                i = e.getUTCDate(),
                o = e.getUTCHours();
            o < 10 && (o = "0" + o);
            var s = e.getUTCMinutes();
            s < 10 && (s = "0" + s);
            var a = e.getUTCSeconds();
            return a < 10 && (a = "0" + a), t + " " + r + " " + i + " " + o + ":" + s + ":" + a + " UTC " + e.getUTCFullYear()
        }, n
    }(),
    Vu = function() {
        function n(t) {
            var r = t === void 0 ? {} : t,
                i = r.Name,
                o = r.Value;
            this.Name = i || "", this.Value = o || ""
        }
        u(n, "e");
        var e = n.prototype;
        return e.getValue = function() {
            return this.Value
        }, e.setValue = function(t) {
            return this.Value = t, this
        }, e.getName = function() {
            return this.Name
        }, e.setName = function(t) {
            return this.Name = t, this
        }, e.toString = function() {
            return JSON.stringify(this)
        }, e.toJSON = function() {
            return {
                Name: this.Name,
                Value: this.Value
            }
        }, n
    }(),
    Bu = {},
    CH = function() {
        function n() {}
        return u(n, "e"), n.setItem = function(e, t) {
            return Bu[e] = t, Bu[e]
        }, n.getItem = function(e) {
            return Object.prototype.hasOwnProperty.call(Bu, e) ? Bu[e] : void 0
        }, n.removeItem = function(e) {
            return delete Bu[e]
        }, n.clear = function() {
            return Bu = {}
        }, n
    }(),
    jL = function() {
        function n() {
            try {
                this.storageWindow = window.localStorage, this.storageWindow.setItem("aws.cognito.test-ls", 1), this.storageWindow.removeItem("aws.cognito.test-ls")
            } catch (e) {
                this.storageWindow = CH
            }
        }
        return u(n, "e"), n.prototype.getStorage = function() {
            return this.storageWindow
        }, n
    }(),
    FN = typeof navigator != "undefined" ? BL.isReactNative ? "react-native" : navigator.userAgent : "nodejs",
    e_ = function() {
        function n(t) {
            if (t == null || t.Username == null || t.Pool == null) throw new Error("Username and Pool information are required.");
            this.username = t.Username || "", this.pool = t.Pool, this.Session = null, this.client = t.Pool.client, this.signInUserSession = null, this.authenticationFlowType = "USER_SRP_AUTH", this.storage = t.Storage || new jL().getStorage(), this.keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId(), this.userDataKey = this.keyPrefix + "." + this.username + ".userData"
        }
        u(n, "e");
        var e = n.prototype;
        return e.setSignInUserSession = function(t) {
            this.clearCachedUserData(), this.signInUserSession = t, this.cacheTokens()
        }, e.getSignInUserSession = function() {
            return this.signInUserSession
        }, e.getUsername = function() {
            return this.username
        }, e.getAuthenticationFlowType = function() {
            return this.authenticationFlowType
        }, e.setAuthenticationFlowType = function(t) {
            this.authenticationFlowType = t
        }, e.initiateAuth = function(t, r) {
            var i = this,
                o = t.getAuthParameters();
            o.USERNAME = this.username;
            var s = Object.keys(t.getValidationData()).length !== 0 ? t.getValidationData() : t.getClientMetadata(),
                a = {
                    AuthFlow: "CUSTOM_AUTH",
                    ClientId: this.pool.getClientId(),
                    AuthParameters: o,
                    ClientMetadata: s
                };
            this.getUserContextData() && (a.UserContextData = this.getUserContextData()), this.client.request("InitiateAuth", a, function(l, d) {
                if (l) return r.onFailure(l);
                var c = d.ChallengeName,
                    h = d.ChallengeParameters;
                return c === "CUSTOM_CHALLENGE" ? (i.Session = d.Session, r.customChallenge(h)) : (i.signInUserSession = i.getCognitoUserSession(d.AuthenticationResult), i.cacheTokens(), r.onSuccess(i.signInUserSession))
            })
        }, e.authenticateUser = function(t, r) {
            return this.authenticationFlowType === "USER_PASSWORD_AUTH" ? this.authenticateUserPlainUsernamePassword(t, r) : this.authenticationFlowType === "USER_SRP_AUTH" || this.authenticationFlowType === "CUSTOM_AUTH" ? this.authenticateUserDefaultAuth(t, r) : r.onFailure(new Error("Authentication flow type is invalid."))
        }, e.authenticateUserDefaultAuth = function(t, r) {
            var i, o, s = this,
                a = new Fu(this.pool.getUserPoolName()),
                l = new MN,
                d = {};
            this.deviceKey != null && (d.DEVICE_KEY = this.deviceKey), d.USERNAME = this.username, a.getLargeAValue(function(c, h) {
                c && r.onFailure(c), d.SRP_A = h.toString(16), s.authenticationFlowType === "CUSTOM_AUTH" && (d.CHALLENGE_NAME = "SRP_A");
                var f = Object.keys(t.getValidationData()).length !== 0 ? t.getValidationData() : t.getClientMetadata(),
                    g = {
                        AuthFlow: s.authenticationFlowType,
                        ClientId: s.pool.getClientId(),
                        AuthParameters: d,
                        ClientMetadata: f
                    };
                s.getUserContextData(s.username) && (g.UserContextData = s.getUserContextData(s.username)), s.client.request("InitiateAuth", g, function(p, y) {
                    if (p) return r.onFailure(p);
                    var b = y.ChallengeParameters;
                    s.username = b.USER_ID_FOR_SRP, s.userDataKey = s.keyPrefix + "." + s.username + ".userData", i = new Ie(b.SRP_B, 16), o = new Ie(b.SALT, 16), s.getCachedDeviceKeyAndPassword(), a.getPasswordAuthenticationKey(s.username, t.getPassword(), i, o, function(E, S) {
                        E && r.onFailure(E);
                        var _ = l.getNowString(),
                            I = Et.Buffer.concat([Et.Buffer.from(s.pool.getUserPoolName(), "utf8"), Et.Buffer.from(s.username, "utf8"), Et.Buffer.from(b.SECRET_BLOCK, "base64"), Et.Buffer.from(_, "utf8")]),
                            x = new pa.Sha256(S);
                        x.update(I);
                        var L = x.digestSync(),
                            U = Et.Buffer.from(L).toString("base64"),
                            N = {};
                        N.USERNAME = s.username, N.PASSWORD_CLAIM_SECRET_BLOCK = b.SECRET_BLOCK, N.TIMESTAMP = _, N.PASSWORD_CLAIM_SIGNATURE = U, s.deviceKey != null && (N.DEVICE_KEY = s.deviceKey);
                        var j = {
                            ChallengeName: "PASSWORD_VERIFIER",
                            ClientId: s.pool.getClientId(),
                            ChallengeResponses: N,
                            Session: y.Session,
                            ClientMetadata: f
                        };
                        s.getUserContextData() && (j.UserContextData = s.getUserContextData()), u(function q(fe, K) {
                            return s.client.request("RespondToAuthChallenge", fe, function(ae, Z) {
                                return ae && ae.code === "ResourceNotFoundException" && ae.message.toLowerCase().indexOf("device") !== -1 ? (N.DEVICE_KEY = null, s.deviceKey = null, s.randomPassword = null, s.deviceGroupKey = null, s.clearCachedDeviceKeyAndPassword(), q(fe, K)) : K(ae, Z)
                            })
                        }, "e")(j, function(q, fe) {
                            return q ? r.onFailure(q) : s.authenticateUserInternal(fe, a, r)
                        })
                    })
                })
            })
        }, e.authenticateUserPlainUsernamePassword = function(t, r) {
            var i = this,
                o = {};
            if (o.USERNAME = this.username, o.PASSWORD = t.getPassword(), o.PASSWORD) {
                var s = new Fu(this.pool.getUserPoolName());
                this.getCachedDeviceKeyAndPassword(), this.deviceKey != null && (o.DEVICE_KEY = this.deviceKey);
                var a = Object.keys(t.getValidationData()).length !== 0 ? t.getValidationData() : t.getClientMetadata(),
                    l = {
                        AuthFlow: "USER_PASSWORD_AUTH",
                        ClientId: this.pool.getClientId(),
                        AuthParameters: o,
                        ClientMetadata: a
                    };
                this.getUserContextData(this.username) && (l.UserContextData = this.getUserContextData(this.username)), this.client.request("InitiateAuth", l, function(d, c) {
                    return d ? r.onFailure(d) : i.authenticateUserInternal(c, s, r)
                })
            } else r.onFailure(new Error("PASSWORD parameter is required"))
        }, e.authenticateUserInternal = function(t, r, i) {
            var o = this,
                s = t.ChallengeName,
                a = t.ChallengeParameters;
            if (s === "SMS_MFA") return this.Session = t.Session, i.mfaRequired(s, a);
            if (s === "SELECT_MFA_TYPE") return this.Session = t.Session, i.selectMFAType(s, a);
            if (s === "MFA_SETUP") return this.Session = t.Session, i.mfaSetup(s, a);
            if (s === "SOFTWARE_TOKEN_MFA") return this.Session = t.Session, i.totpRequired(s, a);
            if (s === "CUSTOM_CHALLENGE") return this.Session = t.Session, i.customChallenge(a);
            if (s === "NEW_PASSWORD_REQUIRED") {
                this.Session = t.Session;
                var l = null,
                    d = null,
                    c = [],
                    h = r.getNewPasswordRequiredChallengeUserAttributePrefix();
                if (a && (l = JSON.parse(t.ChallengeParameters.userAttributes), d = JSON.parse(t.ChallengeParameters.requiredAttributes)), d)
                    for (var f = 0; f < d.length; f++) c[f] = d[f].substr(h.length);
                return i.newPasswordRequired(l, c)
            }
            if (s === "DEVICE_SRP_AUTH") return this.Session = t.Session, void this.getDeviceResponse(i);
            this.signInUserSession = this.getCognitoUserSession(t.AuthenticationResult), this.challengeName = s, this.cacheTokens();
            var g = t.AuthenticationResult.NewDeviceMetadata;
            if (g == null) return i.onSuccess(this.signInUserSession);
            r.generateHashDevice(t.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, t.AuthenticationResult.NewDeviceMetadata.DeviceKey, function(p) {
                if (p) return i.onFailure(p);
                var y = {
                    Salt: Et.Buffer.from(r.getSaltDevices(), "hex").toString("base64"),
                    PasswordVerifier: Et.Buffer.from(r.getVerifierDevices(), "hex").toString("base64")
                };
                o.verifierDevices = y.PasswordVerifier, o.deviceGroupKey = g.DeviceGroupKey, o.randomPassword = r.getRandomPassword(), o.client.request("ConfirmDevice", {
                    DeviceKey: g.DeviceKey,
                    AccessToken: o.signInUserSession.getAccessToken().getJwtToken(),
                    DeviceSecretVerifierConfig: y,
                    DeviceName: FN
                }, function(b, E) {
                    return b ? i.onFailure(b) : (o.deviceKey = t.AuthenticationResult.NewDeviceMetadata.DeviceKey, o.cacheDeviceKeyAndPassword(), E.UserConfirmationNecessary === !0 ? i.onSuccess(o.signInUserSession, E.UserConfirmationNecessary) : i.onSuccess(o.signInUserSession))
                })
            })
        }, e.completeNewPasswordChallenge = function(t, r, i, o) {
            var s = this;
            if (!t) return i.onFailure(new Error("New password is required."));
            var a = new Fu(this.pool.getUserPoolName()),
                l = a.getNewPasswordRequiredChallengeUserAttributePrefix(),
                d = {};
            r && Object.keys(r).forEach(function(h) {
                d[l + h] = r[h]
            }), d.NEW_PASSWORD = t, d.USERNAME = this.username;
            var c = {
                ChallengeName: "NEW_PASSWORD_REQUIRED",
                ClientId: this.pool.getClientId(),
                ChallengeResponses: d,
                Session: this.Session,
                ClientMetadata: o
            };
            this.getUserContextData() && (c.UserContextData = this.getUserContextData()), this.client.request("RespondToAuthChallenge", c, function(h, f) {
                return h ? i.onFailure(h) : s.authenticateUserInternal(f, a, i)
            })
        }, e.getDeviceResponse = function(t, r) {
            var i = this,
                o = new Fu(this.deviceGroupKey),
                s = new MN,
                a = {};
            a.USERNAME = this.username, a.DEVICE_KEY = this.deviceKey, o.getLargeAValue(function(l, d) {
                l && t.onFailure(l), a.SRP_A = d.toString(16);
                var c = {
                    ChallengeName: "DEVICE_SRP_AUTH",
                    ClientId: i.pool.getClientId(),
                    ChallengeResponses: a,
                    ClientMetadata: r,
                    Session: i.Session
                };
                i.getUserContextData() && (c.UserContextData = i.getUserContextData()), i.client.request("RespondToAuthChallenge", c, function(h, f) {
                    if (h) return t.onFailure(h);
                    var g = f.ChallengeParameters,
                        p = new Ie(g.SRP_B, 16),
                        y = new Ie(g.SALT, 16);
                    o.getPasswordAuthenticationKey(i.deviceKey, i.randomPassword, p, y, function(b, E) {
                        if (b) return t.onFailure(b);
                        var S = s.getNowString(),
                            _ = Et.Buffer.concat([Et.Buffer.from(i.deviceGroupKey, "utf8"), Et.Buffer.from(i.deviceKey, "utf8"), Et.Buffer.from(g.SECRET_BLOCK, "base64"), Et.Buffer.from(S, "utf8")]),
                            I = new pa.Sha256(E);
                        I.update(_);
                        var x = I.digestSync(),
                            L = Et.Buffer.from(x).toString("base64"),
                            U = {};
                        U.USERNAME = i.username, U.PASSWORD_CLAIM_SECRET_BLOCK = g.SECRET_BLOCK, U.TIMESTAMP = S, U.PASSWORD_CLAIM_SIGNATURE = L, U.DEVICE_KEY = i.deviceKey;
                        var N = {
                            ChallengeName: "DEVICE_PASSWORD_VERIFIER",
                            ClientId: i.pool.getClientId(),
                            ChallengeResponses: U,
                            Session: f.Session
                        };
                        i.getUserContextData() && (N.UserContextData = i.getUserContextData()), i.client.request("RespondToAuthChallenge", N, function(j, q) {
                            return j ? t.onFailure(j) : (i.signInUserSession = i.getCognitoUserSession(q.AuthenticationResult), i.cacheTokens(), t.onSuccess(i.signInUserSession))
                        })
                    })
                })
            })
        }, e.confirmRegistration = function(t, r, i, o) {
            var s = {
                ClientId: this.pool.getClientId(),
                ConfirmationCode: t,
                Username: this.username,
                ForceAliasCreation: r,
                ClientMetadata: o
            };
            this.getUserContextData() && (s.UserContextData = this.getUserContextData()), this.client.request("ConfirmSignUp", s, function(a) {
                return a ? i(a, null) : i(null, "SUCCESS")
            })
        }, e.sendCustomChallengeAnswer = function(t, r, i) {
            var o = this,
                s = {};
            s.USERNAME = this.username, s.ANSWER = t;
            var a = new Fu(this.pool.getUserPoolName());
            this.getCachedDeviceKeyAndPassword(), this.deviceKey != null && (s.DEVICE_KEY = this.deviceKey);
            var l = {
                ChallengeName: "CUSTOM_CHALLENGE",
                ChallengeResponses: s,
                ClientId: this.pool.getClientId(),
                Session: this.Session,
                ClientMetadata: i
            };
            this.getUserContextData() && (l.UserContextData = this.getUserContextData()), this.client.request("RespondToAuthChallenge", l, function(d, c) {
                return d ? r.onFailure(d) : o.authenticateUserInternal(c, a, r)
            })
        }, e.sendMFACode = function(t, r, i, o) {
            var s = this,
                a = {};
            a.USERNAME = this.username, a.SMS_MFA_CODE = t;
            var l = i || "SMS_MFA";
            l === "SOFTWARE_TOKEN_MFA" && (a.SOFTWARE_TOKEN_MFA_CODE = t), this.deviceKey != null && (a.DEVICE_KEY = this.deviceKey);
            var d = {
                ChallengeName: l,
                ChallengeResponses: a,
                ClientId: this.pool.getClientId(),
                Session: this.Session,
                ClientMetadata: o
            };
            this.getUserContextData() && (d.UserContextData = this.getUserContextData()), this.client.request("RespondToAuthChallenge", d, function(c, h) {
                if (c) return r.onFailure(c);
                if (h.ChallengeName !== "DEVICE_SRP_AUTH") {
                    if (s.signInUserSession = s.getCognitoUserSession(h.AuthenticationResult), s.cacheTokens(), h.AuthenticationResult.NewDeviceMetadata == null) return r.onSuccess(s.signInUserSession);
                    var f = new Fu(s.pool.getUserPoolName());
                    f.generateHashDevice(h.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, h.AuthenticationResult.NewDeviceMetadata.DeviceKey, function(g) {
                        if (g) return r.onFailure(g);
                        var p = {
                            Salt: Et.Buffer.from(f.getSaltDevices(), "hex").toString("base64"),
                            PasswordVerifier: Et.Buffer.from(f.getVerifierDevices(), "hex").toString("base64")
                        };
                        s.verifierDevices = p.PasswordVerifier, s.deviceGroupKey = h.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, s.randomPassword = f.getRandomPassword(), s.client.request("ConfirmDevice", {
                            DeviceKey: h.AuthenticationResult.NewDeviceMetadata.DeviceKey,
                            AccessToken: s.signInUserSession.getAccessToken().getJwtToken(),
                            DeviceSecretVerifierConfig: p,
                            DeviceName: FN
                        }, function(y, b) {
                            return y ? r.onFailure(y) : (s.deviceKey = h.AuthenticationResult.NewDeviceMetadata.DeviceKey, s.cacheDeviceKeyAndPassword(), b.UserConfirmationNecessary === !0 ? r.onSuccess(s.signInUserSession, b.UserConfirmationNecessary) : r.onSuccess(s.signInUserSession))
                        })
                    })
                } else s.getDeviceResponse(r)
            })
        }, e.changePassword = function(t, r, i, o) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return i(new Error("User is not authenticated"), null);
            this.client.request("ChangePassword", {
                PreviousPassword: t,
                ProposedPassword: r,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                ClientMetadata: o
            }, function(s) {
                return s ? i(s, null) : i(null, "SUCCESS")
            })
        }, e.enableMFA = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t(new Error("User is not authenticated"), null);
            var r = [];
            r.push({
                DeliveryMedium: "SMS",
                AttributeName: "phone_number"
            }), this.client.request("SetUserSettings", {
                MFAOptions: r,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(i) {
                return i ? t(i, null) : t(null, "SUCCESS")
            })
        }, e.setUserMfaPreference = function(t, r, i) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return i(new Error("User is not authenticated"), null);
            this.client.request("SetUserMFAPreference", {
                SMSMfaSettings: t,
                SoftwareTokenMfaSettings: r,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(o) {
                return o ? i(o, null) : i(null, "SUCCESS")
            })
        }, e.disableMFA = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t(new Error("User is not authenticated"), null);
            this.client.request("SetUserSettings", {
                MFAOptions: [],
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(r) {
                return r ? t(r, null) : t(null, "SUCCESS")
            })
        }, e.deleteUser = function(t, r) {
            var i = this;
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t(new Error("User is not authenticated"), null);
            this.client.request("DeleteUser", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                ClientMetadata: r
            }, function(o) {
                return o ? t(o, null) : (i.clearCachedUser(), t(null, "SUCCESS"))
            })
        }, e.updateAttributes = function(t, r, i) {
            var o = this;
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return r(new Error("User is not authenticated"), null);
            this.client.request("UpdateUserAttributes", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                UserAttributes: t,
                ClientMetadata: i
            }, function(s, a) {
                return s ? r(s, null) : o.getUserData(function() {
                    return r(null, "SUCCESS", a)
                }, {
                    bypassCache: !0
                })
            })
        }, e.getUserAttributes = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t(new Error("User is not authenticated"), null);
            this.client.request("GetUser", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(r, i) {
                if (r) return t(r, null);
                for (var o = [], s = 0; s < i.UserAttributes.length; s++) {
                    var a = {
                            Name: i.UserAttributes[s].Name,
                            Value: i.UserAttributes[s].Value
                        },
                        l = new Vu(a);
                    o.push(l)
                }
                return t(null, o)
            })
        }, e.getMFAOptions = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t(new Error("User is not authenticated"), null);
            this.client.request("GetUser", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(r, i) {
                return r ? t(r, null) : t(null, i.MFAOptions)
            })
        }, e.createGetUserRequest = function() {
            return this.client.promisifyRequest("GetUser", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            })
        }, e.refreshSessionIfPossible = function(t) {
            var r = this;
            return t === void 0 && (t = {}), new Promise(function(i) {
                var o = r.signInUserSession.getRefreshToken();
                o && o.getToken() ? r.refreshSession(o, i, t.clientMetadata) : i()
            })
        }, e.getUserData = function(t, r) {
            var i = this;
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return this.clearCachedUserData(), t(new Error("User is not authenticated"), null);
            var o = this.getUserDataFromCache();
            if (o)
                if (this.isFetchUserDataAndTokenRequired(r)) this.fetchUserData().then(function(s) {
                    return i.refreshSessionIfPossible(r).then(function() {
                        return s
                    })
                }).then(function(s) {
                    return t(null, s)
                }).catch(t);
                else try {
                    return void t(null, JSON.parse(o))
                } catch (s) {
                    return this.clearCachedUserData(), void t(s, null)
                } else this.fetchUserData().then(function(s) {
                    t(null, s)
                }).catch(t)
        }, e.getUserDataFromCache = function() {
            return this.storage.getItem(this.userDataKey)
        }, e.isFetchUserDataAndTokenRequired = function(t) {
            var r = (t || {}).bypassCache;
            return r !== void 0 && r
        }, e.fetchUserData = function() {
            var t = this;
            return this.createGetUserRequest().then(function(r) {
                return t.cacheUserData(r), r
            })
        }, e.deleteAttributes = function(t, r) {
            var i = this;
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return r(new Error("User is not authenticated"), null);
            this.client.request("DeleteUserAttributes", {
                UserAttributeNames: t,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(o) {
                return o ? r(o, null) : i.getUserData(function() {
                    return r(null, "SUCCESS")
                }, {
                    bypassCache: !0
                })
            })
        }, e.resendConfirmationCode = function(t, r) {
            var i = {
                ClientId: this.pool.getClientId(),
                Username: this.username,
                ClientMetadata: r
            };
            this.client.request("ResendConfirmationCode", i, function(o, s) {
                return o ? t(o, null) : t(null, s)
            })
        }, e.getSession = function(t, r) {
            if (r === void 0 && (r = {}), this.username == null) return t(new Error("Username is null. Cannot retrieve a new session"), null);
            if (this.signInUserSession != null && this.signInUserSession.isValid()) return t(null, this.signInUserSession);
            var i = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username,
                o = i + ".idToken",
                s = i + ".accessToken",
                a = i + ".refreshToken",
                l = i + ".clockDrift";
            if (this.storage.getItem(o)) {
                var d = new YE({
                        IdToken: this.storage.getItem(o)
                    }),
                    c = new JE({
                        AccessToken: this.storage.getItem(s)
                    }),
                    h = new XE({
                        RefreshToken: this.storage.getItem(a)
                    }),
                    f = parseInt(this.storage.getItem(l), 0) || 0,
                    g = new QE({
                        IdToken: d,
                        AccessToken: c,
                        RefreshToken: h,
                        ClockDrift: f
                    });
                if (g.isValid()) return this.signInUserSession = g, t(null, this.signInUserSession);
                if (!h.getToken()) return t(new Error("Cannot retrieve a new session. Please authenticate."), null);
                this.refreshSession(h, t, r.clientMetadata)
            } else t(new Error("Local storage is missing an ID Token, Please authenticate"), null)
        }, e.refreshSession = function(t, r, i) {
            var o = this,
                s = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(r) : r,
                a = {};
            a.REFRESH_TOKEN = t.getToken();
            var l = "CognitoIdentityServiceProvider." + this.pool.getClientId(),
                d = l + ".LastAuthUser";
            if (this.storage.getItem(d)) {
                this.username = this.storage.getItem(d);
                var c = l + "." + this.username + ".deviceKey";
                this.deviceKey = this.storage.getItem(c), a.DEVICE_KEY = this.deviceKey
            }
            var h = {
                ClientId: this.pool.getClientId(),
                AuthFlow: "REFRESH_TOKEN_AUTH",
                AuthParameters: a,
                ClientMetadata: i
            };
            this.getUserContextData() && (h.UserContextData = this.getUserContextData()), this.client.request("InitiateAuth", h, function(f, g) {
                if (f) return f.code === "NotAuthorizedException" && o.clearCachedUser(), s(f, null);
                if (g) {
                    var p = g.AuthenticationResult;
                    return Object.prototype.hasOwnProperty.call(p, "RefreshToken") || (p.RefreshToken = t.getToken()), o.signInUserSession = o.getCognitoUserSession(p), o.cacheTokens(), s(null, o.signInUserSession)
                }
            })
        }, e.cacheTokens = function() {
            var t = "CognitoIdentityServiceProvider." + this.pool.getClientId(),
                r = t + "." + this.username + ".idToken",
                i = t + "." + this.username + ".accessToken",
                o = t + "." + this.username + ".refreshToken",
                s = t + "." + this.username + ".clockDrift",
                a = t + ".LastAuthUser";
            this.storage.setItem(r, this.signInUserSession.getIdToken().getJwtToken()), this.storage.setItem(i, this.signInUserSession.getAccessToken().getJwtToken()), this.storage.setItem(o, this.signInUserSession.getRefreshToken().getToken()), this.storage.setItem(s, "" + this.signInUserSession.getClockDrift()), this.storage.setItem(a, this.username)
        }, e.cacheUserData = function(t) {
            this.storage.setItem(this.userDataKey, JSON.stringify(t))
        }, e.clearCachedUserData = function() {
            this.storage.removeItem(this.userDataKey)
        }, e.clearCachedUser = function() {
            this.clearCachedTokens(), this.clearCachedUserData()
        }, e.cacheDeviceKeyAndPassword = function() {
            var t = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username,
                r = t + ".deviceKey",
                i = t + ".randomPasswordKey",
                o = t + ".deviceGroupKey";
            this.storage.setItem(r, this.deviceKey), this.storage.setItem(i, this.randomPassword), this.storage.setItem(o, this.deviceGroupKey)
        }, e.getCachedDeviceKeyAndPassword = function() {
            var t = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username,
                r = t + ".deviceKey",
                i = t + ".randomPasswordKey",
                o = t + ".deviceGroupKey";
            this.storage.getItem(r) && (this.deviceKey = this.storage.getItem(r), this.randomPassword = this.storage.getItem(i), this.deviceGroupKey = this.storage.getItem(o))
        }, e.clearCachedDeviceKeyAndPassword = function() {
            var t = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username,
                r = t + ".deviceKey",
                i = t + ".randomPasswordKey",
                o = t + ".deviceGroupKey";
            this.storage.removeItem(r), this.storage.removeItem(i), this.storage.removeItem(o)
        }, e.clearCachedTokens = function() {
            var t = "CognitoIdentityServiceProvider." + this.pool.getClientId(),
                r = t + "." + this.username + ".idToken",
                i = t + "." + this.username + ".accessToken",
                o = t + "." + this.username + ".refreshToken",
                s = t + ".LastAuthUser",
                a = t + "." + this.username + ".clockDrift";
            this.storage.removeItem(r), this.storage.removeItem(i), this.storage.removeItem(o), this.storage.removeItem(s), this.storage.removeItem(a)
        }, e.getCognitoUserSession = function(t) {
            var r = new YE(t),
                i = new JE(t),
                o = new XE(t);
            return new QE({
                IdToken: r,
                AccessToken: i,
                RefreshToken: o
            })
        }, e.forgotPassword = function(t, r) {
            var i = {
                ClientId: this.pool.getClientId(),
                Username: this.username,
                ClientMetadata: r
            };
            this.getUserContextData() && (i.UserContextData = this.getUserContextData()), this.client.request("ForgotPassword", i, function(o, s) {
                return o ? t.onFailure(o) : typeof t.inputVerificationCode == "function" ? t.inputVerificationCode(s) : t.onSuccess(s)
            })
        }, e.confirmPassword = function(t, r, i, o) {
            var s = {
                ClientId: this.pool.getClientId(),
                Username: this.username,
                ConfirmationCode: t,
                Password: r,
                ClientMetadata: o
            };
            this.getUserContextData() && (s.UserContextData = this.getUserContextData()), this.client.request("ConfirmForgotPassword", s, function(a) {
                return a ? i.onFailure(a) : i.onSuccess("SUCCESS")
            })
        }, e.getAttributeVerificationCode = function(t, r, i) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return r.onFailure(new Error("User is not authenticated"));
            this.client.request("GetUserAttributeVerificationCode", {
                AttributeName: t,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                ClientMetadata: i
            }, function(o, s) {
                return o ? r.onFailure(o) : typeof r.inputVerificationCode == "function" ? r.inputVerificationCode(s) : r.onSuccess("SUCCESS")
            })
        }, e.verifyAttribute = function(t, r, i) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return i.onFailure(new Error("User is not authenticated"));
            this.client.request("VerifyUserAttribute", {
                AttributeName: t,
                Code: r,
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(o) {
                return o ? i.onFailure(o) : i.onSuccess("SUCCESS")
            })
        }, e.getDevice = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t.onFailure(new Error("User is not authenticated"));
            this.client.request("GetDevice", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                DeviceKey: this.deviceKey
            }, function(r, i) {
                return r ? t.onFailure(r) : t.onSuccess(i)
            })
        }, e.forgetSpecificDevice = function(t, r) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return r.onFailure(new Error("User is not authenticated"));
            this.client.request("ForgetDevice", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                DeviceKey: t
            }, function(i) {
                return i ? r.onFailure(i) : r.onSuccess("SUCCESS")
            })
        }, e.forgetDevice = function(t) {
            var r = this;
            this.forgetSpecificDevice(this.deviceKey, {
                onFailure: t.onFailure,
                onSuccess: u(function(i) {
                    return r.deviceKey = null, r.deviceGroupKey = null, r.randomPassword = null, r.clearCachedDeviceKeyAndPassword(), t.onSuccess(i)
                }, "onSuccess")
            })
        }, e.setDeviceStatusRemembered = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t.onFailure(new Error("User is not authenticated"));
            this.client.request("UpdateDeviceStatus", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                DeviceKey: this.deviceKey,
                DeviceRememberedStatus: "remembered"
            }, function(r) {
                return r ? t.onFailure(r) : t.onSuccess("SUCCESS")
            })
        }, e.setDeviceStatusNotRemembered = function(t) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t.onFailure(new Error("User is not authenticated"));
            this.client.request("UpdateDeviceStatus", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                DeviceKey: this.deviceKey,
                DeviceRememberedStatus: "not_remembered"
            }, function(r) {
                return r ? t.onFailure(r) : t.onSuccess("SUCCESS")
            })
        }, e.listDevices = function(t, r, i) {
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return i.onFailure(new Error("User is not authenticated"));
            var o = {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                Limit: t
            };
            r && (o.PaginationToken = r), this.client.request("ListDevices", o, function(s, a) {
                return s ? i.onFailure(s) : i.onSuccess(a)
            })
        }, e.globalSignOut = function(t) {
            var r = this;
            if (this.signInUserSession == null || !this.signInUserSession.isValid()) return t.onFailure(new Error("User is not authenticated"));
            this.client.request("GlobalSignOut", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(i) {
                return i ? t.onFailure(i) : (r.clearCachedUser(), t.onSuccess("SUCCESS"))
            })
        }, e.signOut = function(t) {
            var r = this;
            t && typeof t == "function" ? this.getSession(function(i, o) {
                if (i) return t(i);
                r.revokeTokens(function(s) {
                    r.cleanClientData(), t(s)
                })
            }) : this.cleanClientData()
        }, e.revokeTokens = function(t) {
            if (t === void 0 && (t = u(function() {}, "e")), typeof t != "function") throw new Error("Invalid revokeTokenCallback. It should be a function.");
            if (!this.signInUserSession) return t(new Error("User is not authenticated"));
            if (!this.signInUserSession.getAccessToken()) return t(new Error("No Access token available"));
            var r = this.signInUserSession.getRefreshToken().getToken(),
                i = this.signInUserSession.getAccessToken();
            if (this.isSessionRevocable(i) && r) return this.revokeToken({
                token: r,
                callback: t
            });
            t()
        }, e.isSessionRevocable = function(t) {
            if (t && typeof t.decodePayload == "function") try {
                return !!t.decodePayload().origin_jti
            } catch (r) {}
            return !1
        }, e.cleanClientData = function() {
            this.signInUserSession = null, this.clearCachedUser()
        }, e.revokeToken = function(t) {
            var r = t.token,
                i = t.callback;
            this.client.requestWithRetry("RevokeToken", {
                Token: r,
                ClientId: this.pool.getClientId()
            }, function(o) {
                if (o) return i(o);
                i()
            })
        }, e.sendMFASelectionAnswer = function(t, r) {
            var i = this,
                o = {};
            o.USERNAME = this.username, o.ANSWER = t;
            var s = {
                ChallengeName: "SELECT_MFA_TYPE",
                ChallengeResponses: o,
                ClientId: this.pool.getClientId(),
                Session: this.Session
            };
            this.getUserContextData() && (s.UserContextData = this.getUserContextData()), this.client.request("RespondToAuthChallenge", s, function(a, l) {
                return a ? r.onFailure(a) : (i.Session = l.Session, t === "SMS_MFA" ? r.mfaRequired(l.ChallengeName, l.ChallengeParameters) : t === "SOFTWARE_TOKEN_MFA" ? r.totpRequired(l.ChallengeName, l.ChallengeParameters) : void 0)
            })
        }, e.getUserContextData = function() {
            return this.pool.getUserContextData(this.username)
        }, e.associateSoftwareToken = function(t) {
            var r = this;
            this.signInUserSession != null && this.signInUserSession.isValid() ? this.client.request("AssociateSoftwareToken", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
            }, function(i, o) {
                return i ? t.onFailure(i) : t.associateSecretCode(o.SecretCode)
            }) : this.client.request("AssociateSoftwareToken", {
                Session: this.Session
            }, function(i, o) {
                return i ? t.onFailure(i) : (r.Session = o.Session, t.associateSecretCode(o.SecretCode))
            })
        }, e.verifySoftwareToken = function(t, r, i) {
            var o = this;
            this.signInUserSession != null && this.signInUserSession.isValid() ? this.client.request("VerifySoftwareToken", {
                AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
                UserCode: t,
                FriendlyDeviceName: r
            }, function(s, a) {
                return s ? i.onFailure(s) : i.onSuccess(a)
            }) : this.client.request("VerifySoftwareToken", {
                Session: this.Session,
                UserCode: t,
                FriendlyDeviceName: r
            }, function(s, a) {
                if (s) return i.onFailure(s);
                o.Session = a.Session;
                var l = {};
                l.USERNAME = o.username;
                var d = {
                    ChallengeName: "MFA_SETUP",
                    ClientId: o.pool.getClientId(),
                    ChallengeResponses: l,
                    Session: o.Session
                };
                o.getUserContextData() && (d.UserContextData = o.getUserContextData()), o.client.request("RespondToAuthChallenge", d, function(c, h) {
                    return c ? i.onFailure(c) : (o.signInUserSession = o.getCognitoUserSession(h.AuthenticationResult), o.cacheTokens(), i.onSuccess(o.signInUserSession))
                })
            })
        }, n
    }();

function us() {}
u(us, "$r");
us.prototype.userAgent = BL.userAgent;
var BN = u(function(n) {
    us.framework = n
}, "Yr");

function t_(n) {
    var e = typeof Map == "function" ? new Map : void 0;
    return t_ = u(function(t) {
        if (t === null || (r = t, Function.toString.call(r).indexOf("[native code]") === -1)) return t;
        var r;
        if (typeof t != "function") throw new TypeError("Super expression must either be null or a function");
        if (e !== void 0) {
            if (e.has(t)) return e.get(t);
            e.set(t, i)
        }

        function i() {
            return n_(t, arguments, r_(this).constructor)
        }
        return u(i, "r"), i.prototype = Object.create(t.prototype, {
            constructor: {
                value: i,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), rh(i, t)
    }, "Zr"), t_(n)
}
u(t_, "Zr");

function n_(n, e, t) {
    return n_ = function() {
        if (typeof Reflect == "undefined" || !Reflect.construct || Reflect.construct.sham) return !1;
        if (typeof Proxy == "function") return !0;
        try {
            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})), !0
        } catch (r) {
            return !1
        }
    }() ? Reflect.construct.bind() : function(r, i, o) {
        var s = [null];
        s.push.apply(s, i);
        var a = new(Function.bind.apply(r, s));
        return o && rh(a, o.prototype), a
    }, n_.apply(null, arguments)
}
u(n_, "Xr");

function rh(n, e) {
    return rh = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, r) {
        return t.__proto__ = r, t
    }, rh(n, e)
}
u(rh, "Qr");

function r_(n) {
    return r_ = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
        return e.__proto__ || Object.getPrototypeOf(e)
    }, r_(n)
}
u(r_, "ei");
var RH = function(n) {
        var e, t;

        function r(i, o, s, a) {
            var l;
            return (l = n.call(this, i) || this).code = o, l.name = s, l.statusCode = a, l
        }
        return u(r, "r"), t = n, (e = r).prototype = Object.create(t.prototype), e.prototype.constructor = e, rh(e, t), r
    }(t_(Error)),
    OH = function() {
        function n(t, r, i) {
            this.endpoint = r || "https://cognito-idp." + t + ".amazonaws.com/";
            var o = (i || {}).credentials;
            this.fetchOptions = o ? {
                credentials: o
            } : {}
        }
        u(n, "e");
        var e = n.prototype;
        return e.promisifyRequest = function(t, r) {
            var i = this;
            return new Promise(function(o, s) {
                i.request(t, r, function(a, l) {
                    a ? s(new RH(a.message, a.code, a.name, a.statusCode)) : o(l)
                })
            })
        }, e.requestWithRetry = function(t, r, i) {
            var o, s, a, l = this;
            (o = u(function(d) {
                return new Promise(function(c, h) {
                    l.request(t, d, function(f, g) {
                        f ? h(f) : c(g)
                    })
                })
            }, "r"), s = [r], a = 5e3, $L(o, s, function(d) {
                var c = 100,
                    h = 100;
                return function(f) {
                    var g = Math.pow(2, f) * c + h * Math.random();
                    return !(g > d) && g
                }
            }(a))).then(function(d) {
                return i(null, d)
            }).catch(function(d) {
                return i(d)
            })
        }, e.request = function(t, r, i) {
            var o, s, a, l = {
                    "Content-Type": "application/x-amz-json-1.1",
                    "X-Amz-Target": "AWSCognitoIdentityProviderService." + t,
                    "X-Amz-User-Agent": (o = us.category ? " " + us.category : "", s = us.framework ? " framework/" + us.framework : "", "" + us.prototype.userAgent + o + s),
                    "Cache-Control": "no-store"
                },
                d = Object.assign({}, this.fetchOptions, {
                    headers: l,
                    method: "POST",
                    mode: "cors",
                    body: JSON.stringify(r)
                });
            fetch(this.endpoint, d).then(function(c) {
                return a = c, c
            }, function(c) {
                throw c instanceof TypeError ? new Error("Network error") : c
            }).then(function(c) {
                return c.json().catch(function() {
                    return {}
                })
            }).then(function(c) {
                if (a.ok) return i(null, c);
                var h = (c.__type || c.code).split("#").pop(),
                    f = new Error(c.message || c.Message || null);
                return f.name = h, f.code = h, i(f)
            }).catch(function(c) {
                if (a && a.headers && a.headers.get("x-amzn-errortype")) try {
                    var h = a.headers.get("x-amzn-errortype").split(":")[0],
                        f = new Error(a.status ? a.status.toString() : null);
                    return f.code = h, f.name = h, f.statusCode = a.status, i(f)
                } catch (g) {
                    return i(c)
                } else c instanceof Error && c.message === "Network error" && (c.code = "NetworkError");
                return i(c)
            })
        }, n
    }(),
    Wp = {
        debug: u(function() {}, "debug")
    },
    DH = u(function(n) {
        return n && n.nonRetryable
    }, "ii");

function $L(n, e, t, r) {
    if (r === void 0 && (r = 1), typeof n != "function") throw Error("functionToRetry must be a function");
    return Wp.debug(n.name + " attempt #" + r + " with args: " + JSON.stringify(e)), n.apply(void 0, e).catch(function(i) {
        if (Wp.debug("error on " + n.name, i), DH(i)) throw Wp.debug(n.name + " non retryable error", i), i;
        var o = t(r, e, i);
        if (Wp.debug(n.name + " retrying in " + o + " ms"), o !== !1) return new Promise(function(s) {
            return setTimeout(s, o)
        }).then(function() {
            return $L(n, e, t, r + 1)
        });
        throw i
    })
}
u($L, "oi");
var VL, NH = function() {
        function n(t, r) {
            var i = t || {},
                o = i.UserPoolId,
                s = i.ClientId,
                a = i.endpoint,
                l = i.fetchOptions,
                d = i.AdvancedSecurityDataCollectionFlag;
            if (!o || !s) throw new Error("Both UserPoolId and ClientId are required.");
            if (o.length > 55 || !/^[\w-]+_[0-9a-zA-Z]+$/.test(o)) throw new Error("Invalid UserPoolId format.");
            var c = o.split("_")[0];
            this.userPoolId = o, this.clientId = s, this.client = new OH(c, a, l), this.advancedSecurityDataCollectionFlag = d !== !1, this.storage = t.Storage || new jL().getStorage(), r && (this.wrapRefreshSessionCallback = r)
        }
        u(n, "e");
        var e = n.prototype;
        return e.getUserPoolId = function() {
            return this.userPoolId
        }, e.getUserPoolName = function() {
            return this.getUserPoolId().split("_")[1]
        }, e.getClientId = function() {
            return this.clientId
        }, e.signUp = function(t, r, i, o, s, a) {
            var l = this,
                d = {
                    ClientId: this.clientId,
                    Username: t,
                    Password: r,
                    UserAttributes: i,
                    ValidationData: o,
                    ClientMetadata: a
                };
            this.getUserContextData(t) && (d.UserContextData = this.getUserContextData(t)), this.client.request("SignUp", d, function(c, h) {
                if (c) return s(c, null);
                var f = {
                        Username: t,
                        Pool: l,
                        Storage: l.storage
                    },
                    g = {
                        user: new e_(f),
                        userConfirmed: h.UserConfirmed,
                        userSub: h.UserSub,
                        codeDeliveryDetails: h.CodeDeliveryDetails
                    };
                return s(null, g)
            })
        }, e.getCurrentUser = function() {
            var t = "CognitoIdentityServiceProvider." + this.clientId + ".LastAuthUser",
                r = this.storage.getItem(t);
            if (r) {
                var i = {
                    Username: r,
                    Pool: this,
                    Storage: this.storage
                };
                return new e_(i)
            }
            return null
        }, e.getUserContextData = function(t) {
            if (typeof AmazonCognitoAdvancedSecurityData != "undefined") {
                var r = AmazonCognitoAdvancedSecurityData;
                if (this.advancedSecurityDataCollectionFlag) {
                    var i = r.getData(t, this.userPoolId, this.clientId);
                    if (i) return {
                        EncodedData: i
                    }
                }
                return {}
            }
        }, n
    }(),
    LH = {
        exports: {}
    };
VL = u(function() {
    function n() {
        for (var t = 0, r = {}; t < arguments.length; t++) {
            var i = arguments[t];
            for (var o in i) r[o] = i[o]
        }
        return r
    }
    u(n, "e");

    function e(t) {
        return t.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
    }
    return u(e, "t"), u(function t(r) {
        function i() {}
        u(i, "i");

        function o(a, l, d) {
            if (typeof document != "undefined") {
                typeof(d = n({
                    path: "/"
                }, i.defaults, d)).expires == "number" && (d.expires = new Date(1 * new Date + 864e5 * d.expires)), d.expires = d.expires ? d.expires.toUTCString() : "";
                try {
                    var c = JSON.stringify(l);
                    /^[\{\[]/.test(c) && (l = c)
                } catch (g) {}
                l = r.write ? r.write(l, a) : encodeURIComponent(String(l)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), a = encodeURIComponent(String(a)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                var h = "";
                for (var f in d) d[f] && (h += "; " + f, d[f] !== !0 && (h += "=" + d[f].split(";")[0]));
                return document.cookie = a + "=" + l + h
            }
        }
        u(o, "o");

        function s(a, l) {
            if (typeof document != "undefined") {
                for (var d = {}, c = document.cookie ? document.cookie.split("; ") : [], h = 0; h < c.length; h++) {
                    var f = c[h].split("="),
                        g = f.slice(1).join("=");
                    l || g.charAt(0) !== '"' || (g = g.slice(1, -1));
                    try {
                        var p = e(f[0]);
                        if (g = (r.read || r)(g, p) || e(g), l) try {
                            g = JSON.parse(g)
                        } catch (y) {}
                        if (d[p] = g, a === p) break
                    } catch (y) {}
                }
                return a ? d[a] : d
            }
        }
        return u(s, "s"), i.set = o, i.get = function(a) {
            return s(a, !1)
        }, i.getJSON = function(a) {
            return s(a, !0)
        }, i.remove = function(a, l) {
            o(a, "", n(l, {
                expires: -1
            }))
        }, i.defaults = {}, i.withConverter = t, i
    }, "n")(function() {})
}, "si");
var Md = LH.exports = VL(),
    xH = function() {
        function n(t) {
            if (t === void 0 && (t = {}), t.domain && (this.domain = t.domain), t.path ? this.path = t.path : this.path = "/", Object.prototype.hasOwnProperty.call(t, "expires") ? this.expires = t.expires : this.expires = 365, Object.prototype.hasOwnProperty.call(t, "secure") ? this.secure = t.secure : this.secure = !0, Object.prototype.hasOwnProperty.call(t, "sameSite")) {
                if (!["strict", "lax", "none"].includes(t.sameSite)) throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');
                if (t.sameSite === "none" && !this.secure) throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");
                this.sameSite = t.sameSite
            } else this.sameSite = null
        }
        u(n, "e");
        var e = n.prototype;
        return e.setItem = function(t, r) {
            var i = {
                path: this.path,
                expires: this.expires,
                domain: this.domain,
                secure: this.secure
            };
            return this.sameSite && (i.sameSite = this.sameSite), Md.set(t, r, i), Md.get(t)
        }, e.getItem = function(t) {
            return Md.get(t)
        }, e.removeItem = function(t) {
            var r = {
                path: this.path,
                expires: this.expires,
                domain: this.domain,
                secure: this.secure
            };
            return this.sameSite && (r.sameSite = this.sameSite), Md.remove(t, r)
        }, e.clear = function() {
            for (var t = Md.get(), r = Object.keys(t).length, i = 0; i < r; ++i) this.removeItem(Object.keys(t)[i]);
            return {}
        }, n
    }(),
    i_ = {
        exports: {}
    };
(function(n, e) {
    (function(t) {
        var r = e && !e.nodeType && e,
            i = n && !n.nodeType && n,
            o = typeof Cn == "object" && Cn;
        o.global !== o && o.window !== o && o.self !== o || (t = o);
        var s, a, l = 2147483647,
            d = 36,
            c = 1,
            h = 26,
            f = 38,
            g = 700,
            p = 72,
            y = 128,
            b = "-",
            E = /^xn--/,
            S = /[^\x20-\x7E]/,
            _ = /[\x2E\u3002\uFF0E\uFF61]/g,
            I = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input"
            },
            x = d - c,
            L = Math.floor,
            U = String.fromCharCode;

        function N(ve) {
            throw RangeError(I[ve])
        }
        u(N, "I");

        function j(ve, Ee) {
            for (var be = ve.length, De = []; be--;) De[be] = Ee(ve[be]);
            return De
        }
        u(j, "C");

        function q(ve, Ee) {
            var be = ve.split("@"),
                De = "";
            return be.length > 1 && (De = be[0] + "@", ve = be[1]), De + j((ve = ve.replace(_, ".")).split("."), Ee).join(".")
        }
        u(q, "E");

        function fe(ve) {
            for (var Ee, be, De = [], Pe = 0, nt = ve.length; Pe < nt;)(Ee = ve.charCodeAt(Pe++)) >= 55296 && Ee <= 56319 && Pe < nt ? (64512 & (be = ve.charCodeAt(Pe++))) == 56320 ? De.push(((1023 & Ee) << 10) + (1023 & be) + 65536) : (De.push(Ee), Pe--) : De.push(Ee);
            return De
        }
        u(fe, "T");

        function K(ve) {
            return j(ve, function(Ee) {
                var be = "";
                return Ee > 65535 && (be += U((Ee -= 65536) >>> 10 & 1023 | 55296), Ee = 56320 | 1023 & Ee), be += U(Ee)
            }).join("")
        }
        u(K, "U");

        function ae(ve, Ee) {
            return ve + 22 + 75 * (ve < 26) - ((Ee != 0) << 5)
        }
        u(ae, "k");

        function Z(ve, Ee, be) {
            var De = 0;
            for (ve = be ? L(ve / g) : ve >> 1, ve += L(ve / Ee); ve > x * h >> 1; De += d) ve = L(ve / x);
            return L(De + (x + 1) * ve / (ve + f))
        }
        u(Z, "P");

        function ne(ve) {
            var Ee, be, De, Pe, nt, re, B, P, m, v, w, A = [],
                R = ve.length,
                O = 0,
                W = y,
                ie = p;
            for ((be = ve.lastIndexOf(b)) < 0 && (be = 0), De = 0; De < be; ++De) ve.charCodeAt(De) >= 128 && N("not-basic"), A.push(ve.charCodeAt(De));
            for (Pe = be > 0 ? be + 1 : 0; Pe < R;) {
                for (nt = O, re = 1, B = d; Pe >= R && N("invalid-input"), ((P = (w = ve.charCodeAt(Pe++)) - 48 < 10 ? w - 22 : w - 65 < 26 ? w - 65 : w - 97 < 26 ? w - 97 : d) >= d || P > L((l - O) / re)) && N("overflow"), O += P * re, !(P < (m = B <= ie ? c : B >= ie + h ? h : B - ie)); B += d) re > L(l / (v = d - m)) && N("overflow"), re *= v;
                ie = Z(O - nt, Ee = A.length + 1, nt == 0), L(O / Ee) > l - W && N("overflow"), W += L(O / Ee), O %= Ee, A.splice(O++, 0, W)
            }
            return K(A)
        }
        u(ne, "O");

        function ue(ve) {
            var Ee, be, De, Pe, nt, re, B, P, m, v, w, A, R, O, W, ie = [];
            for (A = (ve = fe(ve)).length, Ee = y, be = 0, nt = p, re = 0; re < A; ++re)(w = ve[re]) < 128 && ie.push(U(w));
            for (De = Pe = ie.length, Pe && ie.push(b); De < A;) {
                for (B = l, re = 0; re < A; ++re)(w = ve[re]) >= Ee && w < B && (B = w);
                for (B - Ee > L((l - be) / (R = De + 1)) && N("overflow"), be += (B - Ee) * R, Ee = B, re = 0; re < A; ++re)
                    if ((w = ve[re]) < Ee && ++be > l && N("overflow"), w == Ee) {
                        for (P = be, m = d; !(P < (v = m <= nt ? c : m >= nt + h ? h : m - nt)); m += d) W = P - v, O = d - v, ie.push(U(ae(v + W % O, 0))), P = L(W / O);
                        ie.push(U(ae(P, 0))), nt = Z(be, R, De == Pe), be = 0, ++De
                    }++ be, ++Ee
            }
            return ie.join("")
        }
        if (u(ue, "R"), s = {
                version: "1.3.2",
                ucs2: {
                    decode: fe,
                    encode: K
                },
                decode: ne,
                encode: ue,
                toASCII: u(function(ve) {
                    return q(ve, function(Ee) {
                        return S.test(Ee) ? "xn--" + ue(Ee) : Ee
                    })
                }, "toASCII"),
                toUnicode: u(function(ve) {
                    return q(ve, function(Ee) {
                        return E.test(Ee) ? ne(Ee.slice(4).toLowerCase()) : Ee
                    })
                }, "toUnicode")
            }, r && i)
            if (n.exports == r) i.exports = s;
            else
                for (a in s) s.hasOwnProperty(a) && (r[a] = s[a]);
        else t.punycode = s
    })(Cn)
})(i_, i_.exports);
var PH = i_.exports,
    Bd = {};

function kH(n, e) {
    return Object.prototype.hasOwnProperty.call(n, e)
}
u(kH, "pi");
var Fd = u(function(n) {
    switch (typeof n) {
        case "string":
            return n;
        case "boolean":
            return n ? "true" : "false";
        case "number":
            return isFinite(n) ? n : "";
        default:
            return ""
    }
}, "gi");
Bd.decode = Bd.parse = function(n, e, t, r) {
    e = e || "&", t = t || "=";
    var i = {};
    if (typeof n != "string" || n.length === 0) return i;
    var o = /\+/g;
    n = n.split(e);
    var s = 1e3;
    r && typeof r.maxKeys == "number" && (s = r.maxKeys);
    var a = n.length;
    s > 0 && a > s && (a = s);
    for (var l = 0; l < a; ++l) {
        var d, c, h, f, g = n[l].replace(o, "%20"),
            p = g.indexOf(t);
        p >= 0 ? (d = g.substr(0, p), c = g.substr(p + 1)) : (d = g, c = ""), h = decodeURIComponent(d), f = decodeURIComponent(c), kH(i, h) ? Array.isArray(i[h]) ? i[h].push(f) : i[h] = [i[h], f] : i[h] = f
    }
    return i
}, Bd.encode = Bd.stringify = function(n, e, t, r) {
    return e = e || "&", t = t || "=", n === null && (n = void 0), typeof n == "object" ? Object.keys(n).map(function(i) {
        var o = encodeURIComponent(Fd(i)) + t;
        return Array.isArray(n[i]) ? n[i].map(function(s) {
            return o + encodeURIComponent(Fd(s))
        }).join(e) : o + encodeURIComponent(Fd(n[i]))
    }).join(e) : r ? encodeURIComponent(Fd(r)) + t + encodeURIComponent(Fd(n)) : ""
};
var UH = PH,
    bo = {
        isString: u(function(n) {
            return typeof n == "string"
        }, "isString"),
        isObject: u(function(n) {
            return typeof n == "object" && n !== null
        }, "isObject"),
        isNull: u(function(n) {
            return n === null
        }, "isNull"),
        isNullOrUndefined: u(function(n) {
            return n == null
        }, "isNullOrUndefined")
    },
    as = HL;

function To() {
    this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null
}
u(To, "wi");
var MH = /^([a-z0-9.+-]+:)/i,
    FH = /:[0-9]*$/,
    BH = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
    jH = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", `
`, "	"]),
    o_ = ["'"].concat(jH),
    jN = ["%", "/", "?", ";", "#"].concat(o_),
    $N = ["/", "?", "#"],
    VN = /^[+a-z0-9A-Z_-]{0,63}$/,
    $H = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    VH = {
        javascript: !0,
        "javascript:": !0
    },
    BE = {
        javascript: !0,
        "javascript:": !0
    },
    ju = {
        http: !0,
        https: !0,
        ftp: !0,
        gopher: !0,
        file: !0,
        "http:": !0,
        "https:": !0,
        "ftp:": !0,
        "gopher:": !0,
        "file:": !0
    },
    jE = Bd;

function HL(n, e, t) {
    if (n && bo.isObject(n) && n instanceof To) return n;
    var r = new To;
    return r.parse(n, e, t), r
}
u(HL, "Di");
To.prototype.parse = function(n, e, t) {
    if (!bo.isString(n)) throw new TypeError("Parameter 'url' must be a string, not " + typeof n);
    var r = n.indexOf("?"),
        i = r !== -1 && r < n.indexOf("#") ? "?" : "#",
        o = n.split(i);
    o[0] = o[0].replace(/\\/g, "/");
    var s = n = o.join(i);
    if (s = s.trim(), !t && n.split("#").length === 1) {
        var a = BH.exec(s);
        if (a) return this.path = s, this.href = s, this.pathname = a[1], a[2] ? (this.search = a[2], this.query = e ? jE.parse(this.search.substr(1)) : this.search.substr(1)) : e && (this.search = "", this.query = {}), this
    }
    var l = MH.exec(s);
    if (l) {
        var d = (l = l[0]).toLowerCase();
        this.protocol = d, s = s.substr(l.length)
    }
    if (t || l || s.match(/^\/\/[^@\/]+@[^@\/]+/)) {
        var c = s.substr(0, 2) === "//";
        !c || l && BE[l] || (s = s.substr(2), this.slashes = !0)
    }
    if (!BE[l] && (c || l && !ju[l])) {
        for (var h, f, g = -1, p = 0; p < $N.length; p++)(y = s.indexOf($N[p])) !== -1 && (g === -1 || y < g) && (g = y);
        for ((f = g === -1 ? s.lastIndexOf("@") : s.lastIndexOf("@", g)) !== -1 && (h = s.slice(0, f), s = s.slice(f + 1), this.auth = decodeURIComponent(h)), g = -1, p = 0; p < jN.length; p++) {
            var y;
            (y = s.indexOf(jN[p])) !== -1 && (g === -1 || y < g) && (g = y)
        }
        g === -1 && (g = s.length), this.host = s.slice(0, g), s = s.slice(g), this.parseHost(), this.hostname = this.hostname || "";
        var b = this.hostname[0] === "[" && this.hostname[this.hostname.length - 1] === "]";
        if (!b)
            for (var E = this.hostname.split(/\./), S = (p = 0, E.length); p < S; p++) {
                var _ = E[p];
                if (_ && !_.match(VN)) {
                    for (var I = "", x = 0, L = _.length; x < L; x++) _.charCodeAt(x) > 127 ? I += "x" : I += _[x];
                    if (!I.match(VN)) {
                        var U = E.slice(0, p),
                            N = E.slice(p + 1),
                            j = _.match($H);
                        j && (U.push(j[1]), N.unshift(j[2])), N.length && (s = "/" + N.join(".") + s), this.hostname = U.join(".");
                        break
                    }
                }
            }
        this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), b || (this.hostname = UH.toASCII(this.hostname));
        var q = this.port ? ":" + this.port : "",
            fe = this.hostname || "";
        this.host = fe + q, this.href += this.host, b && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), s[0] !== "/" && (s = "/" + s))
    }
    if (!VH[d])
        for (p = 0, S = o_.length; p < S; p++) {
            var K = o_[p];
            if (s.indexOf(K) !== -1) {
                var ae = encodeURIComponent(K);
                ae === K && (ae = escape(K)), s = s.split(K).join(ae)
            }
        }
    var Z = s.indexOf("#");
    Z !== -1 && (this.hash = s.substr(Z), s = s.slice(0, Z));
    var ne = s.indexOf("?");
    if (ne !== -1 ? (this.search = s.substr(ne), this.query = s.substr(ne + 1), e && (this.query = jE.parse(this.query)), s = s.slice(0, ne)) : e && (this.search = "", this.query = {}), s && (this.pathname = s), ju[d] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
        q = this.pathname || "";
        var ue = this.search || "";
        this.path = q + ue
    }
    return this.href = this.format(), this
}, To.prototype.format = function() {
    var n = this.auth || "";
    n && (n = (n = encodeURIComponent(n)).replace(/%3A/i, ":"), n += "@");
    var e = this.protocol || "",
        t = this.pathname || "",
        r = this.hash || "",
        i = !1,
        o = "";
    this.host ? i = n + this.host : this.hostname && (i = n + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]"), this.port && (i += ":" + this.port)), this.query && bo.isObject(this.query) && Object.keys(this.query).length && (o = jE.stringify(this.query));
    var s = this.search || o && "?" + o || "";
    return e && e.substr(-1) !== ":" && (e += ":"), this.slashes || (!e || ju[e]) && i !== !1 ? (i = "//" + (i || ""), t && t.charAt(0) !== "/" && (t = "/" + t)) : i || (i = ""), r && r.charAt(0) !== "#" && (r = "#" + r), s && s.charAt(0) !== "?" && (s = "?" + s), e + i + (t = t.replace(/[?#]/g, function(a) {
        return encodeURIComponent(a)
    })) + (s = s.replace("#", "%23")) + r
}, To.prototype.resolve = function(n) {
    return this.resolveObject(HL(n, !1, !0)).format()
}, To.prototype.resolveObject = function(n) {
    if (bo.isString(n)) {
        var e = new To;
        e.parse(n, !1, !0), n = e
    }
    for (var t = new To, r = Object.keys(this), i = 0; i < r.length; i++) {
        var o = r[i];
        t[o] = this[o]
    }
    if (t.hash = n.hash, n.href === "") return t.href = t.format(), t;
    if (n.slashes && !n.protocol) {
        for (var s = Object.keys(n), a = 0; a < s.length; a++) {
            var l = s[a];
            l !== "protocol" && (t[l] = n[l])
        }
        return ju[t.protocol] && t.hostname && !t.pathname && (t.path = t.pathname = "/"), t.href = t.format(), t
    }
    if (n.protocol && n.protocol !== t.protocol) {
        if (!ju[n.protocol]) {
            for (var d = Object.keys(n), c = 0; c < d.length; c++) {
                var h = d[c];
                t[h] = n[h]
            }
            return t.href = t.format(), t
        }
        if (t.protocol = n.protocol, n.host || BE[n.protocol]) t.pathname = n.pathname;
        else {
            for (var f = (n.pathname || "").split("/"); f.length && !(n.host = f.shift()););
            n.host || (n.host = ""), n.hostname || (n.hostname = ""), f[0] !== "" && f.unshift(""), f.length < 2 && f.unshift(""), t.pathname = f.join("/")
        }
        if (t.search = n.search, t.query = n.query, t.host = n.host || "", t.auth = n.auth, t.hostname = n.hostname || n.host, t.port = n.port, t.pathname || t.search) {
            var g = t.pathname || "",
                p = t.search || "";
            t.path = g + p
        }
        return t.slashes = t.slashes || n.slashes, t.href = t.format(), t
    }
    var y = t.pathname && t.pathname.charAt(0) === "/",
        b = n.host || n.pathname && n.pathname.charAt(0) === "/",
        E = b || y || t.host && n.pathname,
        S = E,
        _ = t.pathname && t.pathname.split("/") || [],
        I = (f = n.pathname && n.pathname.split("/") || [], t.protocol && !ju[t.protocol]);
    if (I && (t.hostname = "", t.port = null, t.host && (_[0] === "" ? _[0] = t.host : _.unshift(t.host)), t.host = "", n.protocol && (n.hostname = null, n.port = null, n.host && (f[0] === "" ? f[0] = n.host : f.unshift(n.host)), n.host = null), E = E && (f[0] === "" || _[0] === "")), b) t.host = n.host || n.host === "" ? n.host : t.host, t.hostname = n.hostname || n.hostname === "" ? n.hostname : t.hostname, t.search = n.search, t.query = n.query, _ = f;
    else if (f.length) _ || (_ = []), _.pop(), _ = _.concat(f), t.search = n.search, t.query = n.query;
    else if (!bo.isNullOrUndefined(n.search)) return I && (t.hostname = t.host = _.shift(), (j = !!(t.host && t.host.indexOf("@") > 0) && t.host.split("@")) && (t.auth = j.shift(), t.host = t.hostname = j.shift())), t.search = n.search, t.query = n.query, bo.isNull(t.pathname) && bo.isNull(t.search) || (t.path = (t.pathname ? t.pathname : "") + (t.search ? t.search : "")), t.href = t.format(), t;
    if (!_.length) return t.pathname = null, t.search ? t.path = "/" + t.search : t.path = null, t.href = t.format(), t;
    for (var x = _.slice(-1)[0], L = (t.host || n.host || _.length > 1) && (x === "." || x === "..") || x === "", U = 0, N = _.length; N >= 0; N--)(x = _[N]) === "." ? _.splice(N, 1) : x === ".." ? (_.splice(N, 1), U++) : U && (_.splice(N, 1), U--);
    if (!E && !S)
        for (; U--; U) _.unshift("..");
    !E || _[0] === "" || _[0] && _[0].charAt(0) === "/" || _.unshift(""), L && _.join("/").substr(-1) !== "/" && _.push("");
    var j, q = _[0] === "" || _[0] && _[0].charAt(0) === "/";
    return I && (t.hostname = t.host = q ? "" : _.length ? _.shift() : "", (j = !!(t.host && t.host.indexOf("@") > 0) && t.host.split("@")) && (t.auth = j.shift(), t.host = t.hostname = j.shift())), (E = E || t.host && _.length) && !q && _.unshift(""), _.length ? t.pathname = _.join("/") : (t.pathname = null, t.path = null), bo.isNull(t.pathname) && bo.isNull(t.search) || (t.path = (t.pathname ? t.pathname : "") + (t.search ? t.search : "")), t.auth = n.auth || t.auth, t.slashes = t.slashes || n.slashes, t.href = t.format(), t
}, To.prototype.parseHost = function() {
    var n = this.host,
        e = FH.exec(n);
    e && ((e = e[0]) !== ":" && (this.port = e.substr(1)), n = n.substr(0, n.length - e.length)), n && (this.hostname = n)
};
var An, HH = u(function(n) {
        var e = window.open(n, "_self");
        return e ? Promise.resolve(e) : Promise.reject()
    }, "Fi"),
    zH = typeof Symbol != "undefined" && typeof Symbol.for == "function" ? Symbol.for("amplify_default") : "@@amplify_default",
    $E = u(function(n, e, t) {
        Eo.dispatch("auth", {
            event: n,
            data: e,
            message: t
        }, "Auth", zH)
    }, "ji"),
    $u = new di("OAuth"),
    WH = function() {
        function n(e) {
            var t = e.config,
                r = e.cognitoClientId,
                i = e.scopes,
                o = i === void 0 ? [] : i;
            if (this._urlOpener = t.urlOpener || HH, this._config = t, this._cognitoClientId = r, !this.isValidScopes(o)) throw Error("scopes must be a String Array");
            this._scopes = o
        }
        return u(n, "e"), n.prototype.isValidScopes = function(e) {
            return Array.isArray(e) && e.every(function(t) {
                return typeof t == "string"
            })
        }, n.prototype.oauthSignIn = function(e, t, r, i, o, s) {
            e === void 0 && (e = "code"), o === void 0 && (o = cm.Cognito);
            var a = this._generateState(32),
                l = s ? a + "-" + s.split("").map(function(p) {
                    return p.charCodeAt(0).toString(16).padStart(2, "0")
                }).join("") : a;
            (function(p) {
                window.sessionStorage.setItem("oauth_state", p)
            })(l);
            var d, c = this._generateRandom(128);
            d = c, window.sessionStorage.setItem("ouath_pkce_key", d);
            var h = this._generateChallenge(c),
                f = this._scopes.join(" "),
                g = "https://" + t + "/oauth2/authorize?" + Object.entries(un(un({
                    redirect_uri: r,
                    response_type: e,
                    client_id: i,
                    identity_provider: o,
                    scope: f,
                    state: l
                }, e === "code" ? {
                    code_challenge: h
                } : {}), e === "code" ? {
                    code_challenge_method: "S256"
                } : {})).map(function(p) {
                    var y = Ur(p, 2),
                        b = y[0],
                        E = y[1];
                    return encodeURIComponent(b) + "=" + encodeURIComponent(E)
                }).join("&");
            $u.debug("Redirecting to " + g), this._urlOpener(g, r)
        }, n.prototype._handleCodeFlow = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i, o, s, a, l, d, c, h, f, g, p, y, b, E;
                return st(this, function(S) {
                    switch (S.label) {
                        case 0:
                            return t = (as(e).query || "").split("&").map(function(I) {
                                return I.split("=")
                            }).reduce(function(I, x) {
                                var L, U = Ur(x, 2),
                                    N = U[0],
                                    j = U[1];
                                return un(un({}, I), ((L = {})[N] = j, L))
                            }, {
                                code: void 0
                            }).code, r = as(e).pathname || "/", i = as(this._config.redirectSignIn).pathname || "/", t && r === i ? (o = "https://" + this._config.domain + "/oauth2/token", $E("codeFlow", {}, "Retrieving tokens from " + o), s = fa(this._config) ? this._cognitoClientId : this._config.clientID, a = fa(this._config) ? this._config.redirectSignIn : this._config.redirectUri, _ = window.sessionStorage.getItem("ouath_pkce_key"), window.sessionStorage.removeItem("ouath_pkce_key"), d = un({
                                grant_type: "authorization_code",
                                code: t,
                                client_id: s,
                                redirect_uri: a
                            }, (l = _) ? {
                                code_verifier: l
                            } : {}), $u.debug("Calling token endpoint: " + o + " with", d), c = Object.entries(d).map(function(I) {
                                var x = Ur(I, 2),
                                    L = x[0],
                                    U = x[1];
                                return encodeURIComponent(L) + "=" + encodeURIComponent(U)
                            }).join("&"), h = {
                                category: WE.Auth,
                                action: qE.FederatedSignIn
                            }, [4, fetch(o, {
                                method: "POST",
                                headers: (E = {
                                    "Content-Type": "application/x-www-form-urlencoded"
                                }, E["x-amz-user-agent"] = R_(h), E),
                                body: c
                            })]) : [2];
                        case 1:
                            return [4, S.sent().json()];
                        case 2:
                            if (f = S.sent(), g = f.access_token, p = f.refresh_token, y = f.id_token, b = f.error) throw new Error(b);
                            return [2, {
                                accessToken: g,
                                refreshToken: p,
                                idToken: y
                            }]
                    }
                    var _
                })
            })
        }, n.prototype._handleImplicitFlow = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i;
                return st(this, function(o) {
                    return t = (as(e).hash || "#").substr(1).split("&").map(function(s) {
                        return s.split("=")
                    }).reduce(function(s, a) {
                        var l, d = Ur(a, 2),
                            c = d[0],
                            h = d[1];
                        return un(un({}, s), ((l = {})[c] = h, l))
                    }, {
                        id_token: void 0,
                        access_token: void 0
                    }), r = t.id_token, i = t.access_token, $E("implicitFlow", {}, "Got tokens from " + e), $u.debug("Retrieving implicit tokens from " + e + " with"), [2, {
                        accessToken: i,
                        idToken: r,
                        refreshToken: null
                    }]
                })
            })
        }, n.prototype.handleAuthResponse = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i, o, s, a, l;
                return st(this, function(d) {
                    switch (d.label) {
                        case 0:
                            if (d.trys.push([0, 5, , 6]), t = e ? un(un({}, (as(e).hash || "#").substr(1).split("&").map(function(c) {
                                    return c.split("=")
                                }).reduce(function(c, h) {
                                    var f = Ur(h, 2),
                                        g = f[0],
                                        p = f[1];
                                    return c[g] = p, c
                                }, {})), (as(e).query || "").split("&").map(function(c) {
                                    return c.split("=")
                                }).reduce(function(c, h) {
                                    var f = Ur(h, 2),
                                        g = f[0],
                                        p = f[1];
                                    return c[g] = p, c
                                }, {})) : {}, r = t.error, i = t.error_description, r) throw new Error(i);
                            return o = this._validateState(t), $u.debug("Starting " + this._config.responseType + " flow with " + e), this._config.responseType !== "code" ? [3, 2] : (s = [{}], [4, this._handleCodeFlow(e)]);
                        case 1:
                            return [2, un.apply(void 0, [un.apply(void 0, s.concat([d.sent()])), {
                                state: o
                            }])];
                        case 2:
                            return a = [{}], [4, this._handleImplicitFlow(e)];
                        case 3:
                            return [2, un.apply(void 0, [un.apply(void 0, a.concat([d.sent()])), {
                                state: o
                            }])];
                        case 4:
                            return [3, 6];
                        case 5:
                            throw l = d.sent(), $u.debug("Error handling auth response.", l), l;
                        case 6:
                            return [2]
                    }
                })
            })
        }, n.prototype._validateState = function(e) {
            if (e) {
                var t, r = (t = window.sessionStorage.getItem("oauth_state"), window.sessionStorage.removeItem("oauth_state"), t),
                    i = e.state;
                if (r && r !== i) throw new Error("Invalid state in OAuth flow");
                return i
            }
        }, n.prototype.signOut = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t, r;
                return st(this, function(i) {
                    return e = "https://" + this._config.domain + "/logout?", t = fa(this._config) ? this._cognitoClientId : this._config.oauth.clientID, r = fa(this._config) ? this._config.redirectSignOut : this._config.returnTo, e += Object.entries({
                        client_id: t,
                        logout_uri: encodeURIComponent(r)
                    }).map(function(o) {
                        var s = Ur(o, 2);
                        return s[0] + "=" + s[1]
                    }).join("&"), $E("oAuthSignOut", {
                        oAuth: "signOut"
                    }, "Signing out from " + e), $u.debug("Signing out from " + e), [2, this._urlOpener(e, r)]
                })
            })
        }, n.prototype._generateState = function(e) {
            for (var t = "", r = e, i = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"; r > 0; --r) t += i[Math.round(61 * Math.random())];
            return t
        }, n.prototype._generateChallenge = function(e) {
            var t = new pa.Sha256;
            t.update(e);
            var r = t.digestSync(),
                i = Et.Buffer.from(r).toString("base64");
            return this._base64URL(i)
        }, n.prototype._base64URL = function(e) {
            return e.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_")
        }, n.prototype._generateRandom = function(e) {
            var t = new Uint8Array(e);
            if (typeof window != "undefined" && window.crypto) window.crypto.getRandomValues(t);
            else
                for (var r = 0; r < e; r += 1) t[r] = 66 * Math.random() | 0;
            return this._bufferToString(t)
        }, n.prototype._bufferToString = function(e) {
            for (var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", r = [], i = 0; i < e.byteLength; i += 1) {
                var o = e[i] % 62;
                r.push(t[o])
            }
            return r.join("")
        }, n
    }();
(function(n) {
    n.DEFAULT_MSG = "Authentication Error", n.EMPTY_EMAIL = "Email cannot be empty", n.EMPTY_PHONE = "Phone number cannot be empty", n.EMPTY_USERNAME = "Username cannot be empty", n.INVALID_USERNAME = "The username should either be a string or one of the sign in types", n.EMPTY_PASSWORD = "Password cannot be empty", n.EMPTY_CODE = "Confirmation code cannot be empty", n.SIGN_UP_ERROR = "Error creating account", n.NO_MFA = "No valid MFA method provided", n.INVALID_MFA = "Invalid MFA type", n.EMPTY_CHALLENGE = "Challenge response cannot be empty", n.NO_USER_SESSION = "Failed to get the session because the user is empty", n.NETWORK_ERROR = "Network Error", n.DEVICE_CONFIG = "Device tracking has not been configured in this User Pool", n.AUTOSIGNIN_ERROR = "Please use your credentials to sign in"
})(An || (An = {}));
var qH = new di("AuthError"),
    is = function(n) {
        function e(t) {
            var r = this,
                i = KH[t],
                o = i.message,
                s = i.log;
            return (r = n.call(this, o) || this).constructor = e, Object.setPrototypeOf(r, e.prototype), r.name = "AuthError", r.log = s || o, qH.error(r.log), r
        }
        return u(e, "t"), Cm(e, n), e
    }(Error),
    GH = function(n) {
        function e(t) {
            var r = n.call(this, t) || this;
            return r.constructor = e, Object.setPrototypeOf(r, e.prototype), r.name = "NoUserPoolError", r
        }
        return u(e, "t"), Cm(e, n), e
    }(is),
    KH = {
        noConfig: {
            message: An.DEFAULT_MSG,
            log: `
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `
        },
        missingAuthConfig: {
            message: An.DEFAULT_MSG,
            log: `
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `
        },
        emptyUsername: {
            message: An.EMPTY_USERNAME
        },
        invalidUsername: {
            message: An.INVALID_USERNAME
        },
        emptyPassword: {
            message: An.EMPTY_PASSWORD
        },
        emptyCode: {
            message: An.EMPTY_CODE
        },
        signUpError: {
            message: An.SIGN_UP_ERROR,
            log: "The first parameter should either be non-null string or object"
        },
        noMFA: {
            message: An.NO_MFA
        },
        invalidMFA: {
            message: An.INVALID_MFA
        },
        emptyChallengeResponse: {
            message: An.EMPTY_CHALLENGE
        },
        noUserSession: {
            message: An.NO_USER_SESSION
        },
        deviceConfig: {
            message: An.DEVICE_CONFIG
        },
        networkError: {
            message: An.NETWORK_ERROR
        },
        autoSignInError: {
            message: An.AUTOSIGNIN_ERROR
        },
        default: {
            message: An.DEFAULT_MSG
        }
    },
    oe = new di("AuthClass"),
    HN = "aws.cognito.signin.user.admin",
    JH = typeof Symbol != "undefined" && typeof Symbol.for == "function" ? Symbol.for("amplify_default") : "@@amplify_default",
    et = u(function(n, e, t) {
        Eo.dispatch("auth", {
            event: n,
            data: e,
            message: t
        }, "Auth", JH)
    }, "zi"),
    ZH = function() {
        function n(e) {
            var t = this;
            this.userPool = null, this.user = null, this.oAuthFlowInProgress = !1, this.autoSignInInitiated = !1, this.inflightSessionPromise = null, this.inflightSessionPromiseCounter = 0, this.Credentials = kL, this.wrapRefreshSessionCallback = function(r) {
                return function(i, o) {
                    return o ? et("tokenRefresh", void 0, "New token retrieved") : et("tokenRefresh_failure", i, "Failed to retrieve new token"), r(i, o)
                }
            }, this.configure(e), this.currentCredentials = this.currentCredentials.bind(this), this.currentUserCredentials = this.currentUserCredentials.bind(this), Eo.listen("auth", function(r) {
                switch (r.payload.event) {
                    case "verify":
                    case "signIn":
                        t._storage.setItem("amplify-signin-with-hostedUI", "false");
                        break;
                    case "signOut":
                        t._storage.removeItem("amplify-signin-with-hostedUI");
                        break;
                    case "cognitoHostedUI":
                        t._storage.setItem("amplify-signin-with-hostedUI", "true")
                }
            }), us.category = "auth", BN(CE.framework), CE.observeFrameworkChanges(function() {
                BN(CE.framework)
            })
        }
        return u(n, "e"), n.prototype.getModuleName = function() {
            return "Auth"
        }, n.prototype.configure = function(e) {
            var t = this;
            if (!e) return this._config || {};
            oe.debug("configure Auth");
            var r = Object.assign({}, this._config, IL(e).Auth, e);
            this._config = r;
            var i = this._config,
                o = i.userPoolId,
                s = i.userPoolWebClientId,
                a = i.cookieStorage,
                l = i.oauth,
                d = i.region,
                c = i.identityPoolId,
                h = i.mandatorySignIn,
                f = i.refreshHandlers,
                g = i.identityPoolRegion,
                p = i.clientMetadata,
                y = i.endpoint,
                b = i.storage;
            if (b) {
                if (!this._isValidAuthStorage(b)) throw oe.error("The storage in the Auth config is not valid!"), new Error("Empty storage object");
                this._storage = b
            } else this._storage = a ? new xH(a) : e.ssr ? new UL : new AL().getStorage();
            if (this._storageSync = Promise.resolve(), typeof this._storage.sync == "function" && (this._storageSync = this._storage.sync()), o) {
                var E = {
                    UserPoolId: o,
                    ClientId: s,
                    endpoint: y
                };
                E.Storage = this._storage, this.userPool = new NH(E, this.wrapRefreshSessionCallback)
            }
            this.Credentials.configure({
                mandatorySignIn: h,
                region: d,
                userPoolId: o,
                identityPoolId: c,
                refreshHandlers: f,
                storage: this._storage,
                identityPoolRegion: g
            });
            var S = l ? fa(this._config.oauth) ? l : l.awsCognito : void 0;
            if (S) {
                var _ = Object.assign({
                    cognitoClientId: s,
                    UserPoolId: o,
                    domain: S.domain,
                    scopes: S.scope,
                    redirectSignIn: S.redirectSignIn,
                    redirectSignOut: S.redirectSignOut,
                    responseType: S.responseType,
                    Storage: this._storage,
                    urlOpener: S.urlOpener,
                    clientMetadata: p
                }, S.options);
                this._oAuthHandler = new WH({
                    scopes: _.scopes,
                    config: _,
                    cognitoClientId: _.cognitoClientId
                });
                var I = {};
                (function(x) {
                    if (Ao().isBrowser && window.location) x({
                        url: window.location.href
                    });
                    else if (!Ao().isNode) throw new Error("Not supported")
                })(function(x) {
                    var L = x.url;
                    I[L] || (I[L] = !0, t._handleAuthResponse(L))
                })
            }
            return et("configured", null, "The Auth category has been configured successfully"), this.autoSignInInitiated || typeof this._storage.getItem != "function" || (this.isTrueStorageValue("amplify-polling-started") && (et("autoSignIn_failure", null, ft.AutoSignInError), this._storage.removeItem("amplify-auto-sign-in")), this._storage.removeItem("amplify-polling-started")), this._config
        }, n.prototype.signUp = function(e) {
            for (var t, r, i, o = this, s = [], a = 1; a < arguments.length; a++) s[a - 1] = arguments[a];
            if (!this.userPool) return this.rejectNoUserPool();
            var l, d = null,
                c = null,
                h = [],
                f = null,
                g = {
                    enabled: !1
                },
                p = {},
                y = {};
            if (e && typeof e == "string") {
                d = e, c = s ? s[0] : null;
                var b = s ? s[1] : null,
                    E = s ? s[2] : null;
                b && h.push(new Vu({
                    Name: "email",
                    Value: b
                })), E && h.push(new Vu({
                    Name: "phone_number",
                    Value: E
                }))
            } else {
                if (!e || typeof e != "object") return this.rejectAuthError(ft.SignUpError);
                d = e.username, c = e.password, e && e.clientMetadata ? l = e.clientMetadata : this._config.clientMetadata && (l = this._config.clientMetadata);
                var S = e.attributes;
                S && Object.keys(S).map(function(I) {
                    h.push(new Vu({
                        Name: I,
                        Value: S[I]
                    }))
                });
                var _ = e.validationData;
                _ && (f = [], Object.keys(_).map(function(I) {
                    f.push(new Vu({
                        Name: I,
                        Value: _[I]
                    }))
                })), (g = (t = e.autoSignIn) !== null && t !== void 0 ? t : {
                    enabled: !1
                }).enabled && (this._storage.setItem("amplify-auto-sign-in", "true"), p = (r = g.validationData) !== null && r !== void 0 ? r : {}, y = (i = g.clientMetaData) !== null && i !== void 0 ? i : {})
            }
            return d ? c ? (oe.debug("signUp attrs:", h), oe.debug("signUp validation data:", f), new Promise(function(I, x) {
                o.userPool.signUp(d, c, h, f, function(L, U) {
                    L ? (et("signUp_failure", L, d + " failed to signup"), x(L)) : (et("signUp", U, d + " has signed up successfully"), g.enabled && o.handleAutoSignIn(d, c, p, y, U), I(U))
                }, l)
            })) : this.rejectAuthError(ft.EmptyPassword) : this.rejectAuthError(ft.EmptyUsername)
        }, n.prototype.handleAutoSignIn = function(e, t, r, i, o) {
            this.autoSignInInitiated = !0;
            var s = new GE({
                Username: e,
                Password: t,
                ValidationData: r,
                ClientMetadata: i
            });
            o.userConfirmed ? this.signInAfterUserConfirmed(s) : this._config.signUpVerificationMethod === "link" ? this.handleLinkAutoSignIn(s) : this.handleCodeAutoSignIn(s)
        }, n.prototype.handleCodeAutoSignIn = function(e) {
            var t = this,
                r = u(function(i) {
                    i.payload.event === "confirmSignUp" && t.signInAfterUserConfirmed(e, r)
                }, "n");
            Eo.listen("auth", r)
        }, n.prototype.handleLinkAutoSignIn = function(e) {
            var t = this;
            this._storage.setItem("amplify-polling-started", "true");
            var r = Date.now(),
                i = setInterval(function() {
                    Date.now() - r > 18e4 ? (clearInterval(i), et("autoSignIn_failure", null, "Please confirm your account and use your credentials to sign in."), t._storage.removeItem("amplify-auto-sign-in")) : t.signInAfterUserConfirmed(e, null, i)
                }, 5e3)
        }, n.prototype.signInAfterUserConfirmed = function(e, t, r) {
            return Ae(this, void 0, void 0, function() {
                var i, o, s = this;
                return st(this, function(a) {
                    switch (a.label) {
                        case 0:
                            i = this.createCognitoUser(e.getUsername()), a.label = 1;
                        case 1:
                            return a.trys.push([1, 3, , 4]), [4, i.authenticateUser(e, this.authCallbacks(i, function(l) {
                                et("autoSignIn", l, e.getUsername() + " has signed in successfully"), t && Eo.remove("auth", t), r && (clearInterval(r), s._storage.removeItem("amplify-polling-started")), s._storage.removeItem("amplify-auto-sign-in")
                            }, function(l) {
                                oe.error(l), s._storage.removeItem("amplify-auto-sign-in")
                            }))];
                        case 2:
                            return a.sent(), [3, 4];
                        case 3:
                            return o = a.sent(), oe.error(o), [3, 4];
                        case 4:
                            return [2]
                    }
                })
            })
        }, n.prototype.confirmSignUp = function(e, t, r) {
            var i = this;
            if (!this.userPool) return this.rejectNoUserPool();
            if (!e) return this.rejectAuthError(ft.EmptyUsername);
            if (!t) return this.rejectAuthError(ft.EmptyCode);
            var o, s = this.createCognitoUser(e),
                a = !r || typeof r.forceAliasCreation != "boolean" || r.forceAliasCreation;
            return r && r.clientMetadata ? o = r.clientMetadata : this._config.clientMetadata && (o = this._config.clientMetadata), new Promise(function(l, d) {
                s.confirmRegistration(t, a, function(c, h) {
                    c ? d(c) : (et("confirmSignUp", h, e + " has been confirmed successfully"), i.isTrueStorageValue("amplify-auto-sign-in") && !i.autoSignInInitiated && (et("autoSignIn_failure", null, ft.AutoSignInError), i._storage.removeItem("amplify-auto-sign-in")), l(h))
                }, o)
            })
        }, n.prototype.isTrueStorageValue = function(e) {
            var t = this._storage.getItem(e);
            return !!t && t === "true"
        }, n.prototype.resendSignUp = function(e, t) {
            if (t === void 0 && (t = this._config.clientMetadata), !this.userPool) return this.rejectNoUserPool();
            if (!e) return this.rejectAuthError(ft.EmptyUsername);
            var r = this.createCognitoUser(e);
            return new Promise(function(i, o) {
                r.resendConfirmationCode(function(s, a) {
                    s ? o(s) : i(a)
                }, t)
            })
        }, n.prototype.signIn = function(e, t, r) {
            if (r === void 0 && (r = this._config.clientMetadata), !this.userPool) return this.rejectNoUserPool();
            var i = null,
                o = null,
                s = {};
            if (typeof e == "string") i = e, o = t;
            else {
                if (!e.username) return this.rejectAuthError(ft.InvalidUsername);
                t !== void 0 && oe.warn("The password should be defined under the first parameter object!"), i = e.username, o = e.password, s = e.validationData
            }
            if (!i) return this.rejectAuthError(ft.EmptyUsername);
            var a = new GE({
                Username: i,
                Password: o,
                ValidationData: s,
                ClientMetadata: r
            });
            return o ? this.signInWithPassword(a) : this.signInWithoutPassword(a)
        }, n.prototype.authCallbacks = function(e, t, r) {
            var i = this,
                o = this;
            return {
                onSuccess: u(function(s) {
                    return Ae(i, void 0, void 0, function() {
                        var a, l, d, c;
                        return st(this, function(h) {
                            switch (h.label) {
                                case 0:
                                    oe.debug(s), delete e.challengeName, delete e.challengeParam, h.label = 1;
                                case 1:
                                    return h.trys.push([1, 4, 5, 9]), [4, this.Credentials.clear()];
                                case 2:
                                    return h.sent(), [4, this.Credentials.set(s, "session")];
                                case 3:
                                    return a = h.sent(), oe.debug("succeed to get cognito credentials", a), [3, 9];
                                case 4:
                                    return l = h.sent(), oe.debug("cannot get cognito credentials", l), [3, 9];
                                case 5:
                                    return h.trys.push([5, 7, , 8]), [4, this.currentUserPoolUser()];
                                case 6:
                                    return d = h.sent(), o.user = d, et("signIn", d, "A user " + e.getUsername() + " has been signed in"), t(d), [3, 8];
                                case 7:
                                    return c = h.sent(), oe.error("Failed to get the signed in user", c), r(c), [3, 8];
                                case 8:
                                    return [7];
                                case 9:
                                    return [2]
                            }
                        })
                    })
                }, "onSuccess"),
                onFailure: u(function(s) {
                    oe.debug("signIn failure", s), et("signIn_failure", s, e.getUsername() + " failed to signin"), r(s)
                }, "onFailure"),
                customChallenge: u(function(s) {
                    oe.debug("signIn custom challenge answer required"), e.challengeName = "CUSTOM_CHALLENGE", e.challengeParam = s, t(e)
                }, "customChallenge"),
                mfaRequired: u(function(s, a) {
                    oe.debug("signIn MFA required"), e.challengeName = s, e.challengeParam = a, t(e)
                }, "mfaRequired"),
                mfaSetup: u(function(s, a) {
                    oe.debug("signIn mfa setup", s), e.challengeName = s, e.challengeParam = a, t(e)
                }, "mfaSetup"),
                newPasswordRequired: u(function(s, a) {
                    oe.debug("signIn new password"), e.challengeName = "NEW_PASSWORD_REQUIRED", e.challengeParam = {
                        userAttributes: s,
                        requiredAttributes: a
                    }, t(e)
                }, "newPasswordRequired"),
                totpRequired: u(function(s, a) {
                    oe.debug("signIn totpRequired"), e.challengeName = s, e.challengeParam = a, t(e)
                }, "totpRequired"),
                selectMFAType: u(function(s, a) {
                    oe.debug("signIn selectMFAType", s), e.challengeName = s, e.challengeParam = a, t(e)
                }, "selectMFAType")
            }
        }, n.prototype.signInWithPassword = function(e) {
            var t = this;
            if (this.pendingSignIn) throw new Error("Pending sign-in attempt already in progress");
            var r = this.createCognitoUser(e.getUsername());
            return this.pendingSignIn = new Promise(function(i, o) {
                r.authenticateUser(e, t.authCallbacks(r, function(s) {
                    t.pendingSignIn = null, i(s)
                }, function(s) {
                    t.pendingSignIn = null, o(s)
                }))
            }), this.pendingSignIn
        }, n.prototype.signInWithoutPassword = function(e) {
            var t = this,
                r = this.createCognitoUser(e.getUsername());
            return r.setAuthenticationFlowType("CUSTOM_AUTH"), new Promise(function(i, o) {
                r.initiateAuth(e, t.authCallbacks(r, i, o))
            })
        }, n.prototype.getMFAOptions = function(e) {
            return new Promise(function(t, r) {
                e.getMFAOptions(function(i, o) {
                    if (i) return oe.debug("get MFA Options failed", i), void r(i);
                    oe.debug("get MFA options success", o), t(o)
                })
            })
        }, n.prototype.getPreferredMFA = function(e, t) {
            var r = this,
                i = this;
            return new Promise(function(o, s) {
                var a = r._config.clientMetadata,
                    l = !!t && t.bypassCache;
                e.getUserData(function(d, c) {
                    return Ae(r, void 0, void 0, function() {
                        var h, f;
                        return st(this, function(g) {
                            switch (g.label) {
                                case 0:
                                    if (!d) return [3, 5];
                                    if (oe.debug("getting preferred mfa failed", d), !this.isSessionInvalid(d)) return [3, 4];
                                    g.label = 1;
                                case 1:
                                    return g.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(e)];
                                case 2:
                                    return g.sent(), [3, 4];
                                case 3:
                                    return h = g.sent(), s(new Error("Session is invalid due to: " + d.message + " and failed to clean up invalid session: " + h.message)), [2];
                                case 4:
                                    return s(d), [2];
                                case 5:
                                    return (f = i._getMfaTypeFromUserData(c)) ? (o(f), [2]) : (s("invalid MFA Type"), [2])
                            }
                        })
                    })
                }, {
                    bypassCache: l,
                    clientMetadata: a
                })
            })
        }, n.prototype._getMfaTypeFromUserData = function(e) {
            var t = null,
                r = e.PreferredMfaSetting;
            if (r) t = r;
            else {
                var i = e.UserMFASettingList;
                i ? i.length === 0 ? t = "NOMFA" : oe.debug("invalid case for getPreferredMFA", e) : t = e.MFAOptions ? "SMS_MFA" : "NOMFA"
            }
            return t
        }, n.prototype._getUserData = function(e, t) {
            var r = this;
            return new Promise(function(i, o) {
                e.getUserData(function(s, a) {
                    return Ae(r, void 0, void 0, function() {
                        var l;
                        return st(this, function(d) {
                            switch (d.label) {
                                case 0:
                                    if (!s) return [3, 5];
                                    if (oe.debug("getting user data failed", s), !this.isSessionInvalid(s)) return [3, 4];
                                    d.label = 1;
                                case 1:
                                    return d.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(e)];
                                case 2:
                                    return d.sent(), [3, 4];
                                case 3:
                                    return l = d.sent(), o(new Error("Session is invalid due to: " + s.message + " and failed to clean up invalid session: " + l.message)), [2];
                                case 4:
                                    return o(s), [2];
                                case 5:
                                    i(a), d.label = 6;
                                case 6:
                                    return [2]
                            }
                        })
                    })
                }, t)
            })
        }, n.prototype.setPreferredMFA = function(e, t) {
            return Ae(this, void 0, void 0, function() {
                var r, i, o, s, a, l, d = this;
                return st(this, function(c) {
                    switch (c.label) {
                        case 0:
                            return r = this._config.clientMetadata, [4, this._getUserData(e, {
                                bypassCache: !0,
                                clientMetadata: r
                            })];
                        case 1:
                            switch (i = c.sent(), o = null, s = null, t) {
                                case "TOTP":
                                case "SOFTWARE_TOKEN_MFA":
                                    return [3, 2];
                                case "SMS":
                                case "SMS_MFA":
                                    return [3, 3];
                                case "NOMFA":
                                    return [3, 4]
                            }
                            return [3, 6];
                        case 2:
                            return s = {
                                PreferredMfa: !0,
                                Enabled: !0
                            }, [3, 7];
                        case 3:
                            return o = {
                                PreferredMfa: !0,
                                Enabled: !0
                            }, [3, 7];
                        case 4:
                            return a = i.UserMFASettingList, [4, this._getMfaTypeFromUserData(i)];
                        case 5:
                            if ((l = c.sent()) === "NOMFA") return [2, Promise.resolve("No change for mfa type")];
                            if (l === "SMS_MFA") o = {
                                PreferredMfa: !1,
                                Enabled: !1
                            };
                            else {
                                if (l !== "SOFTWARE_TOKEN_MFA") return [2, this.rejectAuthError(ft.InvalidMFA)];
                                s = {
                                    PreferredMfa: !1,
                                    Enabled: !1
                                }
                            }
                            return a && a.length !== 0 && a.forEach(function(h) {
                                h === "SMS_MFA" ? o = {
                                    PreferredMfa: !1,
                                    Enabled: !1
                                } : h === "SOFTWARE_TOKEN_MFA" && (s = {
                                    PreferredMfa: !1,
                                    Enabled: !1
                                })
                            }), [3, 7];
                        case 6:
                            return oe.debug("no validmfa method provided"), [2, this.rejectAuthError(ft.NoMFA)];
                        case 7:
                            return [2, new Promise(function(h, f) {
                                e.setUserMfaPreference(o, s, function(g, p) {
                                    if (g) return oe.debug("Set user mfa preference error", g), f(g);
                                    oe.debug("Set user mfa success", p), oe.debug("Caching the latest user data into local"), e.getUserData(function(y, b) {
                                        return Ae(d, void 0, void 0, function() {
                                            var E;
                                            return st(this, function(S) {
                                                switch (S.label) {
                                                    case 0:
                                                        if (!y) return [3, 5];
                                                        if (oe.debug("getting user data failed", y), !this.isSessionInvalid(y)) return [3, 4];
                                                        S.label = 1;
                                                    case 1:
                                                        return S.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(e)];
                                                    case 2:
                                                        return S.sent(), [3, 4];
                                                    case 3:
                                                        return E = S.sent(), f(new Error("Session is invalid due to: " + y.message + " and failed to clean up invalid session: " + E.message)), [2];
                                                    case 4:
                                                        return [2, f(y)];
                                                    case 5:
                                                        return [2, h(p)]
                                                }
                                            })
                                        })
                                    }, {
                                        bypassCache: !0,
                                        clientMetadata: r
                                    })
                                })
                            })]
                    }
                })
            })
        }, n.prototype.disableSMS = function(e) {
            return new Promise(function(t, r) {
                e.disableMFA(function(i, o) {
                    if (i) return oe.debug("disable mfa failed", i), void r(i);
                    oe.debug("disable mfa succeed", o), t(o)
                })
            })
        }, n.prototype.enableSMS = function(e) {
            return new Promise(function(t, r) {
                e.enableMFA(function(i, o) {
                    if (i) return oe.debug("enable mfa failed", i), void r(i);
                    oe.debug("enable mfa succeed", o), t(o)
                })
            })
        }, n.prototype.setupTOTP = function(e) {
            return new Promise(function(t, r) {
                e.associateSoftwareToken({
                    onFailure: u(function(i) {
                        oe.debug("associateSoftwareToken failed", i), r(i)
                    }, "onFailure"),
                    associateSecretCode: u(function(i) {
                        oe.debug("associateSoftwareToken success", i), t(i)
                    }, "associateSecretCode")
                })
            })
        }, n.prototype.verifyTotpToken = function(e, t) {
            var r;
            oe.debug("verification totp token", e, t), e && typeof e.getSignInUserSession == "function" && (r = e.getSignInUserSession());
            var i = r == null ? void 0 : r.isValid();
            return new Promise(function(o, s) {
                e.verifySoftwareToken(t, "My TOTP device", {
                    onFailure: u(function(a) {
                        oe.debug("verifyTotpToken failed", a), s(a)
                    }, "onFailure"),
                    onSuccess: u(function(a) {
                        i || et("signIn", e, "A user " + e.getUsername() + " has been signed in"), et("verify", e, "A user " + e.getUsername() + " has been verified"), oe.debug("verifyTotpToken success", a), o(a)
                    }, "onSuccess")
                })
            })
        }, n.prototype.confirmSignIn = function(e, t, r, i) {
            var o = this;
            if (i === void 0 && (i = this._config.clientMetadata), !t) return this.rejectAuthError(ft.EmptyCode);
            var s = this;
            return new Promise(function(a, l) {
                e.sendMFACode(t, {
                    onSuccess: u(function(d) {
                        return Ae(o, void 0, void 0, function() {
                            var c, h, f, g;
                            return st(this, function(p) {
                                switch (p.label) {
                                    case 0:
                                        oe.debug(d), p.label = 1;
                                    case 1:
                                        return p.trys.push([1, 4, 5, 10]), [4, this.Credentials.clear()];
                                    case 2:
                                        return p.sent(), [4, this.Credentials.set(d, "session")];
                                    case 3:
                                        return c = p.sent(), oe.debug("succeed to get cognito credentials", c), [3, 10];
                                    case 4:
                                        return h = p.sent(), oe.debug("cannot get cognito credentials", h), [3, 10];
                                    case 5:
                                        s.user = e, p.label = 6;
                                    case 6:
                                        return p.trys.push([6, 8, , 9]), [4, this.currentUserPoolUser()];
                                    case 7:
                                        return f = p.sent(), e.attributes = f.attributes, [3, 9];
                                    case 8:
                                        return g = p.sent(), oe.debug("cannot get updated Cognito User", g), [3, 9];
                                    case 9:
                                        return et("signIn", e, "A user " + e.getUsername() + " has been signed in"), a(e), [7];
                                    case 10:
                                        return [2]
                                }
                            })
                        })
                    }, "onSuccess"),
                    onFailure: u(function(d) {
                        oe.debug("confirm signIn failure", d), l(d)
                    }, "onFailure")
                }, r, i)
            })
        }, n.prototype.completeNewPassword = function(e, t, r, i) {
            var o = this;
            if (r === void 0 && (r = {}), i === void 0 && (i = this._config.clientMetadata), !t) return this.rejectAuthError(ft.EmptyPassword);
            var s = this;
            return new Promise(function(a, l) {
                e.completeNewPasswordChallenge(t, r, {
                    onSuccess: u(function(d) {
                        return Ae(o, void 0, void 0, function() {
                            var c, h;
                            return st(this, function(f) {
                                switch (f.label) {
                                    case 0:
                                        oe.debug(d), f.label = 1;
                                    case 1:
                                        return f.trys.push([1, 4, 5, 6]), [4, this.Credentials.clear()];
                                    case 2:
                                        return f.sent(), [4, this.Credentials.set(d, "session")];
                                    case 3:
                                        return c = f.sent(), oe.debug("succeed to get cognito credentials", c), [3, 6];
                                    case 4:
                                        return h = f.sent(), oe.debug("cannot get cognito credentials", h), [3, 6];
                                    case 5:
                                        return s.user = e, et("signIn", e, "A user " + e.getUsername() + " has been signed in"), a(e), [7];
                                    case 6:
                                        return [2]
                                }
                            })
                        })
                    }, "onSuccess"),
                    onFailure: u(function(d) {
                        oe.debug("completeNewPassword failure", d), et("completeNewPassword_failure", d, o.user + " failed to complete the new password flow"), l(d)
                    }, "onFailure"),
                    mfaRequired: u(function(d, c) {
                        oe.debug("signIn MFA required"), e.challengeName = d, e.challengeParam = c, a(e)
                    }, "mfaRequired"),
                    mfaSetup: u(function(d, c) {
                        oe.debug("signIn mfa setup", d), e.challengeName = d, e.challengeParam = c, a(e)
                    }, "mfaSetup"),
                    totpRequired: u(function(d, c) {
                        oe.debug("signIn mfa setup", d), e.challengeName = d, e.challengeParam = c, a(e)
                    }, "totpRequired")
                }, i)
            })
        }, n.prototype.sendCustomChallengeAnswer = function(e, t, r) {
            var i = this;
            return r === void 0 && (r = this._config.clientMetadata), this.userPool ? t ? new Promise(function(o, s) {
                e.sendCustomChallengeAnswer(t, i.authCallbacks(e, o, s), r)
            }) : this.rejectAuthError(ft.EmptyChallengeResponse) : this.rejectNoUserPool()
        }, n.prototype.deleteUserAttributes = function(e, t) {
            var r = this;
            return new Promise(function(i, o) {
                r.userSession(e).then(function(s) {
                    e.deleteAttributes(t, function(a, l) {
                        return a ? o(a) : i(l)
                    })
                })
            })
        }, n.prototype.deleteUser = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t, r = this;
                return st(this, function(i) {
                    switch (i.label) {
                        case 0:
                            return i.trys.push([0, 2, , 3]), [4, this._storageSync];
                        case 1:
                            return i.sent(), [3, 3];
                        case 2:
                            throw e = i.sent(), oe.debug("Failed to sync cache info into memory", e), new Error(e);
                        case 3:
                            return t = this._oAuthHandler && this._storage.getItem("amplify-signin-with-hostedUI") === "true", [2, new Promise(function(o, s) {
                                return Ae(r, void 0, void 0, function() {
                                    var a, l = this;
                                    return st(this, function(d) {
                                        if (this.userPool) {
                                            if (!(a = this.userPool.getCurrentUser())) return oe.debug("Failed to get user from user pool"), [2, s(new Error("No current user."))];
                                            a.getSession(function(c, h) {
                                                return Ae(l, void 0, void 0, function() {
                                                    var f, g = this;
                                                    return st(this, function(p) {
                                                        switch (p.label) {
                                                            case 0:
                                                                if (!c) return [3, 5];
                                                                if (oe.debug("Failed to get the user session", c), !this.isSessionInvalid(c)) return [3, 4];
                                                                p.label = 1;
                                                            case 1:
                                                                return p.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(a)];
                                                            case 2:
                                                                return p.sent(), [3, 4];
                                                            case 3:
                                                                return f = p.sent(), s(new Error("Session is invalid due to: " + c.message + " and failed to clean up invalid session: " + f.message)), [2];
                                                            case 4:
                                                                return [2, s(c)];
                                                            case 5:
                                                                a.deleteUser(function(y, b) {
                                                                    if (y) s(y);
                                                                    else {
                                                                        et("userDeleted", b, "The authenticated user has been deleted."), a.signOut(), g.user = null;
                                                                        try {
                                                                            g.cleanCachedItems()
                                                                        } catch (E) {
                                                                            oe.debug("failed to clear cached items")
                                                                        }
                                                                        t ? g.oAuthSignOutRedirect(o, s) : (et("signOut", g.user, "A user has been signed out"), o(b))
                                                                    }
                                                                }), p.label = 6;
                                                            case 6:
                                                                return [2]
                                                        }
                                                    })
                                                })
                                            })
                                        } else oe.debug("no Congito User pool"), s(new Error("Cognito User pool does not exist"));
                                        return [2]
                                    })
                                })
                            })]
                    }
                })
            })
        }, n.prototype.updateUserAttributes = function(e, t, r) {
            var i = this;
            r === void 0 && (r = this._config.clientMetadata);
            var o = [],
                s = this;
            return new Promise(function(a, l) {
                s.userSession(e).then(function(d) {
                    for (var c in t)
                        if (c !== "sub" && c.indexOf("_verified") < 0) {
                            var h = {
                                Name: c,
                                Value: t[c]
                            };
                            o.push(h)
                        } e.updateAttributes(o, function(f, g, p) {
                        if (f) return et("updateUserAttributes_failure", f, "Failed to update attributes"), l(f);
                        var y = i.createUpdateAttributesResultList(t, p == null ? void 0 : p.CodeDeliveryDetailsList);
                        return et("updateUserAttributes", y, "Attributes successfully updated"), a(g)
                    }, r)
                })
            })
        }, n.prototype.createUpdateAttributesResultList = function(e, t) {
            var r = {};
            return Object.keys(e).forEach(function(i) {
                r[i] = {
                    isUpdated: !0
                };
                var o = t == null ? void 0 : t.find(function(s) {
                    return s.AttributeName === i
                });
                o && (r[i].isUpdated = !1, r[i].codeDeliveryDetails = o)
            }), r
        }, n.prototype.userAttributes = function(e) {
            var t = this;
            return new Promise(function(r, i) {
                t.userSession(e).then(function(o) {
                    e.getUserAttributes(function(s, a) {
                        s ? i(s) : r(a)
                    })
                })
            })
        }, n.prototype.verifiedContact = function(e) {
            var t = this;
            return this.userAttributes(e).then(function(r) {
                var i = t.attributesToObject(r),
                    o = {},
                    s = {};
                return i.email && (i.email_verified ? s.email = i.email : o.email = i.email), i.phone_number && (i.phone_number_verified ? s.phone_number = i.phone_number : o.phone_number = i.phone_number), {
                    verified: s,
                    unverified: o
                }
            })
        }, n.prototype.isErrorWithMessage = function(e) {
            return typeof e == "object" && Object.prototype.hasOwnProperty.call(e, "message")
        }, n.prototype.isTokenRevokedError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "Access Token has been revoked"
        }, n.prototype.isRefreshTokenRevokedError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "Refresh Token has been revoked"
        }, n.prototype.isUserDisabledError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "User is disabled."
        }, n.prototype.isUserDoesNotExistError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "User does not exist."
        }, n.prototype.isRefreshTokenExpiredError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "Refresh Token has expired"
        }, n.prototype.isPasswordResetRequiredError = function(e) {
            return this.isErrorWithMessage(e) && e.message === "Password reset required for the user"
        }, n.prototype.isSignedInHostedUI = function() {
            return this._oAuthHandler && this._storage.getItem("amplify-signin-with-hostedUI") === "true"
        }, n.prototype.isSessionInvalid = function(e) {
            return this.isUserDisabledError(e) || this.isUserDoesNotExistError(e) || this.isTokenRevokedError(e) || this.isRefreshTokenRevokedError(e) || this.isRefreshTokenExpiredError(e) || this.isPasswordResetRequiredError(e)
        }, n.prototype.cleanUpInvalidSession = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t = this;
                return st(this, function(r) {
                    switch (r.label) {
                        case 0:
                            e.signOut(), this.user = null, r.label = 1;
                        case 1:
                            return r.trys.push([1, 3, , 4]), [4, this.cleanCachedItems()];
                        case 2:
                            return r.sent(), [3, 4];
                        case 3:
                            return r.sent(), oe.debug("failed to clear cached items"), [3, 4];
                        case 4:
                            return this.isSignedInHostedUI() ? [2, new Promise(function(i, o) {
                                t.oAuthSignOutRedirect(i, o)
                            })] : (et("signOut", this.user, "A user has been signed out"), [2])
                    }
                })
            })
        }, n.prototype.currentUserPoolUser = function(e) {
            var t = this;
            return this.userPool ? new Promise(function(r, i) {
                t._storageSync.then(function() {
                    return Ae(t, void 0, void 0, function() {
                        var o, s, a, l, d, c, h = this;
                        return st(this, function(f) {
                            switch (f.label) {
                                case 0:
                                    return this.isOAuthInProgress() ? (oe.debug("OAuth signIn in progress, waiting for resolution..."), [4, new Promise(function(g) {
                                        var p = setTimeout(function() {
                                            oe.debug("OAuth signIn in progress timeout"), Eo.remove("auth", y), g()
                                        }, 1e4);

                                        function y(b) {
                                            var E = b.payload.event;
                                            E !== "cognitoHostedUI" && E !== "cognitoHostedUI_failure" || (oe.debug("OAuth signIn resolved: " + E), clearTimeout(p), Eo.remove("auth", y), g())
                                        }
                                        u(y, "n"), Eo.listen("auth", y)
                                    })]) : [3, 2];
                                case 1:
                                    f.sent(), f.label = 2;
                                case 2:
                                    if (!(o = this.userPool.getCurrentUser())) return oe.debug("Failed to get user from user pool"), i("No current user"), [2];
                                    f.label = 3;
                                case 3:
                                    return f.trys.push([3, 7, , 8]), [4, this._userSession(o)];
                                case 4:
                                    return s = f.sent(), (a = !!e && e.bypassCache) ? [4, this.Credentials.clear()] : [3, 6];
                                case 5:
                                    f.sent(), f.label = 6;
                                case 6:
                                    return l = this._config.clientMetadata, d = s.getAccessToken().decodePayload().scope, (d === void 0 ? "" : d).split(" ").includes(HN) ? (o.getUserData(function(g, p) {
                                        return Ae(h, void 0, void 0, function() {
                                            var y, b, E, S, _, I, x;
                                            return st(this, function(L) {
                                                switch (L.label) {
                                                    case 0:
                                                        if (!g) return [3, 7];
                                                        if (oe.debug("getting user data failed", g), !this.isSessionInvalid(g)) return [3, 5];
                                                        L.label = 1;
                                                    case 1:
                                                        return L.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(o)];
                                                    case 2:
                                                        return L.sent(), [3, 4];
                                                    case 3:
                                                        return y = L.sent(), i(new Error("Session is invalid due to: " + g.message + " and failed to clean up invalid session: " + y.message)), [2];
                                                    case 4:
                                                        return i(g), [3, 6];
                                                    case 5:
                                                        r(o), L.label = 6;
                                                    case 6:
                                                        return [2];
                                                    case 7:
                                                        for (b = p.PreferredMfaSetting || "NOMFA", E = [], S = 0; S < p.UserAttributes.length; S++) _ = {
                                                            Name: p.UserAttributes[S].Name,
                                                            Value: p.UserAttributes[S].Value
                                                        }, I = new Vu(_), E.push(I);
                                                        return x = this.attributesToObject(E), Object.assign(o, {
                                                            attributes: x,
                                                            preferredMFA: b
                                                        }), [2, r(o)]
                                                }
                                            })
                                        })
                                    }, {
                                        bypassCache: a,
                                        clientMetadata: l
                                    }), [3, 8]) : (oe.debug("Unable to get the user data because the " + HN + " is not in the scopes of the access token"), [2, r(o)]);
                                case 7:
                                    return c = f.sent(), i(c), [3, 8];
                                case 8:
                                    return [2]
                            }
                        })
                    })
                }).catch(function(o) {
                    return oe.debug("Failed to sync cache info into memory", o), i(o)
                })
            }) : this.rejectNoUserPool()
        }, n.prototype.isOAuthInProgress = function() {
            return this.oAuthFlowInProgress
        }, n.prototype.currentAuthenticatedUser = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i, o, s;
                return st(this, function(a) {
                    switch (a.label) {
                        case 0:
                            oe.debug("getting current authenticated user"), t = null, a.label = 1;
                        case 1:
                            return a.trys.push([1, 3, , 4]), [4, this._storageSync];
                        case 2:
                            return a.sent(), [3, 4];
                        case 3:
                            throw r = a.sent(), oe.debug("Failed to sync cache info into memory", r), r;
                        case 4:
                            try {
                                (i = JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))) && (t = un(un({}, i.user), {
                                    token: i.token
                                }))
                            } catch (l) {
                                oe.debug("cannot load federated user from auth storage")
                            }
                            return t ? (this.user = t, oe.debug("get current authenticated federated user", this.user), [2, this.user]) : [3, 5];
                        case 5:
                            oe.debug("get current authenticated userpool user"), o = null, a.label = 6;
                        case 6:
                            return a.trys.push([6, 8, , 9]), [4, this.currentUserPoolUser(e)];
                        case 7:
                            return o = a.sent(), [3, 9];
                        case 8:
                            return (s = a.sent()) === "No userPool" && oe.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"), oe.debug("The user is not authenticated by the error", s), [2, Promise.reject("The user is not authenticated")];
                        case 9:
                            return this.user = o, [2, this.user]
                    }
                })
            })
        }, n.prototype.currentSession = function() {
            var e = this;
            return oe.debug("Getting current session"), this.userPool ? new Promise(function(t, r) {
                e.currentUserPoolUser().then(function(i) {
                    e.userSession(i).then(function(o) {
                        t(o)
                    }).catch(function(o) {
                        oe.debug("Failed to get the current session", o), r(o)
                    })
                }).catch(function(i) {
                    oe.debug("Failed to get the current user", i), r(i)
                })
            }) : Promise.reject(new Error("No User Pool in the configuration."))
        }, n.prototype._userSession = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i = this;
                return st(this, function(o) {
                    switch (o.label) {
                        case 0:
                            if (!e) return oe.debug("the user is null"), [2, this.rejectAuthError(ft.NoUserSession)];
                            t = this._config.clientMetadata, this.inflightSessionPromiseCounter === 0 && (this.inflightSessionPromise = new Promise(function(s, a) {
                                e.getSession(function(l, d) {
                                    return Ae(i, void 0, void 0, function() {
                                        var c;
                                        return st(this, function(h) {
                                            switch (h.label) {
                                                case 0:
                                                    if (!l) return [3, 5];
                                                    if (oe.debug("Failed to get the session from user", e), !this.isSessionInvalid(l)) return [3, 4];
                                                    h.label = 1;
                                                case 1:
                                                    return h.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(e)];
                                                case 2:
                                                    return h.sent(), [3, 4];
                                                case 3:
                                                    return c = h.sent(), a(new Error("Session is invalid due to: " + l.message + " and failed to clean up invalid session: " + c.message)), [2];
                                                case 4:
                                                    return a(l), [2];
                                                case 5:
                                                    return oe.debug("Succeed to get the user session", d), s(d), [2]
                                            }
                                        })
                                    })
                                }, {
                                    clientMetadata: t
                                })
                            })), this.inflightSessionPromiseCounter++, o.label = 1;
                        case 1:
                            return o.trys.push([1, , 3, 4]), [4, this.inflightSessionPromise];
                        case 2:
                            return r = o.sent(), e.signInUserSession = r, [2, r];
                        case 3:
                            return this.inflightSessionPromiseCounter--, [7];
                        case 4:
                            return [2]
                    }
                })
            })
        }, n.prototype.userSession = function(e) {
            return this._userSession(e)
        }, n.prototype.currentUserCredentials = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t, r = this;
                return st(this, function(i) {
                    switch (i.label) {
                        case 0:
                            oe.debug("Getting current user credentials"), i.label = 1;
                        case 1:
                            return i.trys.push([1, 3, , 4]), [4, this._storageSync];
                        case 2:
                            return i.sent(), [3, 4];
                        case 3:
                            throw e = i.sent(), oe.debug("Failed to sync cache info into memory", e), e;
                        case 4:
                            t = null;
                            try {
                                t = JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))
                            } catch (o) {
                                oe.debug("failed to get or parse item aws-amplify-federatedInfo", o)
                            }
                            return t ? [2, this.Credentials.refreshFederatedToken(t)] : [2, this.currentSession().then(function(o) {
                                return oe.debug("getting session success", o), r.Credentials.set(o, "session")
                            }).catch(function() {
                                return oe.debug("getting guest credentials"), r.Credentials.set(null, "guest")
                            })]
                    }
                })
            })
        }, n.prototype.currentCredentials = function() {
            return oe.debug("getting current credentials"), this.Credentials.get()
        }, n.prototype.verifyUserAttribute = function(e, t, r) {
            return r === void 0 && (r = this._config.clientMetadata), new Promise(function(i, o) {
                e.getAttributeVerificationCode(t, {
                    onSuccess: u(function(s) {
                        return i(s)
                    }, "onSuccess"),
                    onFailure: u(function(s) {
                        return o(s)
                    }, "onFailure")
                }, r)
            })
        }, n.prototype.verifyUserAttributeSubmit = function(e, t, r) {
            return r ? new Promise(function(i, o) {
                e.verifyAttribute(t, r, {
                    onSuccess: u(function(s) {
                        i(s)
                    }, "onSuccess"),
                    onFailure: u(function(s) {
                        o(s)
                    }, "onFailure")
                })
            }) : this.rejectAuthError(ft.EmptyCode)
        }, n.prototype.verifyCurrentUserAttribute = function(e) {
            var t = this;
            return t.currentUserPoolUser().then(function(r) {
                return t.verifyUserAttribute(r, e)
            })
        }, n.prototype.verifyCurrentUserAttributeSubmit = function(e, t) {
            var r = this;
            return r.currentUserPoolUser().then(function(i) {
                return r.verifyUserAttributeSubmit(i, e, t)
            })
        }, n.prototype.cognitoIdentitySignOut = function(e, t) {
            return Ae(this, void 0, void 0, function() {
                var r, i, o = this;
                return st(this, function(s) {
                    switch (s.label) {
                        case 0:
                            return s.trys.push([0, 2, , 3]), [4, this._storageSync];
                        case 1:
                            return s.sent(), [3, 3];
                        case 2:
                            throw r = s.sent(), oe.debug("Failed to sync cache info into memory", r), r;
                        case 3:
                            return i = this._oAuthHandler && this._storage.getItem("amplify-signin-with-hostedUI") === "true", [2, new Promise(function(a, l) {
                                if (e && e.global) {
                                    oe.debug("user global sign out", t);
                                    var d = o._config.clientMetadata;
                                    t.getSession(function(c, h) {
                                        return Ae(o, void 0, void 0, function() {
                                            var f, g = this;
                                            return st(this, function(p) {
                                                switch (p.label) {
                                                    case 0:
                                                        if (!c) return [3, 5];
                                                        if (oe.debug("failed to get the user session", c), !this.isSessionInvalid(c)) return [3, 4];
                                                        p.label = 1;
                                                    case 1:
                                                        return p.trys.push([1, 3, , 4]), [4, this.cleanUpInvalidSession(t)];
                                                    case 2:
                                                        return p.sent(), [3, 4];
                                                    case 3:
                                                        return f = p.sent(), l(new Error("Session is invalid due to: " + c.message + " and failed to clean up invalid session: " + f.message)), [2];
                                                    case 4:
                                                        return [2, l(c)];
                                                    case 5:
                                                        return t.globalSignOut({
                                                            onSuccess: u(function(y) {
                                                                if (oe.debug("global sign out success"), !i) return a();
                                                                g.oAuthSignOutRedirect(a, l)
                                                            }, "onSuccess"),
                                                            onFailure: u(function(y) {
                                                                return oe.debug("global sign out failed", y), l(y)
                                                            }, "onFailure")
                                                        }), [2]
                                                }
                                            })
                                        })
                                    }, {
                                        clientMetadata: d
                                    })
                                } else oe.debug("user sign out", t), t.signOut(function() {
                                    if (!i) return a();
                                    o.oAuthSignOutRedirect(a, l)
                                })
                            })]
                    }
                })
            })
        }, n.prototype.oAuthSignOutRedirect = function(e, t) {
            Ao().isBrowser ? this.oAuthSignOutRedirectOrReject(t) : this.oAuthSignOutAndResolve(e)
        }, n.prototype.oAuthSignOutAndResolve = function(e) {
            this._oAuthHandler.signOut(), e()
        }, n.prototype.oAuthSignOutRedirectOrReject = function(e) {
            this._oAuthHandler.signOut(), setTimeout(function() {
                return e(Error("Signout timeout fail"))
            }, 3e3)
        }, n.prototype.signOut = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t;
                return st(this, function(r) {
                    switch (r.label) {
                        case 0:
                            return r.trys.push([0, 2, , 3]), [4, this.cleanCachedItems()];
                        case 1:
                            return r.sent(), [3, 3];
                        case 2:
                            return r.sent(), oe.debug("failed to clear cached items"), [3, 3];
                        case 3:
                            return this.userPool ? (t = this.userPool.getCurrentUser()) ? [4, this.cognitoIdentitySignOut(e, t)] : [3, 5] : [3, 7];
                        case 4:
                            return r.sent(), [3, 6];
                        case 5:
                            oe.debug("no current Cognito user"), r.label = 6;
                        case 6:
                            return [3, 8];
                        case 7:
                            oe.debug("no Cognito User pool"), r.label = 8;
                        case 8:
                            return et("signOut", this.user, "A user has been signed out"), this.user = null, [2]
                    }
                })
            })
        }, n.prototype.cleanCachedItems = function() {
            return Ae(this, void 0, void 0, function() {
                return st(this, function(e) {
                    switch (e.label) {
                        case 0:
                            return [4, this.Credentials.clear()];
                        case 1:
                            return e.sent(), [2]
                    }
                })
            })
        }, n.prototype.changePassword = function(e, t, r, i) {
            var o = this;
            return i === void 0 && (i = this._config.clientMetadata), new Promise(function(s, a) {
                o.userSession(e).then(function(l) {
                    e.changePassword(t, r, function(d, c) {
                        return d ? (oe.debug("change password failure", d), a(d)) : s(c)
                    }, i)
                })
            })
        }, n.prototype.forgotPassword = function(e, t) {
            if (t === void 0 && (t = this._config.clientMetadata), !this.userPool) return this.rejectNoUserPool();
            if (!e) return this.rejectAuthError(ft.EmptyUsername);
            var r = this.createCognitoUser(e);
            return new Promise(function(i, o) {
                r.forgotPassword({
                    onSuccess: u(function() {
                        i()
                    }, "onSuccess"),
                    onFailure: u(function(s) {
                        oe.debug("forgot password failure", s), et("forgotPassword_failure", s, e + " forgotPassword failed"), o(s)
                    }, "onFailure"),
                    inputVerificationCode: u(function(s) {
                        et("forgotPassword", r, e + " has initiated forgot password flow"), i(s)
                    }, "inputVerificationCode")
                }, t)
            })
        }, n.prototype.forgotPasswordSubmit = function(e, t, r, i) {
            if (i === void 0 && (i = this._config.clientMetadata), !this.userPool) return this.rejectNoUserPool();
            if (!e) return this.rejectAuthError(ft.EmptyUsername);
            if (!t) return this.rejectAuthError(ft.EmptyCode);
            if (!r) return this.rejectAuthError(ft.EmptyPassword);
            var o = this.createCognitoUser(e);
            return new Promise(function(s, a) {
                o.confirmPassword(t, r, {
                    onSuccess: u(function(l) {
                        et("forgotPasswordSubmit", o, e + " forgotPasswordSubmit successful"), s(l)
                    }, "onSuccess"),
                    onFailure: u(function(l) {
                        et("forgotPasswordSubmit_failure", l, e + " forgotPasswordSubmit failed"), a(l)
                    }, "onFailure")
                }, i)
            })
        }, n.prototype.currentUserInfo = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t, r, i, o, s, a;
                return st(this, function(l) {
                    switch (l.label) {
                        case 0:
                            return (e = this.Credentials.getCredSource()) && e !== "aws" && e !== "userPool" ? [3, 9] : [4, this.currentUserPoolUser().catch(function(d) {
                                return oe.error(d)
                            })];
                        case 1:
                            if (!(a = l.sent())) return [2, null];
                            l.label = 2;
                        case 2:
                            return l.trys.push([2, 8, , 9]), [4, this.userAttributes(a)];
                        case 3:
                            t = l.sent(), r = this.attributesToObject(t), i = null, l.label = 4;
                        case 4:
                            return l.trys.push([4, 6, , 7]), [4, this.currentCredentials()];
                        case 5:
                            return i = l.sent(), [3, 7];
                        case 6:
                            return o = l.sent(), oe.debug("Failed to retrieve credentials while getting current user info", o), [3, 7];
                        case 7:
                            return [2, {
                                id: i ? i.identityId : void 0,
                                username: a.getUsername(),
                                attributes: r
                            }];
                        case 8:
                            return s = l.sent(), oe.error("currentUserInfo error", s), [2, {}];
                        case 9:
                            return e === "federated" ? [2, (a = this.user) || {}] : [2]
                    }
                })
            })
        }, n.prototype.federatedSignIn = function(e, t, r) {
            return Ae(this, void 0, void 0, function() {
                var i, o, s, a, l, d, c, h, f, g, p;
                return st(this, function(y) {
                    switch (y.label) {
                        case 0:
                            if (!this._config.identityPoolId && !this._config.userPoolId) throw new Error("Federation requires either a User Pool or Identity Pool in config");
                            if (e === void 0 && this._config.identityPoolId && !this._config.userPoolId) throw new Error("Federation with Identity Pools requires tokens passed as arguments");
                            return SE(e) || (b = e) && ["customProvider"].find(function(E) {
                                return b.hasOwnProperty(E)
                            }) || function(E) {
                                return E && !!["customState"].find(function(S) {
                                    return E.hasOwnProperty(S)
                                })
                            }(e) || e === void 0 ? (i = e || {
                                provider: cm.Cognito
                            }, l = SE(i) ? i.provider : i.customProvider, SE(i), o = i.customState, this._config.userPoolId && (s = fa(this._config.oauth) ? this._config.userPoolWebClientId : this._config.oauth.clientID, a = fa(this._config.oauth) ? this._config.oauth.redirectSignIn : this._config.oauth.redirectUri, this._oAuthHandler.oauthSignIn(this._config.oauth.responseType, this._config.oauth.domain, a, s, l, o)), [3, 4]) : [3, 1];
                        case 1:
                            l = e;
                            try {
                                (d = JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user)) && oe.warn("There is already a signed in user: " + d + ` in your app.
																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.`)
                            } catch (E) {}
                            return c = t.token, h = t.identity_id, f = t.expires_at, [4, this.Credentials.set({
                                provider: l,
                                token: c,
                                identity_id: h,
                                user: r,
                                expires_at: f
                            }, "federation")];
                        case 2:
                            return g = y.sent(), [4, this.currentAuthenticatedUser()];
                        case 3:
                            return p = y.sent(), et("signIn", p, "A user " + p.username + " has been signed in"), oe.debug("federated sign in credentials", g), [2, g];
                        case 4:
                            return [2]
                    }
                    var b
                })
            })
        }, n.prototype._handleAuthResponse = function(e) {
            return Ae(this, void 0, void 0, function() {
                var t, r, i, o, s, a, l, d, c, h, f, g, p, y;
                return st(this, function(b) {
                    switch (b.label) {
                        case 0:
                            if (this.oAuthFlowInProgress) return oe.debug("Skipping URL " + e + " current flow in progress"), [2];
                            b.label = 1;
                        case 1:
                            if (b.trys.push([1, , 8, 9]), this.oAuthFlowInProgress = !0, !this._config.userPoolId) throw new Error("OAuth responses require a User Pool defined in config");
                            if (et("parsingCallbackUrl", {
                                    url: e
                                }, "The callback url is being parsed"), t = e || (Ao().isBrowser ? window.location.href : ""), r = !!(as(t).query || "").split("&").map(function(E) {
                                    return E.split("=")
                                }).find(function(E) {
                                    var S = Ur(E, 1)[0];
                                    return S === "code" || S === "error"
                                }), i = !!(as(t).hash || "#").substr(1).split("&").map(function(E) {
                                    return E.split("=")
                                }).find(function(E) {
                                    var S = Ur(E, 1)[0];
                                    return S === "access_token" || S === "error"
                                }), !r && !i) return [3, 7];
                            this._storage.setItem("amplify-redirected-from-hosted-ui", "true"), b.label = 2;
                        case 2:
                            return b.trys.push([2, 6, , 7]), [4, this._oAuthHandler.handleAuthResponse(t)];
                        case 3:
                            return o = b.sent(), s = o.accessToken, a = o.idToken, l = o.refreshToken, d = o.state, c = new QE({
                                IdToken: new YE({
                                    IdToken: a
                                }),
                                RefreshToken: new XE({
                                    RefreshToken: l
                                }),
                                AccessToken: new JE({
                                    AccessToken: s
                                })
                            }), h = void 0, this._config.identityPoolId ? [4, this.Credentials.set(c, "session")] : [3, 5];
                        case 4:
                            h = b.sent(), oe.debug("AWS credentials", h), b.label = 5;
                        case 5:
                            return f = /-/.test(d), (g = this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c), window && window.history !== void 0 && window.history.replaceState({}, null, this._config.oauth.redirectSignIn), et("signIn", g, "A user " + g.getUsername() + " has been signed in"), et("cognitoHostedUI", g, "A user " + g.getUsername() + " has been signed in via Cognito Hosted UI"), f && (p = d.split("-").splice(1).join("-"), et("customOAuthState", p.match(/.{2}/g).map(function(E) {
                                return String.fromCharCode(parseInt(E, 16))
                            }).join(""), "State for user " + g.getUsername())), [2, h];
                        case 6:
                            return y = b.sent(), oe.debug("Error in cognito hosted auth response", y), window && window.history !== void 0 && window.history.replaceState({}, null, this._config.oauth.redirectSignIn), et("signIn_failure", y, "The OAuth response flow failed"), et("cognitoHostedUI_failure", y, "A failure occurred when returning to the Cognito Hosted UI"), et("customState_failure", y, "A failure occurred when returning state"), [3, 7];
                        case 7:
                            return [3, 9];
                        case 8:
                            return this.oAuthFlowInProgress = !1, [7];
                        case 9:
                            return [2]
                    }
                })
            })
        }, n.prototype.essentialCredentials = function(e) {
            return {
                accessKeyId: e.accessKeyId,
                sessionToken: e.sessionToken,
                secretAccessKey: e.secretAccessKey,
                identityId: e.identityId,
                authenticated: e.authenticated
            }
        }, n.prototype.attributesToObject = function(e) {
            var t = this,
                r = {};
            return e && e.map(function(i) {
                i.Name === "email_verified" || i.Name === "phone_number_verified" ? r[i.Name] = t.isTruthyString(i.Value) || i.Value === !0 : r[i.Name] = i.Value
            }), r
        }, n.prototype.isTruthyString = function(e) {
            return typeof e.toLowerCase == "function" && e.toLowerCase() === "true"
        }, n.prototype.createCognitoUser = function(e) {
            var t = {
                Username: e,
                Pool: this.userPool
            };
            t.Storage = this._storage;
            var r = this._config.authenticationFlowType,
                i = new e_(t);
            return r && i.setAuthenticationFlowType(r), i
        }, n.prototype._isValidAuthStorage = function(e) {
            return !!e && typeof e.getItem == "function" && typeof e.setItem == "function" && typeof e.removeItem == "function" && typeof e.clear == "function"
        }, n.prototype.noUserPoolErrorHandler = function(e) {
            return !e || e.userPoolId && e.identityPoolId ? ft.NoConfig : ft.MissingAuthConfig
        }, n.prototype.rejectAuthError = function(e) {
            return Promise.reject(new is(e))
        }, n.prototype.rejectNoUserPool = function() {
            var e = this.noUserPoolErrorHandler(this._config);
            return Promise.reject(new GH(e))
        }, n.prototype.rememberDevice = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t;
                return st(this, function(r) {
                    switch (r.label) {
                        case 0:
                            return r.trys.push([0, 2, , 3]), [4, this.currentUserPoolUser()];
                        case 1:
                            return e = r.sent(), [3, 3];
                        case 2:
                            return t = r.sent(), oe.debug("The user is not authenticated by the error", t), [2, Promise.reject("The user is not authenticated")];
                        case 3:
                            return e.getCachedDeviceKeyAndPassword(), [2, new Promise(function(i, o) {
                                e.setDeviceStatusRemembered({
                                    onSuccess: u(function(s) {
                                        i(s)
                                    }, "onSuccess"),
                                    onFailure: u(function(s) {
                                        s.code === "InvalidParameterException" ? o(new is(ft.DeviceConfig)) : s.code === "NetworkError" ? o(new is(ft.NetworkError)) : o(s)
                                    }, "onFailure")
                                })
                            })]
                    }
                })
            })
        }, n.prototype.forgetDevice = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t;
                return st(this, function(r) {
                    switch (r.label) {
                        case 0:
                            return r.trys.push([0, 2, , 3]), [4, this.currentUserPoolUser()];
                        case 1:
                            return e = r.sent(), [3, 3];
                        case 2:
                            return t = r.sent(), oe.debug("The user is not authenticated by the error", t), [2, Promise.reject("The user is not authenticated")];
                        case 3:
                            return e.getCachedDeviceKeyAndPassword(), [2, new Promise(function(i, o) {
                                e.forgetDevice({
                                    onSuccess: u(function(s) {
                                        i(s)
                                    }, "onSuccess"),
                                    onFailure: u(function(s) {
                                        s.code === "InvalidParameterException" ? o(new is(ft.DeviceConfig)) : s.code === "NetworkError" ? o(new is(ft.NetworkError)) : o(s)
                                    }, "onFailure")
                                })
                            })]
                    }
                })
            })
        }, n.prototype.fetchDevices = function() {
            return Ae(this, void 0, void 0, function() {
                var e, t;
                return st(this, function(r) {
                    switch (r.label) {
                        case 0:
                            return r.trys.push([0, 2, , 3]), [4, this.currentUserPoolUser()];
                        case 1:
                            return e = r.sent(), [3, 3];
                        case 2:
                            throw t = r.sent(), oe.debug("The user is not authenticated by the error", t), new Error("The user is not authenticated");
                        case 3:
                            return e.getCachedDeviceKeyAndPassword(), [2, new Promise(function(i, o) {
                                var s = {
                                    onSuccess: u(function(a) {
                                        var l = a.Devices.map(function(d) {
                                            var c = d.DeviceAttributes.find(function(h) {
                                                return h.Name === "device_name"
                                            }) || {};
                                            return {
                                                id: d.DeviceKey,
                                                name: c.Value
                                            }
                                        });
                                        i(l)
                                    }, "onSuccess"),
                                    onFailure: u(function(a) {
                                        a.code === "InvalidParameterException" ? o(new is(ft.DeviceConfig)) : a.code === "NetworkError" ? o(new is(ft.NetworkError)) : o(a)
                                    }, "onFailure")
                                };
                                e.listDevices(60, null, s)
                            })]
                    }
                })
            })
        }, n
    }(),
    Sr = new ZH(null);
oh.register(Sr);
var ih = "client_runtime",
    Hu, zu, Wu, qu, jd, Gu, s_, k_ = class k_ {
        constructor(e) {
            Hu.set(this, void 0), Ce(this, Hu, e != null ? e : [], "f")
        }
        readFirst() {
            let e = null;
            for (let t of $(this, Hu, "f"))
                if (e = localStorage.getItem(t), e) break;
            return e
        }
        writeAll(e) {
            $(this, Hu, "f").forEach(t => {
                localStorage.setItem(t, e)
            })
        }
        clearAll() {
            $(this, Hu, "f").forEach(e => {
                localStorage.removeItem(e)
            })
        }
    };
u(k_, "io");
var Zu = k_;
Hu = new WeakMap;
var U_ = class U_ {
    constructor() {
        let {
            prefix: e = ["os-runtime", "os-builtin", ""],
            localEndpointKey: t = "identity-endpoints",
            tokenKey: r = "token",
            currentAuthTypeKey: i = "currentAuthType",
            currentAuthConfigKey: o = "currentAuthConfig"
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        zu.set(this, void 0), Wu.set(this, void 0), qu.set(this, void 0), jd.set(this, void 0), Gu.set(this, (s, a) => s.map(l => `${l}-${a}`)), Ce(this, zu, new Zu($(this, Gu, "f").call(this, e, t)), "f"), Ce(this, Wu, new Zu($(this, Gu, "f").call(this, e, r)), "f"), Ce(this, qu, new Zu($(this, Gu, "f").call(this, e, i)), "f"), Ce(this, jd, new Zu($(this, Gu, "f").call(this, e, o)), "f")
    }
    storeEndpoints(e) {
        $(this, zu, "f").writeAll(JSON.stringify(e))
    }
    readEndpoints() {
        let e = $(this, zu, "f").readFirst();
        return e ? JSON.parse(e) : null
    }
    storeToken(e) {
        $(this, Wu, "f").writeAll(JSON.stringify(e))
    }
    readToken() {
        let e = $(this, Wu, "f").readFirst();
        return e ? JSON.parse(e) : null
    }
    readAccessToken() {
        var e;
        let t = this.readToken();
        return (e = t == null ? void 0 : t.access_token) !== null && e !== void 0 ? e : null
    }
    readRefreshToken() {
        var e;
        let t = this.readToken();
        return (e = t == null ? void 0 : t.refresh_token) !== null && e !== void 0 ? e : null
    }
    readIdToken() {
        var e;
        let t = this.readToken();
        return (e = t == null ? void 0 : t.id_token) !== null && e !== void 0 ? e : null
    }
    storeCurrentAuthType(e) {
        $(this, qu, "f").writeAll(e)
    }
    readCurrentAuthType() {
        var e;
        return (e = $(this, qu, "f").readFirst()) !== null && e !== void 0 ? e : null
    }
    storeCurrentAuthConfig(e) {
        $(this, jd, "f").writeAll(JSON.stringify(e))
    }
    readCurrentAuthConfig() {
        let e = $(this, jd, "f").readFirst();
        return e ? JSON.parse(e) : null
    }
    clearAuthData() {
        $(this, zu, "f").clearAll(), $(this, Wu, "f").clearAll(), $(this, qu, "f").clearAll()
    }
};
u(U_, "oo");
var ma = U_;
zu = new WeakMap, Wu = new WeakMap, qu = new WeakMap, jd = new WeakMap, Gu = new WeakMap,
    function(n) {
        n.InvalidCredentials = "InvalidCredentials", n.TooManyFailedAttempts = "TooManyFailedAttempts", n.UnknownFailure = "UnknownFailure", n.PasswordComplexityPolicyFailed = "PasswordComplexityPolicyFailed", n.InvalidToken = "InvalidToken", n.IdentityTokenEndpointFailed = "IdentityTokenEndpointFailed"
    }(s_ || (s_ = {}));
var at = s_,
    M_ = class M_ extends Error {
        constructor(e, t) {
            super(t), this.errorCode = e
        }
    };
u(M_, "ao");
var Co = M_,
    F_ = class F_ {
        static create(e) {
            let {
                name: t,
                message: r,
                code: i = "OS-CLRT-40100"
            } = e, o = new Co(i, r);
            return o.name = t, o
        }
    };
u(F_, "uo");
var pn = F_;

function a_(n) {
    this.message = n
}
u(a_, "co");
a_.prototype = new Error, a_.prototype.name = "InvalidCharacterError";
var zN = typeof window != "undefined" && window.atob && window.atob.bind(window) || function(n) {
    var e = String(n).replace(/=+$/, "");
    if (e.length % 4 == 1) throw new a_("'atob' failed: The string to be decoded is not correctly encoded.");
    for (var t, r, i = 0, o = 0, s = ""; r = e.charAt(o++); ~r && (t = i % 4 ? 64 * t + r : r, i++ % 4) ? s += String.fromCharCode(255 & t >> (-2 * i & 6)) : 0) r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);
    return s
};

function YH(n) {
    var e = n.replace(/-/g, "+").replace(/_/g, "/");
    switch (e.length % 4) {
        case 0:
            break;
        case 2:
            e += "==";
            break;
        case 3:
            e += "=";
            break;
        default:
            throw "Illegal base64url string!"
    }
    try {
        return function(t) {
            return decodeURIComponent(zN(t).replace(/(.)/g, function(r, i) {
                var o = i.charCodeAt(0).toString(16).toUpperCase();
                return o.length < 2 && (o = "0" + o), "%" + o
            }))
        }(e)
    } catch (t) {
        return zN(e)
    }
}
u(YH, "ho");

function bm(n) {
    this.message = n
}
u(bm, "fo");

function XH(n, e) {
    if (typeof n != "string") throw new bm("Invalid token specified");
    var t = (e = e || {}).header === !0 ? 0 : 1;
    try {
        return JSON.parse(YH(n.split(".")[t]))
    } catch (r) {
        throw new bm("Invalid token specified: " + r.message)
    }
}
u(XH, "po");
bm.prototype = new Error, bm.prototype.name = "InvalidTokenError";
var Nm = u(function(n) {
        return (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : XH)(n)
    }, "go"),
    QH = u(n => n ? `${n.token_type} ${n.access_token}` : null, "yo"),
    Jp = u(n => {
        let {
            token: e,
            now: t = Date.now,
            tokenDecoder: r,
            logger: i
        } = n;
        if (!e) return !1;
        try {
            let o = 1e3 * r(e).exp - 1e4;
            return t() < o
        } catch (o) {
            return i == null || i.error({
                category: "JWT_DECODING",
                message: "Issue validating token",
                error: o
            }), !1
        }
    }, "vo"),
    u_ = {
        exports: {}
    };
(function(n, e) {
    var t = "__lodash_hash_undefined__",
        r = 1,
        i = 2,
        o = 9007199254740991,
        s = "[object Arguments]",
        a = "[object Array]",
        l = "[object AsyncFunction]",
        d = "[object Boolean]",
        c = "[object Date]",
        h = "[object Error]",
        f = "[object Function]",
        g = "[object GeneratorFunction]",
        p = "[object Map]",
        y = "[object Number]",
        b = "[object Null]",
        E = "[object Object]",
        S = "[object Promise]",
        _ = "[object Proxy]",
        I = "[object RegExp]",
        x = "[object Set]",
        L = "[object String]",
        U = "[object Symbol]",
        N = "[object Undefined]",
        j = "[object WeakMap]",
        q = "[object ArrayBuffer]",
        fe = "[object DataView]",
        K = /^\[object .+?Constructor\]$/,
        ae = /^(?:0|[1-9]\d*)$/,
        Z = {};
    Z["[object Float32Array]"] = Z["[object Float64Array]"] = Z["[object Int8Array]"] = Z["[object Int16Array]"] = Z["[object Int32Array]"] = Z["[object Uint8Array]"] = Z["[object Uint8ClampedArray]"] = Z["[object Uint16Array]"] = Z["[object Uint32Array]"] = !0, Z[s] = Z[a] = Z[q] = Z[d] = Z[fe] = Z[c] = Z[h] = Z[f] = Z[p] = Z[y] = Z[E] = Z[I] = Z[x] = Z[L] = Z[j] = !1;
    var ne = typeof Cn == "object" && Cn && Cn.Object === Object && Cn,
        ue = typeof self == "object" && self && self.Object === Object && self,
        ve = ne || ue || Function("return this")(),
        Ee = e && !e.nodeType && e,
        be = Ee && n && !n.nodeType && n,
        De = be && be.exports === Ee,
        Pe = De && ne.process,
        nt = function() {
            try {
                return Pe && Pe.binding && Pe.binding("util")
            } catch (k) {}
        }(),
        re = nt && nt.isTypedArray;

    function B(k, G) {
        for (var me = -1, _e = k == null ? 0 : k.length; ++me < _e;)
            if (G(k[me], me, k)) return !0;
        return !1
    }
    u(B, "B");

    function P(k) {
        var G = -1,
            me = Array(k.size);
        return k.forEach(function(_e, vt) {
            me[++G] = [vt, _e]
        }), me
    }
    u(P, "V");

    function m(k) {
        var G = -1,
            me = Array(k.size);
        return k.forEach(function(_e) {
            me[++G] = _e
        }), me
    }
    u(m, "K");
    var v, w, A, R = Array.prototype,
        O = Function.prototype,
        W = Object.prototype,
        ie = ve["__core-js_shared__"],
        Se = O.toString,
        Re = W.hasOwnProperty,
        ke = (v = /[^.]+$/.exec(ie && ie.keys && ie.keys.IE_PROTO || "")) ? "Symbol(src)_1." + v : "",
        _t = W.toString,
        we = RegExp("^" + Se.call(Re).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
        $e = De ? ve.Buffer : void 0,
        ct = ve.Symbol,
        St = ve.Uint8Array,
        hn = W.propertyIsEnumerable,
        Ba = R.splice,
        Or = ct ? ct.toStringTag : void 0,
        Os = Object.getOwnPropertySymbols,
        Qr = $e ? $e.isBuffer : void 0,
        qn = (w = Object.keys, A = Object, function(k) {
            return w(A(k))
        }),
        Ze = Ki(ve, "DataView"),
        xn = Ki(ve, "Map"),
        Ds = Ki(ve, "Promise"),
        Ns = Ki(ve, "Set"),
        Ls = Ki(ve, "WeakMap"),
        ei = Ki(Object, "create"),
        Qy = Ji(Ze),
        e0 = Ji(xn),
        t0 = Ji(Ds),
        n0 = Ji(Ns),
        r0 = Ji(Ls),
        xs = ct ? ct.prototype : void 0,
        Ps = xs ? xs.valueOf : void 0;

    function _i(k) {
        var G = -1,
            me = k == null ? 0 : k.length;
        for (this.clear(); ++G < me;) {
            var _e = k[G];
            this.set(_e[0], _e[1])
        }
    }
    u(_i, "Ae");

    function bn(k) {
        var G = -1,
            me = k == null ? 0 : k.length;
        for (this.clear(); ++G < me;) {
            var _e = k[G];
            this.set(_e[0], _e[1])
        }
    }
    u(bn, "Ie");

    function wn(k) {
        var G = -1,
            me = k == null ? 0 : k.length;
        for (this.clear(); ++G < me;) {
            var _e = k[G];
            this.set(_e[0], _e[1])
        }
    }
    u(wn, "Ce");

    function nr(k) {
        var G = -1,
            me = k == null ? 0 : k.length;
        for (this.__data__ = new wn; ++G < me;) this.add(k[G])
    }
    u(nr, "Ee");

    function gr(k) {
        var G = this.__data__ = new bn(k);
        this.size = G.size
    }
    u(gr, "Te");

    function ti(k, G) {
        var me = Ms(k),
            _e = !me && Ii(k),
            vt = !me && !_e && jo(k),
            We = !me && !_e && !vt && Bs(k),
            Ct = me || _e || vt || We,
            Rt = Ct ? function(qt, Dr) {
                for (var mr = -1, Tn = Array(qt); ++mr < qt;) Tn[mr] = Dr(mr);
                return Tn
            }(k.length, String) : [],
            Pn = Rt.length;
        for (var $t in k) !Re.call(k, $t) || Ct && ($t == "length" || vt && ($t == "offset" || $t == "parent") || We && ($t == "buffer" || $t == "byteLength" || $t == "byteOffset") || Bo($t, Pn)) || Rt.push($t);
        return Rt
    }
    u(ti, "Ue");

    function ks(k, G) {
        for (var me = k.length; me--;)
            if (bf(k[me][0], G)) return me;
        return -1
    }
    u(ks, "ke");

    function Si(k) {
        return k == null ? k === void 0 ? N : b : Or && Or in Object(k) ? function(G) {
            var me = Re.call(G, Or),
                _e = G[Or];
            try {
                G[Or] = void 0;
                var vt = !0
            } catch (Ct) {}
            var We = _t.call(G);
            return vt && (me ? G[Or] = _e : delete G[Or]), We
        }(k) : function(G) {
            return _t.call(G)
        }(k)
    }
    u(Si, "Pe");

    function El(k) {
        return Fs(k) && Si(k) == s
    }
    u(El, "Oe");

    function mf(k, G, me, _e, vt) {
        return k === G || (k == null || G == null || !Fs(k) && !Fs(G) ? k != k && G != G : function(We, Ct, Rt, Pn, $t, qt) {
            var Dr = Ms(We),
                mr = Ms(Ct),
                Tn = Dr ? a : pr(We),
                ni = mr ? a : pr(Ct),
                Yi = (Tn = Tn == s ? E : Tn) == E,
                C = (ni = ni == s ? E : ni) == E,
                V = Tn == ni;
            if (V && jo(We)) {
                if (!jo(Ct)) return !1;
                Dr = !0, Yi = !1
            }
            if (V && !Yi) return qt || (qt = new gr), Dr || Bs(We) ? vf(We, Ct, Rt, Pn, $t, qt) : function(Te, Le, ht, ze, Xe, Pt, It) {
                switch (ht) {
                    case fe:
                        if (Te.byteLength != Le.byteLength || Te.byteOffset != Le.byteOffset) return !1;
                        Te = Te.buffer, Le = Le.buffer;
                    case q:
                        return !(Te.byteLength != Le.byteLength || !Pt(new St(Te), new St(Le)));
                    case d:
                    case c:
                    case y:
                        return bf(+Te, +Le);
                    case h:
                        return Te.name == Le.name && Te.message == Le.message;
                    case I:
                    case L:
                        return Te == Le + "";
                    case p:
                        var wt = P;
                    case x:
                        var kt = ze & r;
                        if (wt || (wt = m), Te.size != Le.size && !kt) return !1;
                        var kn = It.get(Te);
                        if (kn) return kn == Le;
                        ze |= i, It.set(Te, Le);
                        var Ai = vf(wt(Te), wt(Le), ze, Xe, Pt, It);
                        return It.delete(Te), Ai;
                    case U:
                        if (Ps) return Ps.call(Te) == Ps.call(Le)
                }
                return !1
            }(We, Ct, Tn, Rt, Pn, $t, qt);
            if (!(Rt & r)) {
                var ee = Yi && Re.call(We, "__wrapped__"),
                    he = C && Re.call(Ct, "__wrapped__");
                if (ee || he) {
                    var Me = ee ? We.value() : We,
                        Fe = he ? Ct.value() : Ct;
                    return qt || (qt = new gr), $t(Me, Fe, Rt, Pn, qt)
                }
            }
            return V ? (qt || (qt = new gr), function(Te, Le, ht, ze, Xe, Pt) {
                var It = ht & r,
                    wt = yf(Te),
                    kt = wt.length,
                    kn = yf(Le),
                    Ai = kn.length;
                if (kt != Ai && !It) return !1;
                for (var Ci = kt; Ci--;) {
                    var Ri = wt[Ci];
                    if (!(It ? Ri in Le : Re.call(Le, Ri))) return !1
                }
                var Cl = Pt.get(Te);
                if (Cl && Pt.get(Le)) return Cl == Le;
                var ja = !0;
                Pt.set(Te, Le), Pt.set(Le, Te);
                for (var Rl = It; ++Ci < kt;) {
                    var lt = Te[Ri = wt[Ci]],
                        rt = Le[Ri];
                    if (ze) var $a = It ? ze(rt, lt, Ri, Le, Te, Pt) : ze(lt, rt, Ri, Te, Le, Pt);
                    if (!($a === void 0 ? lt === rt || Xe(lt, rt, ht, ze, Pt) : $a)) {
                        ja = !1;
                        break
                    }
                    Rl || (Rl = Ri == "constructor")
                }
                if (ja && !Rl) {
                    var Nr = Te.constructor,
                        Xi = Le.constructor;
                    Nr == Xi || !("constructor" in Te) || !("constructor" in Le) || typeof Nr == "function" && Nr instanceof Nr && typeof Xi == "function" && Xi instanceof Xi || (ja = !1)
                }
                return Pt.delete(Te), Pt.delete(Le), ja
            }(We, Ct, Rt, Pn, $t, qt)) : !1
        }(k, G, me, _e, mf, vt))
    }
    u(mf, "Re");

    function _l(k) {
        return !(!Al(k) || function(G) {
            return !!ke && ke in G
        }(k)) && (Sl(k) ? we : K).test(Ji(k))
    }
    u(_l, "De");

    function i0(k) {
        if (me = (G = k) && G.constructor, _e = typeof me == "function" && me.prototype || W, G !== _e) return qn(k);
        var G, me, _e, vt = [];
        for (var We in Object(k)) Re.call(k, We) && We != "constructor" && vt.push(We);
        return vt
    }
    u(i0, "xe");

    function vf(k, G, me, _e, vt, We) {
        var Ct = me & r,
            Rt = k.length,
            Pn = G.length;
        if (Rt != Pn && !(Ct && Pn > Rt)) return !1;
        var $t = We.get(k);
        if ($t && We.get(G)) return $t == G;
        var qt = -1,
            Dr = !0,
            mr = me & i ? new nr : void 0;
        for (We.set(k, G), We.set(G, k); ++qt < Rt;) {
            var Tn = k[qt],
                ni = G[qt];
            if (_e) var Yi = Ct ? _e(ni, Tn, qt, G, k, We) : _e(Tn, ni, qt, k, G, We);
            if (Yi !== void 0) {
                if (Yi) continue;
                Dr = !1;
                break
            }
            if (mr) {
                if (!B(G, function(C, V) {
                        if (ee = V, !mr.has(ee) && (Tn === C || vt(Tn, C, me, _e, We))) return mr.push(V);
                        var ee
                    })) {
                    Dr = !1;
                    break
                }
            } else if (Tn !== ni && !vt(Tn, ni, me, _e, We)) {
                Dr = !1;
                break
            }
        }
        return We.delete(k), We.delete(G), Dr
    }
    u(vf, "Fe");

    function yf(k) {
        return function(G, me, _e) {
            var vt = me(G);
            return Ms(G) ? vt : function(We, Ct) {
                for (var Rt = -1, Pn = Ct.length, $t = We.length; ++Rt < Pn;) We[$t + Rt] = Ct[Rt];
                return We
            }(vt, _e(G))
        }(k, Zi, o0)
    }
    u(yf, "Me");

    function Us(k, G) {
        var me, _e, vt = k.__data__;
        return ((_e = typeof(me = G)) == "string" || _e == "number" || _e == "symbol" || _e == "boolean" ? me !== "__proto__" : me === null) ? vt[typeof G == "string" ? "string" : "hash"] : vt.map
    }
    u(Us, "je");

    function Ki(k, G) {
        var me = function(_e, vt) {
            return _e == null ? void 0 : _e[vt]
        }(k, G);
        return _l(me) ? me : void 0
    }
    u(Ki, "Ne"), _i.prototype.clear = function() {
        this.__data__ = ei ? ei(null) : {}, this.size = 0
    }, _i.prototype.delete = function(k) {
        var G = this.has(k) && delete this.__data__[k];
        return this.size -= G ? 1 : 0, G
    }, _i.prototype.get = function(k) {
        var G = this.__data__;
        if (ei) {
            var me = G[k];
            return me === t ? void 0 : me
        }
        return Re.call(G, k) ? G[k] : void 0
    }, _i.prototype.has = function(k) {
        var G = this.__data__;
        return ei ? G[k] !== void 0 : Re.call(G, k)
    }, _i.prototype.set = function(k, G) {
        var me = this.__data__;
        return this.size += this.has(k) ? 0 : 1, me[k] = ei && G === void 0 ? t : G, this
    }, bn.prototype.clear = function() {
        this.__data__ = [], this.size = 0
    }, bn.prototype.delete = function(k) {
        var G = this.__data__,
            me = ks(G, k);
        return !(me < 0) && (me == G.length - 1 ? G.pop() : Ba.call(G, me, 1), --this.size, !0)
    }, bn.prototype.get = function(k) {
        var G = this.__data__,
            me = ks(G, k);
        return me < 0 ? void 0 : G[me][1]
    }, bn.prototype.has = function(k) {
        return ks(this.__data__, k) > -1
    }, bn.prototype.set = function(k, G) {
        var me = this.__data__,
            _e = ks(me, k);
        return _e < 0 ? (++this.size, me.push([k, G])) : me[_e][1] = G, this
    }, wn.prototype.clear = function() {
        this.size = 0, this.__data__ = {
            hash: new _i,
            map: new(xn || bn),
            string: new _i
        }
    }, wn.prototype.delete = function(k) {
        var G = Us(this, k).delete(k);
        return this.size -= G ? 1 : 0, G
    }, wn.prototype.get = function(k) {
        return Us(this, k).get(k)
    }, wn.prototype.has = function(k) {
        return Us(this, k).has(k)
    }, wn.prototype.set = function(k, G) {
        var me = Us(this, k),
            _e = me.size;
        return me.set(k, G), this.size += me.size == _e ? 0 : 1, this
    }, nr.prototype.add = nr.prototype.push = function(k) {
        return this.__data__.set(k, t), this
    }, nr.prototype.has = function(k) {
        return this.__data__.has(k)
    }, gr.prototype.clear = function() {
        this.__data__ = new bn, this.size = 0
    }, gr.prototype.delete = function(k) {
        var G = this.__data__,
            me = G.delete(k);
        return this.size = G.size, me
    }, gr.prototype.get = function(k) {
        return this.__data__.get(k)
    }, gr.prototype.has = function(k) {
        return this.__data__.has(k)
    }, gr.prototype.set = function(k, G) {
        var me = this.__data__;
        if (me instanceof bn) {
            var _e = me.__data__;
            if (!xn || _e.length < 199) return _e.push([k, G]), this.size = ++me.size, this;
            me = this.__data__ = new wn(_e)
        }
        return me.set(k, G), this.size = me.size, this
    };
    var o0 = Os ? function(k) {
            return k == null ? [] : (k = Object(k), function(G, me) {
                for (var _e = -1, vt = G == null ? 0 : G.length, We = 0, Ct = []; ++_e < vt;) {
                    var Rt = G[_e];
                    me(Rt, _e, G) && (Ct[We++] = Rt)
                }
                return Ct
            }(Os(k), function(G) {
                return hn.call(k, G)
            }))
        } : function() {
            return []
        },
        pr = Si;

    function Bo(k, G) {
        return !!(G = G == null ? o : G) && (typeof k == "number" || ae.test(k)) && k > -1 && k % 1 == 0 && k < G
    }
    u(Bo, "Ve");

    function Ji(k) {
        if (k != null) {
            try {
                return Se.call(k)
            } catch (G) {}
            try {
                return k + ""
            } catch (G) {}
        }
        return ""
    }
    u(Ji, "Ke");

    function bf(k, G) {
        return k === G || k != k && G != G
    }
    u(bf, "We"), (Ze && pr(new Ze(new ArrayBuffer(1))) != fe || xn && pr(new xn) != p || Ds && pr(Ds.resolve()) != S || Ns && pr(new Ns) != x || Ls && pr(new Ls) != j) && (pr = u(function(k) {
        var G = Si(k),
            me = G == E ? k.constructor : void 0,
            _e = me ? Ji(me) : "";
        if (_e) switch (_e) {
            case Qy:
                return fe;
            case e0:
                return p;
            case t0:
                return S;
            case n0:
                return x;
            case r0:
                return j
        }
        return G
    }, "Be"));
    var Ii = El(function() {
            return arguments
        }()) ? El : function(k) {
            return Fs(k) && Re.call(k, "callee") && !hn.call(k, "callee")
        },
        Ms = Array.isArray,
        jo = Qr || function() {
            return !1
        };

    function Sl(k) {
        if (!Al(k)) return !1;
        var G = Si(k);
        return G == f || G == g || G == l || G == _
    }
    u(Sl, "Je");

    function Il(k) {
        return typeof k == "number" && k > -1 && k % 1 == 0 && k <= o
    }
    u(Il, "$e");

    function Al(k) {
        var G = typeof k;
        return k != null && (G == "object" || G == "function")
    }
    u(Al, "Ye");

    function Fs(k) {
        return k != null && typeof k == "object"
    }
    u(Fs, "Ze");
    var Bs = re ? function(k) {
        return function(G) {
            return k(G)
        }
    }(re) : function(k) {
        return Fs(k) && Il(k.length) && !!Z[Si(k)]
    };

    function Zi(k) {
        return (G = k) != null && Il(G.length) && !Sl(G) ? ti(k) : i0(k);
        var G
    }
    u(Zi, "Qe"), n.exports = function(k, G) {
        return mf(k, G)
    }
})(u_, u_.exports);
var Bi, Fr, cs, Gd, wm, Zp, Kd, Jd, Zd, zL, WN, qN, WL, qL, GN, c_, l_, e8 = O_(u_.exports),
    B_ = class B_ {
        serialize(e) {
            if (e != null) return JSON.stringify(e)
        }
        deserialize(e) {
            if (e != null) return JSON.parse(e)
        }
    };
u(B_, "jo");
var d_ = B_,
    j_ = class j_ {
        get validityKey() {
            return `${$(this,cs,"f")}__expires`
        }
        constructor(e) {
            let {
                storage: t = localStorage,
                key: r,
                timespan: i = 0,
                canFetch: o,
                fetch: s,
                serializer: a = new d_,
                serialize: l = !0,
                validate: d = u(() => !0, "a")
            } = e;
            Bi.add(this), Fr.set(this, void 0), cs.set(this, void 0), Gd.set(this, void 0), wm.set(this, void 0), Zp.set(this, void 0), Kd.set(this, void 0), Jd.set(this, void 0), Zd.set(this, void 0), Ce(this, Fr, t, "f"), Ce(this, cs, r, "f"), Ce(this, Gd, i, "f"), Ce(this, wm, o, "f"), Ce(this, Zp, s, "f"), Ce(this, Kd, a, "f"), Ce(this, Jd, l, "f"), Ce(this, Zd, d, "f")
        }
        get() {
            return Ae(this, void 0, void 0, function*() {
                let [e, t] = yield $(this, Bi, "m", qL).call(this);
                if (e) return t;
                let r = yield $(this, Zp, "f").call(this);
                return r === void 0 ? t : ($(this, Bi, "m", zL).call(this, r), $(this, Bi, "m", WL).call(this), r)
            })
        }
        invalidate() {
            $(this, Fr, "f").removeItem(this.validityKey)
        }
        getCached() {
            return $(this, Bi, "m", c_).call(this)[1]
        }
        clear() {
            $(this, Fr, "f").removeItem($(this, cs, "f")), $(this, Fr, "f").removeItem(this.validityKey)
        }
    };
u(j_, "No");
var h_ = j_;

function t8(n) {
    let {
        fetchEndpoints: e,
        getAccessToken: t,
        logger: r,
        httpClient: i,
        canFetch: o,
        key: s = "user_info",
        timespan: a = 3e5
    } = n;
    return new h_({
        fetch: u(() => Ae(this, void 0, void 0, function*() {
            try {
                let l = yield function(d) {
                    return Ae(this, arguments, void 0, function(c) {
                        let {
                            fetchEndpoints: h,
                            getAccessToken: f,
                            httpClient: g
                        } = c;
                        return function*() {
                            let p = (yield h()).userinfo_endpoint;
                            if (!p) throw new Error("Missing user info endpoint");
                            let y = yield f();
                            if (!y) throw new Error("Missing access token");
                            let b = yield g.get({
                                url: p,
                                headers: {
                                    Authorization: y
                                }
                            });
                            if (b === void 0) throw new Error("Couldn't get any response from server while fetching user info.");
                            return b
                        }()
                    })
                }({
                    fetchEndpoints: e,
                    getAccessToken: t,
                    httpClient: i
                });
                return function(d) {
                    return Object.assign(Object.assign({}, d), {
                        os_access: typeof d.os_access == "string" ? JSON.parse(d.os_access) : {
                            userId: "",
                            roles: []
                        }
                    })
                }(l)
            } catch (l) {
                return void(r == null || r.error({
                    message: "Failed to load user info",
                    error: l instanceof Error ? l : new Error("Unknown error"),
                    category: "UserInfoCache"
                }))
            }
        }), "fetch"),
        canFetch: o,
        key: s,
        timespan: a
    })
}
u(t8, "Lo");
Fr = new WeakMap, cs = new WeakMap, Gd = new WeakMap, wm = new WeakMap, Zp = new WeakMap, Kd = new WeakMap, Jd = new WeakMap, Zd = new WeakMap, Bi = new WeakSet, zL = u(function(n) {
        let e = $(this, Bi, "m", qN).call(this, n);
        typeof e == "string" ? $(this, Fr, "f").setItem($(this, cs, "f"), e) : $(this, Fr, "f").removeItem($(this, cs, "f"))
    }, "Uo"), WN = u(function(n) {
        return $(this, Jd, "f") ? $(this, Kd, "f").deserialize(n) : n
    }, "ko"), qN = u(function(n) {
        return $(this, Jd, "f") ? $(this, Kd, "f").serialize(n) : n
    }, "Po"), WL = u(function() {
        if ($(this, Gd, "f") === 0) return void $(this, Fr, "f").setItem(this.validityKey, "0");
        let n = (new Date().getTime() + $(this, Gd, "f")).toString();
        $(this, Fr, "f").setItem(this.validityKey, n)
    }, "Oo"), qL = u(function() {
        return Ae(this, void 0, void 0, function*() {
            let [n, e] = $(this, Bi, "m", c_).call(this);
            return $(this, wm, "f").call(this) ? n === void 0 ? [!1, void 0] : $(this, Bi, "m", GN).call(this) ? [!1, e] : typeof $(this, Zd, "f") == "function" ? [yield $(this, Zd, "f").call(this, e), e] : [!0, e] : [!0, e]
        })
    }, "Ro"), GN = u(function() {
        let n = $(this, Fr, "f").getItem(this.validityKey),
            e = parseInt(n != null ? n : "", 10);
        return !!(isNaN(e) || e < 0) || e > 0 && e <= new Date().getTime()
    }, "Do"), c_ = u(function() {
        var n;
        let e = (n = $(this, Fr, "f").getItem($(this, cs, "f"))) !== null && n !== void 0 ? n : void 0;
        return [e, $(this, Bi, "m", WN).call(this, e)]
    }, "xo"),
    function(n) {
        n[n.Internal = 0] = "Internal", n[n.External = 1] = "External", n[n.Client = 2] = "Client"
    }(l_ || (l_ = {}));
var Yp, Xp, Qp, Yu, Tm, em, f_, Ar = l_,
    $_ = class $_ {
        constructor(e) {
            let {
                synchronize: t,
                logger: r,
                setTimeoutOverride: i = setTimeout,
                clearTimeoutOverride: o = clearTimeout,
                timeout: s,
                start: a = !0
            } = e;
            Yp.add(this), Xp.set(this, void 0), Qp.set(this, void 0), Yu.set(this, void 0), Tm.set(this, void 0), em.set(this, void 0), Ce(this, Xp, t, "f"), Ce(this, Qp, r, "f"), Ce(this, Tm, i, "f"), Ce(this, em, o, "f"), Ce(this, Yu, s, "f"), a && $(this, Yp, "m", f_).call(this)
        }
        trySynchronize() {
            return Ae(this, void 0, void 0, function*() {
                var e;
                $(this, Yu, "f") && $(this, em, "f").call(this, $(this, Yu, "f"));
                try {
                    yield $(this, Xp, "f").call(this)
                } catch (t) {
                    (e = $(this, Qp, "f")) === null || e === void 0 || e.error({
                        category: "AuthenticationSynchronizer",
                        message: "Error while synchronizing information.",
                        error: t,
                        code: "OS-CLRT-40300"
                    }), $(this, Yp, "m", f_).call(this)
                }
            })
        }
    };
u($_, "Jo");
var g_ = $_,
    Xu, Ku, tc, li, $d, Vd, _o, GL, KL, KN, JL;
Xp = new WeakMap, Qp = new WeakMap, Yu = new WeakMap, Tm = new WeakMap, em = new WeakMap, Yp = new WeakSet, f_ = u(function() {
    Ce(this, Yu, $(this, Tm, "f").call(this, () => this.trySynchronize(), 6e4), "f")
}, "Ho");
var Qu = "authentication-token-handler",
    V_ = class V_ {
        constructor(e) {
            let {
                authData: t,
                decodeJwt: r = Nm,
                logger: i,
                tokenValidator: o = Jp
            } = e;
            Xu.add(this), Ku.set(this, void 0), tc.set(this, void 0), li.set(this, void 0), $d.set(this, void 0), Vd.set(this, void 0), _o.set(this, void 0), Ce(this, Ku, t, "f"), Ce(this, $d, r, "f"), Ce(this, _o, i, "f"), Ce(this, Vd, o, "f")
        }
        invalidateAccessToken(e) {
            typeof e == "string" && e.length > 0 && Ce(this, tc, e, "f")
        }
        isAccessTokenValid(e, t) {
            return typeof e == "string" && e !== $(this, tc, "f") && (t != null ? t : $(this, Vd, "f"))({
                token: e,
                tokenDecoder: $(this, $d, "f")
            })
        }
        isRefreshTokenValid(e, t) {
            let r = e != null ? e : $(this, Ku, "f").readRefreshToken();
            return typeof r == "string" && r !== $(this, li, "f") && (t != null ? t : $(this, Vd, "f"))({
                token: r,
                tokenDecoder: $(this, $d, "f")
            })
        }
        refreshToken(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    refreshEndpoint: i,
                    client: o,
                    scope: s,
                    clientId: a,
                    timeoutHandler: l
                } = t;
                return function*() {
                    var d, c, h;
                    r.invalidateAccessToken((d = $(r, Ku, "f").readAccessToken()) !== null && d !== void 0 ? d : "");
                    let f = $(r, Ku, "f").readRefreshToken();
                    if (!f) return $(r, li, "f") !== "[]" && ((c = $(r, _o, "f")) === null || c === void 0 || c.info({
                        category: Qu,
                        message: "No refresh token stored. Could not refresh the tokens.",
                        visibility: Ar.Internal
                    }), Ce(r, li, "[]", "f")), {
                        type: "invalid-state"
                    };
                    if (!r.isRefreshTokenValid(f)) return f === $(r, li, "f") ? {
                        type: "invalid-state"
                    } : {
                        type: "error",
                        error: $(r, Xu, "m", GL).call(r, f)
                    };
                    try {
                        let g = yield o.post({
                            url: i,
                            payload: {
                                grant_type: "refresh_token",
                                refresh_token: f,
                                client_id: a,
                                scope: s
                            },
                            timeoutHandler: l
                        });
                        if (g === void 0) {
                            let p = new Error("Couldn't get any response from server while refreshing tokens.");
                            throw (h = $(r, _o, "f")) === null || h === void 0 || h.error({
                                category: Qu,
                                code: "OS-CLRT-40100",
                                error: p,
                                visibility: Ar.Internal
                            }), p
                        }
                        return Ce(r, li, f, "f"), $(r, Xu, "m", JL).call(r, g), {
                            type: "success",
                            token: g
                        }
                    } catch (g) {
                        let p = $(r, Xu, "m", KL).call(r, g);
                        return p.errorCode !== "OS-CLRT-40112" && Ce(r, li, f, "f"), {
                            type: "error",
                            error: p
                        }
                    }
                }()
            })
        }
    };
u(V_, "as");
var p_ = V_;
Ku = new WeakMap, tc = new WeakMap, li = new WeakMap, $d = new WeakMap, Vd = new WeakMap, _o = new WeakMap, Xu = new WeakSet, GL = u(function(n) {
    var e;
    Ce(this, li, n, "f");
    let t = new Co("OS-CLRT-40103", "Refresh token not valid.");
    return (e = $(this, _o, "f")) === null || e === void 0 || e.error({
        error: t,
        category: Qu,
        code: t.errorCode
    }), t
}, "ns"), KL = u(function(n) {
    var e;
    let t = typeof(r = n) == "string" ? new Error(r) : r instanceof Error ? r : new Error("Unknown error");
    var r;
    if (t instanceof Co) return t;
    let i = $(this, Xu, "m", KN).call(this, t),
        o = `Failed to call refresh token endpoint: ${t.message}`;
    return (e = $(this, _o, "f")) === null || e === void 0 || e.error({
        error: t,
        category: Qu,
        code: i,
        message: o
    }), new Co(i, o)
}, "rs"), KN = u(function(n) {
    return n instanceof wr ? wR(n) ? "OS-CLRT-40112" : "OS-CLRT-40100" : "OS-CLRT-40112"
}, "is"), JL = u(function(n) {
    var e, t;
    n.access_token !== $(this, tc, "f") ? Ce(this, tc, void 0, "f") : (e = $(this, _o, "f")) === null || e === void 0 || e.warning({
        category: Qu,
        message: "Access token already invalidated."
    }), n.refresh_token !== $(this, li, "f") ? Ce(this, li, void 0, "f") : (t = $(this, _o, "f")) === null || t === void 0 || t.warning({
        category: Qu,
        message: "Refresh token already invalidated."
    })
}, "os");
var P_ = "/moduleservices/users/userinfosync",
    JN, Yd, tm, nm, da, ZL, ZN, YL;
(function(n) {
    n.Authorization = "authorization_endpoint", n.Token = "token_endpoint", n.Logout = "end_session_endpoint", n.Refresh = "token_endpoint", n.UserInfo = "userinfo_endpoint"
})(JN || (JN = {}));
var Nt = "Authentication",
    H_ = class H_ {
        constructor(e) {
            let {
                scope: t = "",
                identityEndpoint: r = "/identity/.well-known/openid-configuration",
                appUrl: i,
                appSyncEndpoint: o = P_,
                authData: s,
                httpClient: a,
                decodeJwt: l = Nm,
                logger: d,
                validator: c = Jp,
                tokenHandler: h = new p_({
                    authData: s,
                    decodeJwt: l,
                    logger: d,
                    tokenValidator: c
                }),
                synchronizer: f,
                userInfo: g,
                isOnline: p = u(() => !0, "f")
            } = e;
            Yd.add(this), tm.set(this, void 0), nm.set(this, void 0), da.set(this, void 0), this.scope = t, Ce(this, tm, r, "f"), this.appUrl = i, this.appSyncEndpoint = o, this.authData = s, this.httpClient = a, this.decodeJwt = l, this.logger = d, this.tokenHandler = h, this.isOnline = p, Ce(this, nm, f != null ? f : new g_({
                synchronize: u(() => this.synchronizeUserInfo(), "synchronize"),
                logger: d
            }), "f"), this.userInfo = g != null ? g : t8({
                canFetch: u(() => this.isAuthenticated() && p(), "canFetch"),
                fetchEndpoints: u(() => this.fetchEndpoints(), "fetchEndpoints"),
                getAccessToken: u(() => this.getValidAccessToken(), "getAccessToken"),
                httpClient: a,
                logger: d
            })
        }
        getValidAccessToken() {
            return Ae(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1,
                    r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
                return function*() {
                    var i, o;
                    let s = r ? e.logger : void 0;
                    return e.isOnline() ? e.authData.readToken() ? (!t && e.isAccessTokenValid() || (s == null || s.debug({
                        category: Nt,
                        message: "Refreshing tokens."
                    }), yield e.refreshTokens()), (o = e.getAccessToken()) !== null && o !== void 0 ? o : void 0) : void(s == null || s.info({
                        category: Nt,
                        message: "Cannot get access token because there is no token stored."
                    })) : (s == null || s.info({
                        category: Nt,
                        message: "Device is offline, using last known access token."
                    }), (i = e.getAccessToken()) !== null && i !== void 0 ? i : void 0)
                }()
            })
        }
        fetchEndpoints() {
            return Ae(this, void 0, void 0, function*() {
                var e;
                let t = this.authData.readEndpoints();
                if (t) return t; {
                    let r = yield this.httpClient.get({
                        url: $(this, tm, "f")
                    });
                    if (r === void 0) {
                        let i = new Error("Couldn't get any response from server while fetching tokens.");
                        throw (e = this.logger) === null || e === void 0 || e.error({
                            category: Nt,
                            code: "OS-CLRT-40100",
                            error: i
                        }), i
                    }
                    return this.authData.storeEndpoints(r), r
                }
            })
        }
        getUserId() {
            var e, t;
            if (!this.isAuthenticated()) return null;
            let r = this.userInfo.getCached();
            return (t = (e = r == null ? void 0 : r.os_access) === null || e === void 0 ? void 0 : e.userId) !== null && t !== void 0 ? t : null
        }
        isAuthenticated() {
            let e = this.authData.readToken();
            return !!(e != null && e.access_token) && !!(e != null && e.refresh_token) && !!(e != null && e.id_token)
        }
        getAccessToken() {
            return (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : QH)(this.authData.readToken())
        }
        isAccessTokenValid() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Jp,
                t = this.getAccessToken();
            return this.tokenHandler.isAccessTokenValid(t != null ? t : "", e)
        }
        isRefreshTokenValid() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Jp,
                t = this.authData.readRefreshToken();
            return this.tokenHandler.isRefreshTokenValid(t != null ? t : "", e)
        }
        refreshTokens() {
            return $(this, da, "f") || Ce(this, da, $(this, Yd, "m", ZL).call(this), "f"), $(this, da, "f")
        }
        logout(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    redirectUri: i,
                    authSignOut: o = u(() => Sr.signOut(), "t")
                } = t;
                return function*() {
                    var s, a, l;
                    let d = yield r.fetchEndpoints(), c = r.authData.readIdToken();
                    if (r.authData.clearAuthData(), r.userInfo.clear(), !c) return void((s = r.logger) === null || s === void 0 || s.info({
                        category: Nt,
                        message: "No id token stored. Logout not completed.",
                        visibility: Ar.Internal
                    }));
                    try {
                        yield o()
                    } catch (f) {
                        (a = r.logger) === null || a === void 0 || a.error({
                            category: Nt,
                            message: "Error calling the auth signout",
                            error: f,
                            code: "OS-CLRT-40108"
                        })
                    }
                    let h = {
                        id_token_hint: c,
                        post_logout_redirect_uri: i
                    };
                    try {
                        yield r.httpClient.post({
                            url: d.end_session_endpoint,
                            payload: h
                        })
                    } catch (f) {
                        (l = r.logger) === null || l === void 0 || l.error({
                            category: Nt,
                            message: "Error calling the logout endpoint",
                            error: f,
                            code: "OS-CLRT-40108"
                        })
                    }
                }()
            })
        }
        clearAuthenticationData() {
            Ce(this, da, void 0, "f"), this.authData.clearAuthData(), this.userInfo.clear()
        }
        hasRole(e) {
            var t, r, i;
            let o = this.userInfo.getCached();
            return (i = (r = (t = o == null ? void 0 : o.os_access) === null || t === void 0 ? void 0 : t.roles) === null || r === void 0 ? void 0 : r.includes(e)) !== null && i !== void 0 && i
        }
        buildUrl(e) {
            return `/${this.appUrl}/${e}`.replace(/\/(\/)+/gm, "/")
        }
        getUserSyncUrl() {
            return this.buildUrl(this.appSyncEndpoint)
        }
        storeTokenInfo(e) {
            return Ae(this, void 0, void 0, function*() {
                var t, r;
                let i = this.authData.readToken();
                this.authData.storeToken(e);
                let o = this.userInfo.getCached();
                this.userInfo.invalidate();
                let s = yield $(this, Yd, "m", YL).call(this);
                if (s.type === "error") {
                    let l = s.error instanceof Error ? s.error.message : "Unknown error";
                    throw new Co("OS-CLRT-40113", l)
                }
                let a = (r = (t = s.user) === null || t === void 0 ? void 0 : t.os_access) === null || r === void 0 ? void 0 : r.userId;
                if (!a) throw new Co("OS-CLRT-40111", "User ID is missing.");
                return i && e8(o, s.user) || $(this, nm, "f").trySynchronize(), a
            })
        }
        synchronizeUserInfo() {
            return Ae(this, void 0, void 0, function*() {
                if (this.isOnline() && this.isAuthenticated()) {
                    let e = yield this.getValidAccessToken();
                    if (!e) throw new Error("No token available to synchronize user info.");
                    yield this.httpClient.post({
                        url: this.getUserSyncUrl(),
                        headers: {
                            Authorization: e
                        }
                    })
                }
            })
        }
        getUserInfo() {
            return Ae(this, void 0, void 0, function*() {
                var e, t, r;
                let i = yield this.userInfo.get();
                return {
                    username: (e = i == null ? void 0 : i.email) !== null && e !== void 0 ? e : "",
                    name: (t = i == null ? void 0 : i.name) !== null && t !== void 0 ? t : "",
                    pictureUrl: (r = i == null ? void 0 : i.picture) !== null && r !== void 0 ? r : ""
                }
            })
        }
        isAuthEndpoint(e) {
            var t;
            let [r] = e.split("?"), i = (t = this.authData.readEndpoints()) !== null && t !== void 0 ? t : {};
            for (let o of Object.values(i))
                if (r === o) return !0;
            return !1
        }
    };
u(H_, "ms");
var Em = H_,
    rm;
tm = new WeakMap, nm = new WeakMap, da = new WeakMap, Yd = new WeakSet, ZL = u(function() {
    return Ae(this, void 0, void 0, function*() {
        try {
            let n = yield this.fetchEndpoints(), e = yield this.tokenHandler.refreshToken({
                refreshEndpoint: n.token_endpoint,
                client: this.httpClient,
                clientId: ih,
                scope: this.scope
            });
            switch (e.type) {
                case "success":
                    yield this.storeTokenInfo(e.token);
                    break;
                case "error":
                    throw e.error;
                case "invalid-state":
                    this.clearAuthenticationData()
            }
        } catch (n) {
            throw $(this, Yd, "m", ZN).call(this, n) && this.clearAuthenticationData(), n
        } finally {
            Ce(this, da, void 0, "f")
        }
    })
}, "ps"), ZN = u(function(n) {
    return n instanceof Co && n.errorCode !== "OS-CLRT-40112"
}, "gs"), YL = u(function() {
    return Ae(this, void 0, void 0, function*() {
        var n;
        try {
            let e = yield this.userInfo.get();
            if (!e) throw new Error("User info is missing.");
            return {
                type: "success",
                user: e
            }
        } catch (e) {
            return (n = this.logger) === null || n === void 0 || n.error({
                category: Nt,
                message: "Error getting user info",
                error: e instanceof Error ? e : new Error("Unknown error"),
                code: "OS-CLRT-40100",
                visibility: Ar.Internal
            }), {
                type: "error",
                error: e
            }
        }
    })
}, "ys");
var z_ = class z_ extends Em {
    constructor(e) {
        let {
            appKey: t,
            identityProvider: r,
            appUrl: i,
            baseUrl: o,
            region: s,
            poolId: a,
            clientId: l,
            scope: d = "",
            identityEndpoint: c,
            httpClient: h = new io({
                baseUrl: o
            }),
            appSyncEndpoint: f = P_,
            authData: g = new ma,
            decodeJwt: p = Nm,
            configureAmplify: y = u(U => oh.configure(U), "p"),
            logger: b,
            validator: E,
            tokenHandler: S,
            synchronizer: _,
            isOnline: I,
            userInfo: x
        } = e;
        var L;
        if (super({
                scope: d,
                identityEndpoint: c,
                appUrl: i,
                appSyncEndpoint: f,
                authData: g,
                httpClient: h,
                decodeJwt: p,
                logger: b,
                validator: E,
                tokenHandler: S,
                synchronizer: _,
                isOnline: I,
                userInfo: x
            }), rm.set(this, void 0), Ce(this, rm, r, "f"), s && a && l) try {
            y({
                Auth: {
                    region: s,
                    userPoolId: a,
                    userPoolWebClientId: l
                }
            })
        } catch (U) {
            (L = this.logger) === null || L === void 0 || L.error({
                category: Nt,
                message: "Error while configuring Amplify",
                error: U,
                code: "OS-CLRT-40110"
            })
        }
    }
    isExternalUser() {
        return !0
    }
    getLoginUrl(e) {
        return Ae(this, arguments, void 0, function(t) {
            var r = this;
            let {
                redirectUri: i,
                callbackUrl: o
            } = t;
            return function*() {
                let s = yield r.fetchEndpoints(), a = new URLSearchParams(o ? {
                    callback_url: o
                } : {}).toString(), l = {
                    client_id: ih,
                    scope: r.scope,
                    redirect_uri: a ? `${i}?${a}` : i,
                    response_type: "code",
                    kc_idp_hint: $(r, rm, "f")
                }, d = new URLSearchParams(l).toString();
                return `${s.authorization_endpoint}?${d}`
            }()
        })
    }
    login(e) {
        return Ae(this, arguments, void 0, function(t) {
            var r = this;
            let {
                redirectUri: i,
                callbackUrl: o,
                navigationHandler: s = u(a => window.location.replace(a), "n")
            } = t;
            return function*() {
                s(yield r.getLoginUrl({
                    redirectUri: i,
                    callbackUrl: o
                }))
            }()
        })
    }
    resumeLogin(e) {
        return Ae(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                redirectUri: o
            } = t;
            return function*() {
                let s = yield r.fetchEndpoints(), a = new URL(i).searchParams, l = a.get("code"), d = a.get("callback_url"), c = new URLSearchParams(d ? {
                    callback_url: d
                } : {}).toString();
                if (!l) throw r.authData.clearAuthData(), r.userInfo.clear(), Error(`Missing mandatory parameters to continue the login: authz_code: ${l}`);
                try {
                    let h = c ? `${o}?${c}` : o,
                        f = yield r.requestToken(s.token_endpoint, h, l);
                    yield r.storeTokenInfo(f)
                } catch (h) {
                    throw r.authData.clearAuthData(), r.userInfo.clear(), h
                }
                return d
            }()
        })
    }
    requestToken(e, t, r) {
        return Ae(this, void 0, void 0, function*() {
            var i;
            try {
                let o = yield this.httpClient.post({
                    url: e,
                    payload: {
                        grant_type: "authorization_code",
                        code: r,
                        redirect_uri: t,
                        client_id: ih
                    }
                });
                if (o === void 0) {
                    let s = new Error("Couldn't get any response from server while getting tokens.");
                    throw (i = this.logger) === null || i === void 0 || i.error({
                        category: Nt,
                        code: "OS-CLRT-40100",
                        error: s
                    }), s
                }
                return o
            } catch (o) {
                throw pn.create({
                    name: at.IdentityTokenEndpointFailed,
                    message: "Error calling the external auth token endpoint",
                    code: "OS-ID-BIZ-40021"
                })
            }
        })
    }
    getLogoutUrl(e) {
        return Ae(this, arguments, void 0, function(t) {
            var r = this;
            let {
                redirectUri: i,
                callbackUrl: o
            } = t;
            return function*() {
                let s = yield r.fetchEndpoints(), a = r.authData.readIdToken();
                if (!a) throw new Error("No id token stored. Could not logout.");
                let l = new URLSearchParams(o ? {
                        callback_url: o
                    } : {}).toString(),
                    d = new URLSearchParams({
                        id_token_hint: a,
                        post_logout_redirect_uri: l ? `${i}?${l}` : i
                    }).toString();
                return `${s.end_session_endpoint}?${d}`
            }()
        })
    }
    resumeLogout(e) {
        return Ae(this, arguments, void 0, function(t) {
            var r = this;
            let {
                url: i,
                authSignOut: o = u(() => Sr.signOut(), "t")
            } = t;
            return function*() {
                var s;
                let a = new URL(i).searchParams.get("callback_url");
                try {
                    yield o()
                } catch (l) {
                    throw (s = r.logger) === null || s === void 0 || s.error({
                        category: Nt,
                        message: "Error calling the external auth signout",
                        error: l,
                        code: "OS-CLRT-40108"
                    }), l
                }
                return r.authData.clearAuthData(), r.userInfo.clear(), a ? decodeURIComponent(a) : null
            }()
        })
    }
};
u(z_, "bs");
var m_ = z_;
rm = new WeakMap;
var v_ = {
    exports: {}
};
(function(n, e) {
    var t = 9007199254740991,
        r = "[object Arguments]",
        i = "[object Function]",
        o = "[object GeneratorFunction]",
        s = "[object Map]",
        a = "[object Promise]",
        l = "[object Set]",
        d = "[object WeakMap]",
        c = "[object DataView]",
        h = /^\[object .+?Constructor\]$/,
        f = typeof Cn == "object" && Cn && Cn.Object === Object && Cn,
        g = typeof self == "object" && self && self.Object === Object && self,
        p = f || g || Function("return this")(),
        y = e && !e.nodeType && e,
        b = y && n && !n.nodeType && n,
        E = b && b.exports === y,
        S, _, I, x = Function.prototype,
        L = Object.prototype,
        U = p["__core-js_shared__"],
        N = (S = /[^.]+$/.exec(U && U.keys && U.keys.IE_PROTO || "")) ? "Symbol(src)_1." + S : "",
        j = x.toString,
        q = L.hasOwnProperty,
        fe = L.toString,
        K = RegExp("^" + j.call(q).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
        ae = E ? p.Buffer : void 0,
        Z = L.propertyIsEnumerable,
        ne = ae ? ae.isBuffer : void 0,
        ue = (_ = Object.keys, I = Object, function(we) {
            return _(I(we))
        }),
        ve = A(p, "DataView"),
        Ee = A(p, "Map"),
        be = A(p, "Promise"),
        De = A(p, "Set"),
        Pe = A(p, "WeakMap"),
        nt = !Z.call({
            valueOf: 1
        }, "valueOf"),
        re = O(ve),
        B = O(Ee),
        P = O(be),
        m = O(De),
        v = O(Pe);

    function w(we) {
        if (!_t(we) || function(ct) {
                return !!N && N in ct
            }(we)) return !1;
        var $e = ke(we) || function(ct) {
            var St = !1;
            if (ct != null && typeof ct.toString != "function") try {
                St = !!(ct + "")
            } catch (hn) {}
            return St
        }(we) ? K : h;
        return $e.test(O(we))
    }
    u(w, "W");

    function A(we, $e) {
        var ct = function(St, hn) {
            return St == null ? void 0 : St[hn]
        }(we, $e);
        return w(ct) ? ct : void 0
    }
    u(A, "G");
    var R = u(function(we) {
        return fe.call(we)
    }, "H");

    function O(we) {
        if (we != null) {
            try {
                return j.call(we)
            } catch ($e) {}
            try {
                return we + ""
            } catch ($e) {}
        }
        return ""
    }
    u(O, "z");

    function W(we) {
        return function($e) {
            return function(ct) {
                return !!ct && typeof ct == "object"
            }($e) && Se($e)
        }(we) && q.call(we, "callee") && (!Z.call(we, "callee") || fe.call(we) == r)
    }
    u(W, "J"), (ve && R(new ve(new ArrayBuffer(1))) != c || Ee && R(new Ee) != s || be && R(be.resolve()) != a || De && R(new De) != l || Pe && R(new Pe) != d) && (R = u(function(we) {
        var $e = fe.call(we),
            ct = $e == "[object Object]" ? we.constructor : void 0,
            St = ct ? O(ct) : void 0;
        if (St) switch (St) {
            case re:
                return c;
            case B:
                return s;
            case P:
                return a;
            case m:
                return l;
            case v:
                return d
        }
        return $e
    }, "H"));
    var ie = Array.isArray;

    function Se(we) {
        return we != null && function($e) {
            return typeof $e == "number" && $e > -1 && $e % 1 == 0 && $e <= t
        }(we.length) && !ke(we)
    }
    u(Se, "Y");
    var Re = ne || function() {
        return !1
    };

    function ke(we) {
        var $e = _t(we) ? fe.call(we) : "";
        return $e == i || $e == o
    }
    u(ke, "X");

    function _t(we) {
        var $e = typeof we;
        return !!we && ($e == "object" || $e == "function")
    }
    u(_t, "Q"), n.exports = function(we) {
        if (Se(we) && (ie(we) || typeof we == "string" || typeof we.splice == "function" || Re(we) || W(we))) return !we.length;
        var $e = R(we);
        if ($e == s || $e == l) return !we.size;
        if (nt || function(St) {
                var hn = St && St.constructor;
                return St === (typeof hn == "function" && hn.prototype || L)
            }(we)) return !ue(we).length;
        for (var ct in we)
            if (q.call(we, ct)) return !1;
        return !0
    }
})(v_, v_.exports);
var n8 = O_(v_.exports),
    y_ = {
        exports: {}
    };
(function(n, e) {
    var t = "__lodash_hash_undefined__",
        r = 1,
        i = 2,
        o = 1 / 0,
        s = 9007199254740991,
        a = "[object Arguments]",
        l = "[object Array]",
        d = "[object Boolean]",
        c = "[object Date]",
        h = "[object Error]",
        f = "[object Function]",
        g = "[object GeneratorFunction]",
        p = "[object Map]",
        y = "[object Number]",
        b = "[object Object]",
        E = "[object Promise]",
        S = "[object RegExp]",
        _ = "[object Set]",
        I = "[object String]",
        x = "[object Symbol]",
        L = "[object WeakMap]",
        U = "[object ArrayBuffer]",
        N = "[object DataView]",
        j = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        q = /^\w*$/,
        fe = /^\./,
        K = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
        ae = /\\(\\)?/g,
        Z = /^\[object .+?Constructor\]$/,
        ne = /^(?:0|[1-9]\d*)$/,
        ue = {};
    ue["[object Float32Array]"] = ue["[object Float64Array]"] = ue["[object Int8Array]"] = ue["[object Int16Array]"] = ue["[object Int32Array]"] = ue["[object Uint8Array]"] = ue["[object Uint8ClampedArray]"] = ue["[object Uint16Array]"] = ue["[object Uint32Array]"] = !0, ue[a] = ue[l] = ue[U] = ue[d] = ue[N] = ue[c] = ue[h] = ue[f] = ue[p] = ue[y] = ue[b] = ue[S] = ue[_] = ue[I] = ue[L] = !1;
    var ve = typeof Cn == "object" && Cn && Cn.Object === Object && Cn,
        Ee = typeof self == "object" && self && self.Object === Object && self,
        be = ve || Ee || Function("return this")(),
        De = e && !e.nodeType && e,
        Pe = De && n && !n.nodeType && n,
        nt = Pe && Pe.exports === De && ve.process,
        re = function() {
            try {
                return nt && nt.binding("util")
            } catch (C) {}
        }(),
        B = re && re.isTypedArray;

    function P(C, V) {
        for (var ee = -1, he = V.length, Me = C.length; ++ee < he;) C[Me + ee] = V[ee];
        return C
    }
    u(P, "V");

    function m(C, V) {
        for (var ee = -1, he = C ? C.length : 0; ++ee < he;)
            if (V(C[ee], ee, C)) return !0;
        return !1
    }
    u(m, "K");

    function v(C) {
        var V = !1;
        if (C != null && typeof C.toString != "function") try {
            V = !!(C + "")
        } catch (ee) {}
        return V
    }
    u(v, "q");

    function w(C) {
        var V = -1,
            ee = Array(C.size);
        return C.forEach(function(he, Me) {
            ee[++V] = [Me, he]
        }), ee
    }
    u(w, "W");

    function A(C, V) {
        return function(ee) {
            return C(V(ee))
        }
    }
    u(A, "G");

    function R(C) {
        var V = -1,
            ee = Array(C.size);
        return C.forEach(function(he) {
            ee[++V] = he
        }), ee
    }
    u(R, "H");
    var O, W = Array.prototype,
        ie = Function.prototype,
        Se = Object.prototype,
        Re = be["__core-js_shared__"],
        ke = (O = /[^.]+$/.exec(Re && Re.keys && Re.keys.IE_PROTO || "")) ? "Symbol(src)_1." + O : "",
        _t = ie.toString,
        we = Se.hasOwnProperty,
        $e = Se.toString,
        ct = RegExp("^" + _t.call(we).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
        St = be.Symbol,
        hn = be.Uint8Array,
        Ba = A(Object.getPrototypeOf, Object),
        Or = Se.propertyIsEnumerable,
        Os = W.splice,
        Qr = Object.getOwnPropertySymbols,
        qn = A(Object.keys, Object),
        Ze = Bo(be, "DataView"),
        xn = Bo(be, "Map"),
        Ds = Bo(be, "Promise"),
        Ns = Bo(be, "Set"),
        Ls = Bo(be, "WeakMap"),
        ei = Bo(Object, "create"),
        Qy = Zi(Ze),
        e0 = Zi(xn),
        t0 = Zi(Ds),
        n0 = Zi(Ns),
        r0 = Zi(Ls),
        xs = St ? St.prototype : void 0,
        Ps = xs ? xs.valueOf : void 0,
        _i = xs ? xs.toString : void 0;

    function bn(C) {
        var V = -1,
            ee = C ? C.length : 0;
        for (this.clear(); ++V < ee;) {
            var he = C[V];
            this.set(he[0], he[1])
        }
    }
    u(bn, "Ie");

    function wn(C) {
        var V = -1,
            ee = C ? C.length : 0;
        for (this.clear(); ++V < ee;) {
            var he = C[V];
            this.set(he[0], he[1])
        }
    }
    u(wn, "Ce");

    function nr(C) {
        var V = -1,
            ee = C ? C.length : 0;
        for (this.clear(); ++V < ee;) {
            var he = C[V];
            this.set(he[0], he[1])
        }
    }
    u(nr, "Ee");

    function gr(C) {
        var V = -1,
            ee = C ? C.length : 0;
        for (this.__data__ = new nr; ++V < ee;) this.add(C[V])
    }
    u(gr, "Te");

    function ti(C) {
        this.__data__ = new wn(C)
    }
    u(ti, "Ue");

    function ks(C, V) {
        var ee = _e(C) || me(C) ? function(Te, Le) {
                for (var ht = -1, ze = Array(Te); ++ht < Te;) ze[ht] = Le(ht);
                return ze
            }(C.length, String) : [],
            he = ee.length,
            Me = !!he;
        for (var Fe in C) !V && !we.call(C, Fe) || Me && (Fe == "length" || Ms(Fe, he)) || ee.push(Fe);
        return ee
    }
    u(ks, "ke");

    function Si(C, V) {
        for (var ee = C.length; ee--;)
            if (G(C[ee][0], V)) return ee;
        return -1
    }
    u(Si, "Pe");

    function El(C, V) {
        for (var ee = 0, he = (V = jo(V, C) ? [V] : Us(V)).length; C != null && ee < he;) C = C[Bs(V[ee++])];
        return ee && ee == he ? C : void 0
    }
    u(El, "Oe");

    function mf(C, V) {
        return C != null && V in Object(C)
    }
    u(mf, "Re");

    function _l(C, V, ee, he, Me) {
        return C === V || (C == null || V == null || !Rt(C) && !Pn(V) ? C != C && V != V : function(Fe, Te, Le, ht, ze, Xe) {
            var Pt = _e(Fe),
                It = _e(Te),
                wt = l,
                kt = l;
            Pt || (wt = (wt = Ii(Fe)) == a ? b : wt), It || (kt = (kt = Ii(Te)) == a ? b : kt);
            var kn = wt == b && !v(Fe),
                Ai = kt == b && !v(Te),
                Ci = wt == kt;
            if (Ci && !kn) return Xe || (Xe = new ti), Pt || Dr(Fe) ? Ki(Fe, Te, Le, ht, ze, Xe) : function(lt, rt, $a, Nr, Xi, vr, Qi) {
                switch ($a) {
                    case N:
                        if (lt.byteLength != rt.byteLength || lt.byteOffset != rt.byteOffset) return !1;
                        lt = lt.buffer, rt = rt.buffer;
                    case U:
                        return !(lt.byteLength != rt.byteLength || !Nr(new hn(lt), new hn(rt)));
                    case d:
                    case c:
                    case y:
                        return G(+lt, +rt);
                    case h:
                        return lt.name == rt.name && lt.message == rt.message;
                    case S:
                    case I:
                        return lt == rt + "";
                    case p:
                        var $o = w;
                    case _:
                        var Ol = vr & i;
                        if ($o || ($o = R), lt.size != rt.size && !Ol) return !1;
                        var wf = Qi.get(lt);
                        if (wf) return wf == rt;
                        vr |= r, Qi.set(lt, rt);
                        var s0 = Ki($o(lt), $o(rt), Nr, Xi, vr, Qi);
                        return Qi.delete(lt), s0;
                    case x:
                        if (Ps) return Ps.call(lt) == Ps.call(rt)
                }
                return !1
            }(Fe, Te, wt, Le, ht, ze, Xe);
            if (!(ze & i)) {
                var Ri = kn && we.call(Fe, "__wrapped__"),
                    Cl = Ai && we.call(Te, "__wrapped__");
                if (Ri || Cl) {
                    var ja = Ri ? Fe.value() : Fe,
                        Rl = Cl ? Te.value() : Te;
                    return Xe || (Xe = new ti), Le(ja, Rl, ht, ze, Xe)
                }
            }
            return Ci ? (Xe || (Xe = new ti), function(lt, rt, $a, Nr, Xi, vr) {
                var Qi = Xi & i,
                    $o = mr(lt),
                    Ol = $o.length,
                    wf = mr(rt),
                    s0 = wf.length;
                if (Ol != s0 && !Qi) return !1;
                for (var Tf = Ol; Tf--;) {
                    var js = $o[Tf];
                    if (!(Qi ? js in rt : we.call(rt, js))) return !1
                }
                var oC = vr.get(lt);
                if (oC && vr.get(rt)) return oC == rt;
                var Ef = !0;
                vr.set(lt, rt), vr.set(rt, lt);
                for (var a0 = Qi; ++Tf < Ol;) {
                    var _f = lt[js = $o[Tf]],
                        Sf = rt[js];
                    if (Nr) var sC = Qi ? Nr(Sf, _f, js, rt, lt, vr) : Nr(_f, Sf, js, lt, rt, vr);
                    if (!(sC === void 0 ? _f === Sf || $a(_f, Sf, Nr, Xi, vr) : sC)) {
                        Ef = !1;
                        break
                    }
                    a0 || (a0 = js == "constructor")
                }
                if (Ef && !a0) {
                    var If = lt.constructor,
                        Af = rt.constructor;
                    If == Af || !("constructor" in lt) || !("constructor" in rt) || typeof If == "function" && If instanceof If && typeof Af == "function" && Af instanceof Af || (Ef = !1)
                }
                return vr.delete(lt), vr.delete(rt), Ef
            }(Fe, Te, Le, ht, ze, Xe)) : !1
        }(C, V, _l, ee, he, Me))
    }
    u(_l, "De");

    function i0(C) {
        return !(!Rt(C) || (V = C, ke && ke in V)) && (We(C) || v(C) ? ct : Z).test(Zi(C));
        var V
    }
    u(i0, "xe");

    function vf(C) {
        return typeof C == "function" ? C : C == null ? ni : typeof C == "object" ? _e(C) ? function(he, Me) {
            return jo(he) && Il(Me) ? Al(Bs(he), Me) : function(Fe) {
                var Te = function(Le, ht, ze) {
                    var Xe = Le == null ? void 0 : El(Le, ht);
                    return Xe === void 0 ? ze : Xe
                }(Fe, he);
                return Te === void 0 && Te === Me ? function(Le, ht) {
                    return Le != null && function(ze, Xe, Pt) {
                        Xe = jo(Xe, ze) ? [Xe] : Us(Xe);
                        for (var It, wt = -1, kt = Xe.length; ++wt < kt;) {
                            var kn = Bs(Xe[wt]);
                            if (!(It = ze != null && Pt(ze, kn))) break;
                            ze = ze[kn]
                        }
                        return It || (kt = ze ? ze.length : 0, !!kt && Ct(kt) && Ms(kn, kt) && (_e(ze) || me(ze)))
                    }(Le, ht, mf)
                }(Fe, he) : _l(Me, Te, void 0, r | i)
            }
        }(C[0], C[1]) : function(he) {
            var Me = function(Fe) {
                for (var Te = mr(Fe), Le = Te.length; Le--;) {
                    var ht = Te[Le],
                        ze = Fe[ht];
                    Te[Le] = [ht, ze, Il(ze)]
                }
                return Te
            }(he);
            return Me.length == 1 && Me[0][2] ? Al(Me[0][0], Me[0][1]) : function(Fe) {
                return Fe === he || function(Te, Le, ht, ze) {
                    var Xe = ht.length,
                        Pt = Xe;
                    if (Te == null) return !Pt;
                    for (Te = Object(Te); Xe--;) {
                        var It = ht[Xe];
                        if (It[2] ? It[1] !== Te[It[0]] : !(It[0] in Te)) return !1
                    }
                    for (; ++Xe < Pt;) {
                        var wt = (It = ht[Xe])[0],
                            kt = Te[wt],
                            kn = It[1];
                        if (It[2]) {
                            if (kt === void 0 && !(wt in Te)) return !1
                        } else {
                            var Ai = new ti;
                            if (!_l(kn, kt, ze, r | i, Ai)) return !1
                        }
                    }
                    return !0
                }(Fe, 0, Me)
            }
        }(C) : jo(V = C) ? (ee = Bs(V), function(he) {
            return he == null ? void 0 : he[ee]
        }) : function(he) {
            return function(Me) {
                return El(Me, he)
            }
        }(V);
        var V, ee
    }
    u(vf, "Fe");

    function yf(C) {
        if (!Rt(C)) return function(Me) {
            var Fe = [];
            if (Me != null)
                for (var Te in Object(Me)) Fe.push(Te);
            return Fe
        }(C);
        var V = Sl(C),
            ee = [];
        for (var he in C)(he != "constructor" || !V && we.call(C, he)) && ee.push(he);
        return ee
    }
    u(yf, "Me");

    function Us(C) {
        return _e(C) ? C : Fs(C)
    }
    u(Us, "je");

    function Ki(C, V, ee, he, Me, Fe) {
        var Te = Me & i,
            Le = C.length,
            ht = V.length;
        if (Le != ht && !(Te && ht > Le)) return !1;
        var ze = Fe.get(C);
        if (ze && Fe.get(V)) return ze == V;
        var Xe = -1,
            Pt = !0,
            It = Me & r ? new gr : void 0;
        for (Fe.set(C, V), Fe.set(V, C); ++Xe < Le;) {
            var wt = C[Xe],
                kt = V[Xe];
            if (he) var kn = Te ? he(kt, wt, Xe, V, C, Fe) : he(wt, kt, Xe, C, V, Fe);
            if (kn !== void 0) {
                if (kn) continue;
                Pt = !1;
                break
            }
            if (It) {
                if (!m(V, function(Ai, Ci) {
                        if (!It.has(Ci) && (wt === Ai || ee(wt, Ai, he, Me, Fe))) return It.add(Ci)
                    })) {
                    Pt = !1;
                    break
                }
            } else if (wt !== kt && !ee(wt, kt, he, Me, Fe)) {
                Pt = !1;
                break
            }
        }
        return Fe.delete(C), Fe.delete(V), Pt
    }
    u(Ki, "Ne");

    function o0(C) {
        return function(V, ee, he) {
            var Me = ee(V);
            return _e(V) ? Me : P(Me, he(V))
        }(C, Tn, bf)
    }
    u(o0, "Le");

    function pr(C, V) {
        var ee, he, Me = C.__data__;
        return ((he = typeof(ee = V)) == "string" || he == "number" || he == "symbol" || he == "boolean" ? ee !== "__proto__" : ee === null) ? Me[typeof V == "string" ? "string" : "hash"] : Me.map
    }
    u(pr, "Be");

    function Bo(C, V) {
        var ee = function(he, Me) {
            return he == null ? void 0 : he[Me]
        }(C, V);
        return i0(ee) ? ee : void 0
    }
    u(Bo, "Ve"), bn.prototype.clear = function() {
        this.__data__ = ei ? ei(null) : {}
    }, bn.prototype.delete = function(C) {
        return this.has(C) && delete this.__data__[C]
    }, bn.prototype.get = function(C) {
        var V = this.__data__;
        if (ei) {
            var ee = V[C];
            return ee === t ? void 0 : ee
        }
        return we.call(V, C) ? V[C] : void 0
    }, bn.prototype.has = function(C) {
        var V = this.__data__;
        return ei ? V[C] !== void 0 : we.call(V, C)
    }, bn.prototype.set = function(C, V) {
        return this.__data__[C] = ei && V === void 0 ? t : V, this
    }, wn.prototype.clear = function() {
        this.__data__ = []
    }, wn.prototype.delete = function(C) {
        var V = this.__data__,
            ee = Si(V, C);
        return !(ee < 0) && (ee == V.length - 1 ? V.pop() : Os.call(V, ee, 1), !0)
    }, wn.prototype.get = function(C) {
        var V = this.__data__,
            ee = Si(V, C);
        return ee < 0 ? void 0 : V[ee][1]
    }, wn.prototype.has = function(C) {
        return Si(this.__data__, C) > -1
    }, wn.prototype.set = function(C, V) {
        var ee = this.__data__,
            he = Si(ee, C);
        return he < 0 ? ee.push([C, V]) : ee[he][1] = V, this
    }, nr.prototype.clear = function() {
        this.__data__ = {
            hash: new bn,
            map: new(xn || wn),
            string: new bn
        }
    }, nr.prototype.delete = function(C) {
        return pr(this, C).delete(C)
    }, nr.prototype.get = function(C) {
        return pr(this, C).get(C)
    }, nr.prototype.has = function(C) {
        return pr(this, C).has(C)
    }, nr.prototype.set = function(C, V) {
        return pr(this, C).set(C, V), this
    }, gr.prototype.add = gr.prototype.push = function(C) {
        return this.__data__.set(C, t), this
    }, gr.prototype.has = function(C) {
        return this.__data__.has(C)
    }, ti.prototype.clear = function() {
        this.__data__ = new wn
    }, ti.prototype.delete = function(C) {
        return this.__data__.delete(C)
    }, ti.prototype.get = function(C) {
        return this.__data__.get(C)
    }, ti.prototype.has = function(C) {
        return this.__data__.has(C)
    }, ti.prototype.set = function(C, V) {
        var ee = this.__data__;
        if (ee instanceof wn) {
            var he = ee.__data__;
            if (!xn || he.length < 199) return he.push([C, V]), this;
            ee = this.__data__ = new nr(he)
        }
        return ee.set(C, V), this
    };
    var Ji = Qr ? A(Qr, Object) : Yi,
        bf = Qr ? function(C) {
            for (var V = []; C;) P(V, Ji(C)), C = Ba(C);
            return V
        } : Yi,
        Ii = u(function(C) {
            return $e.call(C)
        }, "Ge");

    function Ms(C, V) {
        return !!(V = V == null ? s : V) && (typeof C == "number" || ne.test(C)) && C > -1 && C % 1 == 0 && C < V
    }
    u(Ms, "He");

    function jo(C, V) {
        if (_e(C)) return !1;
        var ee = typeof C;
        return !(ee != "number" && ee != "symbol" && ee != "boolean" && C != null && !$t(C)) || q.test(C) || !j.test(C) || V != null && C in Object(V)
    }
    u(jo, "ze");

    function Sl(C) {
        var V = C && C.constructor;
        return C === (typeof V == "function" && V.prototype || Se)
    }
    u(Sl, "Je");

    function Il(C) {
        return C == C && !Rt(C)
    }
    u(Il, "$e");

    function Al(C, V) {
        return function(ee) {
            return ee != null && ee[C] === V && (V !== void 0 || C in Object(ee))
        }
    }
    u(Al, "Ye"), (Ze && Ii(new Ze(new ArrayBuffer(1))) != N || xn && Ii(new xn) != p || Ds && Ii(Ds.resolve()) != E || Ns && Ii(new Ns) != _ || Ls && Ii(new Ls) != L) && (Ii = u(function(C) {
        var V = $e.call(C),
            ee = V == b ? C.constructor : void 0,
            he = ee ? Zi(ee) : void 0;
        if (he) switch (he) {
            case Qy:
                return N;
            case e0:
                return p;
            case t0:
                return E;
            case n0:
                return _;
            case r0:
                return L
        }
        return V
    }, "Ge"));
    var Fs = k(function(C) {
        var V;
        C = (V = C) == null ? "" : function(he) {
            if (typeof he == "string") return he;
            if ($t(he)) return _i ? _i.call(he) : "";
            var Me = he + "";
            return Me == "0" && 1 / he == -o ? "-0" : Me
        }(V);
        var ee = [];
        return fe.test(C) && ee.push(""), C.replace(K, function(he, Me, Fe, Te) {
            ee.push(Fe ? Te.replace(ae, "$1") : Me || he)
        }), ee
    });

    function Bs(C) {
        if (typeof C == "string" || $t(C)) return C;
        var V = C + "";
        return V == "0" && 1 / C == -o ? "-0" : V
    }
    u(Bs, "Xe");

    function Zi(C) {
        if (C != null) {
            try {
                return _t.call(C)
            } catch (V) {}
            try {
                return C + ""
            } catch (V) {}
        }
        return ""
    }
    u(Zi, "Qe");

    function k(C, V) {
        if (typeof C != "function" || V && typeof V != "function") throw new TypeError("Expected a function");
        var ee = u(function() {
            var he = arguments,
                Me = V ? V.apply(this, he) : he[0],
                Fe = ee.cache;
            if (Fe.has(Me)) return Fe.get(Me);
            var Te = C.apply(this, he);
            return ee.cache = Fe.set(Me, Te), Te
        }, "n");
        return ee.cache = new(k.Cache || nr), ee
    }
    u(k, "et");

    function G(C, V) {
        return C === V || C != C && V != V
    }
    u(G, "tt");

    function me(C) {
        return function(V) {
            return Pn(V) && vt(V)
        }(C) && we.call(C, "callee") && (!Or.call(C, "callee") || $e.call(C) == a)
    }
    u(me, "nt"), k.Cache = nr;
    var _e = Array.isArray;

    function vt(C) {
        return C != null && Ct(C.length) && !We(C)
    }
    u(vt, "it");

    function We(C) {
        var V = Rt(C) ? $e.call(C) : "";
        return V == f || V == g
    }
    u(We, "ot");

    function Ct(C) {
        return typeof C == "number" && C > -1 && C % 1 == 0 && C <= s
    }
    u(Ct, "st");

    function Rt(C) {
        var V = typeof C;
        return !!C && (V == "object" || V == "function")
    }
    u(Rt, "at");

    function Pn(C) {
        return !!C && typeof C == "object"
    }
    u(Pn, "ut");

    function $t(C) {
        return typeof C == "symbol" || Pn(C) && $e.call(C) == x
    }
    u($t, "ct");
    var qt, Dr = B ? (qt = B, function(C) {
        return qt(C)
    }) : function(C) {
        return Pn(C) && Ct(C.length) && !!ue[$e.call(C)]
    };

    function mr(C) {
        return vt(C) ? ks(C) : function(V) {
            if (!Sl(V)) return qn(V);
            var ee = [];
            for (var he in Object(V)) we.call(V, he) && he != "constructor" && ee.push(he);
            return ee
        }(C)
    }
    u(mr, "ft");

    function Tn(C) {
        return vt(C) ? ks(C, !0) : yf(C)
    }
    u(Tn, "dt");

    function ni(C) {
        return C
    }
    u(ni, "pt");

    function Yi() {
        return []
    }
    u(Yi, "gt"), n.exports = function(C, V) {
        return C == null ? {} : function(ee, he, Me) {
            for (var Fe = -1, Te = he.length, Le = {}; ++Fe < Te;) {
                var ht = he[Fe],
                    ze = ee[ht];
                Me(ze, ht) && (Le[ht] = ze)
            }
            return Le
        }(C, o0(C), vf(V))
    }
})(y_, y_.exports);
var Ir, wo, im, _m, om, sm, Sm, Im, b_, XL, QL, ex, tx, YN, w_, nx, XN, r8 = O_(y_.exports),
    i8 = {
        minimumLength: 12,
        upperCaseLetterRequired: !0,
        lowerCaseLetterRequired: !0,
        numberRequired: !0,
        specialCharacterRequired: !0
    },
    o8 = ["OS-ID-BIZ-40001", "OS-ID-BIZ-40051", "OS-ID-BIZ-50047", "OS-ID-BIZ-40415", "OS-ID-BIZ-40052"],
    s8 = ["OS-ID-BIZ-40401"],
    W_ = class W_ extends Em {
        constructor(e) {
            let {
                appKey: t,
                identityProvider: r,
                region: i,
                poolId: o,
                clientId: s,
                appUrl: a,
                baseUrl: l,
                scope: d,
                appSyncEndpoint: c = P_,
                passwordComplexityPolicy: h = i8,
                authData: f = new ma,
                httpClient: g = new io({
                    baseUrl: l
                }),
                decodeJwt: p = Nm,
                configureAmplify: y = u(j => oh.configure(j), "p"),
                logger: b,
                persistentStorage: E = localStorage,
                temporaryStorage: S = sessionStorage,
                endpointRegistration: _ = "/moduleservices/users/registration",
                endpointResetPass: I = "/moduleservices/users/passwordrecovery",
                synchronizer: x,
                isOnline: L,
                userInfo: U
            } = e;
            var N;
            super({
                authData: f,
                httpClient: g,
                appUrl: a,
                appSyncEndpoint: c,
                scope: d,
                decodeJwt: p,
                logger: b,
                synchronizer: x,
                isOnline: L,
                userInfo: U
            }), Ir.add(this), wo.set(this, void 0), im.set(this, void 0), _m.set(this, void 0), om.set(this, void 0), sm.set(this, void 0), Sm.set(this, void 0), Im.set(this, void 0), Ce(this, om, E, "f"), Ce(this, sm, S, "f"), Ce(this, _m, r, "f"), Ce(this, im, s, "f"), Ce(this, wo, h, "f"), Ce(this, Sm, _, "f"), Ce(this, Im, I, "f");
            try {
                y({
                    Auth: {
                        region: i,
                        userPoolId: o,
                        userPoolWebClientId: s
                    }
                })
            } catch (j) {
                (N = this.logger) === null || N === void 0 || N.error({
                    category: Nt,
                    message: "Error while configuring Amplify",
                    error: j,
                    code: "OS-CLRT-40110"
                })
            }
        }
        login(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    password: o,
                    newPassword: s,
                    redirectUri: a = `${window.location.protocol}//${window.location.host}/identity`,
                    persistLogin: l = !0,
                    configureAuth: d = u(g => Sr.configure(g), "s"),
                    authSignIn: c = u((g, p) => Sr.signIn(g, p), "a"),
                    completeNewPassword: h = u((g, p) => Sr.completeNewPassword(g, p), "u"),
                    changePassword: f = u((g, p, y) => Sr.changePassword(g, p, y), "c")
                } = t;
                return function*() {
                    var g, p, y, b, E;
                    try {
                        if (o === "" || i === "") throw pn.create({
                            name: at.InvalidCredentials,
                            message: (i === "" ? "Username" : "Password") + " cannot be empty.",
                            code: "OS-CLRT-40104"
                        });
                        let S = $(r, Ir, "m", tx).call(r, a);
                        d({
                            storage: $(r, l ? om : sm, "f")
                        });
                        let _ = yield r.fetchEndpoints(), I = yield $(r, Ir, "m", QL).call(r, _.authorization_endpoint, S), x = new URL(I).searchParams, L = x.get("code"), U = yield c(i, o);
                        if ((U == null ? void 0 : U.challengeName) === "NEW_PASSWORD_REQUIRED" && s ? yield h(U, s): s && (yield f(U, o, s)), !L) {
                            let j = U == null ? void 0 : U.getSignInUserSession();
                            if (!j) {
                                let ne = new Error("Couldn't find current user session.");
                                throw (g = r.logger) === null || g === void 0 || g.error({
                                    category: Nt,
                                    code: "OS-CLRT-40101",
                                    error: ne,
                                    visibility: Ar.Internal
                                }), ne
                            }
                            let q = yield r.httpClient.post({
                                url: $(r, Ir, "m", XL).call(r),
                                payload: {
                                    clientId: $(r, im, "f"),
                                    idToken: j.getIdToken().getJwtToken(),
                                    accessToken: j.getAccessToken().getJwtToken(),
                                    refreshToken: j.getRefreshToken().getToken()
                                },
                                contentType: _n.Json
                            });
                            if (q === void 0) {
                                let ne = new Error("Couldn't get any response from server while exchanging tokens.");
                                throw (p = r.logger) === null || p === void 0 || p.error({
                                    category: Nt,
                                    code: "OS-CLRT-40100",
                                    error: ne
                                }), ne
                            }
                            let fe = q.authCode,
                                K = (y = x.get("redirect_uri")) !== null && y !== void 0 ? y : "",
                                ae = (b = x.get("state")) !== null && b !== void 0 ? b : "",
                                Z = yield $(r, Ir, "m", ex).call(r, K, fe, ae);
                            L = (E = new URL(Z).searchParams.get("code")) !== null && E !== void 0 ? E : ""
                        }
                        let N = yield $(r, Ir, "m", nx).call(r, _.token_endpoint, L, S);
                        return yield r.storeTokenInfo(N)
                    } catch (S) {
                        throw r.authData.clearAuthData(), r.userInfo.clear(), $(r, Ir, "m", b_).call(r, S)
                    }
                }()
            })
        }
        sendResetPasswordEmail(e) {
            return Ae(this, arguments, void 0, function(t) {
                let {
                    username: r,
                    authForgotPassword: i = u(o => Sr.forgotPassword(o), "t")
                } = t;
                return function*() {
                    return i(r)
                }()
            })
        }
        confirmRegistration(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    password: o,
                    code: s
                } = t;
                return function*() {
                    var a;
                    if (!r.validatePasswordComplexityPolicy(o).isValid) throw pn.create({
                        name: at.PasswordComplexityPolicyFailed,
                        message: "Password complexity policy failed.",
                        code: "OS-CLRT-40106"
                    });
                    let l = yield $(r, Ir, "m", w_).call(r, {
                        email: i,
                        verificationCode: s
                    }, "REGISTRATION");
                    try {
                        yield r.login({
                            username: i,
                            password: l,
                            newPassword: o
                        })
                    } catch (d) {
                        let c = d;
                        throw (a = r.logger) === null || a === void 0 || a.error({
                            category: Nt,
                            message: "Error confirming user registration",
                            error: c,
                            code: "OS-CLRT-40100",
                            visibility: Ar.External
                        }), c.name === at.InvalidCredentials || c.name === at.TooManyFailedAttempts ? pn.create({
                            name: at.InvalidToken,
                            message: "Invalid temporary password.",
                            code: "OS-CLRT-40107"
                        }) : c
                    }
                }()
            })
        }
        changePassword(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    oldPassword: o,
                    newPassword: s,
                    authCurrentAuthenticatedUser: a = u(() => Sr.currentAuthenticatedUser(), "r"),
                    authChangePassword: l = u((d, c, h) => Sr.changePassword(d, c, h), "i")
                } = t;
                return function*() {
                    var d, c, h;
                    let f = null;
                    try {
                        f = yield a()
                    } catch (p) {
                        (d = r.logger) === null || d === void 0 || d.error({
                            category: Nt,
                            message: "Error in current authenticated user",
                            error: p,
                            code: "OS-CLRT-40101"
                        })
                    }
                    if (!f || i !== ((c = f == null ? void 0 : f.attributes) === null || c === void 0 ? void 0 : c.preferred_username)) throw pn.create({
                        name: at.InvalidCredentials,
                        message: "Invalid credentials",
                        code: "OS-CLRT-40104"
                    });
                    let g = r.validatePasswordComplexityPolicy(s);
                    if (!s || !g.isValid) throw pn.create({
                        name: at.PasswordComplexityPolicyFailed,
                        message: "Password complexity policy failed.",
                        code: "OS-CLRT-40106"
                    });
                    try {
                        yield l(f, o, s)
                    } catch (p) {
                        let y = $(r, Ir, "m", b_).call(r, p);
                        throw (h = r.logger) === null || h === void 0 || h.error({
                            category: Nt,
                            message: "Error changing password",
                            error: y,
                            code: y.errorCode,
                            visibility: Ar.External
                        }), y
                    }
                }()
            })
        }
        finishResetPassword(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    resetToken: o,
                    newPassword: s,
                    changePassword: a = u((l, d, c) => this.login({
                        username: l,
                        password: d,
                        newPassword: c
                    }), "r")
                } = t;
                return function*() {
                    var l;
                    let d = r.validatePasswordComplexityPolicy(s);
                    if (!s || !d.isValid) throw pn.create({
                        name: at.PasswordComplexityPolicyFailed,
                        message: "Password complexity policy failed.",
                        code: "OS-CLRT-40106"
                    });
                    let c = yield $(r, Ir, "m", w_).call(r, {
                        email: i,
                        verificationCode: o
                    }, "RESET_PASSWORD");
                    try {
                        yield a(i, c, s)
                    } catch (h) {
                        throw (l = r.logger) === null || l === void 0 || l.error({
                            category: Nt,
                            message: "Error resetting password",
                            error: h,
                            code: "OS-CLRT-40107",
                            visibility: Ar.External
                        }), pn.create({
                            name: at.InvalidToken,
                            message: "Invalid password reset token.",
                            code: "OS-CLRT-40107"
                        })
                    }
                }()
            })
        }
        resetPassword(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    resetToken: o,
                    newPassword: s,
                    authForgotPassword: a = u((l, d, c) => Sr.forgotPasswordSubmit(l, d, c), "r")
                } = t;
                return function*() {
                    var l;
                    let d = r.validatePasswordComplexityPolicy(s);
                    if (!s || !d.isValid) throw pn.create({
                        name: at.PasswordComplexityPolicyFailed,
                        message: "Password complexity policy failed.",
                        code: "OS-CLRT-40106"
                    });
                    try {
                        yield a(i, o, s)
                    } catch (c) {
                        throw (l = r.logger) === null || l === void 0 || l.error({
                            category: Nt,
                            message: "Error resetting password",
                            error: c,
                            code: "OS-CLRT-40107",
                            visibility: Ar.External
                        }), pn.create({
                            name: at.InvalidToken,
                            message: "Invalid password reset token.",
                            code: "OS-CLRT-40107"
                        })
                    }
                }()
            })
        }
        getPasswordComplexityPolicy() {
            return $(this, wo, "f")
        }
        validatePasswordComplexityPolicy() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "",
                t = e.length < $(this, wo, "f").minimumLength,
                r = $(this, wo, "f").upperCaseLetterRequired && !/[A-Z]/.test(e),
                i = $(this, wo, "f").lowerCaseLetterRequired && !/[a-z]/.test(e),
                o = $(this, wo, "f").numberRequired && !/\d/.test(e),
                s = $(this, wo, "f").specialCharacterRequired && !/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+\- ]/.test(e);
            return {
                isValid: !(t || r || i || o || o || s),
                missingMinimumLength: t,
                missingUpperCaseLetter: r,
                missingLowerCaseLetter: i,
                missingNumber: o,
                missingSpecialCharacter: s
            }
        }
        updateUser(e) {
            return Ae(this, arguments, void 0, function(t) {
                var r = this;
                let {
                    username: i,
                    name: o,
                    pictureUrl: s,
                    authCurrentAuthenticatedUser: a = u(() => Sr.currentAuthenticatedUser(), "r"),
                    authUpdateUserAttributes: l = u((d, c) => Sr.updateUserAttributes(d, c), "i")
                } = t;
                return function*() {
                    var d, c, h;
                    let f = null;
                    try {
                        f = yield a()
                    } catch (g) {
                        (d = r.logger) === null || d === void 0 || d.error({
                            category: Nt,
                            message: "Error in current authenticated user",
                            error: g,
                            code: "OS-CLRT-40101"
                        })
                    }
                    if (!f || i !== ((c = f == null ? void 0 : f.attributes) === null || c === void 0 ? void 0 : c.preferred_username)) throw pn.create({
                        name: at.InvalidCredentials,
                        message: "Invalid credentials",
                        code: "OS-CLRT-40104"
                    });
                    try {
                        let g = r8({
                            name: o != null ? o : void 0,
                            given_name: o != null ? o : void 0,
                            family_name: o ? " " : void 0,
                            picture: s != null ? s : void 0
                        }, p => p !== void 0);
                        n8(g) || (yield l(f, g), r.synchronizeUserInfo())
                    } catch (g) {
                        throw (h = r.logger) === null || h === void 0 || h.error({
                            category: Nt,
                            message: "Error updating user",
                            error: g,
                            code: "OS-CLRT-40100",
                            visibility: Ar.External
                        }), pn.create({
                            name: at.UnknownFailure,
                            message: "Unknown failure!",
                            code: "OS-CLRT-40100"
                        })
                    }
                }()
            })
        }
        isExternalUser() {
            return !1
        }
    };
u(W_, "Gs");
var T_ = W_,
    E_;
wo = new WeakMap, im = new WeakMap, _m = new WeakMap, om = new WeakMap, sm = new WeakMap, Sm = new WeakMap, Im = new WeakMap, Ir = new WeakSet, b_ = u(function(n) {
        var e, t, r;
        let i = n,
            o = (e = i.name) !== null && e !== void 0 ? e : at.UnknownFailure,
            s = !i.errorCode || i.errorCode.startsWith("OS-CLRT-6") ? "OS-CLRT-40100" : i.errorCode;
        return i.name === "NotAuthorizedException" ? !((t = i.message) === null || t === void 0) && t.includes("Incorrect username or password") ? (o = at.InvalidCredentials, s = "OS-CLRT-40104") : !((r = i.message) === null || r === void 0) && r.includes("Password attempts exceeded") && (o = at.TooManyFailedAttempts, s = "OS-CLRT-40105") : i.name === "LimitExceededException" && (o = at.TooManyFailedAttempts, s = "OS-CLRT-40105"), pn.create({
            name: o,
            message: i.message,
            code: s
        })
    }, "Rs"), XL = u(function() {
        return "/identityapi/v1alpha1/oidc/store-token"
    }, "Ds"), QL = u(function(n, e) {
        return Ae(this, void 0, void 0, function*() {
            let t = {
                client_id: ih,
                scope: this.scope,
                redirect_uri: e != null ? e : "",
                response_type: "code",
                kc_idp_hint: $(this, _m, "f")
            };
            return this.httpClient.getResponseUrl({
                url: n,
                params: t
            })
        })
    }, "xs"), ex = u(function(n, e, t) {
        return Ae(this, void 0, void 0, function*() {
            let r = {
                code: e,
                state: t
            };
            return this.httpClient.getResponseUrl({
                url: n,
                params: r
            })
        })
    }, "Fs"), tx = u(function(n) {
        return n.replace("outsystems://", "https://")
    }, "Ms"), YN = u(function(n) {
        return n && o8.includes(n) ? at.InvalidToken : n && s8.includes(n) ? at.InvalidCredentials : at.UnknownFailure
    }, "js"), w_ = u(function(n, e) {
        return Ae(this, void 0, void 0, function*() {
            var t, r, i, o, s, a, l;
            try {
                let d = e === "REGISTRATION" ? this.buildUrl($(this, Sm, "f")) : this.buildUrl($(this, Im, "f")),
                    c = yield this.httpClient.post({
                        url: d,
                        payload: n,
                        contentType: _n.Json
                    });
                if (c === void 0) {
                    let h = new Error("Couldn't get any response from server while getting temporary password.");
                    throw (t = this.logger) === null || t === void 0 || t.error({
                        category: Nt,
                        code: "OS-CLRT-40100",
                        error: h
                    }), h
                }
                return c.registrationToken
            } catch (d) {
                let c = d,
                    h = (r = c.response) === null || r === void 0 ? void 0 : r.detail,
                    f = "Error getting temporary password";
                throw (i = this.logger) === null || i === void 0 || i.error({
                    category: Nt,
                    error: c,
                    message: `${f}: ${h!=null?h:""}`,
                    visibility: Ar.Client
                }), (o = this.logger) === null || o === void 0 || o.error({
                    category: Nt,
                    error: new Error(`[${e}]${f}: code = ${(a=(s=c.response)===null||s===void 0?void 0:s.errorCode)!==null&&a!==void 0?a:"UNKNOWN"}`),
                    visibility: Ar.Internal
                }), pn.create({
                    name: $(this, Ir, "m", YN).call(this, (l = c.response) === null || l === void 0 ? void 0 : l.errorCode),
                    message: f
                })
            }
        })
    }, "Ns"), nx = u(function(n, e, t) {
        return Ae(this, void 0, void 0, function*() {
            var r;
            try {
                let i = yield this.httpClient.post({
                    url: n,
                    payload: {
                        grant_type: "authorization_code",
                        code: e,
                        client_id: ih,
                        redirect_uri: t
                    }
                });
                if (i === void 0) {
                    let o = new Error("Couldn't get any response from server while getting tokens.");
                    throw (r = this.logger) === null || r === void 0 || r.error({
                        category: Nt,
                        code: "OS-CLRT-40100",
                        error: o
                    }), o
                }
                return i
            } catch (i) {
                throw $(this, Ir, "m", XN).call(this, i)
            }
        })
    }, "Ls"), XN = u(function(n) {
        var e;
        let t = n instanceof Error ? `[Token endpoint] ${n.message}` : "Token endpoint call failed",
            r = (e = n == null ? void 0 : n.response) === null || e === void 0 ? void 0 : e.error_description;
        return r && (t += `: ${r}`), pn.create({
            name: at.IdentityTokenEndpointFailed,
            code: "OS-ID-BIZ-40021",
            message: t
        })
    }, "Bs"),
    function(n) {
        n.External = "external", n.Builtin = "builtin"
    }(E_ || (E_ = {}));
var In, Xd, So, Ju, am, __, Hd, rx, ix, um, ox, Fi, Qd, eh, ha, ec, th, Io, nh, S_, VE, QN, eL, HE, tL, tn = E_,
    q_ = class q_ {
        constructor(e) {
            let {
                info: t,
                data: r = new ma
            } = e;
            In.add(this), Xd.set(this, void 0), So.set(this, void 0), Ju.set(this, ""), Ce(this, Xd, t, "f"), Ce(this, So, r, "f")
        }
        setAuthInfo(e, t) {
            Ce(this, Xd, e, "f"), Ce(this, So, new ma, "f"), $(this, In, "m", um).call(this, e) !== $(this, Ju, "f") && (Ce(this, Ju, "", "f"), $(this, So, "f").clearAuthData()), t && Ce(this, In, t, "a", __)
        }
        getBuiltinAuthInfo() {
            let e = $(this, In, "m", Hd).call(this);
            if ($(this, In, "m", rx).call(this, e)) return e
        }
        getExternalAuthInfo(e) {
            let t = $(this, In, "m", Hd).call(this, e, !0);
            if ($(this, In, "m", ix).call(this, t)) return t
        }
        saveConfig(e, t) {
            let r = $(this, In, "m", ox).call(this, t);
            r && $(this, So, "f").storeCurrentAuthConfig(r), Ce(this, In, e, "a", __), Ce(this, Ju, $(this, In, "m", um).call(this, t), "f")
        }
        getAuthType() {
            return $(this, In, "a", am)
        }
        hasChanges(e, t) {
            if (e && e !== $(this, In, "a", am)) return !0;
            let r = $(this, In, "a", am) === tn.Builtin ? $(this, In, "m", Hd).call(this) : $(this, In, "m", Hd).call(this, t, !0);
            return $(this, Ju, "f") !== $(this, In, "m", um).call(this, r)
        }
    };
u(q_, "wa");
var I_ = q_;
Xd = new WeakMap, So = new WeakMap, Ju = new WeakMap, In = new WeakSet, am = u(function() {
    var n;
    return (n = $(this, So, "f").readCurrentAuthType()) !== null && n !== void 0 ? n : void 0
}, "Zs"), __ = u(function(n) {
    n && $(this, So, "f").storeCurrentAuthType(n)
}, "Xs"), Hd = u(function(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
    var t;
    let r = n;
    return e && r === void 0 && (r = (t = $(this, So, "f").readCurrentAuthConfig()) !== null && t !== void 0 ? t : void 0), Object.assign(Object.assign({}, $(this, Xd, "f")), r != null ? r : {})
}, "Qs"), rx = u(function(n) {
    return n.region !== void 0 && n.poolId !== void 0 && n.clientId !== void 0 && n.identityProvider !== void 0
}, "ea"), ix = u(function(n) {
    return n.clientId !== void 0 && n.identityProvider !== void 0
}, "ta"), um = u(function(n) {
    let {
        identityProvider: e,
        clientId: t,
        passwordComplexityPolicy: r,
        poolId: i,
        region: o
    } = n, {
        lowerCaseLetterRequired: s,
        minimumLength: a,
        numberRequired: l,
        specialCharacterRequired: d,
        upperCaseLetterRequired: c
    } = r != null ? r : {};
    return `${e}|${t}|${`${s}${a}|${l}|${d}|${c}`}|${i}|${o}`
}, "na"), ox = u(function(n) {
    let {
        region: e,
        poolId: t,
        clientId: r,
        identityProvider: i
    } = n;
    if (r && i) return {
        region: e,
        poolId: t,
        clientId: r,
        identityProvider: i
    }
}, "ra");
var G_ = class G_ {
    constructor(e) {
        let {
            appKey: t,
            identityProvider: r,
            appUrl: i,
            region: o,
            poolId: s,
            clientId: a,
            scope: l = "",
            passwordComplexityPolicy: d,
            authData: c = new ma,
            authInstance: h,
            logger: f,
            httpClient: g,
            configHandler: p = new I_({
                info: {
                    identityProvider: r,
                    clientId: a,
                    passwordComplexityPolicy: d,
                    poolId: s,
                    region: o,
                    scope: l
                },
                data: c
            }),
            isOnline: y
        } = e;
        Fi.add(this), Qd.set(this, void 0), eh.set(this, void 0), ha.set(this, void 0), ec.set(this, void 0), th.set(this, void 0), Io.set(this, void 0), nh.set(this, void 0), Ce(this, Qd, t, "f"), Ce(this, eh, i, "f"), Ce(this, ha, h, "f"), Ce(this, ec, f, "f"), Ce(this, th, g, "f"), Ce(this, Io, p, "f"), Ce(this, nh, y, "f")
    }
    getInstance(e, t) {
        var r;
        let i = e != null ? e : $(this, Io, "f").getAuthType(),
            o = $(this, Io, "f").hasChanges(e, t),
            s = !!(!((r = $(this, ha, "f")) === null || r === void 0) && r.isAuthenticated());
        if (!$(this, ha, "f") && i) $(this, Fi, "m", S_).call(this, i, t);
        else if (!s && i && o) $(this, Fi, "m", S_).call(this, i, t);
        else if (s && o) throw new Error("Error getting new instance of auth because a user is already authenticated using another mechanism");
        return $(this, ha, "f")
    }
    updateConfig(e, t) {
        $(this, Io, "f").setAuthInfo(e, t)
    }
};
u(G_, "ba");
var Am = G_;
Qd = new WeakMap, eh = new WeakMap, ha = new WeakMap, ec = new WeakMap, th = new WeakMap, Io = new WeakMap, nh = new WeakMap, Fi = new WeakSet, S_ = u(function(n, e) {
        switch (n) {
            case tn.External:
                return $(this, Fi, "m", QN).call(this, e);
            case tn.Builtin:
                return $(this, Fi, "m", eL).call(this);
            default:
                throw new Error(`Invalid new auth type: ${n}`)
        }
    }, "fa"), VE = u(function(n, e, t) {
        Ce(this, ha, n, "f"), $(this, Io, "f").saveConfig(e, t)
    }, "da"), QN = u(function(n) {
        let e = $(this, Io, "f").getExternalAuthInfo(n);
        $(this, Fi, "m", HE).call(this, e);
        let t = new m_({
            appKey: $(this, Qd, "f"),
            appUrl: $(this, eh, "f"),
            scope: e.scope,
            region: e.region,
            poolId: e.poolId,
            clientId: e.clientId,
            identityProvider: e.identityProvider,
            logger: $(this, ec, "f"),
            httpClient: $(this, th, "f"),
            isOnline: $(this, nh, "f")
        });
        $(this, Fi, "m", VE).call(this, t, tn.External, e)
    }, "pa"), eL = u(function() {
        let n = $(this, Io, "f").getBuiltinAuthInfo();
        $(this, Fi, "m", HE).call(this, n);
        let e = new T_({
            appKey: $(this, Qd, "f"),
            appUrl: $(this, eh, "f"),
            scope: n.scope,
            region: n.region,
            poolId: n.poolId,
            clientId: n.clientId,
            identityProvider: n.identityProvider,
            passwordComplexityPolicy: n.passwordComplexityPolicy,
            logger: $(this, ec, "f"),
            httpClient: $(this, th, "f"),
            isOnline: $(this, nh, "f")
        });
        $(this, Fi, "m", VE).call(this, e, tn.Builtin, n)
    }, "ga"), HE = u(function(n) {
        var e;
        if (!n) {
            let t = pn.create({
                name: "Error loading auth configuration",
                message: "Identity provider configurations missing.",
                code: "OS-CLRT-40109"
            });
            throw (e = $(this, ec, "f")) === null || e === void 0 || e.error({
                category: Nt,
                message: t.message,
                error: t,
                code: t.errorCode,
                visibility: Ar.External
            }), t
        }
    }, "ya"),
    function(n) {
        n.Auth_Default = "OS-CLRT-40100", n.Auth_No_Login = "OS-CLRT-40101", n.Auth_Invalid_Mechanism = "OS-CLRT-40102", n.Auth_Invalid_RefreshToken = "OS-CLRT-40103", n.Auth_Invalid_Credentials = "OS-CLRT-40104", n.Auth_Login_Attempts = "OS-CLRT-40105", n.Auth_Password_Policy = "OS-CLRT-40106", n.Auth_Invalid_Inputs = "OS-CLRT-40107", n.Auth_Logout_Failed = "OS-CLRT-40108", n.Auth_No_Configuration = "OS-CLRT-40109", n.Auth_Configuration_Failed = "OS-CLRT-40110", n.Auth_UserIdMissing = "OS-CLRT-40111", n.Auth_RefreshToken_Unavailable = "OS-CLRT-40112", n.Auth_FailedToGetUserInfo = "OS-CLRT-40113", n.AuthZ_Default = "OS-CLRT-40300", n.AuthZ_Screen_No_Roles = "OS-CLRT-40301", n.AuthZ_No_Permissions = "OS-CLRT-40302", n.AuthZ_Not_Registered = "OS-CLRT-40303", n.IdentityTokenFailure = "OS-ID-BIZ-40021"
    }(tL || (tL = {}));

function Wt(n, e, t, r) {
    var i, o = arguments.length,
        s = o < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, t) : r;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function") s = Reflect.decorate(n, e, t, r);
    else
        for (var a = n.length - 1; a >= 0; a--)(i = n[a]) && (s = (o < 3 ? i(s) : o > 3 ? i(e, t, s) : i(e, t)) || s);
    return o > 3 && s && Object.defineProperty(e, t, s), s
}
u(Wt, "y");

function M(n, e, t, r) {
    return new(t || (t = Promise))(function(i, o) {
        function s(d) {
            try {
                l(r.next(d))
            } catch (c) {
                o(c)
            }
        }
        u(s, "a");

        function a(d) {
            try {
                l(r.throw(d))
            } catch (c) {
                o(c)
            }
        }
        u(a, "o");

        function l(d) {
            var c;
            d.done ? i(d.value) : (c = d.value, c instanceof t ? c : new t(function(h) {
                h(c)
            })).then(s, a)
        }
        u(l, "l"), l((r = r.apply(n, e || [])).next())
    })
}
u(M, "b");

function Ts(n, e, t, r) {
    if (t === "a" && !r) throw new TypeError("Private accessor was defined without a getter");
    if (typeof e == "function" ? n !== e || !r : !e.has(n)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return t === "m" ? r : t === "a" ? r.call(n) : r ? r.value : e.get(n)
}
u(Ts, "T");

function dP(n, e, t, r, i) {
    if (r === "m") throw new TypeError("Private method is not writable");
    if (r === "a" && !i) throw new TypeError("Private accessor was defined without a setter");
    if (typeof e == "function" ? n !== e || !i : !e.has(n)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return r === "a" ? i.call(n, t) : i ? i.value = t : e.set(n, t), t
}
u(dP, "w");
var uv;
typeof SuppressedError == "function" && SuppressedError,
    function(n) {
        n[n.None = 0] = "None", n[n.Default = 1] = "Default", n[n.Fade = 2] = "Fade", n[n.SlideFromLeft = 3] = "SlideFromLeft", n[n.SlideFromRight = 4] = "SlideFromRight", n[n.SlideFromBottom = 5] = "SlideFromBottom", n[n.SlideFromTop = 6] = "SlideFromTop"
    }(uv || (uv = {}));
var a8 = Object.freeze({
        __proto__: null,
        get TransitionAnimation() {
            return uv
        }
    }),
    zi = uv,
    kI = class kI {
        constructor() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
            this.name = e
        }
    };
u(kI, "N");
var cn = kI,
    u8 = new cn,
    ES = new cn("fade"),
    _S = new cn("slide-from-left"),
    SS = new cn("slide-from-right"),
    IS = new cn("slide-from-bottom"),
    AS = new cn("slide-from-top"),
    of = new cn;

function hP(n) {
    of = n
}
u(hP, "_");

function Uy(n, e) {
    if (typeof n == "string") return new cn(n);
    switch (n) {
        case zi.None:
            return u8;
        case zi.Fade:
            return ES;
        case zi.SlideFromLeft:
            return _S;
        case zi.SlideFromRight:
            return SS;
        case zi.SlideFromBottom:
            return IS;
        case zi.SlideFromTop:
            return AS;
        case zi.Default:
            return of;
        default:
            return e
    }
}
u(Uy, "M");
var c8 = Object.freeze({
        __proto__: null,
        get Default() {
            return of
        },
        Transition: cn,
        TransitionAnimation: zi,
        createTransition: Uy,
        reverseTransition: u(function(n) {
            if (!(n != null && n.name)) return new cn("");
            switch (n.name) {
                case ES.name:
                    return new cn(ES.name);
                case IS.name:
                    return new cn(AS.name);
                case _S.name:
                    return new cn(SS.name);
                case SS.name:
                    return new cn(_S.name);
                case AS.name:
                    return new cn(IS.name);
                default:
                    return new cn(n.name + "-back")
            }
        }, "reverseTransition"),
        sanitizeTransition: u(function(n) {
            return new cn(n ? n.name : "")
        }, "sanitizeTransition"),
        setDefaultTransition: hP
    }),
    fi = "",
    tt = {
        applicationKey: fi,
        applicationName: fi,
        userProviderName: fi,
        debugEnabled: !1,
        debugUseWebSockets: !1,
        homeModuleName: fi,
        homeModuleKey: fi,
        modules: {},
        homeModuleControllerName: fi,
        homeModuleLanguageResourcesName: fi,
        clientEntitiesModules: [],
        serverRequestTimeoutOverrideInSeconds: void 0,
        isWeb: !1,
        frontendBuildWorkerVersion: fi,
        clientRuntimeVersion: fi,
        appVersion: ""
    };

function fP(n) {
    tt = n
}
u(fP, "P");

function Is() {
    return tt.applicationKey
}
u(Is, "V");

function My() {
    return tt.applicationName
}
u(My, "B");

function qm() {
    var n;
    return (n = tt.databaseName) !== null && n !== void 0 ? n : ""
}
u(qm, "k");

function gP(n) {
    tt.modules = n
}
u(gP, "z");

function pP() {
    var n;
    return (n = tt.modules) !== null && n !== void 0 ? n : {}
}
u(pP, "H");

function mP(n) {
    let e = tt.modules;
    return !(e != null && e[n]) && e && (e[n] = {
        moduleName: null,
        homeScreenName: null,
        splashScreenName: null,
        screens: [],
        staticEntities: {}
    }), e == null ? void 0 : e[n]
}
u(mP, "j");

function sx(n) {
    return n != null && n.homeScreenName ? Z1(n, n.homeScreenName) : n != null && n.screens && n.screens.length > 0 ? n.screens[0] : null
}
u(sx, "q");

function vP() {
    return tt.clientEntitiesModules
}
u(vP, "G");

function yP() {
    return tt.clientEntitiesModuleImporter
}
u(yP, "W");

function bP(n) {
    tt.clientEntitiesModules = n
}
u(bP, "K");

function wP(n) {
    tt.databaseName = n
}
u(wP, "J");

function Qn() {
    return tt.homeModuleName
}
u(Qn, "Y");

function J1() {
    return tt.homeModuleKey
}
u(J1, "X");

function cv() {
    return tt.homeModuleName && tt.modules && tt.modules[tt.homeModuleKey] || null
}
u(cv, "Q");

function Z1(n, e) {
    for (let t of n.screens)
        if (t.screenName === e) return t;
    return null
}
u(Z1, "Z");

function Y1() {
    return tt.userProviderName
}
u(Y1, "ee");

function TP() {
    var n;
    return (n = tt.debugEnabled) !== null && n !== void 0 && n
}
u(TP, "te");

function EP() {
    var n;
    return (n = tt.debugUseWebSockets) !== null && n !== void 0 && n
}
u(EP, "ne");

function _P() {
    return tt.homeModuleControllerName
}
u(_P, "re");

function SP() {
    return tt.homeModuleControllerImporter
}
u(SP, "ie");

function IP() {
    return tt.homeModuleLanguageResourcesName
}
u(IP, "se");

function AP() {
    return tt.homeModuleLanguageResourcesImporter
}
u(AP, "ae");

function CP() {
    return tt.serverRequestTimeoutOverrideInSeconds
}
u(CP, "oe");

function RP(n) {
    tt.serverRequestTimeoutOverrideInSeconds = n
}
u(RP, "le");

function OP() {
    var n;
    return Uy(zi[(n = tt.defaultTransition) !== null && n !== void 0 ? n : zi.None])
}
u(OP, "ue");

function X1() {
    return tt.errorPageConfig
}
u(X1, "ce");

function sf() {
    var n;
    return (n = tt.isWeb) !== null && n !== void 0 && n
}
u(sf, "de");

function DP() {
    var n;
    return (n = tt.frontendBuildWorkerVersion) !== null && n !== void 0 ? n : fi
}
u(DP, "he");

function NP() {
    var n;
    return (n = tt.clientRuntimeVersion) !== null && n !== void 0 ? n : fi
}
u(NP, "ge");

function af() {
    var n;
    return (n = tt.useESM) !== null && n !== void 0 && n
}
u(af, "pe");

function jt() {
    let {
        applicationHomeModule: n = Qn
    } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    var e, t;
    return `/${(t=(e=(typeof window!="undefined"?window:globalThis).OutSystemsApp)===null||e===void 0?void 0:e.basePath)!==null&&t!==void 0?t:n()}/`.replace(/\/(\/)+/gm, "/")
}
u(jt, "fe");

function Q1() {
    let {
        windowLocation: n = window.location,
        applicationHomeModule: e = Qn
    } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    return `${n.protocol}//${n.host}${jt({applicationHomeModule:e})}`
}
u(Q1, "me");

function LP() {
    return tt.appVersion
}
u(LP, "ve");
var l8 = Object.freeze({
    __proto__: null,
    debugUseWebSockets: EP,
    getAppUrl: Q1,
    getAppVersion: LP,
    getApplicationKey: Is,
    getApplicationName: My,
    getBasePath: jt,
    getClientEntitiesModuleImporter: yP,
    getClientEntitiesModules: vP,
    getClientRuntimeVersion: NP,
    getDatabaseName: qm,
    getDefaultModuleHomeScreenURL: u(function() {
        let n = cv(),
            e = sx(n);
        return e ? `/${n==null?void 0:n.moduleName}/${e.screenUrl}` : null
    }, "getDefaultModuleHomeScreenURL"),
    getDefaultTransition: OP,
    getErrorPageConfig: X1,
    getFrontendBuildWorkerVersion: DP,
    getHomeModuleControllerImporter: SP,
    getHomeModuleControllerName: _P,
    getHomeModuleDefinition: cv,
    getHomeModuleKey: J1,
    getHomeModuleLanguageResourcesImporter: AP,
    getHomeModuleLanguageResourcesName: IP,
    getHomeModuleName: Qn,
    getHomeScreen: sx,
    getModuleFromKey: mP,
    getModules: pP,
    getScreenDefinitionFromScreenName: Z1,
    getScreensDefinition: u(function() {
        return tt.screensDefinition
    }, "getScreensDefinition"),
    getServerRequestTimeoutOverrideInSeconds: CP,
    getUserProviderName: Y1,
    isDebugEnabled: TP,
    isWebApplication: sf,
    moduleBelongsToApp: u(function(n) {
        var e, t;
        let r = (e = tt.modules) !== null && e !== void 0 ? e : {};
        return ((t = Object.keys(r).map(i => r[i]).filter(i => i.moduleName === n)[0]) === null || t === void 0 ? void 0 : t.ownerAppKey) === Is()
    }, "moduleBelongsToApp"),
    setApplicationDefinition: fP,
    setClientEntitiesModules: bP,
    setDatabaseName: wP,
    setModules: gP,
    setServerRequestTimeoutOverrideInSeconds: RP,
    useESM: af
});

function il(n) {
    if (typeof Lr == "undefined") throw new Error("requirejs is not defined");
    return Lr
}
u(il, "be");

function d8(n) {
    return il().defined(n)
}
u(d8, "Te");
var h8 = new Proxy({}, {
        get: u((n, e) => {
            var t, r;
            return (r = (t = il()) === null || t === void 0 ? void 0 : t.s) === null || r === void 0 ? void 0 : r[e]
        }, "get")
    }),
    ax = "$";

function xP(n) {
    return n.filter(e => typeof e == "string").length === n.length
}
u(xP, "Ie");
var eI = new class {
    constructor() {
        this.scriptMap = {}, this.baseUrl = ""
    }
    setErrorHandler(n) {
        this.errorHandler = n
    }
    loadModule(n, e, t) {
        return M(this, arguments, void 0, function(r, i, o) {
            var s = this;
            let a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : l => import(l);
            return function*() {
                var l;
                try {
                    let d;
                    if (xP(r)) d = r.map(h => {
                        var f;
                        return a((f = s.scriptMap[h]) !== null && f !== void 0 ? f : `${s.baseUrl?s.baseUrl+"/":""}${h}`)
                    });
                    else {
                        if (! function(h) {
                                return h.filter(f => typeof f == "function").length === h.length
                            }(r)) throw new Error("'moduleNames' must be either a list of module names or module loaders. The list contains mixed elements.");
                        d = r.map(h => h())
                    }
                    let c = yield Promise.all(d);
                    i == null || i(...c)
                } catch (d) {
                    (l = o != null ? o : s.errorHandler) === null || l === void 0 || l(d)
                }
            }()
        })
    }
    configure(n) {
        let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "scripts";
        this.scriptMap = n, this.baseUrl = e
    }
};

function PP() {
    af() || kP()
}
u(PP, "Ne");

function kP() {
    (function() {
        var n;
        let e = (n = h8.contexts) !== null && n !== void 0 ? n : {};
        Object.keys(e).forEach(t => {
            let r = e[t];
            if (!r._osNameToUrlPatched) {
                let i = r.nameToUrl;
                r.nameToUrl = function(o, s, a) {
                    return o.indexOf(ax) > 0 && o.indexOf("?") === -1 && (o = o.split(ax, 2)[0]), i.apply(r, [o, s, a])
                }, r._osNameToUrlPatched = !0
            }
        })
    })()
}
u(kP, "Se");

function UP(n) {
    af() ? eI.setErrorHandler(n) : function(e) {
        il().onError = e
    }(n)
}
u(UP, "De");

function Lh(n, e, t) {
    let r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : Lr,
        i = arguments.length > 4 ? arguments[4] : void 0;
    var o;
    if (af()) eI.loadModule(n, e, t, i);
    else if (xP(n)) r(n, e, t);
    else {
        let s = new Error("A list of module names is required when ESM is switched off. The list of modules to load contains other type of elements.");
        (o = t != null ? t : il().onError) === null || o === void 0 || o(s)
    }
}
u(Lh, "Re");

function MP(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "scripts";
    if (af()) eI.configure(n, e);
    else {
        let r = {
            baseUrl: e,
            paths: {},
            waitSeconds: 30
        };
        if (n) {
            for (let i in n) t = i, (il().specified(t) || d8(i)) && delete n[i];
            r.paths = n
        }(function(i) {
            il().config(i)
        })(r), kP()
    }
    var t
}
u(MP, "Ce");
var f8 = Object.freeze({
        __proto__: null,
        configure: MP,
        initialize: PP,
        loadModule: Lh,
        setErrorHandler: UP
    }),
    tI = new Map,
    ux = "Client Runtime Packages",
    Gm;

function nI(n, e) {
    Gm = null, tI.set(n, e)
}
u(nI, "Me");
var FP = u(n => {
        let {
            versionsMap: e = tI,
            packageKey: t
        } = n;
        var r;
        return (r = e == null ? void 0 : e.get(t)) !== null && r !== void 0 ? r : null
    }, "Ue"),
    CS, g8 = Object.freeze({
        __proto__: null,
        clientRuntimeKey: ux,
        getPackageVersion: FP,
        registerPackage: nI,
        toObject: u(function() {
            if (!Gm) {
                let n = {
                    "Client Runtime Packages": ""
                };
                tI.forEach((e, t) => {
                    e && t && (n[ux] += `${t}= ${e};`)
                }), Gm = n
            }
            return Gm
        }, "toObject")
    });
(function(n) {
    n[n.Persistent = 0] = "Persistent", n[n.Session = 1] = "Session"
})(CS || (CS = {}));
var vn = CS,
    UI = class UI {
        get length() {
            return Object.keys(this.storageObj).length
        }
        clear() {
            this.storageObj = {}
        }
        getItem(e) {
            return this.storageObj.hasOwnProperty(e) ? this.storageObj[e] : null
        }
        key(e) {
            let t = Object.keys(this.storageObj);
            return e < t.length ? t[e] : null
        }
        removeItem(e) {
            this.storageObj.hasOwnProperty(e) && delete this.storageObj[e]
        }
        setItem(e, t) {
            this.storageObj[e] = t
        }
        constructor(e) {
            if (this.storageObj = {}, e) {
                let t = 0,
                    r = e.key(t);
                for (; r !== null;) this.storageObj[r] = e.getItem(r), r = e.key(++t)
            }
        }
    };
u(UI, "Ve");
var La = UI,
    lv = "$OS_",
    BP = "OS";

function jP() {
    return BP
}
u(jP, "ze");

function $P(n) {
    BP = n
}
u($P, "He");
var VP = typeof window == "undefined" ? void 0 : window.localStorage,
    HP = typeof window == "undefined" ? void 0 : window.sessionStorage,
    rI = u(n => n === vn.Persistent ? VP : HP, "Ge"),
    gh = zP(vn.Persistent) ? rI(vn.Persistent) : new La,
    ph = zP(vn.Session) ? rI(vn.Session) : new La;

function zP(n) {
    let e = lv + "test";
    try {
        let t = rI(n);
        t.setItem(e, "1");
        let r = t.getItem(e) === "1";
        return t.removeItem(e), r
    } catch (t) {
        return !1
    }
}
u(zP, "Je");

function WP() {
    return gh
}
u(WP, "Ye");

function qP() {
    return ph
}
u(qP, "Xe");
var cx = Object.freeze(Object()),
    MI = class MI {
        constructor(e, t, r, i) {
            this.storageType = e, this.key = t, this.defaultValue = r, this.getStorageName = () => jP(), this.clearCache(), i && (this.getStorageName = i)
        }
        get() {
            return this.getValue()
        }
        set(e) {
            this.setValueInStorage(e)
        }
        remove() {
            this.storage.removeItem(this.storageKey), this.clearCache()
        }
        isDefined() {
            let e = this.storage.getItem(this.storageKey);
            return e != null && e !== "undefined"
        }
        get storageKey() {
            return lv + this.getStorageName() + "$" + this.key
        }
        get storage() {
            return this.storageType === vn.Persistent ? WP() : qP()
        }
        getValue() {
            return this.cachedValue === cx && (this.cachedValue = this.getValueFromStorage()), this.cachedValue
        }
        getValueFromStorage() {
            let e = this.storage.getItem(this.storageKey);
            return e === null ? this.defaultValue : e === "undefined" || e === void 0 ? void 0 : JSON.parse(e)
        }
        setValueInStorage(e) {
            let t = this.storageKey,
                r = JSON.stringify(e),
                i = this.storage;
            if (!(i != null && i.setItem)) throw Error("The storage object for " + this.key + " is invalid.");
            try {
                i.setItem(t, r), this.cachedValue = e
            } catch (s) {
                if (!((o = this.storageType) === vn.Persistent && gh !== VP ? (console.warn("The localStorage is full... Proceding with a static Javascript object"), gh = new La(gh), 1) : o === vn.Session && ph !== HP && (console.warn("The sessionStorage is full... Proceding with a static Javascript object"), ph = new La(ph), 1))) throw s;
                this.storage.setItem(t, r)
            }
            var o
        }
        clearCache() {
            this.cachedValue = cx
        }
    };
u(MI, "Ze");
var Jr = MI,
    RS, p8 = Object.freeze({
        __proto__: null,
        DummyStorage: La,
        StorageObject: Jr,
        StorageType: vn,
        getDefaultStorageNamespace: jP,
        getPersistentStorage: WP,
        getSessionStorage: qP,
        setCustomPersistentStorage: u(function(n) {
            gh = n
        }, "setCustomPersistentStorage"),
        setCustomSessionStorage: u(function(n) {
            ph = n
        }, "setCustomSessionStorage"),
        setDefaultStorageNamespace: $P
    }),
    FI = class FI {
        constructor(e) {
            this._device = e
        }
        get device() {
            return this._device
        }
    };
u(FI, "nt");
var dv = FI,
    BI = class BI {
        constructor(e, t, r, i, o, s, a, l) {
            this._platform = e, this._version = t, this._manufacturer = r, this._model = i, this._uuid = o, this._serial = s, this._cordova = a, this._isVirtual = l
        }
        get platform() {
            return this._platform
        }
        get version() {
            return this._version
        }
        get manufacturer() {
            return this._manufacturer
        }
        get model() {
            return this._model
        }
        get uuid() {
            return this._uuid
        }
        get serial() {
            return this._serial
        }
        get cordova() {
            return this._cordova
        }
        get isVirtual() {
            return this._isVirtual
        }
    };
u(BI, "rt");
var hv = BI;
(function(n) {
    function e(t) {
        if (t) return {
            platform: t.platform,
            version: t.version,
            manufacturer: t.manufacturer,
            model: t.model,
            uuid: t.uuid,
            serial: t.serial,
            cordova: t.cordova,
            isVirtual: t.isVirtual
        }
    }
    u(e, "t"), n.serializeClientInfo = function(t) {
        let r = function(i) {
            if (i) return {
                device: i.device ? e(i.device) : void 0
            }
        }(t);
        if (r) return JSON.stringify(r)
    }, n.deserializeClientInfo = function(t) {
        let r;
        try {
            r = JSON.parse(t)
        } catch (i) {}
        if (r) return function(i) {
            if (i) return new dv(function(o) {
                if (o) return new hv(typeof o.platform == "string" ? o.platform : void 0, typeof o.version == "string" ? o.version : void 0, typeof o.manufacturer == "string" ? o.manufacturer : void 0, typeof o.model == "string" ? o.model : void 0, typeof o.uuid == "string" ? o.uuid : void 0, typeof o.serial == "string" ? o.serial : void 0, typeof o.cordova == "string" ? o.cordova : void 0, typeof o.isVirtual == "boolean" ? o.isVirtual : void 0)
            }(i.device))
        }(r)
    }
})(RS || (RS = {}));
var m8 = new Jr(vn.Persistent, "ClientInfo"),
    Q;

function Ei(n, e) {
    let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
    return e === Q.Exception || n instanceof e && (t === "" || !!n.specificType && n.specificType === t)
}
u(Ei, "at");

function Yr(n) {
    if (n === void 0) return "";
    if (n instanceof Error) return n.message; {
        let e = n.toString();
        return e === "[object SQLError]" ? n.message.toString() : e
    }
}
u(Yr, "ot");

function ko(n) {
    return (n.extraStack !== void 0 ? n.extraStack + `\r
 ` : "") + (n.stack || "") || ""
}
u(ko, "lt");

function GP(n) {
    var e, t, r;
    return {
        name: n.name,
        message: Yr(n),
        stack: ko(n),
        extraStack: (e = n.extraStack) !== null && e !== void 0 ? e : void 0,
        errorCode: (t = n.errorCode) !== null && t !== void 0 ? t : "OS-CLRT-00000",
        category: (r = n.category) !== null && r !== void 0 ? r : void 0
    }
}
u(GP, "ut");

function KP(n) {
    return n.name ? n.specificType ? new Q[n.name](n.specificType, n.message, n.extraStack, n.errorCode, n.category) : new Q[n.name](n.message, n.extraStack, n.errorCode, n.category) : new Q.Exception(n.message, n.extraStack, n.errorCode, n.category)
}
u(KP, "ct");

function iI(n) {
    return Ei(n, Q.SystemException)
}
u(iI, "dt");

function oI(n) {
    return Ei(n, Q.LicensingException)
}
u(oI, "ht");
(function(n) {
    n.CustomError = function(g) {
        let p = Error.call(this, g);
        typeof Object.setPrototypeOf == "function" ? Object.setPrototypeOf(p, this.constructor.prototype) : p.__proto__ = this.constructor.prototype, "stack" in this && this.stack !== "" || (Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = p.stack)
    }, n.CustomError.prototype = Error.prototype;
    let a = class a extends n.CustomError {
        constructor(p, y, b, E) {
            super(p != null ? p : ""), this.extraStack = y, this.message = p != null ? p : "", this.name = "Exception", this.errorCode = b, this.category = E
        }
    };
    u(a, "t");
    let e = a;
    n.Exception = e, n.ServerException = class extends e {
        constructor(g, p, y, b) {
            super(p, y, b), this.specificType = g, this.name = g
        }
    };
    let l = class l extends e {
        constructor(p, y, b, E) {
            super(y, b, E), this.specificType = p, this.name = p
        }
    };
    u(l, "n");
    let t = l;
    n.DataBaseException = t, n.OpenDatabaseException = class extends t {
        constructor(g, p, y) {
            super("OpenDatabaseException", g, p, y)
        }
    }, n.CommunicationException = class extends e {
        constructor(g, p, y, b) {
            super(g, p, y, b), this.name = "CommunicationException"
        }
    }, n.NumberOverflowException = class extends e {
        constructor(g, p) {
            super(g, p), this.name = "NumberOverflowException"
        }
        valueOf() {
            return this.name + ": " + this.message
        }
    }, n.InvalidJavascriptType = class extends e {
        constructor(g, p) {
            super(g, p), this.name = "InvalidJavascriptType"
        }
        valueOf() {
            return this.name + ": " + this.message
        }
    };
    let d = class d extends e {
        constructor(p, y, b) {
            super(p, y, b), this.name = "SecurityException"
        }
    };
    u(d, "r");
    let r = d;
    n.SecurityException = r, n.InvalidLoginException = class extends r {
        constructor(g, p, y) {
            super(g, p, y), this.name = "InvalidLoginException"
        }
    }, n.NotRegisteredException = class extends r {
        constructor(g, p, y, b) {
            super(p, y, b), this.specificType = g, this.name = g
        }
    };
    let c = class c extends e {
        constructor(p, y) {
            super(p, y), this.name = "SystemException"
        }
    };
    u(c, "i");
    let i = c;
    n.SystemException = i;
    let h = class h extends i {
        constructor(p, y) {
            super(p, y), this.name = "IgnorableSystemException"
        }
    };
    u(h, "s");
    let o = h;
    n.IgnorableSystemException = o, n.ViewHasChangedException = class extends o {
        constructor(g, p) {
            super(g, p), this.name = "ViewHasChangedException"
        }
    }, n.OutOfContextException = class extends o {
        constructor(g, p) {
            super(g, p), this.name = "OutOfContextException"
        }
    }, n.RedirectOccurredException = class extends o {
        constructor(g, p) {
            super(g, p), this.name = "RedirectOccurredException"
        }
    };
    let f = class f extends o {
        constructor(p, y) {
            super(p, y), this.name = "UnhandledOrIgnoredErrorInEventException"
        }
        get handleErrorResult() {
            return this._handleErrorResult
        }
        static create(p, y, b) {
            let E = new f(y, b);
            return E._handleErrorResult = p, E
        }
        static ignore(p) {
            if (!Ei(p, f)) throw p
        }
    };
    u(f, "a");
    let s = f;
    n.UnhandledOrIgnoredErrorInEventException = s, n.AbortedRequestException = class extends o {
        constructor(g, p) {
            super(g, p), this.name = "AbortedRequestException"
        }
    }, n.ApplicationBackendUnavailableException = class extends i {
        constructor(g, p) {
            super(g, p), this.name = "ApplicationBackendUnavailableException"
        }
    }, n.LicensingException = class extends i {
        constructor(g, p) {
            super(g, p), this.name = "LicensingException"
        }
    }, n.IncompatibleProducerException = class extends i {
        constructor(g, p) {
            super(g, p), this.name = "IncompatibleProducerException"
        }
    }, n.ControllerDisposedException = class extends o {
        constructor(g, p) {
            super(g, p), this.name = "ControllerDisposedException"
        }
    }, n.AbortActivityChangeException = class extends e {
        constructor(g, p, y) {
            super(g, p, y), this.name = "AbortActivityChangeException"
        }
    }, n.UserException = class extends e {
        constructor(g, p, y, b, E) {
            super(p, y, b, E), this.specificType = g, this.name = g
        }
    }
})(Q || (Q = {}));
var v8 = Object.freeze({
        __proto__: null,
        get Exceptions() {
            return Q
        },
        getException: KP,
        getExceptionInfo: GP,
        getMessage: Yr,
        getStack: ko,
        isApplicationOffline: oI,
        isInstanceOf: Ei,
        isSystem: iI
    }),
    jI = class jI {
        constructor(e) {
            this.returnValue = e
        }
    };
u(jI, "pt");
var fv = jI,
    JP = new Object,
    ZP = new Object;

function YP(n) {
    let e = n;
    return e && typeof e.then == "function" && typeof e.catch == "function"
}
u(YP, "vt");

function OS(n, e) {
    switch (e) {
        case ZP:
            return n();
        case JP:
            return;
        default:
            return Promise.reject(e)
    }
}
u(OS, "yt");

function DS(n) {
    return n() ? Promise.resolve(void 0) : XP()
}
u(DS, "bt");

function Fy(n) {
    return new Promise(n)
}
u(Fy, "Tt");

function gv(n) {
    return Promise.resolve(n)
}
u(gv, "wt");

function XP() {
    return Promise.reject(JP)
}
u(XP, "Et");

function Kr(n) {
    return Km(n)
}
u(Kr, "It");

function Km(n, e) {
    let t, r, i = u(() => {
            throw r
        }, "i"),
        o = u(() => {
            clearTimeout(e), e = window.setTimeout(i, 0)
        }, "s");

    function s(a, l) {
        return r ? l ? (clearTimeout(e), Km(() => l(r))) : (o(), Km(i, e)) : Km(a ? () => a(t) : () => t)
    }
    u(s, "a");
    try {
        t = n()
    } catch (a) {
        r = a, o()
    }
    return YP(t) ? t : {
        then: u((a, l) => s(a, l), "then"),
        catch: u(a => s(void 0, a), "catch")
    }
}
u(Km, "At");

function uf(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : r => Promise.reject(r),
        t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : () => Promise.resolve(void 0);
    return Kr(n).catch(e).then(r => Kr(t).then(i => i != null ? i : r), r => Kr(t).then(() => Promise.reject(r)))
}
u(uf, "Nt");

function QP(n, e) {
    return uf(n, e, void 0)
}
u(QP, "St");

function mh(n, e) {
    return uf(n, void 0, e)
}
u(mh, "Dt");

function NS(n, e) {
    return u(function t() {
        return DS(n).then(e).then(t, OS.bind(null, t))
    }, "n")()
}
u(NS, "Rt");
var y8 = NS.bind(null, () => !0);

function b8(n) {
    return n instanceof fv ? n.returnValue : Promise.reject(n)
}
u(b8, "xt");
var LS, w8 = Object.freeze({
    __proto__: null,
    breakAsync: XP,
    continueAsync: u(function() {
        return Promise.reject(ZP)
    }, "continueAsync"),
    doWhileAsync: u(function(n, e) {
        function t() {
            return DS(n).then(r, OS.bind(null, r))
        }
        u(t, "n");

        function r() {
            return Kr(e).then(() => DS(n)).then(r, OS.bind(null, t))
        }
        return u(r, "r"), r()
    }, "doWhileAsync"),
    executeAsyncFlow: u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : () => {};
        return Kr(n).catch(b8)
    }, "executeAsyncFlow"),
    executeSequence: Kr,
    forEachAsync: u(function(n, e) {
        let t = 0;
        return NS(() => t < n.length, () => {
            let r = n[t++];
            return e(r)
        })
    }, "forEachAsync"),
    isPromiseCompatible: YP,
    promise: Fy,
    resolve: gv,
    returnAsync: u(function(n) {
        return Promise.reject(new fv(n))
    }, "returnAsync"),
    throwAsync: u(function(n) {
        return Promise.reject(n)
    }, "throwAsync"),
    tryCatch: QP,
    tryCatchFinally: uf,
    tryFinally: mh,
    whileAsync: NS,
    whileTrueAsync: y8
});
(function(n) {
    n[n.No = 0] = "No", n[n.Yes = 1] = "Yes", n[n.YesIfEmpty = 2] = "YesIfEmpty"
})(LS || (LS = {}));
var xS, Dn = LS;
(function(n) {
    n[n.TEXT = 0] = "TEXT", n[n.BINARY_DATA = 1] = "BINARY_DATA", n[n.BOOLEAN = 2] = "BOOLEAN", n[n.INTEGER = 3] = "INTEGER", n[n.LONGINTEGER = 4] = "LONGINTEGER", n[n.DECIMAL = 5] = "DECIMAL", n[n.DATE_TIME = 6] = "DATE_TIME", n[n.DATE = 7] = "DATE", n[n.TIME = 8] = "TIME", n[n.UNKNOWN = 9] = "UNKNOWN"
})(xS || (xS = {}));
var PS, pe, kS, US, ce = xS;
(function(n) {
    var e;
    (e = n.InitializationType || (n.InitializationType = {}))[e.Full = 0] = "Full", e[e.Minimal = 1] = "Minimal"
})(PS || (PS = {})),
function(n) {
    n.AutoNumber = Dn, n.DBDataType = ce
}(pe || (pe = {})),
function(n) {
    var e;
    (e = n.DataFetchStatus || (n.DataFetchStatus = {}))[e.Fetching = 0] = "Fetching", e[e.Fetched = 1] = "Fetched", e[e.Error = 2] = "Error"
}(kS || (kS = {})),
function(n) {
    (function(e) {
        e[e.Info = 0] = "Info", e[e.Success = 1] = "Success", e[e.Warning = 2] = "Warning", e[e.Error = 3] = "Error"
    })(n.FeedbackMessageType || (n.FeedbackMessageType = {}))
}(US || (US = {}));
var T8 = Object.freeze({
    __proto__: null,
    get Application() {
        return PS
    },
    get ClientDB() {
        return pe
    },
    get FeedbackMessage() {
        return US
    },
    get Model() {
        return kS
    }
});

function pv(n, e) {
    e === void 0 && (e = {});
    for (var t = function(U) {
            for (var N = [], j = 0; j < U.length;) {
                var q = U[j];
                if (q !== "*" && q !== "+" && q !== "?")
                    if (q !== "\\")
                        if (q !== "{")
                            if (q !== "}")
                                if (q !== ":")
                                    if (q !== "(") N.push({
                                        type: "CHAR",
                                        index: j,
                                        value: U[j++]
                                    });
                                    else {
                                        var fe = 1,
                                            K = "";
                                        if (U[Z = j + 1] === "?") throw new TypeError('Pattern cannot start with "?" at '.concat(Z));
                                        for (; Z < U.length;)
                                            if (U[Z] !== "\\") {
                                                if (U[Z] === ")") {
                                                    if (--fe == 0) {
                                                        Z++;
                                                        break
                                                    }
                                                } else if (U[Z] === "(" && (fe++, U[Z + 1] !== "?")) throw new TypeError("Capturing groups are not allowed at ".concat(Z));
                                                K += U[Z++]
                                            } else K += U[Z++] + U[Z++];
                                        if (fe) throw new TypeError("Unbalanced pattern at ".concat(j));
                                        if (!K) throw new TypeError("Missing pattern at ".concat(j));
                                        N.push({
                                            type: "PATTERN",
                                            index: j,
                                            value: K
                                        }), j = Z
                                    }
                else {
                    for (var ae = "", Z = j + 1; Z < U.length;) {
                        var ne = U.charCodeAt(Z);
                        if (!(ne >= 48 && ne <= 57 || ne >= 65 && ne <= 90 || ne >= 97 && ne <= 122 || ne === 95)) break;
                        ae += U[Z++]
                    }
                    if (!ae) throw new TypeError("Missing parameter name at ".concat(j));
                    N.push({
                        type: "NAME",
                        index: j,
                        value: ae
                    }), j = Z
                } else N.push({
                    type: "CLOSE",
                    index: j,
                    value: U[j++]
                });
                else N.push({
                    type: "OPEN",
                    index: j,
                    value: U[j++]
                });
                else N.push({
                    type: "ESCAPED_CHAR",
                    index: j++,
                    value: U[j++]
                });
                else N.push({
                    type: "MODIFIER",
                    index: j,
                    value: U[j++]
                })
            }
            return N.push({
                type: "END",
                index: j,
                value: ""
            }), N
        }(n), r = e.prefixes, i = r === void 0 ? "./" : r, o = e.delimiter, s = o === void 0 ? "/#?" : o, a = [], l = 0, d = 0, c = "", h = function(U) {
            if (d < t.length && t[d].type === U) return t[d++].value
        }, f = function(U) {
            var N = h(U);
            if (N !== void 0) return N;
            var j = t[d],
                q = j.type,
                fe = j.index;
            throw new TypeError("Unexpected ".concat(q, " at ").concat(fe, ", expected ").concat(U))
        }, g = function() {
            for (var U, N = ""; U = h("CHAR") || h("ESCAPED_CHAR");) N += U;
            return N
        }, p = function(U) {
            var N = a[a.length - 1],
                j = U || (N && typeof N == "string" ? N : "");
            if (N && !j) throw new TypeError('Must have text between two parameters, missing text after "'.concat(N.name, '"'));
            return !j || function(q) {
                for (var fe = 0, K = s; fe < K.length; fe++) {
                    var ae = K[fe];
                    if (q.indexOf(ae) > -1) return !0
                }
                return !1
            }(j) ? "[^".concat(ms(s), "]+?") : "(?:(?!".concat(ms(j), ")[^").concat(ms(s), "])+?")
        }; d < t.length;) {
        var y = h("CHAR"),
            b = h("NAME"),
            E = h("PATTERN");
        if (b || E) {
            var S = y || "";
            i.indexOf(S) === -1 && (c += S, S = ""), c && (a.push(c), c = ""), a.push({
                name: b || l++,
                prefix: S,
                suffix: "",
                pattern: E || p(S),
                modifier: h("MODIFIER") || ""
            })
        } else {
            var _ = y || h("ESCAPED_CHAR");
            if (_) c += _;
            else if (c && (a.push(c), c = ""), h("OPEN")) {
                S = g();
                var I = h("NAME") || "",
                    x = h("PATTERN") || "",
                    L = g();
                f("CLOSE"), a.push({
                    name: I || (x ? l++ : ""),
                    pattern: I && !x ? p(S) : x,
                    prefix: S,
                    suffix: L,
                    modifier: h("MODIFIER") || ""
                })
            } else f("END")
        }
    }
    return a
}
u(pv, "kt");

function E8(n, e) {
    return function(t, r) {
        r === void 0 && (r = {});
        var i = sI(r),
            o = r.encode,
            s = o === void 0 ? function(c) {
                return c
            } : o,
            a = r.validate,
            l = a === void 0 || a,
            d = t.map(function(c) {
                if (typeof c == "object") return new RegExp("^(?:".concat(c.pattern, ")$"), i)
            });
        return function(c) {
            for (var h = "", f = 0; f < t.length; f++) {
                var g = t[f];
                if (typeof g != "string") {
                    var p = c ? c[g.name] : void 0,
                        y = g.modifier === "?" || g.modifier === "*",
                        b = g.modifier === "*" || g.modifier === "+";
                    if (Array.isArray(p)) {
                        if (!b) throw new TypeError('Expected "'.concat(g.name, '" to not repeat, but got an array'));
                        if (p.length === 0) {
                            if (y) continue;
                            throw new TypeError('Expected "'.concat(g.name, '" to not be empty'))
                        }
                        for (var E = 0; E < p.length; E++) {
                            var S = s(p[E], g);
                            if (l && !d[f].test(S)) throw new TypeError('Expected all "'.concat(g.name, '" to match "').concat(g.pattern, '", but got "').concat(S, '"'));
                            h += g.prefix + S + g.suffix
                        }
                    } else if (typeof p != "string" && typeof p != "number") {
                        if (!y) {
                            var _ = b ? "an array" : "a string";
                            throw new TypeError('Expected "'.concat(g.name, '" to be ').concat(_))
                        }
                    } else {
                        if (S = s(String(p), g), l && !d[f].test(S)) throw new TypeError('Expected "'.concat(g.name, '" to match "').concat(g.pattern, '", but got "').concat(S, '"'));
                        h += g.prefix + S + g.suffix
                    }
                } else h += g
            }
            return h
        }
    }(pv(n, e), e)
}
u(E8, "zt");

function ms(n) {
    return n.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1")
}
u(ms, "Ht");

function sI(n) {
    return n && n.sensitive ? "" : "i"
}
u(sI, "jt");

function _8(n, e, t) {
    return function(r, i, o) {
        o === void 0 && (o = {});
        for (var s = o.strict, a = s !== void 0 && s, l = o.start, d = l === void 0 || l, c = o.end, h = c === void 0 || c, f = o.encode, g = f === void 0 ? function(K) {
                return K
            } : f, p = o.delimiter, y = p === void 0 ? "/#?" : p, b = o.endsWith, E = "[".concat(ms(b === void 0 ? "" : b), "]|$"), S = "[".concat(ms(y), "]"), _ = d ? "^" : "", I = 0, x = r; I < x.length; I++) {
            var L = x[I];
            if (typeof L == "string") _ += ms(g(L));
            else {
                var U = ms(g(L.prefix)),
                    N = ms(g(L.suffix));
                if (L.pattern)
                    if (U || N)
                        if (L.modifier === "+" || L.modifier === "*") {
                            var j = L.modifier === "*" ? "?" : "";
                            _ += "(?:".concat(U, "((?:").concat(L.pattern, ")(?:").concat(N).concat(U, "(?:").concat(L.pattern, "))*)").concat(N, ")").concat(j)
                        } else _ += "(?:".concat(U, "(").concat(L.pattern, ")").concat(N, ")").concat(L.modifier);
                else {
                    if (L.modifier === "+" || L.modifier === "*") throw new TypeError('Can not repeat "'.concat(L.name, '" without a prefix and suffix'));
                    _ += "(".concat(L.pattern, ")").concat(L.modifier)
                } else _ += "(?:".concat(U).concat(N, ")").concat(L.modifier)
            }
        }
        if (h) a || (_ += "".concat(S, "?")), _ += o.endsWith ? "(?=".concat(E, ")") : "$";
        else {
            var q = r[r.length - 1],
                fe = typeof q == "string" ? S.indexOf(q[q.length - 1]) > -1 : q === void 0;
            a || (_ += "(?:".concat(S, "(?=").concat(E, "))?")), fe || (_ += "(?=".concat(S, "|").concat(E, ")"))
        }
        return new RegExp(_, sI(o))
    }(pv(n, t), 0, t)
}
u(_8, "qt");

function ek(n, e, t) {
    return n instanceof RegExp ? function(r) {
        return r
    }(n) : Array.isArray(n) ? function(r, i, o) {
        var s = r.map(function(a) {
            return ek(a, i, o).source
        });
        return new RegExp("(?:".concat(s.join("|"), ")"), sI(o))
    }(n, e, t) : _8(n, 0, t)
}
u(ek, "Gt");
var S8 = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : navigator;
        var e;
        return (e = n == null ? void 0 : n.userAgent) !== null && e !== void 0 ? e : ""
    }, "Wt"),
    By = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window,
            e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : globalThis;
        return n != null ? n : e
    }, "Kt"),
    $I = class $I {
        constructor(e, t) {
            this._groups = e, this._index = t - this._groups[0].length
        }
        get value() {
            return this._groups[0]
        }
        get index() {
            return this._index
        }
        get length() {
            return this._groups[0].length
        }
        get groups() {
            return this._groups
        }
    };
u($I, "Jt");
var MS = $I;

function xa(n, e) {
    let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
        r = [],
        i = new RegExp(e, "g" + (t ? "i" : "")),
        o = i.exec(n);
    for (; o;) r.push(new MS(o, i.lastIndex)), o = i.exec(n);
    return r
}
u(xa, "Yt");

function ol(n, e, t, r) {
    let i = xa(n, e, t),
        o = n,
        s = 0;
    for (let a = 0; a < i.length; a++) {
        let l = i[a],
            d = r(l);
        o = o.substr(0, l.index + s) + d + o.substr(s + l.index + l.length), s += d.length - l.length
    }
    return o
}
u(ol, "Xt");

function Oa(n) {
    return n && n.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
}
u(Oa, "Qt");
var cf = u((n, e, t) => {
        if (e.toLowerCase() === t.toLowerCase()) return n;
        let r = new RegExp(`^${Oa(e)}`, "i");
        return n.replace(r, t)
    }, "Zt"),
    lf = u((n, e) => `${n}${e}`, "en"),
    tk = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window;
        var e, t;
        return (t = (e = n == null ? void 0 : n.location) === null || e === void 0 ? void 0 : e.href) !== null && t !== void 0 ? t : ""
    }, "tn"),
    nk = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window;
        var e, t, r;
        return (r = (t = (e = n == null ? void 0 : n.location) === null || e === void 0 ? void 0 : e.protocol) === null || t === void 0 ? void 0 : t.replace(/:/g, "")) !== null && r !== void 0 ? r : ""
    }, "nn"),
    FS = u(n => n.replace(/([^:]\/)\/+/g, "$1"), "rn"),
    df = u(n => n.replace(/((outsystems|https|http):\/\/[^ ]*?)\?[^ ]*/g, "$1"), "sn"),
    I8 = Object.freeze({
        __proto__: null,
        buildURLFromVersionedResource: lf,
        getCurrentUrl: tk,
        getHttpScheme: nk,
        removeQueryParametersFromUrls: df,
        replaceBasePath: cf,
        sanitizeUrl: FS
    });

function aI(n) {
    return !!(n != null && n.OutSystemsNative)
}
u(aI, "on");
var lx = "Injector",
    uI = {},
    hs = {};

function rk(n, e) {
    try {
        z(lx, `Registering ${n} service`);
        let t = e();
        return uI[n] = t, n in hs && hs[n].forEach(r => r(n, t)), !0
    } catch (t) {
        return qe(lx, `Failed to initialize ${n} service: ${t}`), !1
    }
}
u(rk, "dn");

function hf(n) {
    return uI[n]
}
u(hf, "hn");
var de = {
        register: rk,
        unregister: u(function(n) {
            delete uI[n]
        }, "unregister"),
        resolve: hf,
        addRegistrationListener: u(function(n, e) {
            n in hs ? hs[n].push(e) : hs[n] = [e]
        }, "addRegistrationListener"),
        removeRegistrationListener: u(function(n, e) {
            n in hs && (hs[n] = hs[n].filter(t => t !== e))
        }, "removeRegistrationListener")
    },
    Y;
(function(n) {
    n.DeviceHelperClassProvider = "DeviceHelperClassProvider", n.ClientVariablesService = "ClientVariablesService", n.TranslationsService = "TranslationsService", n.LocaleService = "LocaleService", n.EntityService = "EntityService", n.GlobalExceptionHandler = "GlobalExceptionHandler", n.SettingsManager = "SettingsManager", n.AuthConfigsManager = "AuthConfigsManager", n.Auth = "Auth", n.HttpClient = "HttpClient", n.UnauthenticatedHttpClient = "UnauthenticatedHttpClient", n.DebuggerHttpClient = "DebuggerHttpClient", n.NonDebuggerHttpClient = "NonDebuggerHttpClient", n.LoggerHttpClient = "LoggerHttpClient", n.NativeStatus = "NativeStatus", n.LifecycleEventsManager = "LifecycleEventsManager", n.Debugger = "Debugger", n.InstrumentationFactory = "InstrumentationFactory"
})(Y || (Y = {}));
var K_ = "NativeStatus",
    VI = class VI {
        constructor() {
            let {
                win: e = window,
                isRunningOnNativeFn: t = on,
                deviceReadyPromise: r = lI
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            this.cachedReadyValue = null, this.win = e, this.isRunningOnNativeFn = t, this.deviceReadyPromise = r
        }
        raiseCordovaNotLoadedError() {
            let e = "Running on native but cordova wasn't loaded";
            throw xe(K_, e, "OS-CLRT-00000", void 0, Oe.External), new Error(e)
        }
        ensureIsReady() {
            return M(this, void 0, void 0, function*() {
                return this.cachedReadyValue === null ? (z(K_, "Waiting for 'deviceready' event"), this.isRunningOnNativeFn() ? this.win.cordova === void 0 ? (this.cachedReadyValue = !1, this.raiseCordovaNotLoadedError()) : (yield this.deviceReadyPromise(), this.cachedReadyValue = !0, !0) : (z(K_, "'deviceready' event wait ignored"), this.cachedReadyValue = !0, !0)) : !!this.cachedReadyValue || this.raiseCordovaNotLoadedError()
            })
        }
    };
u(VI, "mn");
var BS = VI,
    A8 = "Android",
    C8 = "iOS",
    on = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : navigator;
        return !(!n || !new RegExp("OutSystemsApp", "i").test(n.userAgent))
    }, "bn"),
    cI = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window;
        var e;
        return (e = n == null ? void 0 : n.device) === null || e === void 0 ? void 0 : e.platform
    }, "Tn"),
    ik = u(function(n) {
        let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : on,
            t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : window;
        return e() && cI(t) === n
    }, "wn"),
    ok = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : on,
            e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : window;
        return ik(A8, n, e)
    }, "En"),
    sk = u(function(n, e) {
        let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : document;
        return !!(t != null && t.addEventListener) && (t.addEventListener(n, e), !0)
    }, "In"),
    lI = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document;
        return new Promise((e, t) => {
            sk("deviceready", () => e(), n) || e()
        })
    }, "An"),
    Rr = u(() => {
        let n = de.resolve(Y.NativeStatus);
        return n || (de.register(Y.NativeStatus, () => new BS), n = de.resolve(Y.NativeStatus)), n.ensureIsReady()
    }, "Nn"),
    ak = u(function(n, e) {
        for (var t = arguments.length, r = new Array(t > 2 ? t - 2 : 0), i = 2; i < t; i++) r[i - 2] = arguments[i];
        return M(void 0, [n, e, ...r], void 0, function(o, s) {
            let a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Rr,
                l = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : sk;
            return function*() {
                yield a(), l(o, s)
            }()
        })
    }, "Sn"),
    uk = u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ok,
            e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : navigator;
        return !!n() && (e.app.exitApp(), !0)
    }, "Dn"),
    ck = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Rr,
                i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : R8;
            return function*() {
                var o, s;
                try {
                    yield r();
                    let a = i();
                    return (s = (o = a == null ? void 0 : a.OutSystemsNative) === null || o === void 0 ? void 0 : o.OTLogger) !== null && s !== void 0 ? s : null
                } catch (a) {
                    return console.error("Native is not ready", a), null
                }
            }()
        })
    }, "Rn"),
    R8 = u(() => window, "Cn"),
    O8 = Object.freeze({
        __proto__: null,
        addNativeEventListener: ak,
        ensureNativeReady: Rr,
        exitApp: uk,
        getNativeOTLogger: ck,
        getPlatformName: cI,
        isAndroid: ok,
        isIOS: u(function() {
            let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : on,
                e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : window;
            return ik(C8, n, e)
        }, "isIOS"),
        isRunningOnNative: on,
        whenDeviceReady: lI
    }),
    D8 = u(n => M(void 0, [n], void 0, function(e) {
        let {
            url: t,
            redirectUri: r,
            w: i,
            awaitNative: o
        } = e;
        return function*() {
            var s;
            let a = yield(l => M(void 0, [l], void 0, function(d) {
                let {
                    w: c = window,
                    awaitNative: h = Rr
                } = d;
                return function*() {
                    if (yield h(), aI(c) && c.OutSystemsNative.Auth) return c.OutSystemsNative.Auth;
                    throw new Error("Could not find the OSAuth plugin.")
                }()
            }))({
                w: i,
                awaitNative: o
            });
            try {
                return yield a.startFlow(t, r)
            } catch (l) {
                throw xe("NativeAuthPlugin", (s = l.message) !== null && s !== void 0 ? s : "Error starting the external auth flow", "OS-CLRT-40100", l instanceof Error ? l : void 0), new Error("Error starting the external auth flow")
            }
        }()
    }), "Ln"),
    ff = "Navigation",
    N8 = new RegExp("/([^/]*)"),
    L8 = new RegExp(/\/(\/)+/gm),
    x8 = 10,
    P8 = 1e3,
    k8 = ["localhost", "10.0.2.2"],
    lk = "POP",
    sh = [],
    Pa = [],
    vh = new class {
        constructor() {
            this.stack = [], this.map = {}, this.counter = 0
        }
        push(n) {
            let e = this.counter++;
            return this.stack.push(e), this.map[e] = n, e
        }
        remove(n) {
            let e = this.stack.indexOf(n),
                t = e > -1;
            return t && (this.stack.splice(e, 1), delete this.map[n]), t
        }
        pop() {
            if (this.stack.length === 0) throw new Error("IndexedStack: pop from empty stack.");
            let n = this.stack.pop(),
                e = this.map[n];
            return delete this.map[n], e
        }
        clear() {
            this.stack = [], this.map = {}
        }
        get isEmpty() {
            return this.stack.length === 0
        }
    },
    jS;

function jy(n) {
    if (!dI(n)) throw new Q.OutOfContextException
}
u(jy, "Hn");

function dI(n) {
    return !n || !n.isOutOfContext
}
u(dI, "jn");

function $y(n) {
    if (n) throw new Q.RedirectOccurredException
}
u($y, "qn");

function dk(n) {
    Pa.push(n)
}
u(dk, "Gn");

function ka() {
    return Pa[Pa.length - 1]
}
u(ka, "Wn");

function hk() {
    return Pa.pop()
}
u(hk, "Kn");
var lc = !1,
    $S = !1;

function fk() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
    z(ff, "Next navigation will force a reload..."), lc = !0, $S = n
}
u(fk, "Xn");
var Vy = u(() => {
        let {
            protocol: n,
            pathname: e,
            href: t,
            search: r
        } = window.location;
        return {
            protocol: n,
            pathname: e,
            href: t,
            search: r,
            hostname: window.location.hostname || window.location.host.split(":")[0]
        }
    }, "Qn"),
    gk = u(n => n === void 0 ? null : Sk(window.location.search.substr(1))[n], "Zn"),
    pk = u(function(n) {
        let {
            getLocation: e = Vy,
            getBasePath: t = jt
        } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        if (!(n.protocol === "http:" || n.protocol === "https:" || n.protocol === "outsystems:")) return !1;
        let r = e().hostname;
        if (r !== (n.hostname !== "" ? n.hostname : r)) return !1;
        let i = N8.exec(n.pathname);
        return !i || i.length < 2 ? !1 : new RegExp(`^${Oa(t())}`, "i").test(`${n.pathname}/`)
    }, "er"),
    mk = u(function(n) {
        let e = document.createElement("a");
        return e.href = n, e
    }, "tr"),
    vk = !1;

function hI() {
    return vk
}
u(hI, "rr");
var Uo = u(function(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1,
        t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
        r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : By();
    e && (n = bk(n));
    let i = df(n);
    z(ff, `Reloading application with url: '${i}' (replace = ${t})`);
    let o = u(() => {
        t ? r.location.replace(n) : r.location.href = n
    }, "s");
    return vk = !0, Xk().then(o).catch(o)
}, "ir");

function yk() {
    return typeof window != "undefined" && window.location.search.indexOf("_ts") >= 0
}
u(yk, "sr");

function bk(n) {
    let e = `${n.indexOf("?")<0?"?":"&"}_ts=${new Date().valueOf()}`,
        t = n.indexOf("#");
    return t >= 0 ? [n.slice(0, t), e, n.slice(t)].join("") : `${n}${e}`
}
u(bk, "ar");

function fI() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1,
        e = Es();
    Uo(e, n)
}
u(fI, "or");

function wk() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
    Uo(Vy().href, n, !0)
}
u(wk, "lr");

function Tk(n) {
    return vh.push(n)
}
u(Tk, "ur");

function Ek(n) {
    vh.remove(n)
}
u(Ek, "cr");

function _k(n) {
    jS = n
}
u(_k, "dr");
var VS = u(function(n) {
    let e, t = !1,
        r = "",
        i = n,
        o = n.indexOf(":") !== -1 || n.indexOf("/") === 0,
        s = i.indexOf("#");
    s !== -1 && (e = i.substr(s + 1).trim(), i = i.substr(0, s));
    let a = i.indexOf("?");
    if (a !== -1 && (r = i.substr(a + 1).trim(), i = i.substr(0, a)), o) {
        let l = mk(i);
        t = pk(l), t && (i = l.pathname)
    } else i = function(l) {
        return Es(jt(), l)
    }(i), t = !0;
    return {
        url: n,
        isInternal: t,
        path: i,
        queryParams: Sk(r),
        hash: e
    }
}, "hr");

function Sk(n) {
    let e = {};
    return n.length > 0 && n.split("&").forEach(t => {
        let r = t.split("=");
        if (r.length === 2) {
            let i = dx(r[0]),
                o = dx(r[1]);
            e[i] = o
        }
    }), e
}
u(Sk, "gr");

function dx(n) {
    return decodeURIComponent(n.replace(/\+/g, " "))
}
u(dx, "pr");

function J_(n, e, t) {
    return e.replace(/\/$/, "") === n || t.screens.some(r => ek(Es(e, r.screenUrl)).test(n))
}
u(J_, "fr");

function gI() {
    sf() && window.stop && document.readyState === "complete" && (z(ff, "Stopping all currently pending resources."), window.stop())
}
u(gI, "mr");

function mv(n, e) {
    let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null,
        r = arguments.length > 3 ? arguments[3] : void 0,
        i = arguments.length > 4 ? arguments[4] : void 0;
    if (jy(t), function(s) {
            let a = new Date().getTime(),
                l = a - P8;
            for (; sh.length > 0 && sh[0].timestamp < l;) sh.shift();
            if (sh.reduce(function(d, c) {
                    return c.url === s ? d + 1 : d
                }, 0) < x8) return sh.push({
                timestamp: a,
                url: s
            }), !1; {
                let d = df(s);
                return hr(ff, `Identified a recursive navigation to '${d}'.`, Oe.Internal), !0
            }
        }(n)) throw Error("Too many redirects.");
    r || gI();
    let o = VS(n);
    if (Pa && ka().goTo && o.isInternal) ka().goTo(o, e, i);
    else {
        if (on() && Gk({
                url: n
            })) return function(s) {
            return M(this, void 0, void 0, function*() {
                var a, l, d;
                let c = (a = s.queryParams.redirect_uri) !== null && a !== void 0 ? a : s.queryParams.post_logout_redirect_uri;
                if (!c) throw new Error("Can't perform an external login without a redirect URI");
                let h = yield D8({
                    url: s.url,
                    redirectUri: c
                }), [f] = c.split("?"), g = jt(), p = (d = (l = f.match(new RegExp(`${g}.*`))) === null || l === void 0 ? void 0 : l[0]) !== null && d !== void 0 ? d : "";
                Uo(h ? `${p}?${h}` : p)
            })
        }(o);
        Uo(n)
    }
    $y(r)
}
u(mv, "vr");

function Ik(n, e, t) {
    jy(e), t || gI(), Pa && ka().goBack ? ka().goBack(n) : window.history.back(), $y(t)
}
u(Ik, "yr");

function Ak(n, e, t) {
    jy(e), t || gI(), Pa && ka().goForward ? ka().goForward(n) : window.history.forward(), $y(t)
}
u(Ak, "br");

function Ck(n, e, t) {
    return t + n.substring(e.length)
}
u(Ck, "Tr");

function Rk() {
    let n = Vy();
    if (n.protocol.toLocaleLowerCase() === "http:") {
        let e = n.hostname.toLocaleLowerCase();
        if (!k8.includes(e)) {
            let t = Ck(n.href, n.protocol, "https:");
            return Uo(t, !1, !0), !0
        }
        console.warn(ff, `Accessing through http://${e} is not supported. Please access the application using the hostname instead.`)
    }
    return !1
}
u(Rk, "wr");

function hx(n) {
    return n.action.toUpperCase() === lk
}
u(hx, "Er");

function fx(n) {
    return n === "" || n == null
}
u(fx, "Ir");

function Es() {
    for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
    return (e.length === 0 ? jt() : "/" + e.join("/")).replace(L8, "/")
}
u(Es, "Ar");
var sl;
(function(n) {
    let e = u(t => t, "t");
    n.setUrlVersionProvider = function(t) {
        e = t
    }, n.getVersionedUrl = function(t) {
        return e(t)
    }
})(sl || (sl = {}));
var U8 = Object.freeze({
    __proto__: null,
    NAVIGATE_FROM_HISTORY_ACTION: lk,
    NAVIGATE_TO_URL_ACTION: "PUSH",
    SCREEN_URL_PART_SEPARATOR: "-",
    get VersionedURL() {
        return sl
    },
    addInvalidationSuffixToUrl: bk,
    buildApplicationRelativeUrl: Es,
    changeWindowLocation: Uo,
    currentLocationHasTimestamp: yk,
    ensureRequestSecurity: Rk,
    forceReloadOnNextNavigation: fk,
    generateScreenURL: u(function(n, e, t) {
        let r, i = n,
            o = n;
        return typeof e == "string" ? (o = e, r = function(s, a, l) {
            let d = function(g, p) {
                    let y = pv(p);
                    return Object.keys(g).filter(b => !y.some(E => typeof E != "string" && E.name === b)).reduce((b, E) => (b[E] = g[E], b), {})
                }(l != null ? l : {}, a),
                c = (h = l != null ? l : {}, f = d, Object.keys(h).filter(g => h[g] !== "" && !(g in f)).reduce((g, p) => (g[p] = h[p], g), {}));
            var h, f;
            return function(g, p) {
                    let y = pv(p),
                        b = y.filter(_ => typeof _ != "string" && _.modifier === "?").map(_ => {
                            var I;
                            return {
                                name: _.name,
                                value: (I = g[_.name]) !== null && I !== void 0 ? I : ""
                            }
                        }),
                        E, S = !1;
                    b.forEach(_ => {
                        if (S && !fx(_.value)) throw new Error(`Error processing optional parameters on path ${p}. The parameter ${E.name} has an empty value while ${_.name} has a non-empty value. All optional parameters before ${_.name} must have a value when ${_.name} has a value.`);
                        fx(_.value) && (E = _, S = !0)
                    })
                }(c, a),
                function(g, p, y, b) {
                    let E = Object.keys(b).map(S => `${encodeURIComponent(S)}=${encodeURIComponent(b[S])}`).join("&");
                    try {
                        let S = E8(p, {
                            encode: u(_ => encodeURIComponent(_), "encode"),
                            validate: !1
                        })(y);
                        return function(_, I) {
                            let x = jt(),
                                L = I.replace(/^\//, ""),
                                U = Qn();
                            return _ === U ? `${x}${L}` : `/${_}/${L}`
                        }(g, `${S}${E.length>0?`?${E}`:""}`)
                    } catch (S) {
                        let _ = new RegExp('^Expected "(.*)" to be a string$', "g").exec(S.message);
                        if (_) {
                            let I = _[1];
                            return void al({
                                category: g,
                                errorCode: "OS-CLRT-00000",
                                clientMessage: `Error building URL for ${p}. Parameter ${I} is missing or has an empty value`,
                                internalMessage: `Error building URL: parameter ${I} is missing or has an empty value`,
                                errorObj: S instanceof Error ? S : void 0
                            })
                        }
                        throw S
                    }
                }(s, a, c, d)
        }(i, o, t)) : (i = "", r = function(s, a) {
            let l = Object.keys(a).map(c => `${encodeURIComponent(c)}=${encodeURIComponent(a[c])}`).join("&");
            return `${s}${l.length>0?`?${l}`:""}`
        }(o, t = e)), r
    }, "generateScreenURL"),
    getCurrentLocation: Vy,
    getLocationFromUrl: mk,
    getNavigationCallbacks: ka,
    getSearchParameterValue: gk,
    getUrlInfo: VS,
    hasPendingReload: hI,
    isValidContext: dI,
    locationReachedFromHistory: hx,
    navigateBack: Ik,
    navigateForward: Ak,
    navigateTo: mv,
    onBeforeNavigate: u(function(n, e) {
        if (! function(i) {
                var o;
                if (i && jS) try {
                    return (o = jS(i, u((a, l, d) => mv(a, Uy(l, of ), null, !1, d), "n"))) !== null && o !== void 0 && o
                } catch (s) {
                    let a = "Error while executing navigation callback";
                    return al({
                        category: Qn(),
                        errorCode: "OS-CLRT-00000",
                        clientMessage: a,
                        internalMessage: a,
                        errorObj: s instanceof Error ? s : void 0
                    }), !1
                }
                return !0
            }(n.pathname + n.search)) return !1;
        let t = lc;
        if (lc && (lc = !1), e && !vh.isEmpty) return QP(vh.pop(), i => {
            xe(Qn(), "Error while navigating back without an empty stack", "OS-CLRT-00000", i)
        }), !1;
        let r = hx(n);
        if (r || t) {
            let i = VS(n.pathname),
                o = pP(),
                s = jt(),
                a;
            if (i.isInternal) {
                a = !0;
                for (let l in o)
                    if (o.hasOwnProperty(l)) {
                        let d = i.url.replace(/\/$/, ""),
                            c = o[l];
                        if (J_(d, Es(s), c) || c.moduleName !== Qn() && c.moduleName && J_(d, c.moduleName, c)) {
                            a = !1;
                            break
                        }
                    }
            } else a = !1;
            if (t || a) {
                let l;
                if (a) l = Es();
                else {
                    let d = n.search || "";
                    l = s === n.pathname && d === "" ? /\/$/.test(n.pathname) ? n.pathname : `${n.pathname}/` : n.pathname + d
                }
                return Uo(l, $S, r), !a
            }
        }
        return vh.clear(), !0
    }, "onBeforeNavigate"),
    registerBackNavigationHandler: Tk,
    registerNavigationHandler: _k,
    reloadApplication: fI,
    reloadCurrentLocation: wk,
    removeNavigationCallbacks: hk,
    resetReloadState: u(function() {
        let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1,
            e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
        lc = n, $S = e
    }, "resetReloadState"),
    setNavigationCallbacks: dk,
    switchUrlProtocol: Ck,
    throwRedirectOccurredExceptionIfNeeded: $y,
    unregisterBackNavigationHandler: Ek,
    urlBelongsToCurrentApplication: pk,
    urlBelongsToPrefix: J_,
    validateContext: jy,
    willReloadInNextNavigation: u(function() {
        return lc
    }, "willReloadInNextNavigation")
});

function Ok() {
    var n;
    let e = window;
    if (!((n = e == null ? void 0 : e.OutSystemsNative) === null || n === void 0) && n.ApplicationInfo) return e.OutSystemsNative.ApplicationInfo
}
u(Ok, "Dr");
var mt = "Authentication",
    Dk = "_RedirectLogin",
    Nk = "_RedirectLogout",
    Lk = u(n => M(void 0, [n], void 0, function(e) {
        let {
            path: t,
            params: r = {
                isRunningOnNative: on,
                getAppUrl: Q1,
                getHost: u(() => {
                    var i;
                    return (i = window == null ? void 0 : window.location) === null || i === void 0 ? void 0 : i.host
                }, "getHost"),
                getPlatform: u(() => cI(), "getPlatform"),
                getPackageId: u(() => M(void 0, void 0, void 0, function*() {
                    return (yield function() {
                        for (var i = arguments.length, o = new Array(i), s = 0; s < i; s++) o[s] = arguments[s];
                        return M(void 0, [...o], void 0, function() {
                            let {
                                nativeReady: a = Rr,
                                nativeApplicationInfo: l = Ok
                            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                            return function*() {
                                return yield a(), new Promise((d, c) => {
                                    let h = l();
                                    return h ? h.getAppPackageIdentifier(d, c) : c(new Error("NativeAppInfo API is not available"))
                                })
                            }()
                        })
                    }()).toLowerCase()
                }), "getPackageId"),
                getBasePath: jt
            }
        } = e;
        return function*() {
            var i, o, s, a, l;
            if (r.isRunningOnNative()) {
                let d = yield(i = r.getPackageId) === null || i === void 0 ? void 0 : i.call(r), c = (o = r.getHost) === null || o === void 0 ? void 0 : o.call(r), h = (s = r.getPlatform) === null || s === void 0 ? void 0 : s.call(r), f = (a = r.getBasePath) === null || a === void 0 ? void 0 : a.call(r);
                if (!d) throw new Error("Could not get the package id");
                if (!c) throw new Error("Could not get host name");
                if (!h) throw new Error("Could not get the platform");
                if (!f) throw new Error("Could not get the base path");
                return FS(`${d}://${c}/${h}/${f}/${t}`)
            } {
                let d = (l = r.getAppUrl) === null || l === void 0 ? void 0 : l.call(r);
                if (!d) throw new Error("Could not get the application url");
                return FS(`${d}/${t}`)
            }
        }()
    }), "Lr"),
    pI = u(n => M(void 0, void 0, void 0, function*() {
        return Lk({
            path: Dk,
            params: n
        })
    }), "Or"),
    xk = u(n => M(void 0, void 0, void 0, function*() {
        return Lk({
            path: Nk,
            params: n
        })
    }), "_r"),
    Pk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            callbackUrl: t = "",
            redirectUrlParams: r,
            redirectUri: i = pI(r),
            authConfigs: o,
            auth: s = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.External, o),
            actionName: a = "getExternalLoginUrl"
        } = n === void 0 ? {} : n;
        try {
            if (z(mt, "Retrieving the external login url."), !s) throw mn(a);
            let l = xh(a, s),
                d = yield i;
            return l.getLoginUrl({
                redirectUri: d,
                callbackUrl: t
            })
        } catch (l) {
            throw xe(mt, "Error retrieving the external login url.", "OS-CLRT-40100", l), l
        }
    }), "Mr"),
    kk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            callbackUrl: t = "",
            redirectUrlParams: r,
            redirectUri: i = pI(r),
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.External),
            actionName: s = "externalLogin"
        } = n === void 0 ? {} : n;
        try {
            if (z(mt, "External login flow started."), !o) throw mn(s);
            let a = xh(s, o),
                l = yield i;
            yield a.login({
                redirectUri: l,
                callbackUrl: t,
                navigationHandler: mv
            })
        } catch (a) {
            throw xe(mt, "Error in the external login flow.", "OS-CLRT-40100", a), new Q.InvalidLoginException("Login Failed", ko(a))
        }
    }), "Ur"),
    Uk = u(n => M(void 0, void 0, void 0, function*() {
        var e, t, {
            username: r,
            password: i,
            persistLogin: o,
            auth: s = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: a = "builtinLogin"
        } = n;
        try {
            if (z(mt, "Builtin login flow started."), !s) throw mn(a);
            return yield qi(a, s).login({
                username: r,
                password: i,
                persistLogin: o
            })
        } catch (l) {
            throw xe(mt, "Error in the builtin login flow.", (t = l.errorCode) !== null && t !== void 0 ? t : "OS-CLRT-40100", l), l
        }
    }), "Fr"),
    Mk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            callbackUrl: t = "",
            redirectUrlParams: r,
            redirectUri: i = xk(r),
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(),
            actionName: s = "logout"
        } = n === void 0 ? {} : n;
        try {
            if (z(mt, "Logout flow started."), !o) throw mn(s);
            let a = yield i;
            yield qi(s, o, "Use GetExternalLogoutURL instead.").logout({
                redirectUri: a
            })
        } catch (a) {
            throw xe(mt, "Error in the logout flow.", "OS-CLRT-40100", a), a
        }
    }), "$r"),
    Fk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            callbackUrl: t = "",
            redirectUrlParams: r,
            redirectUri: i = xk(r),
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.External),
            actionName: s = "getExternalLogoutUrl"
        } = n === void 0 ? {} : n;
        try {
            if (z(mt, "Retrieving the external logout url."), !o) throw mn(s);
            let a = yield i;
            return yield xh(s, o).getLogoutUrl({
                redirectUri: a,
                callbackUrl: t
            })
        } catch (a) {
            throw xe(mt, "Error retrieving the external logout url.", "OS-CLRT-40100", a), a
        }
    }), "Pr"),
    Bk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            auth: t = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance()
        } = n === void 0 ? {} : n;
        try {
            if (z(mt, "Refresh flow started."), !t) throw mn("refreshTokens");
            yield t.refreshTokens()
        } catch (r) {
            throw xe(mt, "Error in the refresh flow.", "OS-CLRT-40103", r), r
        }
    }), "Vr"),
    Da = u(n => {
        var e, t, {
            auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance()
        } = n === void 0 ? {} : n;
        return (t = r == null ? void 0 : r.getUserId()) !== null && t !== void 0 ? t : ""
    }, "Br"),
    jk = u(n => {
        var e, t, {
            auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance()
        } = n === void 0 ? {} : n;
        return (t = r == null ? void 0 : r.isAuthenticated()) !== null && t !== void 0 && t
    }, "kr"),
    $k = u(n => {
        var e, {
            auth: t = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: r = "getPasswordComplexityPolicy"
        } = n === void 0 ? {} : n;
        try {
            if (!t) throw mn(r);
            return qi(r, t).getPasswordComplexityPolicy()
        } catch (i) {
            throw xe(mt, "Error getting the password complexity policy", "OS-CLRT-40100", i), i
        }
    }, "zr"),
    Vk = u(n => {
        var e, {
            password: t,
            auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: i = "validatePasswordComplexity"
        } = n;
        try {
            if (!r) throw mn("validatePasswordComplexity");
            return qi(i, r).validatePasswordComplexityPolicy(t)
        } catch (o) {
            throw xe(mt, "Error validating the password complexity", "OS-CLRT-40100", o), o
        }
    }, "Hr"),
    Hk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            username: t,
            resetToken: r,
            newPassword: i,
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: s = "finishResetPassword"
        } = n;
        try {
            if (!o) throw mn(s);
            return yield qi(s, o).finishResetPassword({
                username: t,
                resetToken: r,
                newPassword: i
            })
        } catch (a) {
            throw xe(mt, "Error finishing reset password", "OS-CLRT-40100", a), a
        }
    }), "jr"),
    zk = u(n => {
        var e, {
            auth: t = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(),
            actionName: r = "isExternalUser"
        } = n === void 0 ? {} : n;
        try {
            if (!t) throw mn(r);
            return t.isExternalUser()
        } catch (i) {
            throw xe(mt, "Error determining if user is external", "OS-CLRT-40100", i), i
        }
    }, "qr"),
    Wk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            username: t,
            password: r,
            temporaryPassword: i,
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: s = "finishUserRegistration"
        } = n;
        try {
            if (!o) throw mn(s);
            return yield qi(s, o).confirmRegistration({
                username: t,
                password: r,
                code: i
            })
        } catch (a) {
            throw xe(mt, "Error completing user registration", "OS-CLRT-40100", a), a
        }
    }), "Gr"),
    qk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            username: t,
            oldPassword: r,
            newPassword: i,
            auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
            actionName: s = "changePassword"
        } = n;
        try {
            if (!o) throw mn("changePassword");
            return yield qi(s, o).changePassword({
                username: t,
                oldPassword: r,
                newPassword: i
            })
        } catch (a) {
            throw xe(mt, "Error changing password", "OS-CLRT-40100", a), a
        }
    }), "Wr"),
    mI = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            auth: t = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(),
            actionName: r = "getUserProfile"
        } = n === void 0 ? {} : n;
        try {
            if (!t) throw mn(r);
            return yield t.getUserInfo()
        } catch (i) {
            throw xe(mt, "Error getting user profile", "OS-CLRT-40100", i), i
        }
    }), "Kr"),
    Gk = u(n => {
        var e, t, {
            url: r,
            auth: i = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(),
            actionName: o = "isAuthEndpoint"
        } = n;
        try {
            return (t = i == null ? void 0 : i.isAuthEndpoint(r)) !== null && t !== void 0 && t
        } catch (s) {
            throw xe(mt, "Error checking if a url corresponds to an auth endpoint", "OS-CLRT-40100", s), s
        }
    }, "Jr"),
    mn = u(n => {
        let e = `Error '${n}': User is not authenticated.`,
            t = new Error(e);
        return xe(mt, e, "OS-CLRT-40100", t, Oe.External), t
    }, "Yr"),
    xh = u((n, e, t) => {
        if (!(r => r.resumeLogin !== void 0)(e)) {
            let r = `Error '${n}': only supported for external authentication. ${t}`,
                i = new Error(r);
            throw xe(mt, r, "OS-CLRT-40100", i, Oe.External), i
        }
        return e
    }, "Xr"),
    qi = u((n, e, t) => {
        if (!(r => r.finishResetPassword !== void 0)(e)) {
            let r = `Error '${n}': only supported for builtin authentication. ${t}`,
                i = new Error(r);
            throw xe(mt, r, "OS-CLRT-40100", i, Oe.External), i
        }
        return e
    }, "Qr"),
    HS, M8 = Object.freeze({
        __proto__: null,
        LOGIN_REDIRECT_PATH: Dk,
        LOGOUT_REDIRECT_PATH: Nk,
        builtinLogin: Uk,
        changePassword: qk,
        externalLogin: kk,
        finishResetPassword: Hk,
        finishUserRegistration: Wk,
        getExternalLoginUrl: Pk,
        getExternalLogoutUrl: Fk,
        getPasswordComplexityPolicy: $k,
        getUserId: Da,
        getUserProfile: mI,
        isAuthEndpoint: Gk,
        isAuthenticated: jk,
        isExternalUser: zk,
        logout: Mk,
        refreshTokens: Bk,
        resetPassword: u(n => M(void 0, void 0, void 0, function*() {
            var e, {
                username: t,
                resetToken: r,
                newPassword: i,
                auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
                actionName: s = "resetPassword"
            } = n;
            try {
                if (!o) throw mn(s);
                return yield qi(s, o).resetPassword({
                    username: t,
                    resetToken: r,
                    newPassword: i
                })
            } catch (a) {
                throw xe(mt, "Error resetting password", "OS-CLRT-40100", a), a
            }
        }), "resetPassword"),
        resumeLogin: u(n => M(void 0, void 0, void 0, function*() {
            var e, {
                url: t,
                redirectUrlParams: r,
                redirectUri: i = pI(r),
                auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.External),
                actionName: s = "resumeLogin"
            } = n;
            try {
                if (z(mt, "Login flow resumed."), !o) throw mn(s);
                let a = yield i;
                return yield xh(s, o).resumeLogin({
                    url: t,
                    redirectUri: a
                })
            } catch (a) {
                throw xe(mt, "Error while resuming login.", "OS-CLRT-40100", a), new Q.InvalidLoginException("Login Failed", ko(a))
            }
        }), "resumeLogin"),
        resumeLogout: u(n => M(void 0, void 0, void 0, function*() {
            var e, {
                url: t,
                auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.External),
                actionName: i = "resumeLogout"
            } = n;
            try {
                if (z(mt, "Logout flow resumed."), !r) throw mn("resumeLogout");
                return yield xh(i, r).resumeLogout({
                    url: t
                })
            } catch (o) {
                throw xe(mt, "Error while resuming logout.", "OS-CLRT-40100", o), new Q.InvalidLoginException("Logout Failed", ko(o))
            }
        }), "resumeLogout"),
        sendResetPasswordEmail: u(n => M(void 0, void 0, void 0, function*() {
            var e, {
                username: t,
                auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
                actionName: i = "sendResetPasswordEmail"
            } = n;
            try {
                if (!r) throw mn(i);
                return yield qi(i, r).sendResetPasswordEmail({
                    username: t
                })
            } catch (o) {
                throw xe(mt, "Error sending reset password email", "OS-CLRT-40100", o), o
            }
        }), "sendResetPasswordEmail"),
        updateUser: u(n => M(void 0, void 0, void 0, function*() {
            var e, {
                username: t,
                name: r,
                pictureUrl: i,
                auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance(tn.Builtin),
                actionName: s = "updateUser"
            } = n;
            try {
                if (!o) throw mn(s);
                return yield qi(s, o).updateUser({
                    username: t,
                    name: r,
                    pictureUrl: i
                })
            } catch (a) {
                throw xe(mt, "Error updating user", "OS-CLRT-40100", a), a
            }
        }), "updateUser"),
        validatePasswordComplexity: Vk
    });

function Kk() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : By;
    var e;
    let t = n();
    return t != null && t.cordova && (!((e = t == null ? void 0 : t.navigator) === null || e === void 0) && e.connection) ? t.navigator.connection.type !== "none" : t.navigator.onLine
}
u(Kk, "ti");

function F8(n) {
    (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : window).addEventListener("online", n)
}
u(F8, "ni");
(function(n) {
    n.AuthNConfigs = "AuthNConfigs", n.ForceXhrCommunication = "ForceXhrCommunication", n.CanDisableAutoUpgrade = "CanDisableAutoUpgrade", n.LogLevel = "LogLevel", n.EnvironmentKey = "EnvironmentKey", n.TenantID = "TenantID", n.LoggerApiKey = "LoggerApiKey", n.LoggingTagID = "LoggingTagID", n.LoggerSchedulerTimeInterval = "LoggerSchedulerTimeInterval", n.EnableOpenTelemetryTraces = "EnableOpenTelemetryTraces", n.EnableSpanAggregation = "EnableSpanAggregation", n.HealthCheckInterval = "HealthCheckInterval"
})(HS || (HS = {}));
var Jk = {
        HealthCheckInterval: "1800",
        LogLevel: "Information"
    },
    dh = "os_default_id",
    gx = "DEV_";

function Z_(n, e) {
    let t = function(r) {
        return Object.entries(r).reduce((i, o) => {
            let [s, a] = o;
            return s.startsWith(gx) && typeof a == "string" && (i[s.replace(gx, "")] = a), i
        }, {})
    }(e);
    return Object.assign(Object.assign({}, n), t)
}
u(Z_, "ai");
var Jm, va = "SettingsManager",
    B8 = !1,
    Zk = {
        Debug: ot.Debug,
        Information: ot.Info,
        Warning: ot.Warning,
        Error: ot.Error
    },
    HI = class HI {
        constructor() {
            let {
                getBasePath: e,
                httpClient: t = de.resolve(Y.UnauthenticatedHttpClient),
                getAppKey: r = Is,
                initialSettings: i = Jk,
                settingsHash: o = "",
                overrideStorage: s = sessionStorage,
                cacheName: a = `${r()}-clientsettings`,
                cacheStorage: l = localStorage,
                onSettingsUpdated: d
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            Jm.set(this, void 0), this.getBasePath = e != null ? e : () => jt(), this.httpClient = t, this.settingsValue = Z_(i, s), this.settingsHash = o, this.overrideStorage = s, this.cacheName = a, this.cacheStorage = l, dP(this, Jm, d, "f")
        }
        update(e) {
            return M(this, void 0, void 0, function*() {
                var t, r;
                try {
                    if (!e || this.settingsHash !== e) {
                        let i = yield this.httpClient.get({
                            url: "/moduleservices/clientsettingsinfo",
                            baseURL: (t = this.getBasePath) === null || t === void 0 ? void 0 : t.call(this)
                        });
                        if (i) {
                            let {
                                clientSettingsHash: o,
                                clientSettings: s
                            } = i;
                            this.settingsHash = o;
                            let a = Z_(s, this.overrideStorage);
                            this.settingsValue = Object.assign(Object.assign({}, this.settingsValue), a), this.cacheSettings(s), (r = Ts(this, Jm, "f")) === null || r === void 0 || r.call(this, this)
                        } else this.fetchCachedSettings()
                    }
                } catch (i) {
                    xe(va, `Error retrieving settings from endpoint: ${i.message}`, "OS-CLRT-61001"), this.fetchCachedSettings()
                }
            })
        }
        settingExists(e) {
            return Object.keys(this.settingsValue).includes(e)
        }
        cacheSettings(e) {
            this.cacheStorage.setItem(this.cacheName, JSON.stringify(e))
        }
        fetchCachedSettings() {
            try {
                let e = this.cacheStorage.getItem(this.cacheName);
                if (e) {
                    z(va, "Loading client settings from cache");
                    let t = Z_(JSON.parse(e), this.overrideStorage);
                    this.settingsValue = Object.assign(Object.assign({}, this.settingsValue), t)
                } else qe(va, "No settings stored in cache, keeping previous values")
            } catch (e) {
                xe(va, "Error retrieving settings from cache, keeping previous values", "OS-CLRT-61000", e)
            }
        }
        readString(e) {
            var t;
            return this.settingExists(e) ? (t = this.settingsValue[e]) !== null && t !== void 0 ? t : "" : (z(va, `Value for setting ${e} was not found.`), "")
        }
        readNumber(e) {
            var t;
            return this.settingExists(e) ? (t = Number(this.settingsValue[e])) !== null && t !== void 0 ? t : 0 : (z(va, `Value for setting ${e} was not found.`), 0)
        }
        readBool(e) {
            var t;
            return this.settingExists(e) ? ((t = this.settingsValue[e]) !== null && t !== void 0 ? t : "false").toLowerCase() === "true" : (z(va, `Value for setting ${e} was not found.`), B8)
        }
        readLogLevel() {
            let e = this.settingsValue.LogLevel,
                t = Zk[e];
            return t != null ? t : ot.Info
        }
    };
u(HI, "di");
var zS = HI;
Jm = new WeakMap;
var vI = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let {
                isRunningOnNative: r = on(),
                basePath: i = jt,
                frontendBuildWorkerVersion: o = DP,
                getUserId: s = Da,
                getLibVersion: a = FP,
                getHttpScheme: l = nk,
                getUserAgent: d = S8,
                getCurrentUrl: c = tk,
                getNativeLogger: h = ck,
                getDatabaseSuffix: f = Is,
                isOnlineMethod: g = Kk,
                httpClient: p = de.resolve(Y.LoggerHttpClient)
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            return function*() {
                try {
                    let y = Object.assign(Object.assign({}, j8(s, a, o)), {
                            "http.scheme": l,
                            "http.url": c,
                            "http.user_agent": d
                        }),
                        b = new Sp({
                            databaseNameSuffix: f(),
                            isOnline: g,
                            baseLogAttributes: y,
                            baseSpanAttributes: y,
                            staticSpanAttributes: ["http.scheme", "http.user_agent", "outsystems.client.runtime.core.version", "outsystems.client.runtime.widgets.version", "outsystems.client.runtime.reactview.version", "outsystems.compiler.version"]
                        });
                    de.register(Y.InstrumentationFactory, () => b), yield b.init();
                    let E = Zk[Jk.LogLevel];
                    if (r) {
                        let S = yield h();
                        S && b.useNativeLoggerTransport({
                            plugin: S,
                            logTypeBaseline: E
                        })
                    } else b.useOpenTelemetryLoggerTransport({
                        resourceAttributes: {},
                        logTypeBaseline: E,
                        collectorBaseUrl: i(),
                        tagId: "",
                        httpClient: p
                    });
                    b.useConsoleLoggerTransport(E)
                } catch (y) {
                    console.error("Error while initializing the logger.", y)
                }
            }()
        })
    }, "hi"),
    Yk = u(n => M(void 0, void 0, void 0, function*() {
        var e, {
            version: t,
            getCurrentScreenName: r = u(() => "", "r"),
            applicationName: i = My,
            applicationKey: o = Is,
            clientRuntimeVersion: s = NP,
            basePath: a = jt,
            getAppVersionMethod: l = LP,
            isWebApplication: d = sf,
            usePwaServiceWorkerTracer: c = Oi.isEnabled(eo.ServiceWorkerTraces),
            serviceWorkerContainer: h = (e = navigator.serviceWorker) === null || e === void 0 ? void 0 : e.controller,
            settingsManager: f = de.resolve(Y.SettingsManager),
            instrumentationFactory: g = de.resolve(Y.InstrumentationFactory),
            httpClient: p = de.resolve(Y.LoggerHttpClient)
        } = n;
        try {
            g || (yield vI(), g = de.resolve(Y.InstrumentationFactory)), g.setAggregateSpansStatus(f == null ? void 0 : f.readBool("EnableSpanAggregation")), g.setLogLevel(f == null ? void 0 : f.readLogLevel());
            let y = (f == null ? void 0 : f.readString("LoggingTagID")) || (f == null ? void 0 : f.readString("LoggerApiKey"));
            g.setTagId(y), g.getTracer().addBaseSpanAttributes({
                "outsystems.runtime.screen": r
            });
            let b = {
                "service.name": "ClientRuntime",
                "service.version": s(),
                "outsystems.app.name": i(),
                "outsystems.app.versiontoken": t,
                "outsystems.app.key": o(),
                "outsystems.env.key": f == null ? void 0 : f.readString("EnvironmentKey"),
                "outsystems.tenant.key": f == null ? void 0 : f.readString("TenantID"),
                "outsystems.app.version": l()
            };
            g.setResourceAttributes(b), d() && (f != null && f.readBool("EnableOpenTelemetryTraces")) && (c && h ? g.useServiceWorkerTracerTransport({
                resourceAttributes: b,
                collectorBaseUrl: a(),
                tagId: y,
                enabled: !0,
                aggregateSpans: f == null ? void 0 : f.readBool("EnableSpanAggregation")
            }) : g.useOpenTelemetryTracerTransport({
                resourceAttributes: b,
                collectorBaseUrl: a(),
                tagId: y,
                enabled: !0,
                httpClient: p
            }));
            let E = f == null ? void 0 : f.readNumber("LoggerSchedulerTimeInterval");
            E > 0 && bI(E, g)
        } catch (y) {
            console.error("Error while updating the logger configurations.", y)
        }
    }), "gi"),
    z = u(function(n, e, t, r) {
        for (var i = arguments.length, o = new Array(i > 4 ? i - 4 : 0), s = 4; s < i; s++) o[s - 4] = arguments[s];
        return M(void 0, [n, e, t, r, ...o], void 0, function(a, l, d, c) {
            let h = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                let f = $8(a),
                    g = px(l);
                Hy(h, h == null ? void 0 : h.logDebug, f != null ? f : "", g != null ? g : "") || (yield h == null ? void 0 : h.logDebug({
                    category: f,
                    message: px(l),
                    visibility: d,
                    attributes: c
                }))
            }()
        })
    }, "pi"),
    hr = u(function(n, e, t, r) {
        for (var i = arguments.length, o = new Array(i > 4 ? i - 4 : 0), s = 4; s < i; s++) o[s - 4] = arguments[s];
        return M(void 0, [n, e, t, r, ...o], void 0, function(a, l, d, c) {
            let h = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                Hy(h, h == null ? void 0 : h.logInfo, a, l) || (yield h == null ? void 0 : h.logInfo({
                    category: a,
                    message: l,
                    visibility: d,
                    attributes: c
                }))
            }()
        })
    }, "fi"),
    qe = u(function(n, e, t, r) {
        for (var i = arguments.length, o = new Array(i > 4 ? i - 4 : 0), s = 4; s < i; s++) o[s - 4] = arguments[s];
        return M(void 0, [n, e, t, r, ...o], void 0, function(a, l, d, c) {
            let h = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                Hy(h, h == null ? void 0 : h.logWarning, a, l) || (yield h == null ? void 0 : h.logWarning({
                    category: a,
                    message: l,
                    visibility: d,
                    attributes: c
                }))
            }()
        })
    }, "mi"),
    xe = u(function(n, e, t, r, i, o) {
        for (var s = arguments.length, a = new Array(s > 6 ? s - 6 : 0), l = 6; l < s; l++) a[l - 6] = arguments[l];
        return M(void 0, [n, e, t, r, i, o, ...a], void 0, function(d, c, h, f, g, p) {
            let y = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                var b;
                let {
                    error: E,
                    message: S
                } = V8(c, f);
                if (!Hy(y, y == null ? void 0 : y.logError, d, S != null ? S : "")) {
                    let _ = (h === "OS-CLRT-00000" || h == null) && (b = E.errorCode) !== null && b !== void 0 ? b : h;
                    d = d != null ? d : E.category, Ei(E, Q.UserException) && (g = Oe.Client), yield y == null ? void 0 : y.logError({
                        category: d,
                        message: S,
                        error: E,
                        errorCode: _,
                        visibility: g,
                        attributes: p
                    })
                }
            }()
        })
    }, "vi"),
    Hy = u((n, e, t, r) => (!n && Oi.isEnabled(eo.NoInstrumentationFactoryLogs) ? console.warn(`No instrumentation factory: ${t} - ${r}`) : !e && Oi.isEnabled(eo.NoInstrumentationFactoryLogs) && console.warn(`Factory function not defined: ${t} - ${r}`), !n || !e), "yi"),
    yI = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                yield r == null ? void 0 : r.flushInstrumentationData()
            }()
        })
    }, "bi"),
    Xk = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : de.resolve(Y.InstrumentationFactory);
            return function*() {
                yield r == null ? void 0 : r.flushLogs()
            }()
        })
    }, "Ti"),
    Qk = u(function(n) {
        let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : de.resolve(Y.InstrumentationFactory);
        e == null || e.setLogLevel(n)
    }, "wi"),
    bI = u(function(n) {
        let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : de.resolve(Y.InstrumentationFactory);
        e == null || e.setSchedulerTimerInterval(n)
    }, "Ei");

function eU(n, e, t, r, i) {
    let o = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : de.resolve(Y.InstrumentationFactory);
    return o ? o.startActiveSpan(n, e, t, r, i) : e(void 0)
}
u(eU, "Ii");

function tU() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : de.resolve(Y.InstrumentationFactory),
        e = n == null ? void 0 : n.getActiveSpan();
    e == null || e.setAttribute(ai.IsNonAggregable, "true")
}
u(tU, "Ai");

function wI(n, e, t, r) {
    let i = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : de.resolve(Y.InstrumentationFactory);
    return i == null ? void 0 : i.startSpan(n, e, t, r)
}
u(wI, "Ni");
var j8 = u((n, e, t) => ({
        "enduser.id": n,
        "outsystems.client.runtime.core.version": u(() => {
            var r;
            return (r = e({
                packageKey: "client-runtime-core"
            })) !== null && r !== void 0 ? r : ""
        }, "outsystems.client.runtime.core.version"),
        "outsystems.client.runtime.widgets.version": u(() => {
            var r;
            return (r = e({
                packageKey: "client-runtime-widgets"
            })) !== null && r !== void 0 ? r : ""
        }, "outsystems.client.runtime.widgets.version"),
        "outsystems.client.runtime.reactview.version": u(() => {
            var r;
            return (r = e({
                packageKey: "client-runtime-view-framework-react"
            })) !== null && r !== void 0 ? r : ""
        }, "outsystems.client.runtime.reactview.version"),
        "outsystems.compiler.version": u(() => {
            var r;
            return (r = t()) !== null && r !== void 0 ? r : ""
        }, "outsystems.compiler.version")
    }), "Si"),
    $8 = u(n => {
        if (n) {
            if (typeof n == "string") return n; {
                let e = n.constructor.name;
                return e === "Function" ? n.name : e
            }
        }
    }, "Di"),
    px = u(n => {
        if (n) return typeof n == "string" ? n : n()
    }, "Ri"),
    V8 = u((n, e) => {
        let t = e != null ? e : typeof n == "string" ? new Error(n) : n,
            r = e && typeof n == "string" ? n : void 0;
        return t.message === r && (r = void 0), {
            error: t,
            message: r
        }
    }, "Ci"),
    al = u(n => {
        let {
            category: e,
            errorCode: t,
            clientMessage: r,
            internalMessage: i,
            instrumentationFactory: o = de.resolve(Y.InstrumentationFactory),
            errorObj: s,
            attributes: a
        } = n;
        return Promise.all([xe(e, r, t, s, Oe.Client, a, o), xe(e, i, t, void 0, Oe.Internal, a, o)])
    }, "xi"),
    nU = Object.freeze({
        __proto__: null,
        clientError: al,
        debug: z,
        error: xe,
        flush: yI,
        flushLogs: Xk,
        log: hr,
        registerInstrumentationFactory: vI,
        setActiveSpanAsNonAggregable: tU,
        setLogLevel: Qk,
        setSchedulerTimerInterval: bI,
        startActiveSpan: eU,
        startSpan: wI,
        updateInstrumentationFactory: Yk,
        warning: qe
    }),
    zI = class zI {
        constructor(e) {
            this.callback = e
        }
    };
u(zI, "Oi");
var vv = zI,
    WI = class WI extends vv {
        constructor(e) {
            super(e), this.callback = e
        }
    };
u(WI, "_i");
var yv = WI,
    qI = class qI extends vv {
        constructor(e) {
            super(e), this.callback = e
        }
    };
u(qI, "Mi");
var yh = qI,
    mx = "TxExecutor",
    gs = class gs {
        constructor(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            this.tx = e, this.allowTraces = t, this.chain = [], this.pendingResult = null, this.hasPendingResult = !1, this.pendingError = null, this.hasPendingError = !1, this.parent = null
        }
        cloneForNext() {
            let e = new gs(this.tx, this.allowTraces);
            return e.parent = this, e
        }
        andThen(e) {
            return this.hasPendingError || (this.chain.push(new yv(e)), this.triggerPendingResults()), this
        }
        withoutTraces(e) {
            return this.andThen((t, r) => (t.allowTraces = !1, e(t, r)))
        }
        andThenAll(e) {
            return this.andThen((t, r) => {
                let i = e(r),
                    o = t.feed(void 0);
                if (i)
                    for (let s = 0; s < i.length; s++) o = o.andThen(i[s]);
                return o.andThen(() => {})
            })
        }
        extractScalar(e) {
            let t = Object.keys(e);
            if (t.length === 1) return e[t[0]];
            throw new Q.DataBaseException("", `Invalid use of 'extractScalar': the row should have a single column, but found '${t.join("', '")}'`)
        }
        executeScalar(e, t) {
            return this.executeQueryRaw(e, t).andThen((r, i) => (i == null ? void 0 : i.rows.length) === 0 ? void 0 : this.extractScalar(i == null ? void 0 : i.rows.item(0)))
        }
        executeQuery(e, t, r) {
            return this.executeQueryRaw(e, r).andThen((i, o) => {
                let s = new Array(o.rows.length);
                for (let a = 0; a < o.rows.length; a++) {
                    let l = o.rows.item(a);
                    s[a] = t(l)
                }
                return s
            })
        }
        executeNonQuery(e, t) {
            return this.executeQueryRaw(e, t).andThen((r, i) => {})
        }
        executeQueryRaw(e, t) {
            let r = gs.queryCount++,
                i = t != null ? t : [];
            return this.traceQuery(r, e, i), this.tx.executeSql(e, t, (o, s) => {
                try {
                    this.continueWithNext(s)
                } catch (a) {
                    this.abortExplicitly(o, a)
                }
            }, (o, s) => (qe(mx, `SQL command #${r} failed with error ${s.message}`), this.abort(s))), this
        }
        feed(e) {
            return this.hasPendingResult = !0, this.pendingResult = e, this
        }
        onError(e) {
            return this.chain.push(new yh(e)), this.triggerPendingError(), this
        }
        nextCallback(e) {
            for (let t = 0; t < this.chain.length; t++)
                if (e(this.chain[t])) {
                    let r = this.chain[t].callback;
                    return this.chain = this.chain.slice(t + 1, this.chain.length), r
                } return null
        }
        nextErrorCallback() {
            return this.nextCallback(e => e instanceof yh)
        }
        hasErrorCallback() {
            return this.chain.some(e => e instanceof yh)
        }
        nextSuccessCallback() {
            return this.nextCallback(e => e instanceof yv)
        }
        abort(e) {
            let t = this.nextErrorCallback();
            if (t) {
                this.pendingError = null, this.hasPendingError = !1;
                try {
                    let r = !1,
                        i = t(e, () => {
                            r = !0
                        });
                    return r ? this.chain = [] : this.continueWithNext(i), r
                } catch (r) {
                    if (this.hasErrorCallback()) return this.abort(r);
                    if (this.parent) return this.parent.abort(r);
                    throw r
                }
            } else this.pendingError = e, this.hasPendingError = !0;
            return !this.parent || this.parent.abort(e)
        }
        abortExplicitly(e, t) {
            this.abort(t) && e.executeSql("ABORT_TRANSACTION", void 0, () => {}, () => !0)
        }
        continueWithNext(e) {
            if (this.hasPendingResult = !1, e instanceof gs) e.andThen((t, r) => {
                this.continueWithNext(r)
            });
            else if (e instanceof Array && e.length !== 0 && e[0] instanceof gs) {
                let t = 0,
                    r = u(() => {
                        t < e.length ? (e[t].andThen(r), t++) : this.continueWithNext(e)
                    }, "n");
                r()
            } else {
                if (this.chain.length > 0) {
                    let t = this.nextSuccessCallback();
                    if (t) return void this.continueWithNext(this.tryNextItem(t, this.cloneForNext(), e))
                }
                this.hasPendingResult = !0, this.pendingResult = e
            }
        }
        tryNextItem(e, t, r) {
            try {
                return e(t, r)
            } catch (i) {
                this.abortExplicitly(this.tx, i)
            }
        }
        triggerPendingResults() {
            this.hasPendingResult && (this.hasPendingResult = !1, this.continueWithNext(this.pendingResult))
        }
        triggerPendingError() {
            this.hasPendingError && (this.hasPendingError = !1, this.abort(this.pendingError))
        }
        traceQuery(e, t, r) {
            this.allowTraces && z(mx, () => {
                let i = (r || []).map(o => String(o).substring(0, 80));
                return `Executing SQL command #${e}: ${t} with arguments ${i}`
            }, Oe.Client)
        }
        static
        for (e) {
            return new gs(e)
        }
    };
u(gs, "Fi");
var bv = gs;
bv.queryCount = 0;
var Lm = "SqlDatabase",
    GI = class GI {
        constructor(e, t) {
            this.dbName = e, this.db = t, this.txCount = 0, this.setDispose()
        }
        setDispose() {
            let e = this.db;
            window && e && e.close && window.addEventListener("unload", () => {
                this.debug(`Closing database ${this.name}`), e.close(() => this.debug(`Database ${this.name} closed successfully`), t => xe("SqlDatabase", `Database ${this.name} failed to close`, "OS-CLRT-60400", t))
            }, !1)
        }
        get name() {
            return this.dbName
        }
        get isMock() {
            return !1
        }
        executeTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return this.innerExecuteTransaction(e, !1, t)
        }
        executeReadTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return this.innerExecuteTransaction(e, !0, t)
        }
        innerExecuteTransaction(e, t, r) {
            let i = t ? "READ" : "WRITE",
                o = t ? this.db.readTransaction : this.db.transaction,
                s = ++this.txCount;
            return Fy((a, l) => {
                let d, c;
                this.debug(`Opening local storage ${i} transaction #${s} on database ${this.name}`, r), o.call(this.db, h => {
                    this.debug(`Executing local storage ${i} transaction #${s} on database ${this.name}`, r);
                    let f = bv.for(h).feed(void 0);
                    return f = r ? f.andThen(e) : f.withoutTraces(e), f.andThen((g, p) => d = p).onError((g, p) => {
                        c = g, p()
                    })
                }, h => {
                    c = c || h;
                    let f = c != null && c.message ? c : new Error(c),
                        g = `Rolled back local storage ${i} transaction #${s} on database ${this.name}: ${f.message}`;
                    return r && qe(Lm, g), l(new Q.DataBaseException("", f.message.toString())), !0
                }, () => {
                    this.debug(`Committed local storage ${i} transaction #${s} on database ${this.name}`, r), a(d)
                })
            })
        }
        testConnection() {
            let e = 0;
            return hr(Lm, "Starting to test on database connections. Performing #5 test queries.", Oe.Internal), Promise.all(Array.apply(null, {
                length: 5
            }).map((t, r) => new Promise(i => {
                this.executeTransaction(o => o.executeQueryRaw("SELECT 1").onError((s, a) => {
                    vx(s), e++
                })).catch(o => {
                    vx(o), e++
                }).then(() => {
                    i()
                })
            }))).then(() => {
                hr(Lm, `Finished tests on database connections. #${5-e} out of #5 successfull queries.`, Oe.Internal)
            })
        }
        debug(e) {
            (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0) && z(Lm, e)
        }
    };
u(GI, "Pi");
var wv = GI,
    KI = class KI {
        constructor(e) {
            this.dbName = e
        }
        get name() {
            return this.dbName
        }
        get isMock() {
            return !0
        }
        executeTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return gv()
        }
        executeReadTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return gv()
        }
        testConnection() {
            return Promise.resolve()
        }
    };
u(KI, "Vi");
var WS = KI;

function vx(n) {
    xe("Database", "Failed to execute canary query (probably due to zombie transaction)", "OS-CLRT-60407"), typeof SQLError != "undefined" && n instanceof SQLError ? xe("Database", `SQLError ${n.code}: ${n.message}`, "OS-CLRT-60407") : xe("Database", "Error while executing a transaction", "OS-CLRT-60400", n)
}
u(vx, "Bi");
var ah = "Could not open database",
    xm = "SqlDbProviderClass",
    H8 = new class {
        constructor() {
            this.dbCache = {}
        }
        debug(n) {
            z(xm, n)
        }
        asSafeDbName(n) {
            return n || ""
        }
        openDb(n) {
            return n = this.asSafeDbName(n), Fy((e, t) => {
                this.dbCache[n] ? e(this.dbCache[n]) : Rr().then(() => {
                    if (typeof window == "undefined") return t(new Q.SystemException("Database is only available in the browser/web view"));
                    let r = window;
                    if (on())
                        if (r.sqlitePlugin) {
                            this.debug(`Opening database '${n}'`);
                            try {
                                r.sqlitePlugin.openDatabase({
                                    name: n,
                                    location: "default"
                                }, i => {
                                    i ? (this.debug(`Database '${n}' opened successfully`), this.dbCache[n] = new wv(n, i), e(this.dbCache[n])) : (qe(xm, `Error opening database '${n}'`), t(new Q.OpenDatabaseException(`${ah} '${n}'`)))
                                }, i => {
                                    qe(xm, `Error opening database '${n}' : ${i.message}`), t(new Q.OpenDatabaseException(`${ah} '${n}': ${i.message.toString()}`))
                                })
                            } catch (i) {
                                t(new Q.OpenDatabaseException(`${ah} '${n}': ${i.message.toString()}`))
                            }
                        } else t(new Q.OpenDatabaseException("No database driver available"));
                    else if (r.openDatabase) try {
                        this.debug(`Opening database '${n}'`);
                        let i = r.openDatabase(n, "1.0", n, 5242880);
                        i ? (this.debug(`Database '${n}' opened successfully`), this.dbCache[n] = new wv(n, i), e(this.dbCache[n])) : (qe(xm, `Error opening database '${n}'`), t(new Q.OpenDatabaseException(`${ah} '${n}'`)))
                    } catch (i) {
                        t(new Q.OpenDatabaseException(`${ah} '${n}': ${i.message.toString()}`))
                    } else {
                        let i = /^((?!chrome|android).)*safari/i.test(navigator.userAgent),
                            o = !!r.chrome,
                            s = `Your app requires native access to a Local Storage database that is not available in your browser.

Please test your app in your mobile device` + (i || o ? "" : ", or use Google Chrome or Safari web browsers") + ".";
                        alert(s), t(new Q.SystemException(s))
                    }
                }).catch(t)
            })
        }
        mockDb(n) {
            return gv(new WS(n))
        }
    },
    yx;
(function(n) {
    n[n.Full = 0] = "Full", n[n.Type = 1] = "Type", n[n.Length = 3] = "Length", n[n.Decimals = 5] = "Decimals"
})(yx || (yx = {}));
var z8 = new class {
    tableExists(n, e) {
        return n.executeReadTransaction(t => t.executeScalar("SELECT COUNT(*) FROM sqlite_master WHERE type = 'table' AND name = UPPER(?)", [e]).andThen((r, i) => i !== 0))
    }
    columnExists(n, e, t) {
        return n.executeReadTransaction(r => r.executeScalar(`SELECT "${e}"."${t}" FROM "${e}" LIMIT 1`)).then(() => !0).catch(() => !1)
    }
    dbTypeFromSchemaType(n) {
        switch ((n = n || "").toUpperCase()) {
            case "INTEGER":
                return pe.DBDataType.INTEGER;
            case "BIGINT":
                return pe.DBDataType.LONGINTEGER;
            case "REAL":
                return pe.DBDataType.DECIMAL;
            case "BOOLEAN":
                return pe.DBDataType.BOOLEAN;
            case "TEXT":
                return pe.DBDataType.TEXT;
            case "DATE":
                return pe.DBDataType.DATE;
            case "TIME":
                return pe.DBDataType.TIME;
            case "DATETIME":
                return pe.DBDataType.DATE_TIME;
            case "BLOB":
                return pe.DBDataType.BINARY_DATA;
            default:
                return pe.DBDataType.UNKNOWN
        }
    }
    pragmaToTableInfo(n, e, t) {
        return {
            tableName: n,
            idIsAutoNumber: (e = e || "").search(/INTEGER PRIMARY KEY AUTOINCREMENT/i) >= 0 ? pe.AutoNumber.YesIfEmpty : pe.AutoNumber.No,
            attributes: t.map(r => {
                let i = xa(r.type, "^([a-z]+)(\\(([0-9]+)(\\,([0-9]+))?\\))?$", !0).shift();
                if (i) {
                    let o = this.dbTypeFromSchemaType(i.groups[1]);
                    return {
                        name: r.name,
                        columnName: r.name ? r.name.toUpperCase() : null,
                        type: o,
                        length: i.groups[3] ? parseInt(i.groups[3], 10) : void 0,
                        decimals: i.groups[5] ? parseInt(i.groups[5], 10) : void 0,
                        isEntityReference: r.dflt_value === "NULL" && this.isIdentifierUnderlyingType(o),
                        isPrimaryKey: r.pk === 1
                    }
                }
            })
        }
    }
    isIdentifierUnderlyingType(n) {
        switch (n) {
            case pe.DBDataType.INTEGER:
            case pe.DBDataType.LONGINTEGER:
            case pe.DBDataType.TEXT:
                return !0;
            default:
                return !1
        }
    }
    introspectTableInfo(n, e) {
        if (!on()) return n.feed(null);
        let t;
        return n.executeScalar(`SELECT sql FROM sqlite_master WHERE type = 'table' AND name = '${e}'`).andThen((r, i) => t = i).andThen((r, i) => r.executeQuery(`PRAGMA table_info('${e}')`, o => o)).andThen((r, i) => this.pragmaToTableInfo(e, t, i))
    }
};
var rU, xo, gc = 9e15,
    vs = 1e9,
    qS = "0123456789abcdef",
    Tv = "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",
    Ev = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",
    GS = {
        precision: 20,
        rounding: 4,
        modulo: 1,
        toExpNeg: -7,
        toExpPos: 21,
        minE: -gc,
        maxE: gc,
        crypto: !1
    },
    je = !0,
    zy = "[DecimalError] ",
    _s = zy + "Invalid argument: ",
    iU = zy + "Precision limit exceeded",
    oU = zy + "crypto unavailable",
    sU = "[object Decimal]",
    Hn = Math.floor,
    ln = Math.pow,
    W8 = /^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,
    q8 = /^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,
    G8 = /^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,
    bx = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,
    mi = 1e7,
    Ue = 7,
    K8 = Tv.length - 1,
    KS = Ev.length - 1,
    te = {
        toStringTag: sU
    };

function On(n) {
    var e, t, r, i = n.length - 1,
        o = "",
        s = n[0];
    if (i > 0) {
        for (o += s, e = 1; e < i; e++) r = n[e] + "", (t = Ue - r.length) && (o += fs(t)), o += r;
        s = n[e], (t = Ue - (r = s + "").length) && (o += fs(t))
    } else if (s === 0) return "0";
    for (; s % 10 == 0;) s /= 10;
    return o + s
}
u(On, "vs");

function cr(n, e, t) {
    if (n !== ~~n || n < e || n > t) throw Error(_s + n)
}
u(cr, "ys");

function bh(n, e, t, r) {
    var i, o, s, a;
    for (o = n[0]; o >= 10; o /= 10) --e;
    return --e < 0 ? (e += Ue, i = 0) : (i = Math.ceil((e + 1) / Ue), e %= Ue), o = ln(10, Ue - e), a = n[i] % o | 0, r == null ? e < 3 ? (e == 0 ? a = a / 100 | 0 : e == 1 && (a = a / 10 | 0), s = t < 4 && a == 99999 || t > 3 && a == 49999 || a == 5e4 || a == 0) : s = (t < 4 && a + 1 == o || t > 3 && a + 1 == o / 2) && (n[i + 1] / o / 100 | 0) == ln(10, e - 2) - 1 || (a == o / 2 || a == 0) && !(n[i + 1] / o / 100 | 0) : e < 4 ? (e == 0 ? a = a / 1e3 | 0 : e == 1 ? a = a / 100 | 0 : e == 2 && (a = a / 10 | 0), s = (r || t < 4) && a == 9999 || !r && t > 3 && a == 4999) : s = ((r || t < 4) && a + 1 == o || !r && t > 3 && a + 1 == o / 2) && (n[i + 1] / o / 1e3 | 0) == ln(10, e - 3) - 1, s
}
u(bh, "bs");

function Zm(n, e, t) {
    for (var r, i, o = [0], s = 0, a = n.length; s < a;) {
        for (i = o.length; i--;) o[i] *= e;
        for (o[0] += qS.indexOf(n.charAt(s++)), r = 0; r < o.length; r++) o[r] > t - 1 && (o[r + 1] === void 0 && (o[r + 1] = 0), o[r + 1] += o[r] / t | 0, o[r] %= t)
    }
    return o.reverse()
}
u(Zm, "Ts");
te.absoluteValue = te.abs = function() {
    var n = new this.constructor(this);
    return n.s < 0 && (n.s = 1), Ne(n)
}, te.ceil = function() {
    return Ne(new this.constructor(this), this.e + 1, 2)
}, te.clampedTo = te.clamp = function(n, e) {
    var t = this,
        r = t.constructor;
    if (n = new r(n), e = new r(e), !n.s || !e.s) return new r(NaN);
    if (n.gt(e)) throw Error(_s + e);
    return t.cmp(n) < 0 ? n : t.cmp(e) > 0 ? e : new r(t)
}, te.comparedTo = te.cmp = function(n) {
    var e, t, r, i, o = this,
        s = o.d,
        a = (n = new o.constructor(n)).d,
        l = o.s,
        d = n.s;
    if (!s || !a) return l && d ? l !== d ? l : s === a ? 0 : !s ^ l < 0 ? 1 : -1 : NaN;
    if (!s[0] || !a[0]) return s[0] ? l : a[0] ? -d : 0;
    if (l !== d) return l;
    if (o.e !== n.e) return o.e > n.e ^ l < 0 ? 1 : -1;
    for (e = 0, t = (r = s.length) < (i = a.length) ? r : i; e < t; ++e)
        if (s[e] !== a[e]) return s[e] > a[e] ^ l < 0 ? 1 : -1;
    return r === i ? 0 : r > i ^ l < 0 ? 1 : -1
}, te.cosine = te.cos = function() {
    var n, e, t = this,
        r = t.constructor;
    return t.d ? t.d[0] ? (n = r.precision, e = r.rounding, r.precision = n + Math.max(t.e, t.sd()) + Ue, r.rounding = 1, t = function(i, o) {
        var s, a, l;
        if (o.isZero()) return o;
        a = o.d.length, a < 32 ? l = (1 / Pm(4, s = Math.ceil(a / 3))).toString() : (s = 16, l = "2.3283064365386962890625e-10"), i.precision += s, o = ic(i, 1, o.times(l), new i(1));
        for (var d = s; d--;) {
            var c = o.times(o);
            o = c.times(c).minus(c).times(8).plus(1)
        }
        return i.precision -= s, o
    }(r, Ex(r, t)), r.precision = n, r.rounding = e, Ne(xo == 2 || xo == 3 ? t.neg() : t, n, e, !0)) : new r(1) : new r(NaN)
}, te.cubeRoot = te.cbrt = function() {
    var n, e, t, r, i, o, s, a, l, d, c = this,
        h = c.constructor;
    if (!c.isFinite() || c.isZero()) return new h(c);
    for (je = !1, (o = c.s * ln(c.s * c, 1 / 3)) && Math.abs(o) != 1 / 0 ? r = new h(o.toString()) : (t = On(c.d), (o = ((n = c.e) - t.length + 1) % 3) && (t += o == 1 || o == -2 ? "0" : "00"), o = ln(t, 1 / 3), n = Hn((n + 1) / 3) - (n % 3 == (n < 0 ? -1 : 2)), (r = new h(t = o == 1 / 0 ? "5e" + n : (t = o.toExponential()).slice(0, t.indexOf("e") + 1) + n)).s = c.s), s = (n = h.precision) + 3;;)
        if (d = (l = (a = r).times(a).times(a)).plus(c), r = At(d.plus(c).times(a), d.plus(l), s + 2, 1), On(a.d).slice(0, s) === (t = On(r.d)).slice(0, s)) {
            if ((t = t.slice(s - 3, s + 1)) != "9999" && (i || t != "4999")) {
                +t && (+t.slice(1) || t.charAt(0) != "5") || (Ne(r, n + 1, 1), e = !r.times(r).times(r).eq(c));
                break
            }
            if (!i && (Ne(a, n + 1, 0), a.times(a).times(a).eq(c))) {
                r = a;
                break
            }
            s += 4, i = 1
        } return je = !0, Ne(r, n, h.rounding, e)
}, te.decimalPlaces = te.dp = function() {
    var n, e = this.d,
        t = NaN;
    if (e) {
        if (t = ((n = e.length - 1) - Hn(this.e / Ue)) * Ue, n = e[n])
            for (; n % 10 == 0; n /= 10) t--;
        t < 0 && (t = 0)
    }
    return t
}, te.dividedBy = te.div = function(n) {
    return At(this, new this.constructor(n))
}, te.dividedToIntegerBy = te.divToInt = function(n) {
    var e = this.constructor;
    return Ne(At(this, new e(n), 0, 1, 1), e.precision, e.rounding)
}, te.equals = te.eq = function(n) {
    return this.cmp(n) === 0
}, te.floor = function() {
    return Ne(new this.constructor(this), this.e + 1, 3)
}, te.greaterThan = te.gt = function(n) {
    return this.cmp(n) > 0
}, te.greaterThanOrEqualTo = te.gte = function(n) {
    var e = this.cmp(n);
    return e == 1 || e === 0
}, te.hyperbolicCosine = te.cosh = function() {
    var n, e, t, r, i, o = this,
        s = o.constructor,
        a = new s(1);
    if (!o.isFinite()) return new s(o.s ? 1 / 0 : NaN);
    if (o.isZero()) return a;
    t = s.precision, r = s.rounding, s.precision = t + Math.max(o.e, o.sd()) + 4, s.rounding = 1, (i = o.d.length) < 32 ? e = (1 / Pm(4, n = Math.ceil(i / 3))).toString() : (n = 16, e = "2.3283064365386962890625e-10"), o = ic(s, 1, o.times(e), new s(1), !0);
    for (var l, d = n, c = new s(8); d--;) l = o.times(o), o = a.minus(l.times(c.minus(l.times(c))));
    return Ne(o, s.precision = t, s.rounding = r, !0)
}, te.hyperbolicSine = te.sinh = function() {
    var n, e, t, r, i = this,
        o = i.constructor;
    if (!i.isFinite() || i.isZero()) return new o(i);
    if (e = o.precision, t = o.rounding, o.precision = e + Math.max(i.e, i.sd()) + 4, o.rounding = 1, (r = i.d.length) < 3) i = ic(o, 2, i, i, !0);
    else {
        n = (n = 1.4 * Math.sqrt(r)) > 16 ? 16 : 0 | n, i = ic(o, 2, i = i.times(1 / Pm(5, n)), i, !0);
        for (var s, a = new o(5), l = new o(16), d = new o(20); n--;) s = i.times(i), i = i.times(a.plus(s.times(l.times(s).plus(d))))
    }
    return o.precision = e, o.rounding = t, Ne(i, e, t, !0)
}, te.hyperbolicTangent = te.tanh = function() {
    var n, e, t = this,
        r = t.constructor;
    return t.isFinite() ? t.isZero() ? new r(t) : (n = r.precision, e = r.rounding, r.precision = n + 7, r.rounding = 1, At(t.sinh(), t.cosh(), r.precision = n, r.rounding = e)) : new r(t.s)
}, te.inverseCosine = te.acos = function() {
    var n, e = this,
        t = e.constructor,
        r = e.abs().cmp(1),
        i = t.precision,
        o = t.rounding;
    return r !== -1 ? r === 0 ? e.isNeg() ? vi(t, i, o) : new t(0) : new t(NaN) : e.isZero() ? vi(t, i + 4, o).times(.5) : (t.precision = i + 6, t.rounding = 1, e = e.asin(), n = vi(t, i + 4, o).times(.5), t.precision = i, t.rounding = o, n.minus(e))
}, te.inverseHyperbolicCosine = te.acosh = function() {
    var n, e, t = this,
        r = t.constructor;
    return t.lte(1) ? new r(t.eq(1) ? 0 : NaN) : t.isFinite() ? (n = r.precision, e = r.rounding, r.precision = n + Math.max(Math.abs(t.e), t.sd()) + 4, r.rounding = 1, je = !1, t = t.times(t).minus(1).sqrt().plus(t), je = !0, r.precision = n, r.rounding = e, t.ln()) : new r(t)
}, te.inverseHyperbolicSine = te.asinh = function() {
    var n, e, t = this,
        r = t.constructor;
    return !t.isFinite() || t.isZero() ? new r(t) : (n = r.precision, e = r.rounding, r.precision = n + 2 * Math.max(Math.abs(t.e), t.sd()) + 6, r.rounding = 1, je = !1, t = t.times(t).plus(1).sqrt().plus(t), je = !0, r.precision = n, r.rounding = e, t.ln())
}, te.inverseHyperbolicTangent = te.atanh = function() {
    var n, e, t, r, i = this,
        o = i.constructor;
    return i.isFinite() ? i.e >= 0 ? new o(i.abs().eq(1) ? i.s / 0 : i.isZero() ? i : NaN) : (n = o.precision, e = o.rounding, r = i.sd(), Math.max(r, n) < 2 * -i.e - 1 ? Ne(new o(i), n, e, !0) : (o.precision = t = r - i.e, i = At(i.plus(1), new o(1).minus(i), t + n, 1), o.precision = n + 4, o.rounding = 1, i = i.ln(), o.precision = n, o.rounding = e, i.times(.5))) : new o(NaN)
}, te.inverseSine = te.asin = function() {
    var n, e, t, r, i = this,
        o = i.constructor;
    return i.isZero() ? new o(i) : (e = i.abs().cmp(1), t = o.precision, r = o.rounding, e !== -1 ? e === 0 ? ((n = vi(o, t + 4, r).times(.5)).s = i.s, n) : new o(NaN) : (o.precision = t + 6, o.rounding = 1, i = i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(), o.precision = t, o.rounding = r, i.times(2)))
}, te.inverseTangent = te.atan = function() {
    var n, e, t, r, i, o, s, a, l, d = this,
        c = d.constructor,
        h = c.precision,
        f = c.rounding;
    if (d.isFinite()) {
        if (d.isZero()) return new c(d);
        if (d.abs().eq(1) && h + 4 <= KS) return (s = vi(c, h + 4, f).times(.25)).s = d.s, s
    } else {
        if (!d.s) return new c(NaN);
        if (h + 4 <= KS) return (s = vi(c, h + 4, f).times(.5)).s = d.s, s
    }
    for (c.precision = a = h + 10, c.rounding = 1, n = t = Math.min(28, a / Ue + 2 | 0); n; --n) d = d.div(d.times(d).plus(1).sqrt().plus(1));
    for (je = !1, e = Math.ceil(a / Ue), r = 1, l = d.times(d), s = new c(d), i = d; n !== -1;)
        if (i = i.times(l), o = s.minus(i.div(r += 2)), i = i.times(l), (s = o.plus(i.div(r += 2))).d[e] !== void 0)
            for (n = e; s.d[n] === o.d[n] && n--;);
    return t && (s = s.times(2 << t - 1)), je = !0, Ne(s, c.precision = h, c.rounding = f, !0)
}, te.isFinite = function() {
    return !!this.d
}, te.isInteger = te.isInt = function() {
    return !!this.d && Hn(this.e / Ue) > this.d.length - 2
}, te.isNaN = function() {
    return !this.s
}, te.isNegative = te.isNeg = function() {
    return this.s < 0
}, te.isPositive = te.isPos = function() {
    return this.s > 0
}, te.isZero = function() {
    return !!this.d && this.d[0] === 0
}, te.lessThan = te.lt = function(n) {
    return this.cmp(n) < 0
}, te.lessThanOrEqualTo = te.lte = function(n) {
    return this.cmp(n) < 1
}, te.logarithm = te.log = function(n) {
    var e, t, r, i, o, s, a, l, d = this,
        c = d.constructor,
        h = c.precision,
        f = c.rounding;
    if (n == null) n = new c(10), e = !0;
    else {
        if (t = (n = new c(n)).d, n.s < 0 || !t || !t[0] || n.eq(1)) return new c(NaN);
        e = n.eq(10)
    }
    if (t = d.d, d.s < 0 || !t || !t[0] || d.eq(1)) return new c(t && !t[0] ? -1 / 0 : d.s != 1 ? NaN : t ? 0 : 1 / 0);
    if (e)
        if (t.length > 1) o = !0;
        else {
            for (i = t[0]; i % 10 == 0;) i /= 10;
            o = i !== 1
        } if (je = !1, s = ds(d, a = h + 5), r = e ? _v(c, a + 10) : ds(n, a), bh((l = At(s, r, a, 1)).d, i = h, f))
        do
            if (s = ds(d, a += 10), r = e ? _v(c, a + 10) : ds(n, a), l = At(s, r, a, 1), !o) {
                +On(l.d).slice(i + 1, i + 15) + 1 == 1e14 && (l = Ne(l, h + 1, 0));
                break
            } while (bh(l.d, i += 10, f));
    return je = !0, Ne(l, h, f)
}, te.minus = te.sub = function(n) {
    var e, t, r, i, o, s, a, l, d, c, h, f, g = this,
        p = g.constructor;
    if (n = new p(n), !g.d || !n.d) return g.s && n.s ? g.d ? n.s = -n.s : n = new p(n.d || g.s !== n.s ? g : NaN) : n = new p(NaN), n;
    if (g.s != n.s) return n.s = -n.s, g.plus(n);
    if (d = g.d, f = n.d, a = p.precision, l = p.rounding, !d[0] || !f[0]) {
        if (f[0]) n.s = -n.s;
        else {
            if (!d[0]) return new p(l === 3 ? -0 : 0);
            n = new p(g)
        }
        return je ? Ne(n, a, l) : n
    }
    if (t = Hn(n.e / Ue), c = Hn(g.e / Ue), d = d.slice(), o = c - t) {
        for ((h = o < 0) ? (e = d, o = -o, s = f.length) : (e = f, t = c, s = d.length), o > (r = Math.max(Math.ceil(a / Ue), s) + 2) && (o = r, e.length = 1), e.reverse(), r = o; r--;) e.push(0);
        e.reverse()
    } else {
        for ((h = (r = d.length) < (s = f.length)) && (s = r), r = 0; r < s; r++)
            if (d[r] != f[r]) {
                h = d[r] < f[r];
                break
            } o = 0
    }
    for (h && (e = d, d = f, f = e, n.s = -n.s), s = d.length, r = f.length - s; r > 0; --r) d[s++] = 0;
    for (r = f.length; r > o;) {
        if (d[--r] < f[r]) {
            for (i = r; i && d[--i] === 0;) d[i] = mi - 1;
            --d[i], d[r] += mi
        }
        d[r] -= f[r]
    }
    for (; d[--s] === 0;) d.pop();
    for (; d[0] === 0; d.shift()) --t;
    return d[0] ? (n.d = d, n.e = Ym(d, t), je ? Ne(n, a, l) : n) : new p(l === 3 ? -0 : 0)
}, te.modulo = te.mod = function(n) {
    var e, t = this,
        r = t.constructor;
    return n = new r(n), !t.d || !n.s || n.d && !n.d[0] ? new r(NaN) : !n.d || t.d && !t.d[0] ? Ne(new r(t), r.precision, r.rounding) : (je = !1, r.modulo == 9 ? (e = At(t, n.abs(), 0, 3, 1)).s *= n.s : e = At(t, n, 0, r.modulo, 1), e = e.times(n), je = !0, t.minus(e))
}, te.naturalExponential = te.exp = function() {
    return Y_(this)
}, te.naturalLogarithm = te.ln = function() {
    return ds(this)
}, te.negated = te.neg = function() {
    var n = new this.constructor(this);
    return n.s = -n.s, Ne(n)
}, te.plus = te.add = function(n) {
    var e, t, r, i, o, s, a, l, d, c, h = this,
        f = h.constructor;
    if (n = new f(n), !h.d || !n.d) return h.s && n.s ? h.d || (n = new f(n.d || h.s === n.s ? h : NaN)) : n = new f(NaN), n;
    if (h.s != n.s) return n.s = -n.s, h.minus(n);
    if (d = h.d, c = n.d, a = f.precision, l = f.rounding, !d[0] || !c[0]) return c[0] || (n = new f(h)), je ? Ne(n, a, l) : n;
    if (o = Hn(h.e / Ue), r = Hn(n.e / Ue), d = d.slice(), i = o - r) {
        for (i < 0 ? (t = d, i = -i, s = c.length) : (t = c, r = o, s = d.length), i > (s = (o = Math.ceil(a / Ue)) > s ? o + 1 : s + 1) && (i = s, t.length = 1), t.reverse(); i--;) t.push(0);
        t.reverse()
    }
    for ((s = d.length) - (i = c.length) < 0 && (i = s, t = c, c = d, d = t), e = 0; i;) e = (d[--i] = d[i] + c[i] + e) / mi | 0, d[i] %= mi;
    for (e && (d.unshift(e), ++r), s = d.length; d[--s] == 0;) d.pop();
    return n.d = d, n.e = Ym(d, r), je ? Ne(n, a, l) : n
}, te.precision = te.sd = function(n) {
    var e, t = this;
    if (n !== void 0 && n !== !!n && n !== 1 && n !== 0) throw Error(_s + n);
    return t.d ? (e = wx(t.d), n && t.e + 1 > e && (e = t.e + 1)) : e = NaN, e
}, te.round = function() {
    var n = this,
        e = n.constructor;
    return Ne(new e(n), n.e + 1, e.rounding)
}, te.sine = te.sin = function() {
    var n, e, t = this,
        r = t.constructor;
    return t.isFinite() ? t.isZero() ? new r(t) : (n = r.precision, e = r.rounding, r.precision = n + Math.max(t.e, t.sd()) + Ue, r.rounding = 1, t = function(i, o) {
        var s, a = o.d.length;
        if (a < 3) return o.isZero() ? o : ic(i, 2, o, o);
        s = (s = 1.4 * Math.sqrt(a)) > 16 ? 16 : 0 | s, o = o.times(1 / Pm(5, s)), o = ic(i, 2, o, o);
        for (var l, d = new i(5), c = new i(16), h = new i(20); s--;) l = o.times(o), o = o.times(d.plus(l.times(c.times(l).minus(h))));
        return o
    }(r, Ex(r, t)), r.precision = n, r.rounding = e, Ne(xo > 2 ? t.neg() : t, n, e, !0)) : new r(NaN)
}, te.squareRoot = te.sqrt = function() {
    var n, e, t, r, i, o, s = this,
        a = s.d,
        l = s.e,
        d = s.s,
        c = s.constructor;
    if (d !== 1 || !a || !a[0]) return new c(!d || d < 0 && (!a || a[0]) ? NaN : a ? s : 1 / 0);
    for (je = !1, (d = Math.sqrt(+s)) == 0 || d == 1 / 0 ? (((e = On(a)).length + l) % 2 == 0 && (e += "0"), d = Math.sqrt(e), l = Hn((l + 1) / 2) - (l < 0 || l % 2), r = new c(e = d == 1 / 0 ? "5e" + l : (e = d.toExponential()).slice(0, e.indexOf("e") + 1) + l)) : r = new c(d.toString()), t = (l = c.precision) + 3;;)
        if (r = (o = r).plus(At(s, o, t + 2, 1)).times(.5), On(o.d).slice(0, t) === (e = On(r.d)).slice(0, t)) {
            if ((e = e.slice(t - 3, t + 1)) != "9999" && (i || e != "4999")) {
                +e && (+e.slice(1) || e.charAt(0) != "5") || (Ne(r, l + 1, 1), n = !r.times(r).eq(s));
                break
            }
            if (!i && (Ne(o, l + 1, 0), o.times(o).eq(s))) {
                r = o;
                break
            }
            t += 4, i = 1
        } return je = !0, Ne(r, l, c.rounding, n)
}, te.tangent = te.tan = function() {
    var n, e, t = this,
        r = t.constructor;
    return t.isFinite() ? t.isZero() ? new r(t) : (n = r.precision, e = r.rounding, r.precision = n + 10, r.rounding = 1, (t = t.sin()).s = 1, t = At(t, new r(1).minus(t.times(t)).sqrt(), n + 10, 0), r.precision = n, r.rounding = e, Ne(xo == 2 || xo == 4 ? t.neg() : t, n, e, !0)) : new r(NaN)
}, te.times = te.mul = function(n) {
    var e, t, r, i, o, s, a, l, d, c = this,
        h = c.constructor,
        f = c.d,
        g = (n = new h(n)).d;
    if (n.s *= c.s, !(f && f[0] && g && g[0])) return new h(!n.s || f && !f[0] && !g || g && !g[0] && !f ? NaN : f && g ? 0 * n.s : n.s / 0);
    for (t = Hn(c.e / Ue) + Hn(n.e / Ue), (l = f.length) < (d = g.length) && (o = f, f = g, g = o, s = l, l = d, d = s), o = [], r = s = l + d; r--;) o.push(0);
    for (r = d; --r >= 0;) {
        for (e = 0, i = l + r; i > r;) a = o[i] + g[r] * f[i - r - 1] + e, o[i--] = a % mi | 0, e = a / mi | 0;
        o[i] = (o[i] + e) % mi | 0
    }
    for (; !o[--s];) o.pop();
    return e ? ++t : o.shift(), n.d = o, n.e = Ym(o, t), je ? Ne(n, h.precision, h.rounding) : n
}, te.toBinary = function(n, e) {
    return Q_(this, 2, n, e)
}, te.toDecimalPlaces = te.toDP = function(n, e) {
    var t = this,
        r = t.constructor;
    return t = new r(t), n === void 0 ? t : (cr(n, 0, vs), e === void 0 ? e = r.rounding : cr(e, 0, 8), Ne(t, n + t.e + 1, e))
}, te.toExponential = function(n, e) {
    var t, r = this,
        i = r.constructor;
    return n === void 0 ? t = Vi(r, !0) : (cr(n, 0, vs), e === void 0 ? e = i.rounding : cr(e, 0, 8), t = Vi(r = Ne(new i(r), n + 1, e), !0, n + 1)), r.isNeg() && !r.isZero() ? "-" + t : t
}, te.toFixed = function(n, e) {
    var t, r, i = this,
        o = i.constructor;
    return n === void 0 ? t = Vi(i) : (cr(n, 0, vs), e === void 0 ? e = o.rounding : cr(e, 0, 8), t = Vi(r = Ne(new o(i), n + i.e + 1, e), !1, n + r.e + 1)), i.isNeg() && !i.isZero() ? "-" + t : t
}, te.toFraction = function(n) {
    var e, t, r, i, o, s, a, l, d, c, h, f, g = this,
        p = g.d,
        y = g.constructor;
    if (!p) return new y(g);
    if (d = t = new y(1), r = l = new y(0), s = (o = (e = new y(r)).e = wx(p) - g.e - 1) % Ue, e.d[0] = ln(10, s < 0 ? Ue + s : s), n == null) n = o > 0 ? e : d;
    else {
        if (!(a = new y(n)).isInt() || a.lt(d)) throw Error(_s + a);
        n = a.gt(e) ? o > 0 ? e : d : a
    }
    for (je = !1, a = new y(On(p)), c = y.precision, y.precision = o = p.length * Ue * 2; h = At(a, e, 0, 1, 1), (i = t.plus(h.times(r))).cmp(n) != 1;) t = r, r = i, i = d, d = l.plus(h.times(i)), l = i, i = e, e = a.minus(h.times(i)), a = i;
    return i = At(n.minus(t), r, 0, 1, 1), l = l.plus(i.times(d)), t = t.plus(i.times(r)), l.s = d.s = g.s, f = At(d, r, o, 1).minus(g).abs().cmp(At(l, t, o, 1).minus(g).abs()) < 1 ? [d, r] : [l, t], y.precision = c, je = !0, f
}, te.toHexadecimal = te.toHex = function(n, e) {
    return Q_(this, 16, n, e)
}, te.toNearest = function(n, e) {
    var t = this,
        r = t.constructor;
    if (t = new r(t), n == null) {
        if (!t.d) return t;
        n = new r(1), e = r.rounding
    } else {
        if (n = new r(n), e === void 0 ? e = r.rounding : cr(e, 0, 8), !t.d) return n.s ? t : n;
        if (!n.d) return n.s && (n.s = t.s), n
    }
    return n.d[0] ? (je = !1, t = At(t, n, 0, e, 1).times(n), je = !0, Ne(t)) : (n.s = t.s, t = n), t
}, te.toNumber = function() {
    return +this
}, te.toOctal = function(n, e) {
    return Q_(this, 8, n, e)
}, te.toPower = te.pow = function(n) {
    var e, t, r, i, o, s, a = this,
        l = a.constructor,
        d = +(n = new l(n));
    if (!(a.d && n.d && a.d[0] && n.d[0])) return new l(ln(+a, d));
    if ((a = new l(a)).eq(1)) return a;
    if (r = l.precision, o = l.rounding, n.eq(1)) return Ne(a, r, o);
    if ((e = Hn(n.e / Ue)) >= n.d.length - 1 && (t = d < 0 ? -d : d) <= 9007199254740991) return i = aU(l, a, t, r), n.s < 0 ? new l(1).div(i) : Ne(i, r, o);
    if ((s = a.s) < 0) {
        if (e < n.d.length - 1) return new l(NaN);
        if (1 & n.d[e] || (s = 1), a.e == 0 && a.d[0] == 1 && a.d.length == 1) return a.s = s, a
    }
    return (e = (t = ln(+a, d)) != 0 && isFinite(t) ? new l(t + "").e : Hn(d * (Math.log("0." + On(a.d)) / Math.LN10 + a.e + 1))) > l.maxE + 1 || e < l.minE - 1 ? new l(e > 0 ? s / 0 : 0) : (je = !1, l.rounding = a.s = 1, t = Math.min(12, (e + "").length), (i = Y_(n.times(ds(a, r + t)), r)).d && bh((i = Ne(i, r + 5, 1)).d, r, o) && (e = r + 10, +On((i = Ne(Y_(n.times(ds(a, e + t)), e), e + 5, 1)).d).slice(r + 1, r + 15) + 1 == 1e14 && (i = Ne(i, r + 1, 0))), i.s = s, je = !0, l.rounding = o, Ne(i, r, o))
}, te.toPrecision = function(n, e) {
    var t, r = this,
        i = r.constructor;
    return n === void 0 ? t = Vi(r, r.e <= i.toExpNeg || r.e >= i.toExpPos) : (cr(n, 1, vs), e === void 0 ? e = i.rounding : cr(e, 0, 8), t = Vi(r = Ne(new i(r), n, e), n <= r.e || r.e <= i.toExpNeg, n)), r.isNeg() && !r.isZero() ? "-" + t : t
}, te.toSignificantDigits = te.toSD = function(n, e) {
    var t = this.constructor;
    return n === void 0 ? (n = t.precision, e = t.rounding) : (cr(n, 1, vs), e === void 0 ? e = t.rounding : cr(e, 0, 8)), Ne(new t(this), n, e)
}, te.toString = function() {
    var n = this,
        e = n.constructor,
        t = Vi(n, n.e <= e.toExpNeg || n.e >= e.toExpPos);
    return n.isNeg() && !n.isZero() ? "-" + t : t
}, te.truncated = te.trunc = function() {
    return Ne(new this.constructor(this), this.e + 1, 1)
}, te.valueOf = te.toJSON = function() {
    var n = this,
        e = n.constructor,
        t = Vi(n, n.e <= e.toExpNeg || n.e >= e.toExpPos);
    return n.isNeg() ? "-" + t : t
};
var At = function() {
    function n(r, i, o) {
        var s, a = 0,
            l = r.length;
        for (r = r.slice(); l--;) s = r[l] * i + a, r[l] = s % o | 0, a = s / o | 0;
        return a && r.unshift(a), r
    }
    u(n, "e");

    function e(r, i, o, s) {
        var a, l;
        if (o != s) l = o > s ? 1 : -1;
        else
            for (a = l = 0; a < o; a++)
                if (r[a] != i[a]) {
                    l = r[a] > i[a] ? 1 : -1;
                    break
                } return l
    }
    u(e, "t");

    function t(r, i, o, s) {
        for (var a = 0; o--;) r[o] -= a, a = r[o] < i[o] ? 1 : 0, r[o] = a * s + r[o] - i[o];
        for (; !r[0] && r.length > 1;) r.shift()
    }
    return u(t, "n"),
        function(r, i, o, s, a, l) {
            var d, c, h, f, g, p, y, b, E, S, _, I, x, L, U, N, j, q, fe, K, ae = r.constructor,
                Z = r.s == i.s ? 1 : -1,
                ne = r.d,
                ue = i.d;
            if (!(ne && ne[0] && ue && ue[0])) return new ae(r.s && i.s && (ne ? !ue || ne[0] != ue[0] : ue) ? ne && ne[0] == 0 || !ue ? 0 * Z : Z / 0 : NaN);
            for (l ? (g = 1, c = r.e - i.e) : (l = mi, g = Ue, c = Hn(r.e / g) - Hn(i.e / g)), fe = ue.length, j = ne.length, S = (E = new ae(Z)).d = [], h = 0; ue[h] == (ne[h] || 0); h++);
            if (ue[h] > (ne[h] || 0) && c--, o == null ? (L = o = ae.precision, s = ae.rounding) : L = a ? o + (r.e - i.e) + 1 : o, L < 0) S.push(1), p = !0;
            else {
                if (L = L / g + 2 | 0, h = 0, fe == 1) {
                    for (f = 0, ue = ue[0], L++;
                        (h < j || f) && L--; h++) U = f * l + (ne[h] || 0), S[h] = U / ue | 0, f = U % ue | 0;
                    p = f || h < j
                } else {
                    for ((f = l / (ue[0] + 1) | 0) > 1 && (ue = n(ue, f, l), ne = n(ne, f, l), fe = ue.length, j = ne.length), N = fe, I = (_ = ne.slice(0, fe)).length; I < fe;) _[I++] = 0;
                    (K = ue.slice()).unshift(0), q = ue[0], ue[1] >= l / 2 && ++q;
                    do f = 0, (d = e(ue, _, fe, I)) < 0 ? (x = _[0], fe != I && (x = x * l + (_[1] || 0)), (f = x / q | 0) > 1 ? (f >= l && (f = l - 1), (d = e(y = n(ue, f, l), _, b = y.length, I = _.length)) == 1 && (f--, t(y, fe < b ? K : ue, b, l))) : (f == 0 && (d = f = 1), y = ue.slice()), (b = y.length) < I && y.unshift(0), t(_, y, I, l), d == -1 && (d = e(ue, _, fe, I = _.length)) < 1 && (f++, t(_, fe < I ? K : ue, I, l)), I = _.length) : d === 0 && (f++, _ = [0]), S[h++] = f, d && _[0] ? _[I++] = ne[N] || 0 : (_ = [ne[N]], I = 1); while ((N++ < j || _[0] !== void 0) && L--);
                    p = _[0] !== void 0
                }
                S[0] || S.shift()
            }
            if (g == 1) E.e = c, rU = p;
            else {
                for (h = 1, f = S[0]; f >= 10; f /= 10) h++;
                E.e = h + c * g - 1, Ne(E, a ? o + E.e + 1 : o, s, p)
            }
            return E
        }
}();

function Ne(n, e, t, r) {
    var i, o, s, a, l, d, c, h, f, g = n.constructor;
    e: if (e != null) {
        if (!(h = n.d)) return n;
        for (i = 1, a = h[0]; a >= 10; a /= 10) i++;
        if ((o = e - i) < 0) o += Ue, s = e, l = (c = h[f = 0]) / ln(10, i - s - 1) % 10 | 0;
        else if ((f = Math.ceil((o + 1) / Ue)) >= (a = h.length)) {
            if (!r) break e;
            for (; a++ <= f;) h.push(0);
            c = l = 0, i = 1, s = (o %= Ue) - Ue + 1
        } else {
            for (c = a = h[f], i = 1; a >= 10; a /= 10) i++;
            l = (s = (o %= Ue) - Ue + i) < 0 ? 0 : c / ln(10, i - s - 1) % 10 | 0
        }
        if (r = r || e < 0 || h[f + 1] !== void 0 || (s < 0 ? c : c % ln(10, i - s - 1)), d = t < 4 ? (l || r) && (t == 0 || t == (n.s < 0 ? 3 : 2)) : l > 5 || l == 5 && (t == 4 || r || t == 6 && (o > 0 ? s > 0 ? c / ln(10, i - s) : 0 : h[f - 1]) % 10 & 1 || t == (n.s < 0 ? 8 : 7)), e < 1 || !h[0]) return h.length = 0, d ? (e -= n.e + 1, h[0] = ln(10, (Ue - e % Ue) % Ue), n.e = -e || 0) : h[0] = n.e = 0, n;
        if (o == 0 ? (h.length = f, a = 1, f--) : (h.length = f + 1, a = ln(10, Ue - o), h[f] = s > 0 ? (c / ln(10, i - s) % ln(10, s) | 0) * a : 0), d)
            for (;;) {
                if (f == 0) {
                    for (o = 1, s = h[0]; s >= 10; s /= 10) o++;
                    for (s = h[0] += a, a = 1; s >= 10; s /= 10) a++;
                    o != a && (n.e++, h[0] == mi && (h[0] = 1));
                    break
                }
                if (h[f] += a, h[f] != mi) break;
                h[f--] = 0, a = 1
            }
        for (o = h.length; h[--o] === 0;) h.pop()
    }
    return je && (n.e > g.maxE ? (n.d = null, n.e = NaN) : n.e < g.minE && (n.e = 0, n.d = [0])), n
}
u(Ne, "Es");

function Vi(n, e, t) {
    if (!n.isFinite()) return cU(n);
    var r, i = n.e,
        o = On(n.d),
        s = o.length;
    return e ? (t && (r = t - s) > 0 ? o = o.charAt(0) + "." + o.slice(1) + fs(r) : s > 1 && (o = o.charAt(0) + "." + o.slice(1)), o = o + (n.e < 0 ? "e" : "e+") + n.e) : i < 0 ? (o = "0." + fs(-i - 1) + o, t && (r = t - s) > 0 && (o += fs(r))) : i >= s ? (o += fs(i + 1 - s), t && (r = t - i - 1) > 0 && (o = o + "." + fs(r))) : ((r = i + 1) < s && (o = o.slice(0, r) + "." + o.slice(r)), t && (r = t - s) > 0 && (i + 1 === s && (o += "."), o += fs(r))), o
}
u(Vi, "Is");

function Ym(n, e) {
    var t = n[0];
    for (e *= Ue; t >= 10; t /= 10) e++;
    return e
}
u(Ym, "As");

function _v(n, e, t) {
    if (e > K8) throw je = !0, t && (n.precision = t), Error(iU);
    return Ne(new n(Tv), e, 1, !0)
}
u(_v, "Ns");

function vi(n, e, t) {
    if (e > KS) throw Error(iU);
    return Ne(new n(Ev), e, t, !0)
}
u(vi, "Ss");

function wx(n) {
    var e = n.length - 1,
        t = e * Ue + 1;
    if (e = n[e]) {
        for (; e % 10 == 0; e /= 10) t--;
        for (e = n[0]; e >= 10; e /= 10) t++
    }
    return t
}
u(wx, "Ds");

function fs(n) {
    for (var e = ""; n--;) e += "0";
    return e
}
u(fs, "Rs");

function aU(n, e, t, r) {
    var i, o = new n(1),
        s = Math.ceil(r / Ue + 4);
    for (je = !1;;) {
        if (t % 2 && _x((o = o.times(e)).d, s) && (i = !0), (t = Hn(t / 2)) === 0) {
            t = o.d.length - 1, i && o.d[t] === 0 && ++o.d[t];
            break
        }
        _x((e = e.times(e)).d, s)
    }
    return je = !0, o
}
u(aU, "Cs");

function Tx(n) {
    return 1 & n.d[n.d.length - 1]
}
u(Tx, "xs");

function uU(n, e, t) {
    for (var r, i = new n(e[0]), o = 0; ++o < e.length;) {
        if (!(r = new n(e[o])).s) {
            i = r;
            break
        }
        i[t](r) && (i = r)
    }
    return i
}
u(uU, "Ls");

function Y_(n, e) {
    var t, r, i, o, s, a, l, d = 0,
        c = 0,
        h = 0,
        f = n.constructor,
        g = f.rounding,
        p = f.precision;
    if (!n.d || !n.d[0] || n.e > 17) return new f(n.d ? n.d[0] ? n.s < 0 ? 0 : 1 / 0 : 1 : n.s ? n.s < 0 ? 0 : n : NaN);
    for (e == null ? (je = !1, l = p) : l = e, a = new f(.03125); n.e > -2;) n = n.times(a), h += 5;
    for (l += r = Math.log(ln(2, h)) / Math.LN10 * 2 + 5 | 0, t = o = s = new f(1), f.precision = l;;) {
        if (o = Ne(o.times(n), l, 1), t = t.times(++c), On((a = s.plus(At(o, t, l, 1))).d).slice(0, l) === On(s.d).slice(0, l)) {
            for (i = h; i--;) s = Ne(s.times(s), l, 1);
            if (e != null) return f.precision = p, s;
            if (!(d < 3 && bh(s.d, l - r, g, d))) return Ne(s, f.precision = p, g, je = !0);
            f.precision = l += 10, t = o = a = new f(1), c = 0, d++
        }
        s = a
    }
}
u(Y_, "Os");

function ds(n, e) {
    var t, r, i, o, s, a, l, d, c, h, f, g = 1,
        p = n,
        y = p.d,
        b = p.constructor,
        E = b.rounding,
        S = b.precision;
    if (p.s < 0 || !y || !y[0] || !p.e && y[0] == 1 && y.length == 1) return new b(y && !y[0] ? -1 / 0 : p.s != 1 ? NaN : y ? 0 : p);
    if (e == null ? (je = !1, c = S) : c = e, b.precision = c += 10, r = (t = On(y)).charAt(0), !(Math.abs(o = p.e) < 15e14)) return d = _v(b, c + 2, S).times(o + ""), p = ds(new b(r + "." + t.slice(1)), c - 10).plus(d), b.precision = S, e == null ? Ne(p, S, E, je = !0) : p;
    for (; r < 7 && r != 1 || r == 1 && t.charAt(1) > 3;) r = (t = On((p = p.times(n)).d)).charAt(0), g++;
    for (o = p.e, r > 1 ? (p = new b("0." + t), o++) : p = new b(r + "." + t.slice(1)), h = p, l = s = p = At(p.minus(1), p.plus(1), c, 1), f = Ne(p.times(p), c, 1), i = 3;;) {
        if (s = Ne(s.times(f), c, 1), On((d = l.plus(At(s, new b(i), c, 1))).d).slice(0, c) === On(l.d).slice(0, c)) {
            if (l = l.times(2), o !== 0 && (l = l.plus(_v(b, c + 2, S).times(o + ""))), l = At(l, new b(g), c, 1), e != null) return b.precision = S, l;
            if (!bh(l.d, c - 10, E, a)) return Ne(l, b.precision = S, E, je = !0);
            b.precision = c += 10, d = s = p = At(h.minus(1), h.plus(1), c, 1), f = Ne(p.times(p), c, 1), i = a = 1
        }
        l = d, i += 2
    }
}
u(ds, "_s");

function cU(n) {
    return String(n.s * n.s / 0)
}
u(cU, "Ms");

function X_(n, e) {
    var t, r, i;
    for ((t = e.indexOf(".")) > -1 && (e = e.replace(".", "")), (r = e.search(/e/i)) > 0 ? (t < 0 && (t = r), t += +e.slice(r + 1), e = e.substring(0, r)) : t < 0 && (t = e.length), r = 0; e.charCodeAt(r) === 48; r++);
    for (i = e.length; e.charCodeAt(i - 1) === 48; --i);
    if (e = e.slice(r, i)) {
        if (i -= r, n.e = t = t - r - 1, n.d = [], r = (t + 1) % Ue, t < 0 && (r += Ue), r < i) {
            for (r && n.d.push(+e.slice(0, r)), i -= Ue; r < i;) n.d.push(+e.slice(r, r += Ue));
            e = e.slice(r), r = Ue - e.length
        } else r -= i;
        for (; r--;) e += "0";
        n.d.push(+e), je && (n.e > n.constructor.maxE ? (n.d = null, n.e = NaN) : n.e < n.constructor.minE && (n.e = 0, n.d = [0]))
    } else n.e = 0, n.d = [0];
    return n
}
u(X_, "Us");

function ic(n, e, t, r, i) {
    var o, s, a, l, d = n.precision,
        c = Math.ceil(d / Ue);
    for (je = !1, l = t.times(t), a = new n(r);;) {
        if (s = At(a.times(l), new n(e++ * e++), d, 1), a = i ? r.plus(s) : r.minus(s), r = At(s.times(l), new n(e++ * e++), d, 1), (s = a.plus(r)).d[c] !== void 0) {
            for (o = c; s.d[o] === a.d[o] && o--;);
            if (o == -1) break
        }
        o = a, a = r, r = s, s = o
    }
    return je = !0, s.d.length = c + 1, s
}
u(ic, "Fs");

function Pm(n, e) {
    for (var t = n; --e;) t *= n;
    return t
}
u(Pm, "$s");

function Ex(n, e) {
    var t, r = e.s < 0,
        i = vi(n, n.precision, 1),
        o = i.times(.5);
    if ((e = e.abs()).lte(o)) return xo = r ? 4 : 1, e;
    if ((t = e.divToInt(i)).isZero()) xo = r ? 3 : 2;
    else {
        if ((e = e.minus(t.times(i))).lte(o)) return xo = Tx(t) ? r ? 2 : 3 : r ? 4 : 1, e;
        xo = Tx(t) ? r ? 1 : 4 : r ? 3 : 2
    }
    return e.minus(i).abs()
}
u(Ex, "Ps");

function Q_(n, e, t, r) {
    var i, o, s, a, l, d, c, h, f, g = n.constructor,
        p = t !== void 0;
    if (p ? (cr(t, 1, vs), r === void 0 ? r = g.rounding : cr(r, 0, 8)) : (t = g.precision, r = g.rounding), n.isFinite()) {
        for (p ? (i = 2, e == 16 ? t = 4 * t - 3 : e == 8 && (t = 3 * t - 2)) : i = e, (s = (c = Vi(n)).indexOf(".")) >= 0 && (c = c.replace(".", ""), (f = new g(1)).e = c.length - s, f.d = Zm(Vi(f), 10, i), f.e = f.d.length), o = l = (h = Zm(c, 10, i)).length; h[--l] == 0;) h.pop();
        if (h[0]) {
            if (s < 0 ? o-- : ((n = new g(n)).d = h, n.e = o, h = (n = At(n, f, t, r, 0, i)).d, o = n.e, d = rU), s = h[t], a = i / 2, d = d || h[t + 1] !== void 0, d = r < 4 ? (s !== void 0 || d) && (r === 0 || r === (n.s < 0 ? 3 : 2)) : s > a || s === a && (r === 4 || d || r === 6 && 1 & h[t - 1] || r === (n.s < 0 ? 8 : 7)), h.length = t, d)
                for (; ++h[--t] > i - 1;) h[t] = 0, t || (++o, h.unshift(1));
            for (l = h.length; !h[l - 1]; --l);
            for (s = 0, c = ""; s < l; s++) c += qS.charAt(h[s]);
            if (p) {
                if (l > 1)
                    if (e == 16 || e == 8) {
                        for (s = e == 16 ? 4 : 3, --l; l % s; l++) c += "0";
                        for (l = (h = Zm(c, i, e)).length; !h[l - 1]; --l);
                        for (s = 1, c = "1."; s < l; s++) c += qS.charAt(h[s])
                    } else c = c.charAt(0) + "." + c.slice(1);
                c = c + (o < 0 ? "p" : "p+") + o
            } else if (o < 0) {
                for (; ++o;) c = "0" + c;
                c = "0." + c
            } else if (++o > l)
                for (o -= l; o--;) c += "0";
            else o < l && (c = c.slice(0, o) + "." + c.slice(o))
        } else c = p ? "0p+0" : "0";
        c = (e == 16 ? "0x" : e == 2 ? "0b" : e == 8 ? "0o" : "") + c
    } else c = cU(n);
    return n.s < 0 ? "-" + c : c
}
u(Q_, "Vs");

function _x(n, e) {
    if (n.length > e) return n.length = e, !0
}
u(_x, "Bs");

function J8(n) {
    return new this(n).abs()
}
u(J8, "ks");

function Z8(n) {
    return new this(n).acos()
}
u(Z8, "zs");

function Y8(n) {
    return new this(n).acosh()
}
u(Y8, "Hs");

function X8(n, e) {
    return new this(n).plus(e)
}
u(X8, "js");

function Q8(n) {
    return new this(n).asin()
}
u(Q8, "qs");

function ez(n) {
    return new this(n).asinh()
}
u(ez, "Gs");

function tz(n) {
    return new this(n).atan()
}
u(tz, "Ws");

function nz(n) {
    return new this(n).atanh()
}
u(nz, "Ks");

function rz(n, e) {
    n = new this(n), e = new this(e);
    var t, r = this.precision,
        i = this.rounding,
        o = r + 4;
    return n.s && e.s ? n.d || e.d ? !e.d || n.isZero() ? (t = e.s < 0 ? vi(this, r, i) : new this(0)).s = n.s : !n.d || e.isZero() ? (t = vi(this, o, 1).times(.5)).s = n.s : e.s < 0 ? (this.precision = o, this.rounding = 1, t = this.atan(At(n, e, o, 1)), e = vi(this, o, 1), this.precision = r, this.rounding = i, t = n.s < 0 ? t.minus(e) : t.plus(e)) : t = this.atan(At(n, e, o, 1)) : (t = vi(this, o, 1).times(e.s > 0 ? .25 : .75)).s = n.s : t = new this(NaN), t
}
u(rz, "Js");

function iz(n) {
    return new this(n).cbrt()
}
u(iz, "Ys");

function oz(n) {
    return Ne(n = new this(n), n.e + 1, 2)
}
u(oz, "Xs");

function sz(n, e, t) {
    return new this(n).clamp(e, t)
}
u(sz, "Qs");

function az(n) {
    if (!n || typeof n != "object") throw Error(zy + "Object expected");
    var e, t, r, i = n.defaults === !0,
        o = ["precision", 1, vs, "rounding", 0, 8, "toExpNeg", -gc, 0, "toExpPos", 0, gc, "maxE", 0, gc, "minE", -gc, 0, "modulo", 0, 9];
    for (e = 0; e < o.length; e += 3)
        if (t = o[e], i && (this[t] = GS[t]), (r = n[t]) !== void 0) {
            if (!(Hn(r) === r && r >= o[e + 1] && r <= o[e + 2])) throw Error(_s + t + ": " + r);
            this[t] = r
        } if (t = "crypto", i && (this[t] = GS[t]), (r = n[t]) !== void 0) {
        if (r !== !0 && r !== !1 && r !== 0 && r !== 1) throw Error(_s + t + ": " + r);
        if (r) {
            if (typeof crypto == "undefined" || !crypto || !crypto.getRandomValues && !crypto.randomBytes) throw Error(oU);
            this[t] = !0
        } else this[t] = !1
    }
    return this
}
u(az, "Zs");

function uz(n) {
    return new this(n).cos()
}
u(uz, "ea");

function cz(n) {
    return new this(n).cosh()
}
u(cz, "ta");

function lz(n, e) {
    return new this(n).div(e)
}
u(lz, "na");

function dz(n) {
    return new this(n).exp()
}
u(dz, "ra");

function hz(n) {
    return Ne(n = new this(n), n.e + 1, 3)
}
u(hz, "ia");

function fz() {
    var n, e, t = new this(0);
    for (je = !1, n = 0; n < arguments.length;)
        if ((e = new this(arguments[n++])).d) t.d && (t = t.plus(e.times(e)));
        else {
            if (e.s) return je = !0, new this(1 / 0);
            t = e
        } return je = !0, t.sqrt()
}
u(fz, "sa");

function Sx(n) {
    return n instanceof Ua || n && n.toStringTag === sU || !1
}
u(Sx, "aa");

function gz(n) {
    return new this(n).ln()
}
u(gz, "oa");

function pz(n, e) {
    return new this(n).log(e)
}
u(pz, "la");

function mz(n) {
    return new this(n).log(2)
}
u(mz, "ua");

function vz(n) {
    return new this(n).log(10)
}
u(vz, "ca");

function yz() {
    return uU(this, arguments, "lt")
}
u(yz, "da");

function bz() {
    return uU(this, arguments, "gt")
}
u(bz, "ha");

function wz(n, e) {
    return new this(n).mod(e)
}
u(wz, "ga");

function Tz(n, e) {
    return new this(n).mul(e)
}
u(Tz, "pa");

function Ez(n, e) {
    return new this(n).pow(e)
}
u(Ez, "fa");

function _z(n) {
    var e, t, r, i, o = 0,
        s = new this(1),
        a = [];
    if (n === void 0 ? n = this.precision : cr(n, 1, vs), r = Math.ceil(n / Ue), this.crypto)
        if (crypto.getRandomValues)
            for (e = crypto.getRandomValues(new Uint32Array(r)); o < r;)(i = e[o]) >= 429e7 ? e[o] = crypto.getRandomValues(new Uint32Array(1))[0] : a[o++] = i % 1e7;
        else {
            if (!crypto.randomBytes) throw Error(oU);
            for (e = crypto.randomBytes(r *= 4); o < r;)(i = e[o] + (e[o + 1] << 8) + (e[o + 2] << 16) + ((127 & e[o + 3]) << 24)) >= 214e7 ? crypto.randomBytes(4).copy(e, o) : (a.push(i % 1e7), o += 4);
            o = r / 4
        }
    else
        for (; o < r;) a[o++] = 1e7 * Math.random() | 0;
    for (r = a[--o], n %= Ue, r && n && (i = ln(10, Ue - n), a[o] = (r / i | 0) * i); a[o] === 0; o--) a.pop();
    if (o < 0) t = 0, a = [0];
    else {
        for (t = -1; a[0] === 0; t -= Ue) a.shift();
        for (r = 1, i = a[0]; i >= 10; i /= 10) r++;
        r < Ue && (t -= Ue - r)
    }
    return s.e = t, s.d = a, s
}
u(_z, "ma");

function Sz(n) {
    return Ne(n = new this(n), n.e + 1, this.rounding)
}
u(Sz, "va");

function Iz(n) {
    return (n = new this(n)).d ? n.d[0] ? n.s : 0 * n.s : n.s || NaN
}
u(Iz, "ya");

function Az(n) {
    return new this(n).sin()
}
u(Az, "ba");

function Cz(n) {
    return new this(n).sinh()
}
u(Cz, "Ta");

function Rz(n) {
    return new this(n).sqrt()
}
u(Rz, "wa");

function Oz(n, e) {
    return new this(n).sub(e)
}
u(Oz, "Ea");

function Dz() {
    var n = 0,
        e = arguments,
        t = new this(e[n]);
    for (je = !1; t.s && ++n < e.length;) t = t.plus(e[n]);
    return je = !0, Ne(t, this.precision, this.rounding)
}
u(Dz, "Ia");

function Nz(n) {
    return new this(n).tan()
}
u(Nz, "Aa");

function Lz(n) {
    return new this(n).tanh()
}
u(Lz, "Na");

function xz(n) {
    return Ne(n = new this(n), n.e + 1, 1)
}
u(xz, "Sa");
te[Symbol.for("nodejs.util.inspect.custom")] = te.toString, te[Symbol.toStringTag] = "Decimal";
var Ua = te.constructor = u(function n(e) {
    var t, r, i;

    function o(s) {
        var a, l, d, c = this;
        if (!(c instanceof o)) return new o(s);
        if (c.constructor = o, Sx(s)) return c.s = s.s, void(je ? !s.d || s.e > o.maxE ? (c.e = NaN, c.d = null) : s.e < o.minE ? (c.e = 0, c.d = [0]) : (c.e = s.e, c.d = s.d.slice()) : (c.e = s.e, c.d = s.d ? s.d.slice() : s.d));
        if ((d = typeof s) == "number") {
            if (s === 0) return c.s = 1 / s < 0 ? -1 : 1, c.e = 0, void(c.d = [0]);
            if (s < 0 ? (s = -s, c.s = -1) : c.s = 1, s === ~~s && s < 1e7) {
                for (a = 0, l = s; l >= 10; l /= 10) a++;
                return void(je ? a > o.maxE ? (c.e = NaN, c.d = null) : a < o.minE ? (c.e = 0, c.d = [0]) : (c.e = a, c.d = [s]) : (c.e = a, c.d = [s]))
            }
            return 0 * s != 0 ? (s || (c.s = NaN), c.e = NaN, void(c.d = null)) : X_(c, s.toString())
        }
        if (d !== "string") throw Error(_s + s);
        return (l = s.charCodeAt(0)) === 45 ? (s = s.slice(1), c.s = -1) : (l === 43 && (s = s.slice(1)), c.s = 1), bx.test(s) ? X_(c, s) : function(h, f) {
            var g, p, y, b, E, S, _, I, x;
            if (f.indexOf("_") > -1) {
                if (f = f.replace(/(\d)_(?=\d)/g, "$1"), bx.test(f)) return X_(h, f)
            } else if (f === "Infinity" || f === "NaN") return +f || (h.s = NaN), h.e = NaN, h.d = null, h;
            if (q8.test(f)) g = 16, f = f.toLowerCase();
            else if (W8.test(f)) g = 2;
            else {
                if (!G8.test(f)) throw Error(_s + f);
                g = 8
            }
            for ((b = f.search(/p/i)) > 0 ? (_ = +f.slice(b + 1), f = f.substring(2, b)) : f = f.slice(2), E = (b = f.indexOf(".")) >= 0, p = h.constructor, E && (b = (S = (f = f.replace(".", "")).length) - b, y = aU(p, new p(g), b, 2 * b)), b = x = (I = Zm(f, g, mi)).length - 1; I[b] === 0; --b) I.pop();
            return b < 0 ? new p(0 * h.s) : (h.e = Ym(I, x), h.d = I, je = !1, E && (h = At(h, y, 4 * S)), _ && (h = h.times(Math.abs(_) < 54 ? ln(2, _) : Ua.pow(2, _))), je = !0, h)
        }(c, s)
    }
    if (u(o, "s"), o.prototype = te, o.ROUND_UP = 0, o.ROUND_DOWN = 1, o.ROUND_CEIL = 2, o.ROUND_FLOOR = 3, o.ROUND_HALF_UP = 4, o.ROUND_HALF_DOWN = 5, o.ROUND_HALF_EVEN = 6, o.ROUND_HALF_CEIL = 7, o.ROUND_HALF_FLOOR = 8, o.EUCLID = 9, o.config = o.set = az, o.clone = n, o.isDecimal = Sx, o.abs = J8, o.acos = Z8, o.acosh = Y8, o.add = X8, o.asin = Q8, o.asinh = ez, o.atan = tz, o.atanh = nz, o.atan2 = rz, o.cbrt = iz, o.ceil = oz, o.clamp = sz, o.cos = uz, o.cosh = cz, o.div = lz, o.exp = dz, o.floor = hz, o.hypot = fz, o.ln = gz, o.log = pz, o.log10 = vz, o.log2 = mz, o.max = yz, o.min = bz, o.mod = wz, o.mul = Tz, o.pow = Ez, o.random = _z, o.round = Sz, o.sign = Iz, o.sin = Az, o.sinh = Cz, o.sqrt = Rz, o.sub = Oz, o.sum = Dz, o.tan = Nz, o.tanh = Lz, o.trunc = xz, e === void 0 && (e = {}), e && e.defaults !== !0)
        for (i = ["precision", "rounding", "toExpNeg", "toExpPos", "maxE", "minE", "modulo", "crypto"], t = 0; t < i.length;) e.hasOwnProperty(r = i[t++]) || (e[r] = this[r]);
    return o.config(e), o
}, "e")(GS);
Tv = new Ua(Tv), Ev = new Ua(Ev);
var Pz = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};

function lU(n) {
    return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n
}
u(lU, "Ca");
var eS, Ix, Ax = {
    exports: {}
};
eS = Ax,
    function(n) {
        function e(t) {
            return t.prototype.toFormat = function(r, i, o) {
                if (!this.e && this.e !== 0) return this.toString();
                var s, a, l, d, c, h, f, g, p, y, b, E, S, _, I, x = this.format || {},
                    L = this.constructor.format || {};
                if (r != c ? typeof r == "object" ? (o = r, r = c) : i != c ? typeof i == "object" ? (o = i, i = c) : typeof o != "object" && (o = {}) : o = {} : o = {}, g = (s = this.toFixed(r, i).split("."))[0], p = s[1], h = (f = this.s < 0 ? g.slice(1) : g).length, (y = o.decimalSeparator) == c && (y = x.decimalSeparator) == c && (y = L.decimalSeparator) == c && (y = "."), (b = o.groupSeparator) == c && (b = x.groupSeparator) == c && (b = L.groupSeparator), b && ((E = o.groupSize) == c && (E = x.groupSize) == c && (E = L.groupSize) == c && (E = 0), (S = o.secondaryGroupSize) == c && (S = x.secondaryGroupSize) == c && (S = L.secondaryGroupSize) == c && (S = 0), S ? (a = +S, h -= l = +E) : (a = +E, l = +S), a > 0 && h > 0)) {
                    for (d = h % a || a, g = f.substr(0, d); d < h; d += a) g += b + f.substr(d, a);
                    l > 0 && (g += b + f.slice(d)), this.s < 0 && (g = "-" + g)
                }
                return p ? ((_ = o.fractionGroupSeparator) == c && (_ = x.fractionGroupSeparator) == c && (_ = L.fractionGroupSeparator), _ && ((I = o.fractionGroupSize) == c && (I = x.fractionGroupSize) == c && (I = L.fractionGroupSize) == c && (I = 0), (I = +I) && (p = p.replace(new RegExp("\\d{" + I + "}\\B", "g"), "$&" + _))), g + y + p) : g
            }, t.format = {
                decimalSeparator: ".",
                groupSeparator: ",",
                groupSize: 3,
                secondaryGroupSize: 0,
                fractionGroupSeparator: "",
                fractionGroupSize: 0
            }, t
        }
        u(e, "t"), eS.exports ? eS.exports = e : (n || (n = typeof self != "undefined" && self && self.self == self ? self : window), noConflict = n.toFormat, e.noConflict = function() {
            return n.toFormat = noConflict, e
        }, n.toFormat = e)
    }(Pz), lU(Ax.exports)(Ua),
    function(n) {
        n[n.roundUp = 0] = "roundUp", n[n.roundDown = 1] = "roundDown", n[n.roundCeil = 2] = "roundCeil", n[n.roundFloor = 3] = "roundFloor", n[n.roundHalfUp = 4] = "roundHalfUp", n[n.roundHalfDown = 5] = "roundHalfDown", n[n.roundHalfEven = 6] = "roundHalfEven", n[n.roundHalfCeil = 7] = "roundHalfCeil", n[n.roundHalfFloor = 8] = "roundHalfFloor"
    }(Ix || (Ix = {}));
var Xm = Ua.config({
        precision: 30,
        toExpNeg: -1024,
        toExpPos: 1024,
        rounding: Ua.ROUND_HALF_EVEN
    }),
    ut = class ut {
        constructor(e) {
            this.add = this.plus, this.sub = this.minus, this.eq = this.equals, this.lt = this.lessThan, this.lte = this.lessThanOrEqualTo, this.gt = this.greaterThan, this.gte = this.greaterThanOrEqualTo;
            let t = ut.unwrapInputValue(e);
            this.internalValue = new Xm(t)
        }
        static unwrapInputValue(e) {
            return typeof e == "string" || typeof e == "number" ? e : "internalValue" in e ? e.internalValue : e
        }
        static max(e, t) {
            let [r, i] = [ut.unwrapInputValue(e), ut.unwrapInputValue(t)], o = Xm.max(r, i);
            return new ut(o)
        }
        static min(e, t) {
            let [r, i] = [ut.unwrapInputValue(e), ut.unwrapInputValue(t)], o = Xm.min(r, i);
            return new ut(o)
        }
        abs() {
            let e = this.internalValue.abs();
            return new ut(e)
        }
        neg() {
            let e = this.internalValue.neg();
            return new ut(e)
        }
        sqrt() {
            let e = this.internalValue.sqrt();
            return new ut(e)
        }
        trunc() {
            let e = this.internalValue.trunc();
            return new ut(e)
        }
        round() {
            let e = this.internalValue.round();
            return new ut(e)
        }
        isNaN() {
            return this.internalValue.isNaN()
        }
        isInteger() {
            return this.internalValue.isInteger()
        }
        decimalPlaces() {
            return this.internalValue.decimalPlaces()
        }
        plus(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.plus(t);
            return new ut(r)
        }
        minus(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.minus(t);
            return new ut(r)
        }
        times(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.times(t);
            return new ut(r)
        }
        div(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.div(t);
            return new ut(r)
        }
        pow(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.pow(t);
            return new ut(r)
        }
        mod(e) {
            let t = ut.unwrapInputValue(e),
                r = this.internalValue.mod(t);
            return new ut(r)
        }
        equals(e) {
            let t = ut.unwrapInputValue(e);
            return this.internalValue.equals(t)
        }
        lessThan(e) {
            let t = ut.unwrapInputValue(e);
            return this.internalValue.lessThan(t)
        }
        lessThanOrEqualTo(e) {
            let t = ut.unwrapInputValue(e);
            return this.internalValue.lessThanOrEqualTo(t)
        }
        greaterThan(e) {
            let t = ut.unwrapInputValue(e);
            return this.internalValue.greaterThan(t)
        }
        greaterThanOrEqualTo(e) {
            let t = ut.unwrapInputValue(e);
            return this.internalValue.greaterThanOrEqualTo(t)
        }
        toString() {
            return this.internalValue.toString()
        }
        toNumber() {
            return this.internalValue.toNumber()
        }
        valueOf() {
            return this.internalValue.valueOf()
        }
        toFixed(e) {
            return this.internalValue.toFixed(e)
        }
        toFormat() {
            return this.internalValue.toFormat(...arguments)
        }
        toDecimalPlaces(e) {
            let t = this.internalValue.toDecimalPlaces(e);
            return new ut(t)
        }
    };
u(ut, "Ma");
var He = ut;
He.rounding = Xm.rounding, He.defaultValue = new He(0);
var Cx = {};

function Rx(n, e) {
    let t = Cx[n];
    if (t !== void 0) return t;
    let r = n.replace(new RegExp("[" + e.join("") + "]", "gi"), "").substr(0, 1),
        i = [],
        o;
    for (o = 0; o < e.length; o++) i.push({
        index: n.toLowerCase().indexOf(e[o]),
        character: e[o],
        length: n.replace(new RegExp("[^" + e[o] + "]", "gi"), "").length
    });
    i.sort((a, l) => a.index < l.index ? -1 : 1);
    let s = {
        format: n,
        separator: r,
        parts: {},
        regExp: "^"
    };
    for (o = 0; o < i.length; o++) {
        let a = "";
        switch (i[o].character.toLowerCase()) {
            case "h":
            case "m":
            case "d":
                a = "1,2";
                break;
            case "s":
                s.regExp += "(?" + r, a = "1,2";
                break;
            default:
                a = i[o].length
        }
        o > 0 && (s.regExp += "\\" + r), s.regExp += "([0-9]{" + a + "})" + (i[o].character === "s" ? ")?" : ""), s.parts[i[o].character + "Index"] = o, s.parts[i[o].character + "Format"] = n.slice(i[o].index, i[o].index + i[o].length)
    }
    return s.regExp += "$", Cx[n] = s, s
}
u(Rx, "Fa");
var Cr = class Cr {
    static getDayName(e) {
        return Cr.DayNames[e]
    }
    static getShortDayName(e) {
        return Cr.DayNames[e].slice(0, 3)
    }
    static getMonthName(e) {
        return Cr.MonthNames[e - 1]
    }
    static getShortMonthName(e) {
        return Cr.MonthNames[e - 1].slice(0, 3)
    }
    static get12HourNotation(e) {
        return e < 12 ? "AM" : "PM"
    }
    static getTimezoneInformationFull(e) {
        return e = -e, Cr.getTimezoneSignal(e) + Cr.padLeadingZeros(Math.floor(e / 60).toString(), 2) + ":" + Cr.padLeadingZeros(Math.floor(e % 60).toString(), 2)
    }
    static getTimezoneInformationHoursFull(e) {
        return e = -e, Cr.getTimezoneSignal(e) + Cr.padLeadingZeros(Math.floor(e / 60).toString(), 2)
    }
    static getTimezoneInformationHoursShort(e) {
        return e = -e, Cr.getTimezoneSignal(e) + Math.floor(e / 60)
    }
    static getTimezoneSignal(e) {
        return e < 0 ? "-" : "+"
    }
    static padLeadingZeros(e, t) {
        let r = e || "";
        for (; r.length < t;) r = "0" + r;
        return r
    }
    static removeTrailingZeros(e) {
        return (e || "").replace(/0+$/gm, "")
    }
    constructor(e, t) {
        let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : " ",
            i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "";
        this.dateFmt = function(o) {
            return Rx(o, ["y", "m", "d"])
        }(e), this.timeFmt = function(o) {
            return Rx(o, ["h", "m", "s"])
        }(t), this.dateTimeSep = r, this.tzInformation = i
    }
    get dateFormat() {
        return this.dateFmt.format
    }
    get timeFormat() {
        return this.timeFmt.format
    }
    get dateTimeFormat() {
        return this.dateFmt.format + this.dateTimeSeparator + this.timeFmt.format
    }
    getRegExpForDate() {
        return new RegExp(this.dateFmt.regExp, "i")
    }
    get yearIndexForDate() {
        return this.dateFmt.parts.yIndex
    }
    get monthIndexForDate() {
        return this.dateFmt.parts.mIndex
    }
    get dayIndexForDate() {
        return this.dateFmt.parts.dIndex
    }
    get yearFormatForDate() {
        return this.dateFmt.parts.yFormat
    }
    get monthFormatForDate() {
        return this.dateFmt.parts.mFormat
    }
    get dayFormatForDate() {
        return this.dateFmt.parts.dFormat
    }
    get dateSeparator() {
        return this.dateFmt.separator
    }
    getRegExpForTime() {
        return new RegExp(this.timeFmt.regExp, "i")
    }
    get hoursIndexForTime() {
        return this.timeFmt.parts.hIndex
    }
    get minutesIndexForTime() {
        return this.timeFmt.parts.mIndex
    }
    get secondsIndexForTime() {
        return this.timeFmt.parts.sIndex
    }
    get timeSeparator() {
        return this.timeFmt.separator
    }
    get dateTimeSeparator() {
        return this.dateTimeSep
    }
    getRegExpForDateTime() {
        return new RegExp(this.dateFmt.regExp.substring(0, this.dateFmt.regExp.length - 1) + this.dateTimeSeparator + this.timeFmt.regExp.substring(1, this.timeFmt.regExp.length - 1) + this.tzInformation + "$", "i")
    }
    get yearIndexForDateTime() {
        return this.dateFmt.parts.yIndex
    }
    get monthIndexForDateTime() {
        return this.dateFmt.parts.mIndex
    }
    get dayIndexForDateTime() {
        return this.dateFmt.parts.dIndex
    }
    get hoursIndexForDateTime() {
        return this.timeFmt.parts.hIndex + 3
    }
    get hoursFormatForTime() {
        return this.timeFmt.parts.hFormat
    }
    get minutesFormatForTime() {
        return this.timeFmt.parts.mFormat
    }
    get secondsFormatForTime() {
        return this.timeFmt.parts.sFormat
    }
    get minutesIndexForDateTime() {
        return this.timeFmt.parts.mIndex + 3
    }
    get secondsIndexForDateTime() {
        return this.timeFmt.parts.sIndex + 3
    }
};
u(Cr, "$a");
var yt = Cr;
yt.DayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], yt.MonthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
var JI = class JI {
    constructor(e, t) {
        this.decimalSep = e, this.groupSep = t, this.generateFormatRegExps(e, t)
    }
    generateFormatRegExps(e, t) {
        let r = "\\" + e,
            i = "(([0-9]{1,3}(" + (t ? "\\" + t : "") + "[0-9]{3})*)|([0-9]+))",
            o = "[0-9]+";
        this.integerFmtRegExp = "^[-]?" + i + "$", this.decimalFmtRegExp = "^[-]?((" + i + "(" + r + "(" + o + ")?)?)|((" + i + ")?" + r + o + "))$"
    }
    get decimalSeparator() {
        return this.decimalSep
    }
    get groupSeparator() {
        return this.groupSep
    }
    getRegExpForInteger() {
        return new RegExp(this.integerFmtRegExp, "i")
    }
    getRegExpForDecimal() {
        return new RegExp(this.decimalFmtRegExp, "i")
    }
    getRegExpForJSNumber() {
        return new RegExp("^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$", "i")
    }
};
u(JI, "Pa");
var Sv = JI,
    ZI = class ZI {
        constructor(e, t) {
            this.defaultDateTimeFormats = [new yt("yyyy-MM-dd", "HH:mm:ss"), new yt("yyyy-MM-dd", "HH:mm:ss"), new yt("yyyy/MM/dd", "HH:mm:ss"), new yt("yyyy.MM.dd", "HH:mm:ss")], this.defaultNumberFmt = t, this.currentNumberFmt = t, this.defaultDateTimeFormats[0] = e
        }
        get defaultDateTimeFormat() {
            return this.defaultDateTimeFormats[0]
        }
        get dateTimeFormats() {
            return this.defaultDateTimeFormats
        }
        set dateTimeFormat(e) {
            this.defaultDateTimeFormats[0] = e
        }
        get defaultNumberFormat() {
            return this.defaultNumberFmt
        }
        get numberFormat() {
            return this.currentNumberFmt
        }
        set numberFormat(e) {
            this.currentNumberFmt = e
        }
    };
u(ZI, "Va");
var Iv = ZI,
    kz = Object.freeze({
        __proto__: null,
        ApplicationFormatInfo: Iv,
        DateTimeFormatInfo: yt,
        NumberFormatInfo: Sv
    });

function ls(n) {
    let e = n.length,
        t = new Array(e);
    for (; e-- > 0;) t[e] = n[e];
    return t
}
u(ls, "ka");

function dU(n) {
    var i;
    let e = Object.keys(n);

    function t(o) {
        e.forEach(s => {
            this[s] = o[s]
        })
    }
    u(t, "n");
    let r = (i = class {
        constructor(s) {
            this._ = s != null ? s : n
        }
        get(s) {
            return this._[s]
        }
        set(s, a) {
            let l = new t(this._);
            return l[s] = a, new r(l)
        }
        toJS() {
            let s = {};
            return e.forEach(a => {
                s[a] = this._[a]
            }), s
        }
    }, u(i, "r"), i);
    return r
}
u(dU, "za");
var oc = 128,
    ur = class ur {
        constructor(e, t) {
            if (t !== void 0) this._values = e, this._lengths = t;
            else if (e !== void 0) {
                let r = ur.fromJS(e);
                this._values = r._values, this._lengths = r._lengths
            } else this._values = [], this._lengths = []
        }
        clear() {
            return new ur
        }
        clone() {
            return this
        }
        count() {
            let e = 0,
                t = this._lengths.length;
            for (; t-- > 0;) e += this._lengths[t];
            return e
        }
        isEmpty() {
            return this._lengths.length === 0
        }
        get(e) {
            let t = 0,
                r = e,
                i = this._lengths.length;
            for (; t < i && e >= 0;) {
                if (r < this._lengths[t]) return this._values[t][r];
                r -= this._lengths[t], t++
            }
        }
        set(e, t) {
            let r = 0,
                i = e,
                o = ls(this._values),
                s = this._lengths,
                a = s.length;
            for (; r < a && e >= 0;) {
                if (i < this._lengths[r]) return o[r] = ls(o[r]), o[r][i] = t, new ur(o, s);
                i -= s[r], r++
            }
        }
        push(e) {
            let t, r, i = this._values.length - 1;
            i < 0 ? (i = 0, t = [
                []
            ], r = [0]) : (t = ls(this._values), r = ls(this._lengths));
            let o = t[i];
            if (o.length < oc) {
                let s = o.length,
                    a = new Array(s + 1),
                    l = s;
                for (; l-- > 0;) a[l] = o[l];
                a[s] = e, t[i] = a, r[i]++
            } else {
                let s = [e];
                t.push(s), r.push(1)
            }
            return new ur(t, r)
        }
        insert(e, t) {
            let r = 0,
                i = e,
                o = ls(this._values),
                s = ls(this._lengths),
                a = s.length;
            for (; r < a && i >= 0;) {
                if (i < s[r]) {
                    if (s[r] === oc) {
                        let p = oc - 64;
                        s.splice(r, 1, 64, p);
                        let y = new Array(64),
                            b = new Array(p);
                        for (let E = 0; E < 64; E++) y[E] = o[r][E];
                        for (let E = 0, S = 64; E < p;) b[E++] = o[r][S++];
                        o.splice(r, 1, y, b), a++;
                        continue
                    }
                    let l = 0,
                        d = s[r],
                        c = new Array(d + 1),
                        h = o[r];
                    for (; l < i; l++) c[l] = h[l];
                    c[i] = t;
                    let f = l + 1;
                    for (; l < d;) c[f++] = h[l++];
                    return s[r]++, o[r] = c, new ur(o, s)
                }
                i -= s[r], r++
            }
            return s.push(1), o.push([t]), new ur(o, s)
        }
        remove(e) {
            let t = 0,
                r = e,
                i = ls(this._lengths),
                o = ls(this._values),
                s = i.length;
            for (; t < s && r >= 0;) {
                if (r < i[t]) {
                    let a = --i[t],
                        l = new Array(a),
                        d = 0,
                        c = 0;
                    for (; d < a;) d === r && c++, l[d++] = o[t][c++];
                    return o[t] = l, i[t] === 0 && (i.splice(t, 1), o.splice(t, 1)), new ur(o, i)
                }
                r -= i[t], t++
            }
        }
        reduce(e, t) {
            for (let r = 0; r < this._values.length; r++) {
                let i = this._values[r];
                for (let o = 0; o < i.length; o++) t = e(t, i[o])
            }
            return t
        }
        map(e) {
            let t = new Array(this.count()),
                r = 0;
            for (let i = 0; i < this._values.length; i++) {
                let o = this._values[i];
                for (let s = 0; s < o.length; s++) t[r] = e(o[s], r), r++
            }
            return t
        }
        pushAll(e) {
            if (e.length === 0) return this;
            let t = new ur(e),
                r = this._values.concat(t._values),
                i = this._lengths.concat(t._lengths);
            return new ur(r, i)
        }
        forEach(e) {
            for (let t = 0; t < this._values.length; t++) {
                let r = this._values[t];
                for (let i = 0; i < r.length; i++) e(r[i])
            }
        }
        addFromOther(e) {
            if (e.count() === 0) return this;
            if (this._values.length === 0) return e;
            let t = new Array(this._lengths.length + e._lengths.length),
                r = new Array(this._values.length + e._values.length),
                i = 0,
                o = 0;
            for (; i < this._values.length;) r[i] = this._values[i], t[i] = this._lengths[i], i++;
            for (; o < e._values.length;) r[i] = e._values[o], t[i] = e._lengths[o], i++, o++;
            return new ur(r, t)
        }
        static fromJS(e) {
            let t = 0 | Math.ceil(e.length / oc),
                r = new Array(t),
                i = new Array(t),
                o = 0,
                s = 0;
            for (let a = 0; a < t; a++) {
                s = e.length - o;
                let l = s > oc ? oc : s;
                i[a] = l, r[a] = new Array(l);
                for (let d = 0; d < l; d++) r[a][d] = e[o + d];
                o += l
            }
            return new ur(r, i)
        }
    };
u(ur, "ja");
var Do = ur,
    Uz = Object.freeze({
        __proto__: null,
        ImmutableList: Do,
        defineRecordClass: dU
    }),
    Mz = xt,
    Hr = null;
try {
    Hr = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports
} catch (n) {}

function xt(n, e, t) {
    this.low = 0 | n, this.high = 0 | e, this.unsigned = !!t
}
u(xt, "Ka");

function sr(n) {
    return (n && n.__isLong__) === !0
}
u(sr, "Ja");
xt.prototype.__isLong__, Object.defineProperty(xt.prototype, "__isLong__", {
    value: !0
}), xt.isLong = sr;
var Ox = {},
    Dx = {};

function Fa(n, e) {
    var t, r, i;
    return e ? (i = 0 <= (n >>>= 0) && n < 256) && (r = Dx[n]) ? r : (t = Ft(n, (0 | n) < 0 ? -1 : 0, !0), i && (Dx[n] = t), t) : (i = -128 <= (n |= 0) && n < 128) && (r = Ox[n]) ? r : (t = Ft(n, n < 0 ? -1 : 0, !1), i && (Ox[n] = t), t)
}
u(Fa, "Qa");

function Gr(n, e) {
    if (isNaN(n)) return e ? Aa : Wr;
    if (e) {
        if (n < 0) return Aa;
        if (n >= hU) return pU
    } else {
        if (n <= -Nx) return ar;
        if (n + 1 >= Nx) return gU
    }
    return n < 0 ? Gr(-n, e).neg() : Ft(n % ul | 0, n / ul | 0, e)
}
u(Gr, "Za");

function Ft(n, e, t) {
    return new xt(n, e, t)
}
u(Ft, "eo");
xt.fromInt = Fa, xt.fromNumber = Gr, xt.fromBits = Ft;
var Av = Math.pow;

function TI(n, e, t) {
    if (n.length === 0) throw Error("empty string");
    if (n === "NaN" || n === "Infinity" || n === "+Infinity" || n === "-Infinity") return Wr;
    if (typeof e == "number" ? (t = e, e = !1) : e = !!e, (t = t || 10) < 2 || 36 < t) throw RangeError("radix");
    var r;
    if ((r = n.indexOf("-")) > 0) throw Error("interior hyphen");
    if (r === 0) return TI(n.substring(1), e, t).neg();
    for (var i = Gr(Av(t, 8)), o = Wr, s = 0; s < n.length; s += 8) {
        var a = Math.min(8, n.length - s),
            l = parseInt(n.substring(s, s + a), t);
        if (a < 8) {
            var d = Gr(Av(t, a));
            o = o.mul(d).add(Gr(l))
        } else o = (o = o.mul(i)).add(Gr(l))
    }
    return o.unsigned = e, o
}
u(TI, "no");

function hi(n, e) {
    return typeof n == "number" ? Gr(n, e) : typeof n == "string" ? TI(n, e) : Ft(n.low, n.high, typeof e == "boolean" ? e : n.unsigned)
}
u(hi, "ro");
xt.fromString = TI, xt.fromValue = hi;
var ul = 4294967296,
    hU = ul * ul,
    Nx = hU / 2,
    Lx = Fa(1 << 24),
    Wr = Fa(0);
xt.ZERO = Wr;
var Aa = Fa(0, !0);
xt.UZERO = Aa;
var dc = Fa(1);
xt.ONE = dc;
var fU = Fa(1, !0);
xt.UONE = fU;
var JS = Fa(-1);
xt.NEG_ONE = JS;
var gU = Ft(-1, 2147483647, !1);
xt.MAX_VALUE = gU;
var pU = Ft(-1, -1, !0);
xt.MAX_UNSIGNED_VALUE = pU;
var ar = Ft(0, -2147483648, !1);
xt.MIN_VALUE = ar;
var ye = xt.prototype;
ye.toInt = function() {
    return this.unsigned ? this.low >>> 0 : this.low
}, ye.toNumber = function() {
    return this.unsigned ? (this.high >>> 0) * ul + (this.low >>> 0) : this.high * ul + (this.low >>> 0)
}, ye.toString = function(n) {
    if ((n = n || 10) < 2 || 36 < n) throw RangeError("radix");
    if (this.isZero()) return "0";
    if (this.isNegative()) {
        if (this.eq(ar)) {
            var e = Gr(n),
                t = this.div(e),
                r = t.mul(e).sub(this);
            return t.toString(n) + r.toInt().toString(n)
        }
        return "-" + this.neg().toString(n)
    }
    for (var i = Gr(Av(n, 6), this.unsigned), o = this, s = "";;) {
        var a = o.div(i),
            l = (o.sub(a.mul(i)).toInt() >>> 0).toString(n);
        if ((o = a).isZero()) return l + s;
        for (; l.length < 6;) l = "0" + l;
        s = "" + l + s
    }
}, ye.getHighBits = function() {
    return this.high
}, ye.getHighBitsUnsigned = function() {
    return this.high >>> 0
}, ye.getLowBits = function() {
    return this.low
}, ye.getLowBitsUnsigned = function() {
    return this.low >>> 0
}, ye.getNumBitsAbs = function() {
    if (this.isNegative()) return this.eq(ar) ? 64 : this.neg().getNumBitsAbs();
    for (var n = this.high != 0 ? this.high : this.low, e = 31; e > 0 && !(n & 1 << e); e--);
    return this.high != 0 ? e + 33 : e + 1
}, ye.isZero = function() {
    return this.high === 0 && this.low === 0
}, ye.eqz = ye.isZero, ye.isNegative = function() {
    return !this.unsigned && this.high < 0
}, ye.isPositive = function() {
    return this.unsigned || this.high >= 0
}, ye.isOdd = function() {
    return !(1 & ~this.low)
}, ye.isEven = function() {
    return !(1 & this.low)
}, ye.equals = function(n) {
    return sr(n) || (n = hi(n)), (this.unsigned === n.unsigned || this.high >>> 31 != 1 || n.high >>> 31 != 1) && this.high === n.high && this.low === n.low
}, ye.eq = ye.equals, ye.notEquals = function(n) {
    return !this.eq(n)
}, ye.neq = ye.notEquals, ye.ne = ye.notEquals, ye.lessThan = function(n) {
    return this.comp(n) < 0
}, ye.lt = ye.lessThan, ye.lessThanOrEqual = function(n) {
    return this.comp(n) <= 0
}, ye.lte = ye.lessThanOrEqual, ye.le = ye.lessThanOrEqual, ye.greaterThan = function(n) {
    return this.comp(n) > 0
}, ye.gt = ye.greaterThan, ye.greaterThanOrEqual = function(n) {
    return this.comp(n) >= 0
}, ye.gte = ye.greaterThanOrEqual, ye.ge = ye.greaterThanOrEqual, ye.compare = function(n) {
    if (sr(n) || (n = hi(n)), this.eq(n)) return 0;
    var e = this.isNegative(),
        t = n.isNegative();
    return e && !t ? -1 : !e && t ? 1 : this.unsigned ? n.high >>> 0 > this.high >>> 0 || n.high === this.high && n.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(n).isNegative() ? -1 : 1
}, ye.comp = ye.compare, ye.negate = function() {
    return !this.unsigned && this.eq(ar) ? ar : this.not().add(dc)
}, ye.neg = ye.negate, ye.add = function(n) {
    sr(n) || (n = hi(n));
    var e = this.high >>> 16,
        t = 65535 & this.high,
        r = this.low >>> 16,
        i = 65535 & this.low,
        o = n.high >>> 16,
        s = 65535 & n.high,
        a = n.low >>> 16,
        l = 0,
        d = 0,
        c = 0,
        h = 0;
    return c += (h += i + (65535 & n.low)) >>> 16, d += (c += r + a) >>> 16, l += (d += t + s) >>> 16, l += e + o, Ft((c &= 65535) << 16 | (h &= 65535), (l &= 65535) << 16 | (d &= 65535), this.unsigned)
}, ye.subtract = function(n) {
    return sr(n) || (n = hi(n)), this.add(n.neg())
}, ye.sub = ye.subtract, ye.multiply = function(n) {
    if (this.isZero()) return Wr;
    if (sr(n) || (n = hi(n)), Hr) return Ft(Hr.mul(this.low, this.high, n.low, n.high), Hr.get_high(), this.unsigned);
    if (n.isZero()) return Wr;
    if (this.eq(ar)) return n.isOdd() ? ar : Wr;
    if (n.eq(ar)) return this.isOdd() ? ar : Wr;
    if (this.isNegative()) return n.isNegative() ? this.neg().mul(n.neg()) : this.neg().mul(n).neg();
    if (n.isNegative()) return this.mul(n.neg()).neg();
    if (this.lt(Lx) && n.lt(Lx)) return Gr(this.toNumber() * n.toNumber(), this.unsigned);
    var e = this.high >>> 16,
        t = 65535 & this.high,
        r = this.low >>> 16,
        i = 65535 & this.low,
        o = n.high >>> 16,
        s = 65535 & n.high,
        a = n.low >>> 16,
        l = 65535 & n.low,
        d = 0,
        c = 0,
        h = 0,
        f = 0;
    return h += (f += i * l) >>> 16, c += (h += r * l) >>> 16, h &= 65535, c += (h += i * a) >>> 16, d += (c += t * l) >>> 16, c &= 65535, d += (c += r * a) >>> 16, c &= 65535, d += (c += i * s) >>> 16, d += e * l + t * a + r * s + i * o, Ft((h &= 65535) << 16 | (f &= 65535), (d &= 65535) << 16 | (c &= 65535), this.unsigned)
}, ye.mul = ye.multiply, ye.divide = function(n) {
    if (sr(n) || (n = hi(n)), n.isZero()) throw Error("division by zero");
    var e, t, r;
    if (Hr) return this.unsigned || this.high !== -2147483648 || n.low !== -1 || n.high !== -1 ? Ft((this.unsigned ? Hr.div_u : Hr.div_s)(this.low, this.high, n.low, n.high), Hr.get_high(), this.unsigned) : this;
    if (this.isZero()) return this.unsigned ? Aa : Wr;
    if (this.unsigned) {
        if (n.unsigned || (n = n.toUnsigned()), n.gt(this)) return Aa;
        if (n.gt(this.shru(1))) return fU;
        r = Aa
    } else {
        if (this.eq(ar)) return n.eq(dc) || n.eq(JS) ? ar : n.eq(ar) ? dc : (e = this.shr(1).div(n).shl(1)).eq(Wr) ? n.isNegative() ? dc : JS : (t = this.sub(n.mul(e)), r = e.add(t.div(n)));
        if (n.eq(ar)) return this.unsigned ? Aa : Wr;
        if (this.isNegative()) return n.isNegative() ? this.neg().div(n.neg()) : this.neg().div(n).neg();
        if (n.isNegative()) return this.div(n.neg()).neg();
        r = Wr
    }
    for (t = this; t.gte(n);) {
        e = Math.max(1, Math.floor(t.toNumber() / n.toNumber()));
        for (var i = Math.ceil(Math.log(e) / Math.LN2), o = i <= 48 ? 1 : Av(2, i - 48), s = Gr(e), a = s.mul(n); a.isNegative() || a.gt(t);) a = (s = Gr(e -= o, this.unsigned)).mul(n);
        s.isZero() && (s = dc), r = r.add(s), t = t.sub(a)
    }
    return r
}, ye.div = ye.divide, ye.modulo = function(n) {
    return sr(n) || (n = hi(n)), Hr ? Ft((this.unsigned ? Hr.rem_u : Hr.rem_s)(this.low, this.high, n.low, n.high), Hr.get_high(), this.unsigned) : this.sub(this.div(n).mul(n))
}, ye.mod = ye.modulo, ye.rem = ye.modulo, ye.not = function() {
    return Ft(~this.low, ~this.high, this.unsigned)
}, ye.and = function(n) {
    return sr(n) || (n = hi(n)), Ft(this.low & n.low, this.high & n.high, this.unsigned)
}, ye.or = function(n) {
    return sr(n) || (n = hi(n)), Ft(this.low | n.low, this.high | n.high, this.unsigned)
}, ye.xor = function(n) {
    return sr(n) || (n = hi(n)), Ft(this.low ^ n.low, this.high ^ n.high, this.unsigned)
}, ye.shiftLeft = function(n) {
    return sr(n) && (n = n.toInt()), (n &= 63) == 0 ? this : n < 32 ? Ft(this.low << n, this.high << n | this.low >>> 32 - n, this.unsigned) : Ft(0, this.low << n - 32, this.unsigned)
}, ye.shl = ye.shiftLeft, ye.shiftRight = function(n) {
    return sr(n) && (n = n.toInt()), (n &= 63) == 0 ? this : n < 32 ? Ft(this.low >>> n | this.high << 32 - n, this.high >> n, this.unsigned) : Ft(this.high >> n - 32, this.high >= 0 ? 0 : -1, this.unsigned)
}, ye.shr = ye.shiftRight, ye.shiftRightUnsigned = function(n) {
    if (sr(n) && (n = n.toInt()), (n &= 63) === 0) return this;
    var e = this.high;
    return n < 32 ? Ft(this.low >>> n | e << 32 - n, e >>> n, this.unsigned) : Ft(n === 32 ? e : e >>> n - 32, 0, this.unsigned)
}, ye.shru = ye.shiftRightUnsigned, ye.shr_u = ye.shiftRightUnsigned, ye.toSigned = function() {
    return this.unsigned ? Ft(this.low, this.high, !1) : this
}, ye.toUnsigned = function() {
    return this.unsigned ? this : Ft(this.low, this.high, !0)
}, ye.toBytes = function(n) {
    return n ? this.toBytesLE() : this.toBytesBE()
}, ye.toBytesLE = function() {
    var n = this.high,
        e = this.low;
    return [255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24, 255 & n, n >>> 8 & 255, n >>> 16 & 255, n >>> 24]
}, ye.toBytesBE = function() {
    var n = this.high,
        e = this.low;
    return [n >>> 24, n >>> 16 & 255, n >>> 8 & 255, 255 & n, e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e]
}, xt.fromBytes = function(n, e, t) {
    return t ? xt.fromBytesLE(n, e) : xt.fromBytesBE(n, e)
}, xt.fromBytesLE = function(n, e) {
    return new xt(n[0] | n[1] << 8 | n[2] << 16 | n[3] << 24, n[4] | n[5] << 8 | n[6] << 16 | n[7] << 24, e)
}, xt.fromBytesBE = function(n, e) {
    return new xt(n[4] << 24 | n[5] << 16 | n[6] << 8 | n[7], n[0] << 24 | n[1] << 16 | n[2] << 8 | n[3], e)
};
var ys = lU(Mz),
    zt = class zt {
        constructor(e, t, r) {
            this.neg = this.negate, this.eq = this.equals, this.lt = this.lessThan, this.lte = this.lessThanOrEqual, this.gt = this.greaterThan, this.gte = this.greaterThanOrEqual, this.internalValue = new ys(e, t, r)
        }
        static fromNumber(e) {
            let t = new zt(0);
            return t.internalValue = ys.fromNumber(e), t
        }
        static fromString(e) {
            let t = new zt(0);
            return t.internalValue = ys.fromString(e), t
        }
        static fromValue(e) {
            let t = typeof e == "object" ? e.internalValue : e,
                r = new zt(0);
            return r.internalValue = ys.fromValue(t), r
        }
        static fromObject(e) {
            let t = ys.fromValue(e);
            return zt.fromString(t.toString())
        }
        static unwrapInputValue(e) {
            return typeof e == "string" || typeof e == "number" ? e : "internalValue" in e ? e.internalValue : e
        }
        negate() {
            let e = this.internalValue.negate();
            return zt.fromObject(e)
        }
        add(e) {
            let t = zt.unwrapInputValue(e),
                r = this.internalValue.add(t);
            return zt.fromObject(r)
        }
        sub(e) {
            let t = zt.unwrapInputValue(e),
                r = this.internalValue.sub(t);
            return zt.fromObject(r)
        }
        mul(e) {
            let t = zt.unwrapInputValue(e),
                r = this.internalValue.mul(t);
            return zt.fromObject(r)
        }
        div(e) {
            let t = zt.unwrapInputValue(e),
                r = this.internalValue.div(t);
            return zt.fromObject(r)
        }
        and(e) {
            let t = zt.unwrapInputValue(e),
                r = this.internalValue.and(t);
            return zt.fromObject(r)
        }
        equals(e) {
            let t = zt.unwrapInputValue(e);
            return this.internalValue.equals(t)
        }
        lessThan(e) {
            let t = zt.unwrapInputValue(e);
            return this.internalValue.lessThan(t)
        }
        lessThanOrEqual(e) {
            let t = zt.unwrapInputValue(e);
            return this.internalValue.lessThanOrEqual(t)
        }
        greaterThan(e) {
            let t = zt.unwrapInputValue(e);
            return this.internalValue.greaterThan(t)
        }
        greaterThanOrEqual(e) {
            let t = zt.unwrapInputValue(e);
            return this.internalValue.greaterThanOrEqual(t)
        }
        toNumber() {
            return this.internalValue.toNumber()
        }
        toString() {
            return this.internalValue.toString()
        }
        valueOf() {
            return this.internalValue.valueOf()
        }
    };
u(zt, "bo");
var bt = zt;
bt.defaultValue = bt.fromObject(ys.ZERO), bt.MIN_VALUE = bt.fromObject(ys.MIN_VALUE), bt.MAX_VALUE = bt.fromObject(ys.MAX_VALUE);
var EI = "outsystems-";

function mU(n, e) {
    if (e = e != null ? e : EI, typeof n != "object" || n === null) return;
    let t = {};
    for (let [r, i] of Object.entries(n)) t[e + r] = i;
    return t
}
u(mU, "wo");

function vU(n, e) {
    let t = (e = e != null ? e : EI).toLowerCase();
    if (typeof n != "object" || n === null) return {};
    let r = {};
    for (let [i, o] of Object.entries(n)) i.toLowerCase().startsWith(t) && (r[i.substring(e.length)] = o);
    return r
}
u(vU, "Eo");
var Fz = Object.freeze({
        __proto__: null,
        buildCustomHeaders: mU,
        extractCustomHeaders: vU
    }),
    cl = "Communication",
    Wy = u(n => M(void 0, [n], void 0, function(e) {
        let {
            url: t,
            params: r,
            headers: i,
            responseType: o,
            useLocaleInfo: s,
            timeout: a,
            timeoutHandler: l,
            baseURL: d,
            httpClient: c = de.resolve(Y.HttpClient)
        } = e;
        return function*() {
            if (!c) throw new Error("Could not resolve the http client instance.");
            try {
                return yield c.get({
                    url: t,
                    params: r,
                    headers: i,
                    responseType: o,
                    useLocaleInfo: s,
                    timeout: a,
                    timeoutHandler: l,
                    baseURL: d
                })
            } catch (h) {
                throw wU(h)
            }
        }()
    }), "No"),
    xx = u(n => Bz(n) || bU(n), "So"),
    yU = u(n => n !== null && typeof n == "object" && typeof n.hasApiVersionChanged == "boolean" && typeof n.hasModuleVersionChanged == "boolean", "Do"),
    Bz = u(n => n !== null && typeof n == "object" && (!n.hasOwnProperty("exception") || n.exception === void 0) && typeof n.clientSettingsHash == "string" && typeof n.shouldRefreshToken == "boolean" && yU(n.versionInfo), "Ro"),
    bU = u(n => n !== null && typeof n == "object" && typeof n.exception == "object" && typeof n.clientSettingsHash == "string" && (typeof n.status == "number" || n.status === void 0) && typeof n.shouldRefreshToken == "boolean" && yU(n.versionInfo), "Co"),
    _I = u(n => M(void 0, [n], void 0, function(e) {
        let {
            url: t,
            payload: r,
            params: i,
            headers: o,
            contentType: s,
            timeout: a,
            timeoutHandler: l,
            useLocaleInfo: d,
            baseURL: c,
            responseHandler: h,
            refreshAuthTokens: f = Bk,
            httpClient: g = de.resolve(Y.HttpClient),
            lifecycleEventsManager: p = de.resolve(Y.LifecycleEventsManager),
            actionOrAggregateName: y
        } = e;
        return function*() {
            if (!g) throw new Error("Could not resolve the http client instance.");
            let b = mU(o),
                E = Object.assign(Object.assign({}, b), {
                    "content-type": "application/json; charset=UTF-8"
                }),
                S = [];
            try {
                let _ = yield g.post({
                    url: t,
                    payload: r,
                    params: i,
                    headers: E,
                    contentType: s != null ? s : _n.Json,
                    timeout: a,
                    timeoutHandler: l,
                    useLocaleInfo: d,
                    baseURL: c,
                    responseHandler: jz(h)
                });
                if (_ != null && _.shouldRefreshToken && (hr(cl, "Refresh Tokens initiated: Response from the server indicates that tokens should be refreshed.", Oe.Internal), yield f()), S = (I => {
                        let x = [];
                        if (xx(I) && !I.versionInfo.hasModuleVersionChanged && I.versionInfo.hasApiVersionChanged) {
                            let L = "The application was unable to make a request to the server - the API version changed, but the module version did not.";
                            x.push({
                                clientMessage: L,
                                internalMessage: L
                            })
                        }
                        return x
                    })(_), xx(_) && $z(_, (I, x) => p == null ? void 0 : p.onNewVersion(I, x)), bU(_)) throw Vz(_, y);
                return _ == null ? void 0 : _.data
            } catch (_) {
                throw wU(_)
            } finally {
                for (let {
                        clientMessage: _,
                        internalMessage: I
                    } of S) al({
                    category: cl,
                    clientMessage: _,
                    internalMessage: I,
                    errorCode: it.Communication_Internal_Server_Error
                })
            }
        }()
    }), "xo"),
    jz = u(n => {
        if (typeof n == "function") return e => {
            let {
                data: t,
                responseHeaders: r
            } = e, i = vU(r);
            n({
                data: t,
                responseHeaders: i
            })
        }
    }, "Lo"),
    wU = u(n => {
        var e, t, r, i, o, s;
        if (n.errorCode === "OS-CLRT-40103") throw xe(cl, "User is not logged in", n.errorCode, n, Oe.Internal), new Q.SecurityException("Not authorized", ko(n));
        if ((s = n.errorCode) && Object.values(it).includes(s)) {
            let a = (t = (e = n.response) === null || e === void 0 ? void 0 : e.exception) !== null && t !== void 0 ? t : n;
            throw new Q.CommunicationException(`CommunicationException: ${(r=a.message)!==null&&r!==void 0?r:n.message}`, ko(a), n.errorCode, n.category)
        }
        return n.errorCode = (i = n.errorCode) !== null && i !== void 0 ? i : it.Communication_Default, n.category = (o = n.category) !== null && o !== void 0 ? o : cl, n
    }, "Oo"),
    $z = u((n, e) => {
        if (n.versionInfo.hasModuleVersionChanged) {
            if (n.versionInfo.hasApiVersionChanged) throw e(!0, !!n.versionInfo.isAutoUpgradeEnabled), new Q.ViewHasChangedException("View has changed.");
            e(!1, !!n.versionInfo.isAutoUpgradeEnabled)
        }
    }, "_o"),
    Vz = u((n, e) => {
        var t, r;
        let i = KP(n.exception),
            o = `Post request ${e?`issued by '${e}' `:""}failed: ${i.message}`,
            s = "Post request failed",
            a = {};
        return n.status && (a["http.status_code"] = n.status), n.status === 250 ? xe(cl, s, (t = i.errorCode) !== null && t !== void 0 ? t : it.Communication_Default, void 0, Oe.Internal, a) : al({
            category: cl,
            clientMessage: o,
            internalMessage: s,
            errorCode: (r = i.errorCode) !== null && r !== void 0 ? r : it.Communication_Default,
            errorObj: i,
            attributes: a
        }), i
    }, "Mo"),
    Hz = Object.freeze({
        __proto__: null,
        SCREEN_SERVICES_EXCEPTION_HTTP_STATUS_CODE: 250,
        get: Wy,
        getResponseUrl: u(n => M(void 0, [n], void 0, function(e) {
            let {
                url: t,
                params: r,
                headers: i,
                useLocaleInfo: o,
                timeout: s,
                timeoutHandler: a,
                baseURL: l,
                httpClient: d = de.resolve(Y.HttpClient)
            } = e;
            return function*() {
                if (!d) throw new Error("Could not resolve the http client instance.");
                return d.getResponseUrl({
                    url: t,
                    params: r,
                    headers: i,
                    useLocaleInfo: o,
                    timeout: s,
                    timeoutHandler: a,
                    baseURL: l
                })
            }()
        }), "getResponseUrl"),
        post: _I
    }),
    km = "__cache";

function Zn(n, e) {
    return n == null ? e : n
}
u(Zn, "$o");
var T;
(function(n) {
    n[n.Integer = 0] = "Integer", n[n.LongInteger = 1] = "LongInteger", n[n.Decimal = 2] = "Decimal", n[n.Currency = 3] = "Currency", n[n.Text = 4] = "Text", n[n.PhoneNumber = 5] = "PhoneNumber", n[n.Email = 6] = "Email", n[n.Boolean = 7] = "Boolean", n[n.Date = 8] = "Date", n[n.DateTime = 9] = "DateTime", n[n.Time = 10] = "Time", n[n.Record = 11] = "Record", n[n.RecordList = 12] = "RecordList", n[n.BinaryData = 13] = "BinaryData", n[n.Object = 14] = "Object"
})(T || (T = {}));
var ZS = u(n => {
        switch (n) {
            case T.Integer:
                return "Integer";
            case T.LongInteger:
                return "Long Integer";
            case T.Decimal:
                return "Decimal";
            case T.Currency:
                return "Currency";
            case T.Text:
                return "Text";
            case T.PhoneNumber:
                return "Phone Number";
            case T.Email:
                return "Email";
            case T.Boolean:
                return "Boolean";
            case T.Date:
                return "Date";
            case T.DateTime:
                return "Date Time";
            case T.Time:
                return "Time";
            case T.Record:
                return "Record";
            case T.RecordList:
                return "List";
            case T.BinaryData:
                return "Binary Data";
            case T.Object:
                return "Object";
            default:
                return `Unknown: ${n}`
        }
    }, "Vo"),
    vc = class vc {
        constructor(e, t, r) {
            this._url = t, this.getOfflineContent = r, this._cachedBlob = null, this.authenticatedUrlsRegex = [/screenservices\/.*\/_BinaryContent\/.*/], typeof Blob != "undefined" && e instanceof Blob ? (this._cachedBlob = e, this.getOfflineContent = () => this._content ? Promise.resolve(this._content) : vc.blobToBase64(this._cachedBlob)) : this._content = e || null
        }
        get url() {
            return this._url
        }
        set url(e) {
            this._url = e, this.clearCachedBlob()
        }
        get cachedBlob() {
            return this._cachedBlob
        }
        get content() {
            return this._content
        }
        set content(e) {
            this._content = e, this.clearCachedBlob()
        }
        needsAuthentication() {
            var e;
            let t = (e = this._url) !== null && e !== void 0 ? e : "";
            return this.authenticatedUrlsRegex.some(r => r.test(t))
        }
        loadBlobData() {
            return M(this, void 0, void 0, function*() {
                var e;
                let t = yield Wy({
                    url: (e = this._url) !== null && e !== void 0 ? e : "",
                    responseType: "blob"
                });
                return t != null ? t : new Blob
            })
        }
        loadContent() {
            return M(this, void 0, void 0, function*() {
                return this.needsAuthentication() ? this.loadBlobData().then(e => (this._cachedBlob = e, Promise.resolve(this))) : this.getOfflineContent ? this.getOfflineContent().then(e => (this.content = e, Promise.resolve(this))) : Kr(() => this)
            })
        }
        hasContent() {
            return !!(this._url && !this.needsAuthentication() || this._content)
        }
        fastEquals(e) {
            return e && this.constructor === e.constructor && this._url === e._url && this._content === e._content && (!!this.getOfflineContent && !!e.getOfflineContent || !this.getOfflineContent && !e.getOfflineContent)
        }
        base64toHex(e) {
            let t = atob(e),
                r = "";
            for (let i = 0; i < t.length; i++) {
                let o = t.charCodeAt(i).toString(16);
                r += o.length === 2 ? o : "0" + o
            }
            return r
        }
        getContentType() {
            if (this._content) {
                let e = this.base64toHex(this._content.substr(0, 16));
                return e.substr(0, 8) === "00000100" ? "image/x-icon" : e.substr(0, 8) === "ffd8ffdb" || e.substr(0, 8) === "ffd8ffe0" || e.substr(0, 8) === "ffd8ffe1" ? "image/jpeg" : e.substr(0, 8) === "49492a00" || e.substr(0, 8) === "4d4d002a" ? "image/tiff" : e.substr(0, 4) === "424d" ? "image/bmp" : e.substr(0, 6) === "474946" ? "image/gif" : e.substr(0, 8) === "89504e47" ? "image/png" : "application/octet-stream"
            }
            return null
        }
        toDataURI() {
            return this._content ? `data:${this.getContentType()};base64,${this._content}` : null
        }
        toBlob() {
            var e;
            if (!this._cachedBlob && this._content) {
                let t = (e = this.getContentType()) !== null && e !== void 0 ? e : void 0;
                this._cachedBlob = vc.base64toBlob(this._content, t)
            }
            return this._cachedBlob
        }
        toArrayBuffer() {
            return this._content ? vc.base64ToArrayBuffer(this._content) : null
        }
        get length() {
            let e = this.toBlob();
            return e ? e.size : 0
        }
        static blobToBase64(e) {
            return new Promise((t, r) => {
                let i = new FileReader;
                i.readAsDataURL(e), i.onload = () => {
                    let o = i.result;
                    t(o.substring(o.indexOf(",") + 1))
                }, i.onerror = () => {
                    r(i.error)
                }
            })
        }
        static base64toBlob(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "",
                r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 512,
                i = atob((e || "").replace(/\s/g, "")),
                o = [];
            for (let s = 0; s < i.length; s += r) {
                let a = i.slice(s, s + r),
                    l = new Array(a.length);
                for (let c = 0; c < a.length; c++) l[c] = a.charCodeAt(c);
                let d = new Uint8Array(l);
                o.push(d)
            }
            return new Blob(o, {
                type: t
            })
        }
        static base64ToArrayBuffer(e) {
            return Uint8Array.from(atob(e), t => t.charCodeAt(0)).buffer
        }
        clearCachedBlob() {
            this._cachedBlob = null
        }
    };
u(vc, "Bo");
var Nn = vc;
Nn.defaultValue = new Nn;
var Bt = class Bt {
    static get defaultValue() {
        return Bt.defaultValueField
    }
    constructor(e, t, r, i, o, s, a) {
        if (arguments.length === 0) this.date = new Date(1900, 0, 1, 0, 0, 0, 0);
        else if (arguments.length === 1)
            if (e instanceof Date || Object.prototype.toString.call(e) === "[object Date]") {
                let l = e.getTime();
                isNaN(l) ? this.date = new Date(1900, 0, 1, 0, 0, 0, 0) : this.date = new Date(l)
            } else this.date = new Date(e);
        else Zn(e, 1900) < 100 ? (this.date = new Date(100, 0, 1, 0, 0, 0, 0), this.date.setFullYear(Zn(e, 1900)), this.date.setMonth(Zn(t, 1) - 1), this.date.setDate(Zn(r, 1)), this.date.setHours(Zn(i, 0)), this.date.setMinutes(Zn(o, 0)), this.date.setSeconds(Zn(s, 0)), this.date.setMilliseconds(Zn(a, 0))) : this.date = new Date(Zn(e, 1900), Zn(t, 1) - 1, Zn(r, 1), Zn(i, 0), Zn(o, 0), Zn(s, 0), Zn(a, 0))
    }
    get year() {
        return this.date.getFullYear()
    }
    get month() {
        return this.date.getMonth() + 1
    }
    get day() {
        return this.date.getDate()
    }
    get hours() {
        return this.date.getHours()
    }
    get minutes() {
        return this.date.getMinutes()
    }
    get seconds() {
        return this.date.getSeconds()
    }
    get milliseconds() {
        return this.date.getMilliseconds()
    }
    get weekDay() {
        return this.date.getDay()
    }
    addYears(e) {
        let t = new Bt(this.year + e, this.month, this.day, this.hours, this.minutes, this.seconds, this.milliseconds);
        return this.month === 2 && this.day === 29 && t.month === 3 ? new Bt(t.year, 2, 28, t.hours, t.minutes, t.seconds, t.milliseconds) : t
    }
    daysInMonth(e, t) {
        return new Date(t, e, 0).getDate()
    }
    addMonths(e) {
        let t = new Bt(this.year, this.month + e, this.day, this.hours, this.minutes, this.seconds, this.milliseconds);
        return t.day === this.day ? t : new Bt(t.year, t.month - 1, this.daysInMonth(t.month - 1, t.year), t.hours, t.minutes, t.seconds, t.milliseconds)
    }
    addDays(e) {
        return new Bt(this.year, this.month, this.day + e, this.hours, this.minutes, this.seconds, this.milliseconds)
    }
    addHours(e) {
        return new Bt(this.year, this.month, this.day, this.hours + e, this.minutes, this.seconds, this.milliseconds)
    }
    addMinutes(e) {
        return new Bt(this.year, this.month, this.day, this.hours, this.minutes + e, this.seconds, this.milliseconds)
    }
    addSeconds(e) {
        return new Bt(this.year, this.month, this.day, this.hours, this.minutes, this.seconds + e, this.milliseconds)
    }
    addMilliseconds(e) {
        return new Bt(this.year, this.month, this.day, this.hours, this.minutes, this.seconds, this.milliseconds + e)
    }
    equals(e) {
        return !!e && this.date.getTime() === e.date.getTime()
    }
    eq(e) {
        return this.equals(e)
    }
    greaterThan(e) {
        return this.date > e.date
    }
    gt(e) {
        return this.greaterThan(e)
    }
    greaterThanOrEqualTo(e) {
        return this.date >= e.date
    }
    gte(e) {
        return this.greaterThanOrEqualTo(e)
    }
    lessThan(e) {
        return this.date < e.date
    }
    lt(e) {
        return this.lessThan(e)
    }
    lessThanOrEqualTo(e) {
        return this.date <= e.date
    }
    lte(e) {
        return this.lessThanOrEqualTo(e)
    }
    toNative() {
        return new Date(this.date.getTime())
    }
    getTime() {
        return this.date.getTime()
    }
    valueOf() {
        return this.date.valueOf()
    }
    static fromISODate(e) {
        return F.RFC3339_DATEPART.test(e) ? Bt.internalFromUTCWithoutConversion(e + "T00:00:00Z") : Bt.defaultValue
    }
    toISODate() {
        return this.toString(F.RFC3339_DATEPART_FORMAT)
    }
    static fromISOTime(e) {
        return F.RFC3339_TIMEPART.test(e) ? Bt.internalFromUTCWithoutConversion("1900-01-01T" + e + "Z") : Bt.defaultValue
    }
    toISOTime() {
        return this.toString(F.RFC3339_TIMEPART_FORMAT)
    }
    static fromISODateTime(e) {
        if ((e = e || "") === "" || e.indexOf("1900-01-01") >= 0 && e.indexOf("00:00:00") >= 0) return Bt.defaultValue;
        if (e.indexOf("T") > 0 && !/([+\-]\d{2}((:\d{2})|(\d{2})?)|Z)$/.test(e)) return Bt.internalFromUTCWithoutConversion(e.trim() + "Z");
        e = e.replace(/([+-]\d{2})$/, function(r) {
            return r + "00"
        });
        let t = Date.parse(e);
        return isNaN(t) ? Bt.defaultValue : new Bt(t)
    }
    static internalFromUTCWithoutConversion(e) {
        let t = Date.parse(e);
        if (!isNaN(t)) {
            let r = new Date(t);
            return new Bt(r.getUTCFullYear(), r.getUTCMonth() + 1, r.getUTCDate(), r.getUTCHours(), r.getUTCMinutes(), r.getUTCSeconds(), r.getUTCMilliseconds())
        }
        return Bt.defaultValue
    }
    getMillisecondsString() {
        return (this.milliseconds / 1e3).toFixed(3).substring(2, 5)
    }
    toString(e) {
        return e === void 0 ? this.equals(Bt.defaultValue) ? "1900-01-01T00:00:00" : this.date.toISOString() : e.replace(/(\\.)|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|ff?f?|FF?F?|\.FF?F?|tt?|zz?z?/g, t => {
            if (t.indexOf("\\") === 0) return t.substring(1);
            switch (t) {
                case "hh":
                case "h":
                    let r = this.hours < 13 ? this.hours : this.hours - 12;
                    return yt.padLeadingZeros((this.hours === 0 ? 12 : r).toString(), t.length);
                case "HH":
                case "H":
                    return yt.padLeadingZeros(this.hours.toString(), t.length);
                case "mm":
                case "m":
                    return yt.padLeadingZeros(this.minutes.toString(), t.length);
                case "ss":
                case "s":
                    return yt.padLeadingZeros(this.seconds.toString(), t.length);
                case "fff":
                    return this.getMillisecondsString();
                case "ff":
                    return this.getMillisecondsString().substring(0, 2);
                case "f":
                    return this.getMillisecondsString().substring(0, 1);
                case ".FFF":
                case ".FF":
                case ".F":
                    return this.milliseconds === 0 ? "" : "." + yt.removeTrailingZeros(this.getMillisecondsString());
                case "FFF":
                    return yt.removeTrailingZeros(this.getMillisecondsString());
                case "FF":
                    return yt.removeTrailingZeros(this.getMillisecondsString()).substring(0, 2);
                case "F":
                    return yt.removeTrailingZeros(this.getMillisecondsString()).substring(0, 1);
                case "yyyy":
                case "yyy":
                    let i = this.year.toString();
                    return i.charAt(0) === "0" ? this.year.toString().substring(1) : i;
                case "yy":
                    return this.year.toString().substring(2, 4);
                case "y":
                    return Number(this.year.toString().substring(2, 4)).toString();
                case "dddd":
                    return yt.getDayName(this.weekDay);
                case "ddd":
                    return yt.getShortDayName(this.weekDay);
                case "dd":
                case "d":
                    return yt.padLeadingZeros(this.day.toString(), t.length);
                case "MMMM":
                    return yt.getMonthName(this.month);
                case "MMM":
                    return yt.getShortMonthName(this.month);
                case "MM":
                case "M":
                    return yt.padLeadingZeros(this.month.toString(), t.length);
                case "t":
                    return yt.get12HourNotation(this.hours).substring(0, 1);
                case "tt":
                    return yt.get12HourNotation(this.hours);
                case "zzz":
                    return yt.getTimezoneInformationFull(this.date.getTimezoneOffset());
                case "zz":
                    return yt.getTimezoneInformationHoursFull(this.date.getTimezoneOffset());
                case "z":
                    return yt.getTimezoneInformationHoursShort(this.date.getTimezoneOffset());
                default:
                    return t
            }
        })
    }
};
u(Bt, "ko");
var le = Bt,
    F;
le.defaultValueField = new le,
    function(n) {
        n.RFC3339_TIMEPART = /^([01][0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9](\.\d+)?)?$/, n.RFC3339_DATEPART = /^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])$/, n.RFC3339_TIMEPART_FORMAT = "HH:mm:ss", n.RFC3339_DATEPART_FORMAT = "yyyy-MM-dd", n.MIN_INTEGER_VALUE = -2147483648, n.MAX_INTEGER_VALUE = 2147483647, n.MIN_LONGINTEGER_VALUE = bt.MIN_VALUE, n.MAX_LONGINTEGER_VALUE = bt.MAX_VALUE, n.MIN_DECIMAL_VALUE = new He("2").pow(96).neg(), n.MAX_DECIMAL_VALUE = new He("2").pow(96).minus(1), n.MIN_DATE_VALUE = new le(1753, 1, 1), n.MAX_DATE_VALUE = new le(9999, 12, 31), n.MIN_TIME_VALUE = le.defaultValue, n.MAX_TIME_VALUE = le.defaultValue.addHours(23).addMinutes(59).addSeconds(59), n.MIN_DATETIME_VALUE = new le(1753, 1, 1, 0, 0, 0), n.MAX_DATETIME_VALUE = new le(9999, 12, 31, 23, 59, 59), n.DEFAULT_INTEGER = 0, n.DEFAULT_LONGINTEGER = bt.defaultValue, n.DEFAULT_DECIMAL = He.defaultValue, n.DEFAULT_CURRENCY = He.defaultValue, n.DEFAULT_TEXT = "", n.DEFAULT_PHONENUMBER = "", n.DEFAULT_EMAIL = "", n.DEFAULT_BOOLEAN = !1, n.DEFAULT_DATE = le.defaultValue, n.DEFAULT_DATETIME = le.defaultValue, n.DEFAULT_TIME = le.defaultValue, n.DEFAULT_BINARYDATA = Nn.defaultValue, n.DEFAULT_OBJECT = null, n.FORMAT = new Iv(new yt("yyyy-MM-dd", "HH:mm:ss"), new Sv(".", "")), n.ISO_DATE_FORMAT_REGEXP = /^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])([T ]\d{2}:\d{2}(:\d{2}(\.\d+)?(([+\-]\d{2}((:\d{2})|(\d{2})?))|Z)?)?)?$/i
    }(F || (F = {}));
var Dy = class Dy {
    constructor() {
        this.map = {}
    }
    getItem(e) {
        return this.map[e]
    }
    setItem(e, t) {
        this.map[e] = t
    }
    invalidate(e) {
        e === void 0 ? this.map = {} : this.setItem(e, void 0)
    }
    clone() {
        let e = new Dy;
        for (let t in this.map) e.setItem(t, this.map[t]);
        return e
    }
};
u(Dy, "Ho");
var ll = Dy,
    YI = class YI {
        constructor() {
            this.list = []
        }
        getItem(e) {
            if (!(e >= this.length)) return this.list[e]
        }
        append(e) {
            this.list.push(e)
        }
        appendMultiple(e) {
            this.list = this.list.concat(new Array(e))
        }
        setItem(e, t) {
            this.list[e] = t
        }
        insert(e, t) {
            this.list.splice(e, 0, t)
        }
        invalidate(e) {
            e === void 0 ? this.list = [] : this.list.splice(e, 1)
        }
        get length() {
            return this.list.length
        }
    };
u(YI, "jo");
var Cv = YI;

function qy(n, e) {
    if (typeof n == "string") {
        let t = e;
        return n.localeCompare(t)
    }
    return typeof n == "number" ? n - e : typeof n == "boolean" ? !n && e ? -1 : n && !e ? 1 : 0 : n.lessThan(e) ? -1 : n.greaterThan(e) ? 1 : 0
}
u(qy, "qo");

function Zr(n, e) {
    return n && e && e.equals instanceof Function ? e.equals(n) : e === n
}
u(Zr, "Go");

function Ve(n) {
    switch (n) {
        case T.Integer:
            return F.DEFAULT_INTEGER;
        case T.LongInteger:
            return F.DEFAULT_LONGINTEGER;
        case T.Decimal:
            return F.DEFAULT_DECIMAL;
        case T.Currency:
            return F.DEFAULT_CURRENCY;
        case T.Text:
            return F.DEFAULT_TEXT;
        case T.PhoneNumber:
            return F.DEFAULT_PHONENUMBER;
        case T.Email:
            return F.DEFAULT_EMAIL;
        case T.Date:
            return F.DEFAULT_DATE;
        case T.DateTime:
            return F.DEFAULT_DATETIME;
        case T.Time:
            return F.DEFAULT_TIME;
        case T.Boolean:
            return F.DEFAULT_BOOLEAN;
        case T.BinaryData:
            return F.DEFAULT_BINARYDATA;
        case T.Object:
            return F.DEFAULT_OBJECT;
        default:
            throw new TypeError("Records and Record lists are not basic types")
    }
}
u(Ve, "Wo");
var $n = class $n {
    constructor(e, t, r, i, o) {
        if (this.emptyListItem = e, this.data = t != null ? t : new Do, this.itemIds = r != null ? r : new Do, this._itemIdSeed = i != null ? i : 0, this._modelId = o || $n.nextModelId++, t && !r)
            for (let s = 0, a = this.data.count(); s < a; s++) this.itemIds = this.itemIds.push(this._itemIdSeed), this._itemIdSeed = this._itemIdSeed + 1 | 0
    }
    get modelId() {
        return this._modelId
    }
    push(e) {
        return new $n(this.emptyListItem, this.data.push(e), this.itemIds.push(this._itemIdSeed), this._itemIdSeed + 1 | 0, this._modelId)
    }
    addFromOther(e) {
        return new $n(this.emptyListItem, this.data.addFromOther(e.data), this.itemIds.pushAll(e.data.map(() => this._itemIdSeed++)), this._itemIdSeed, this._modelId)
    }
    pushAll(e) {
        return new $n(this.emptyListItem, this.data.pushAll(e), this.itemIds.pushAll(e.map(() => this._itemIdSeed++)), this._itemIdSeed, this._modelId)
    }
    remove(e) {
        return new $n(this.emptyListItem, this.data.remove(e), this.itemIds.remove(e), this._itemIdSeed, this._modelId)
    }
    insert(e, t) {
        return new $n(this.emptyListItem, this.data.insert(e, t), this.itemIds.insert(e, this._itemIdSeed), this._itemIdSeed + 1 | 0, this._modelId)
    }
    sort(e, t, r) {
        let i = this.data.map((l, d) => ({
                item: e(d),
                itemId: this.itemIds.get(d),
                by: t(e(d))
            })),
            o = r ? 1 : -1;
        i.sort((l, d) => o * qy(l.by, d.by));
        let s = Do.fromJS(i.map(l => l.item)),
            a = Do.fromJS(i.map(l => l.itemId));
        return new $n(this.emptyListItem, s, a, this._itemIdSeed, this._modelId)
    }
    getEmptyListItem() {
        return this.emptyListItem
    }
    setEmptyListItem(e) {
        return new $n(e, this.data, this.itemIds, this._itemIdSeed, this._modelId)
    }
    get(e) {
        return this.data.get(e)
    }
    getId(e) {
        return `${this.modelId}_${this.itemIds.get(e)}`
    }
    count() {
        return this.data.count()
    }
    isEmpty() {
        return this.data.isEmpty()
    }
    set(e, t) {
        return new $n(this.emptyListItem, this.data.set(e, t), this.itemIds, this._itemIdSeed, this._modelId)
    }
    clear() {
        return new $n(this.emptyListItem, this.data.clear(), this.itemIds.clear(), this._itemIdSeed, this._modelId)
    }
    forEach(e) {
        this.data.forEach(e)
    }
    reduce(e, t) {
        return this.data.reduce(e, t)
    }
    static fromJS(e, t) {
        return new $n(t, Do.fromJS(e))
    }
    static fromJSON(e, t) {
        return new $n(t, Do.fromJS(e))
    }
    clone() {
        return new $n(this.emptyListItem, this.data.clone(), this.itemIds.clone(), this._itemIdSeed)
    }
};
u($n, "Ko");
var Ma = $n;
Ma.nextModelId = 1;
var _h = class _h {
    constructor() {
        this.writePropagateHandler = this.defaultWritePropagate, this.propagationParent = this
    }
    static getData(e) {
        if (e !== void 0 && e.constructor !== Ma) return e.data
    }
    static setPropagationHandler(e, t, r, i) {
        e.writePropagateHandler = i, _h.setPropagationParent(e, t), _h.setPropagationKey(e, r)
    }
    static setPropagationParent(e, t) {
        e.propagationParent = t
    }
    static setPropagationKey(e, t) {
        e.propagationKey = t
    }
    writePropagate(e, t) {
        var r;
        if (((r = this.data) === null || r === void 0 ? void 0 : r.constructor) !== (e == null ? void 0 : e.constructor)) throw new Error("Unexpected new data type");
        this.data = e, this.writePropagateHandler.apply(this.propagationParent, [this.propagationKey, e, t])
    }
    defaultWritePropagate(e, t, r) {
        this.onDefaultWritePropagate(r)
    }
    onDefaultWritePropagate(e) {}
};
u(_h, "Jo");
var fr = _h,
    nn = class nn extends fr {
        constructor(e, t) {
            super(), this.cache = t != null ? t : new ll, this.data = e || this.constructor.createDefaultData()
        }
        static createDefaultData() {
            let e = this.RecordClass;
            if (e) return new e
        }
        getBasicProperty(e) {
            return this.data.get(e)
        }
        setBasicProperty(e, t, r, i) {
            this.data.get(e) !== t && (nn.checkType(r, t, i), this.writePropagate(this.data.set(e, t), this.cache), this.onPropertyValueChanged(e))
        }
        onPropertyValueChanged(e) {}
        getComplexProperty(e, t) {
            let r = this.cache.getItem(e);
            if (r) return nn.setPropagationParent(r, this), r;
            let i = this.data.get(e),
                o = this.cache.getItem(e + km);
            return r = new t(i, o || null), this.cache.setItem(e, r), o && this.cache.invalidate(e + km), nn.setPropagationHandler(r, this, e, this.internalSetComplexProperty), r
        }
        setComplexProperty(e, t, r, i) {
            this.setProperties([{
                name: e,
                value: t,
                expectedType: r,
                valueType: i,
                isBasicType: !1
            }])
        }
        internalSetComplexProperty(e, t, r) {
            this.internalSetProperties([{
                name: e,
                value: t,
                isBasicType: !1
            }], r)
        }
        setProperties(e) {
            var t;
            let r = [];
            for (let i of e) {
                let o = (t = nn.getData(i.value)) !== null && t !== void 0 ? t : i.value;
                this.data.get(i.name) !== o && (i.expectedType !== void 0 && nn.checkType(i.expectedType, i.value, i.valueType), r.push({
                    name: i.name,
                    value: o,
                    isBasicType: i.isBasicType
                }))
            }
            r.length > 0 && this.internalSetProperties(r)
        }
        internalSetProperties(e, t) {
            let r = this.data,
                i = this.cloneCache();
            for (let o of e) r = r.set(o.name, o.value), o.isBasicType || (i.invalidate(o.name), i.invalidate(o.name + km), t && i.setItem(o.name + km, t));
            this.writePropagate(r, i);
            for (let o of e) this.onPropertyValueChanged(o.name)
        }
        cloneCache() {
            return this.cache.clone()
        }
        onDefaultWritePropagate(e) {
            this.cache = e
        }
        static checkType(e, t, r) {
            switch (e) {
                case T.Integer:
                    nn.ensureValidInteger(t);
                    break;
                case T.LongInteger:
                    nn.ensureValidLongInteger(t);
                    break;
                case T.Decimal:
                case T.Currency:
                    nn.ensureValidDecimal(t);
                    break;
                case T.Text:
                case T.PhoneNumber:
                    nn.ensureValidText(t);
                    break;
                case T.Email:
                    nn.ensureValidEmail(t);
                    break;
                case T.Boolean:
                    nn.ensureValidBoolean(t);
                    break;
                case T.Date:
                    nn.ensureValidDate(t);
                    break;
                case T.Time:
                    nn.ensureValidTime(t);
                    break;
                case T.DateTime:
                    nn.ensureValidDateTime(t);
                    break;
                case T.Record:
                case T.RecordList:
                    nn.ensureValidComplexType(t, r);
                    break;
                case T.BinaryData:
                    nn.ensureValidBinaryData(t);
                    break;
                case T.Object:
                    break;
                default:
                    throw new TypeError("Unexpected data type: " + e)
            }
        }
        static ensureValidBinaryData(e) {
            if (!(typeof e == "string" || e instanceof Nn)) throw new TypeError("Expecting a Binary Data, found: " + e)
        }
        static ensureValidInteger(e) {
            if (typeof e != "number" || isNaN(e) || e % 1 != 0) throw new TypeError("Expecting an Integer, found: " + e);
            if (e < F.MIN_INTEGER_VALUE) throw new TypeError("Integers must be greater than " + F.MIN_INTEGER_VALUE + ", found: " + e);
            if (e > F.MAX_INTEGER_VALUE) throw new TypeError("Integers must be lower than " + F.MAX_INTEGER_VALUE + ", found: " + e)
        }
        static ensureValidLongInteger(e) {
            if (!e || e.constructor !== bt) throw new TypeError("Expecting a LongInteger, found: " + e);
            if (e.lessThan(F.MIN_LONGINTEGER_VALUE)) throw new TypeError("Long Integers must be greater than " + F.MIN_LONGINTEGER_VALUE.toString() + ", found: " + e.toString());
            if (e.greaterThan(F.MAX_LONGINTEGER_VALUE)) throw new TypeError("Long Integers must be lower than " + F.MAX_LONGINTEGER_VALUE.toString() + ", found: " + e.toString())
        }
        static ensureValidDecimal(e) {
            if (!e || e.constructor !== He) throw new TypeError(`Expecting a Decimal, found: ${e}`);
            if (e.lessThan(F.MIN_DECIMAL_VALUE)) throw new TypeError("Decimals must be greater than " + F.MIN_DECIMAL_VALUE.toString() + ", found: " + e.toString());
            if (e.greaterThan(F.MAX_DECIMAL_VALUE)) throw new TypeError("Decimals must be lower than " + F.MAX_DECIMAL_VALUE.toString() + ", found: " + e.toString())
        }
        static ensureValidText(e) {
            if (typeof e != "string") throw new TypeError(`Expecting a Text, found: ${e}`)
        }
        static ensureValidEmail(e) {
            if (typeof e != "string") throw new TypeError(`Expecting an Email, found: ${e}`)
        }
        static ensureValidBoolean(e) {
            if (typeof e != "boolean") throw new TypeError(`Expecting a Boolean, found: ${e}`)
        }
        static ensureValidDate(e) {
            if (!e || e.constructor !== le) throw new TypeError(`Expecting a Date, found: ${e}`)
        }
        static ensureValidTime(e) {
            if (!e || e.constructor !== le) throw new TypeError(`Expecting a Time, found: ${e}`)
        }
        static ensureValidDateTime(e) {
            if (!e || e.constructor !== le) throw new TypeError(`Expecting a DateTime, found: ${e}`)
        }
        static ensureValidComplexType(e, t) {
            if (e) {
                if (e.constructor === t) return;
                if (e.isCompatibleWith !== void 0) {
                    if (e.isCompatibleWith(t)) return;
                    throw new TypeError(`Expecting a ${t.name} type, found:  ${e.constructor.name}`)
                }
            }
            throw new TypeError(`Expecting a Record or RecordList, found: ${e}`)
        }
        replaceWith(e) {
            let t = nn.getData(e);
            this.writePropagate(t, new ll)
        }
        fastEquals(e) {
            return this === e
        }
        equals(e) {
            return !(!e || this.constructor !== e.constructor)
        }
        static defineRecordClass(e) {
            return dU(e)
        }
        clone() {
            return new this.constructor(this.data, this.cloneCache())
        }
    };
u(nn, "Yo");
var yn = nn,
    XI = class XI {
        constructor(e, t, r, i, o, s, a, l, d) {
            this.name = e, this.attrName = t, this.nameForJson = r, this.mandatory = i, this.ignoreForServer = o, this.dataType = s, this.optimizeList = l, this.complexType = d, this.defaultValue = a()
        }
    };
u(XI, "Xo");
var YS = XI,
    QI = class QI {
        constructor(e, t, r, i, o, s, a, l, d) {
            this.name = e, this.attrName = t, this.nameForJson = r, this.mandatory = i, this.ignoreForServer = o, this.dataType = s, this.defaultValueGetter = a, this.optimizeList = l, this.complexType = d
        }
        get defaultValue() {
            return this.defaultValueGetter()
        }
    };
u(QI, "Qo");
var XS = QI,
    Sh = class Sh extends yn {
        static get isGenericRecordType() {
            return !0
        }
        getAttributes() {
            return this.constructor.Attributes || []
        }
        static getAttributes() {
            return this.Attributes || []
        }
        static isAnonymousRecord() {
            return this._isAnonymousRecord
        }
        constructor(e, t) {
            super(e, t)
        }
        static attr(e, t, r, i, o, s, a) {
            let l = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : !0,
                d = arguments.length > 8 ? arguments[8] : void 0,
                c;
            return typeof l != "boolean" ? (d = l, c = !0) : c = l, s === T.DateTime || s === T.Date || s === T.Time ? new XS(e, t, r, i, o, s, a, c, d) : new YS(e, t, r, i, o, s, a, c, d)
        }
        static attributesToDeclare() {
            return []
        }
        static init() {
            let e = this,
                t = e.attributesToDeclare();
            e.Attributes = t, t.forEach(r => {
                r.attrName in e.prototype || (r.dataType === T.Record || r.dataType === T.RecordList ? e.defineComplexProperty(r.attrName, r.dataType, r.complexType) : e.defineBasicProperty(r.attrName, r.dataType))
            }), e.RecordClass = yn.defineRecordClass(t.reduce((r, i) => (r[i.attrName] = null, r), {})), e.prototype.equals = function(r) {
                let i = Sh.prototype.equals.call(this, r);
                return t.forEach(o => {
                    var s;
                    (s = o.dataType) === T.Record || s === T.RecordList || s === T.LongInteger || s === T.Decimal || s === T.Currency || s === T.DateTime || s === T.Time || s === T.Date ? i && (i = this[o.attrName].equals(r[o.attrName])) : i && (i = this[o.attrName] === r[o.attrName])
                }), i
            }
        }
        static createDefaultData() {
            let e = this,
                t = e.RecordClass;
            if (t) {
                let r = {};
                for (let i of e.Attributes) i.dataType === T.Record || i.dataType === T.RecordList ? r[i.attrName] = yn.getData(i.defaultValue) : r[i.attrName] = i.defaultValue;
                return new t(r)
            }
        }
        static defineBasicProperty(e, t) {
            Object.defineProperty(this.prototype, e, {
                enumerable: !0,
                configurable: !0,
                get() {
                    return this.getBasicProperty(e)
                },
                set(r) {
                    this.setBasicProperty(e, r, t)
                }
            })
        }
        static defineComplexProperty(e, t, r) {
            Object.defineProperty(this.prototype, e, {
                enumerable: !0,
                configurable: !0,
                get() {
                    return this.getComplexProperty(e, r)
                },
                set(i) {
                    this.setComplexProperty(e, i, t, r)
                }
            })
        }
        static isCompatibleWith(e) {
            return this === e || this.isAnonymousRecord() && e.isAnonymousRecord() && this.UniqueId === e.UniqueId
        }
        isCompatibleWith(e) {
            return e.prototype instanceof Sh && this.constructor.isCompatibleWith(e)
        }
        getNonSerializableAttributes() {
            return this.getAttributes().filter(e => e.dataType === T.Object).map(e => e.attrName)
        }
    };
u(Sh, "Zo");
var Be = Sh;
Be.UniqueId = "", Be._isAnonymousRecord = !1;
var eA = class eA extends fr {
    static getItemType() {
        return this.itemType
    }
    getCache() {
        return null
    }
    newItem(e) {
        throw new Error("@abstract")
    }
    resetEmptyListItem() {
        this.data = this.data.setEmptyListItem(this.newItem())
    }
    get emptyListItem() {
        return this.isEmpty ? this.data.getEmptyListItem() : this.data.get(0)
    }
    set emptyListItem(e) {
        if (this.isEmpty) {
            if (this.data.getEmptyListItem() === e) return;
            this.writePropagate(this.data.setEmptyListItem(e), this.getCache())
        } else {
            if (this.data.get(0) === e) return;
            this.writePropagate(this.data.set(0, e), this.getCache())
        }
    }
    get modelId() {
        return this.data.modelId
    }
    get isEmpty() {
        return this.data.isEmpty()
    }
    get length() {
        return this.data.count()
    }
    isValidIndex(e) {
        let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
        return e % 1 == 0 && e >= 0 && e < this.length + (t ? 1 : 0)
    }
    checkIndex(e) {
        let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
        if (!this.isValidIndex(e, t)) {
            let r = "Index out of bounds. Index " + e + " for ";
            throw this.isEmpty ? r += "empty list." : r += "bounds [0, " + (this.length - 1) + "].", new Error(r)
        }
    }
    idOf(e) {
        return this.checkIndex(e), this.data.getId(e)
    }
    append(e) {
        this.writePropagate(this.data.push(e), this.getCache())
    }
    appendAll(e) {
        e.length > 0 && this.writePropagate(this.data.addFromOther(e.data), this.getCache())
    }
    pushAll(e) {
        e.length > 0 && this.writePropagate(this.data.pushAll(e), this.getCache())
    }
    insert(e, t) {
        this.checkIndex(e, !0), this.writePropagate(this.data.insert(e, t), this.getCache())
    }
    remove(e) {
        this.checkIndex(e), this.length === 1 && this.resetEmptyListItem(), this.writePropagate(this.data.remove(e), this.getCache())
    }
    clear() {
        this.resetEmptyListItem(), this.writePropagate(this.data.clear(), this.getCache())
    }
    indexOf(e) {
        for (let t = 0; t < this.length; t++)
            if (e(this.getItem(t))) return t;
        return -1
    }
    any(e) {
        return this.indexOf(e) !== -1
    }
    all(e) {
        return !this.any(t => !e(t))
    }
    filter(e) {
        let t = new this.constructor,
            r = [];
        for (let i = 0; i < this.length; i++) {
            let o = this.getItem(i);
            e(o) && r.push(o)
        }
        return t.pushAll(r), t
    }
    distinct() {
        let e = new this.constructor,
            t = new Array;
        for (let r = 0; r < this.length; r++) {
            let i = this.getItem(r),
                o = !0;
            for (let s = 0; s < t.length; s++)
                if (Zr(i, this.getItem(t[s]))) {
                    o = !1;
                    break
                } o && (t.push(r), e.append(i))
        }
        return e
    }
    sort(e, t) {
        let r = [];
        for (let o = 0; o < this.length; o++) r[o] = this.getItem(o);
        let i = t ? 1 : -1;
        r.sort((o, s) => i * qy(e(o), e(s))), this.clear(), this.pushAll(r)
    }
    getCurrent(e) {
        if (this.isEmpty) return this.emptyListItem; {
            let t = this.getCurrentRowNumber(e);
            return this.getItem(t)
        }
    }
    getCurrentRowNumber(e) {
        return e.getCurrentRowNumber(this)
    }
    getItem(e) {
        return this.checkIndex(e), this.data.get(e)
    }
    setCurrent(e, t) {
        if (this.isEmpty) this.emptyListItem = t;
        else {
            let r = this.getCurrentRowNumber(e);
            this.setItem(r, t)
        }
    }
    setItem(e, t) {
        this.checkIndex(e), this.data.get(e) !== t && this.writePropagate(this.data.set(e, t), this.getCache())
    }
    fastEquals(e) {
        return this === e
    }
    equals(e) {
        if (!e || this.constructor !== e.constructor || this.length !== e.length) return !1;
        if (this.isEmpty) return Zr(this.emptyListItem, e.emptyListItem);
        for (let t = 0; t < this.length; t++)
            if (!Zr(this.getItem(t), e.getItem(t))) return !1;
        return !0
    }
};
u(eA, "el");
var Mo = eA,
    tA = class tA extends Mo {
        constructor(e) {
            super(), this.data = e || new Ma(this.newItem())
        }
        static get isBasicTypeListType() {
            return !0
        }
        static getTypeDefaultValue() {
            throw new Error("Not implemented: getTypeDefaultValue")
        }
        newItem() {
            return this.constructor.getTypeDefaultValue()
        }
        clone() {
            return new this.constructor(this.data.clone())
        }
    };
u(tA, "tl");
var tr = tA,
    ps = class ps extends Mo {
        constructor(e, t) {
            if (super(), this._recordType = this.constructor.getItemType(), !this._recordType) throw new TypeError("GenericRecordLists must define a RecordType");
            this.data = e || new Ma(Be.getData(this.newItem())), this.cache = t != null ? t : new Cv
        }
        static get isGenericRecordListType() {
            return !0
        }
        getCache() {
            return this.cache
        }
        newItem(e) {
            return new(this.getRecordType())(e)
        }
        resetEmptyListItem() {
            this.data = this.data.setEmptyListItem(Be.getData(this.newItem()))
        }
        getRecordType() {
            return this._recordType
        }
        get emptyListItem() {
            return this.internalGetItem(0, this.isEmpty)
        }
        set emptyListItem(e) {
            this.isEmpty ? this.internalSetEmptyListItem(0, e) : this.internalSetItem(0, e)
        }
        append(e) {
            this.isEmpty && this.cache.invalidate(0), super.append(Be.getData(e)), this.cache.append(void 0)
        }
        appendAll(e) {
            this.isEmpty && this.cache.invalidate(0), super.appendAll(e), this.cache.appendMultiple(e.length)
        }
        pushAll(e) {
            this.isEmpty && this.cache.invalidate(0), super.pushAll(e.map(t => yn.getData(t))), this.cache.appendMultiple(e.length)
        }
        insert(e, t) {
            this.checkIndex(e, !0), this.isEmpty && this.cache.invalidate(0), super.insert(e, Be.getData(t)), this.cache.insert(e, void 0)
        }
        getItem(e) {
            return this.internalGetItem(e, !1)
        }
        internalGetItem(e, t) {
            t || this.checkIndex(e);
            let r = this.cache.getItem(e);
            return r ? (ps.setPropagationParent(r, this), ps.setPropagationKey(r, e), r) : (t ? (r = this.newItem(this.data.getEmptyListItem()), ps.setPropagationHandler(r, this, e, this.internalSetEmptyListItem)) : (r = this.newItem(this.data.get(e)), ps.setPropagationHandler(r, this, e, this.internalSetItem)), this.cache.setItem(e, r), r)
        }
        setItem(e, t) {
            this.internalSetItem(e, t)
        }
        internalSetItem(e, t, r) {
            var i;
            let o = (i = Be.getData(t)) !== null && i !== void 0 ? i : t;
            this.checkIndex(e), this.data.get(e) !== o && (this.writePropagate(this.data.set(e, o), this.cache), this.cache.setItem(e, void 0))
        }
        internalSetEmptyListItem(e, t, r) {
            var i;
            let o = (i = Be.getData(t)) !== null && i !== void 0 ? i : t;
            this.data.getEmptyListItem() !== o && (this.writePropagate(this.data.setEmptyListItem(o), this.cache), this.cache.setItem(e, void 0))
        }
        remove(e) {
            super.remove(e), this.cache.invalidate(e)
        }
        clear() {
            super.clear(), this.cache.invalidate()
        }
        readAll(e, t) {
            let r = [];
            for (let i = 0; i < t.length; i++) {
                let o = this.newItem();
                e(o, t.item(i)), r.push(o)
            }
            this.pushAll(r)
        }
        clone() {
            return new this.constructor(this.data.clone())
        }
        static isCompatibleWith(e) {
            return this === e || this.getItemType().isCompatibleWith(e.getItemType())
        }
        isCompatibleWith(e) {
            return e.prototype instanceof ps && this.constructor.isCompatibleWith(e)
        }
    };
u(ps, "nl");
var Ph = ps,
    nA = class nA extends tr {
        constructor(e) {
            super(e)
        }
        static getTypeDefaultValue() {
            return F.DEFAULT_INTEGER
        }
    };
u(nA, "rl");
var Rv = nA;
Rv.itemType = T.Integer;
var rA = class rA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_LONGINTEGER
    }
};
u(rA, "il");
var Ov = rA;
Ov.itemType = T.LongInteger;
var iA = class iA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_DATE
    }
};
u(iA, "sl");
var Dv = iA;
Dv.itemType = T.Date;
var oA = class oA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_DATETIME
    }
};
u(oA, "al");
var Nv = oA;
Nv.itemType = T.DateTime;
var sA = class sA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_TIME
    }
};
u(sA, "ol");
var Lv = sA;
Lv.itemType = T.Time;
var aA = class aA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_DECIMAL
    }
};
u(aA, "ll");
var xv = aA;
xv.itemType = T.Decimal;
var uA = class uA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_CURRENCY
    }
};
u(uA, "ul");
var Pv = uA;
Pv.itemType = T.Currency;
var cA = class cA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_EMAIL
    }
};
u(cA, "cl");
var kv = cA;
kv.itemType = T.Email;
var lA = class lA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_PHONENUMBER
    }
};
u(lA, "dl");
var Uv = lA;
Uv.itemType = T.PhoneNumber;
var dA = class dA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_BOOLEAN
    }
};
u(dA, "hl");
var Mv = dA;
Mv.itemType = T.Boolean;
var hA = class hA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_BINARYDATA
    }
};
u(hA, "gl");
var Fv = hA;
Fv.itemType = T.BinaryData;
var fA = class fA extends tr {
    constructor(e) {
        super(e)
    }
    static getTypeDefaultValue() {
        return F.DEFAULT_TEXT
    }
};
u(fA, "pl");
var Bv = fA;
Bv.itemType = T.Text;
var gA = class gA {
    constructor(e) {
        this.varValue = e
    }
    get value() {
        return this.varValue
    }
    set value(e) {
        this.setValue(e)
    }
    setValue(e) {
        this.varValue = e
    }
};
u(gA, "fl");
var jv = gA;

function zz() {
    return n => {
        let e = n;
        e.init !== void 0 && e.init()
    }
}
u(zz, "ml");
var Rc, QS = (Rc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("JSON", "jSONOut", "jSONOut", !0, !0, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(Rc, "vl"), Rc);
QS = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], QS);
var Oc, e1 = (Oc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("ExceptionMessage", "exceptionMessageAttr", "exceptionMessageAttr", !0, !0, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(Oc, "yl"), Oc);
e1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], e1);
var pA = class pA {
    constructor() {
        this.typeDefinitions = new Map, this.typeCache = new Map
    }
    isTypeRegistered(e) {
        return this.typeDefinitions.get(e) !== void 0
    }
    registerTypeDefinition(e, t) {
        this.typeDefinitions.set(e, t)
    }
    getType(e) {
        var o;
        let t = this.typeCache.get(e);
        if (t) return t;
        let r = this.typeDefinitions.get(e);
        if (!r) throw new TypeError(`Type ${e} was not registered`);
        let i = (o = class extends Be {
            constructor(a, l) {
                super(a, l)
            }
            static attributesToDeclare() {
                return r ? r.map(a => {
                    var l, d, c;
                    return this.attr(a.name, a.attrName, a.nameForJson || a.attrName, (l = a.mandatory) !== null && l !== void 0 && l, (d = a.ignoreForServer) === null || d === void 0 || d, a.dataType, a.defaultValue, (c = a.optimizeList) === null || c === void 0 || c, a.complexType)
                }).concat(super.attributesToDeclare()) : []
            }
        }, u(o, "r"), o);
        return i = Wt([s => {
            let a = s;
            a.init !== void 0 && a.init()
        }], i), this.typeCache.set(e, i), i
    }
};
u(pA, "bl");
var kh = pA,
    mA = class mA extends kh {
        constructor(e, t, r) {
            super(), this.mainAttributeName = e, this.mainAttributeAttrName = t, this.additionalAttributes = r
        }
        registerTypeDefinition(e, t) {
            throw new Error("Invalid operation")
        }
        createMainAttributeInfo(e) {
            return {
                name: this.mainAttributeName,
                attrName: this.mainAttributeAttrName,
                mandatory: !0,
                dataType: this.getDataType(e),
                defaultValue: this.getDefaultValue(e),
                complexType: this.getComplexType(e)
            }
        }
        registerTypeIfNeeded(e) {
            if (!this.isTypeRegistered(e)) {
                let t = [this.createMainAttributeInfo(e)];
                this.additionalAttributes && (t = t.concat(this.additionalAttributes)), super.registerTypeDefinition(e, t)
            }
        }
        getType(e) {
            return this.registerTypeIfNeeded(e), super.getType(e)
        }
    };
u(mA, "Tl");
var Uh = mA,
    vA = class vA extends Uh {
        constructor(e, t, r) {
            super(e, t, r)
        }
        getDataType(e) {
            return e
        }
        getDefaultValue(e) {
            return () => Ve(e)
        }
        getComplexType(e) {}
    };
u(vA, "wl");
var As = vA,
    yA = class yA extends Uh {
        constructor(e, t, r) {
            super(e, t, r)
        }
        getDataType(e) {
            return T.Record
        }
        getDefaultValue(e) {
            return () => fr.getData(new e)
        }
        getComplexType(e) {
            return e
        }
    };
u(yA, "El");
var dn = yA,
    H;
(function(n) {
    function e(y) {
        return y && y.constructor === He
    }
    u(e, "t");

    function t(y) {
        return typeof y == "string"
    }
    u(t, "n");

    function r(y) {
        return typeof y == "boolean"
    }
    u(r, "r");

    function i(y) {
        return o(y) && !isNaN(y)
    }
    u(i, "i");

    function o(y) {
        return typeof y == "number"
    }
    u(o, "s");

    function s(y) {
        return y && y.constructor === bt
    }
    u(s, "a");

    function a(y) {
        return y instanceof le
    }
    u(a, "o");

    function l(y) {
        return a(y) && !isNaN(y.getTime())
    }
    u(l, "l");

    function d(y) {
        return y instanceof Date || Object.prototype.toString.call(y) === "[object Date]"
    }
    u(d, "u"), n.isDecimal = e, n.isBinaryData = function(y) {
        var b;
        return ((b = y == null ? void 0 : y.value) === null || b === void 0 ? void 0 : b.constructor) === Nn
    }, n.isValidDecimal = function(y) {
        return e(y) && !y.isNaN()
    }, n.isWithinDecimalRange = function(y) {
        return F.MIN_DECIMAL_VALUE.lessThanOrEqualTo(y) && F.MAX_DECIMAL_VALUE.greaterThanOrEqualTo(y)
    }, n.isText = t, n.isBoolean = r, n.isBasicType = function(y) {
        return t(y) || o(y) || r(y) || a(y) || s(y) || e(y)
    }, n.isValidInteger = function(y) {
        return i(y) && y % 1 == 0
    }, n.isValidJsNumber = i, n.isJsNumber = o, n.isWithinIntegerRange = function(y) {
        return y >= F.MIN_INTEGER_VALUE && y <= F.MAX_INTEGER_VALUE
    }, n.isValidLongInteger = function(y) {
        return s(y)
    }, n.isLongInteger = s, n.isValidDate = function(y) {
        return l(y) && y.hours === F.DEFAULT_DATE.hours && y.minutes === F.DEFAULT_DATE.minutes && y.seconds === F.DEFAULT_DATE.seconds
    }, n.isValidTime = function(y) {
        return l(y) && y.year === F.DEFAULT_TIME.year && y.month === F.DEFAULT_TIME.month && y.day === F.DEFAULT_TIME.day
    }, n.isDateTime = a, n.isValidDateTime = l, n.isJsDate = d, n.isValidJsDate = function(y) {
        return d(y) && !isNaN(y.getTime())
    }, n.hasBinaryDataInterface = function(y) {
        return !!y && (y.content !== void 0 || y.url !== void 0)
    };
    let c = 9007199254740991,
        h = -9007199254740991;
    n.ensureNumberInsideBounds = function(y) {
        let b = "",
            E = "";
        if (y.greaterThan(c)) b = "maximum", E = c.toString();
        else {
            if (!y.lessThan(h)) return;
            b = "minimum", E = h.toString()
        }
        let S = `Unable to convert ${y.toString()} to the Javascript Number type since exceeds the ${b} value allowed which is ${E}.`;
        throw new Q.NumberOverflowException(S)
    }, n.ensureNumberPrecision = function(y) {
        if (y.decimalPlaces() > 16) {
            let b = `Unable to convert ${y.toString()} to the Javascript Number type because it will lead to precision loss. The maximum safe number of digits after the decimal point is 16.`;
            throw new Q.NumberOverflowException(b)
        }
    };
    let p = class p {
        static get None() {
            return ""
        }
        static get Minimum() {
            return "minimum"
        }
        static get Maximum() {
            return "maximum"
        }
    };
    u(p, "h");
    let f = p;

    function g(y, b, E, S) {
        let _ = f.None,
            I = "",
            x = Math.max(b, h),
            L = Math.min(E, c);
        if (y < x) _ = f.Minimum, I = x.toString();
        else {
            if (!(y > L)) return;
            _ = f.Maximum, I = L.toString()
        }
        throw new Q.NumberOverflowException(function(U, N, j, q) {
            return `Unable to convert ${U} to the ${N} type since it exceeds the ${j} value allowed which is ${q}.`
        }(y.toString(), S, _, I))
    }
    u(g, "g"), n.ensureIntegerInsideBounds = function(y) {
        g(y, F.MIN_INTEGER_VALUE, F.MAX_INTEGER_VALUE, "Integer")
    }, n.ensureLongIntegerInsideBounds = function(y) {
        g(y, F.MIN_LONGINTEGER_VALUE.toNumber(), F.MAX_LONGINTEGER_VALUE.toNumber(), "Long Integer")
    }, n.ensureDecimalInsideBounds = function(y) {
        g(y, F.MIN_DECIMAL_VALUE.toNumber(), F.MAX_DECIMAL_VALUE.toNumber(), "Decimal")
    }
})(H || (H = {}));
var Dc, Wz = Object.freeze({
        __proto__: null,
        BasicTypeKeyedTypeFactory: As,
        BasicTypeList: tr,
        BasicVariableHolder: jv,
        BinaryData: Nn,
        BinaryDataList: Fv,
        BooleanList: Mv,
        Cache: ll,
        ComplexTypeKeyedTypeFactory: dn,
        get Constants() {
            return F
        },
        CurrencyList: Pv,
        get DataTypes() {
            return T
        },
        DateList: Dv,
        DateTime: le,
        DateTimeList: Nv,
        Decimal: He,
        DecimalList: xv,
        EmailList: kv,
        get ErrorHandlerOutputType() {
            return e1
        },
        GenericRecord: Be,
        GenericRecordList: Ph,
        ImmutableBase: fr,
        ImmutableListWithTracking: Ma,
        IntegerList: Rv,
        get JSONSerializeOutputType() {
            return QS
        },
        List: Mo,
        ListCache: Cv,
        LongInteger: bt,
        LongIntegerList: Ov,
        PhoneNumberList: Uv,
        Record: yn,
        RecordTypeFactory: kh,
        RecordWithStaticConstructor: zz,
        TextList: Bv,
        TimeList: Lv,
        TypeKeyedTypeFactory: Uh,
        get TypeValidations() {
            return H
        },
        VariableHolder: (Dc = class extends jv {
            constructor(e) {
                super(e)
            }
            setValue(e) {
                super.setValue(e && e.clone())
            }
        }, u(Dc, "VariableHolder"), Dc),
        areBinaryNulls: u(function(n, e) {
            return !n.hasContent() && !e.hasContent()
        }, "areBinaryNulls"),
        compare: qy,
        defaultForType: Ve,
        equals: Zr,
        mapDataTypeToName: ZS
    }),
    tS = "Authorization",
    qz = Object.freeze({
        __proto__: null,
        ensureUserHasRole: u(n => {
            var e, t, r, {
                roles: i,
                auth: o = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance()
            } = n;
            if (!(o != null && o.isAuthenticated())) throw z(tS, "Not authorized: User is not logged in"), new Q.SecurityException("Not authorized", "User is not logged in");
            if (!i.find(s => !!s && o.hasRole(s.roleKey))) throw z(tS, "Not authorized: No roles found on current user"), (r = (t = i[i.length - 1]) === null || t === void 0 ? void 0 : t.roleException) !== null && r !== void 0 ? r : new Q.SecurityException("Not authorized", "User doesn't have the required role")
        }, "ensureUserHasRole"),
        hasRole: u(n => {
            var e, {
                roleKey: t,
                auth: r = (e = de.resolve(Y.Auth)) === null || e === void 0 ? void 0 : e.getInstance()
            } = n;
            return r != null && r.isAuthenticated() ? r.hasRole(t) : (z(tS, "Not authorized: User is not logged in"), !1)
        }, "hasRole")
    });

function TU() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : F.FORMAT.defaultDateTimeFormat;
    return {
        year: parseInt(RegExp["$" + (n.yearIndexForDate + 1)], 10),
        month: parseInt(RegExp["$" + (n.monthIndexForDate + 1)], 10),
        day: parseInt(RegExp["$" + (n.dayIndexForDate + 1)], 10)
    }
}
u(TU, "Dl");

function EU() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : F.FORMAT.defaultDateTimeFormat,
        e = parseInt(RegExp["$" + (n.secondsIndexForTime + 1)], 10);
    return {
        hours: parseInt(RegExp["$" + (n.hoursIndexForTime + 1)], 10),
        minutes: parseInt(RegExp["$" + (n.minutesIndexForTime + 1)], 10),
        seconds: isNaN(e) ? 0 : e
    }
}
u(EU, "Rl");

function _U() {
    let n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : F.FORMAT.defaultDateTimeFormat,
        e = parseInt(RegExp["$" + (n.secondsIndexForDateTime + 1)], 10);
    return {
        year: parseInt(RegExp["$" + (n.yearIndexForDateTime + 1)], 10),
        month: parseInt(RegExp["$" + (n.monthIndexForDateTime + 1)], 10),
        day: parseInt(RegExp["$" + (n.dayIndexForDateTime + 1)], 10),
        hours: parseInt(RegExp["$" + (n.hoursIndexForDateTime + 1)], 10),
        minutes: parseInt(RegExp["$" + (n.minutesIndexForDateTime + 1)], 10),
        seconds: isNaN(e) ? 0 : e
    }
}
u(_U, "Cl");
var $v = "[\uD800-\uDBFF]",
    SU = new RegExp($v, "g");

function hh(n) {
    let e = n.match(SU);
    return n.length - (e ? e.length : 0)
}
u(hh, "Ol");

function nS(n, e, t) {
    var r;
    let i = hh(n);
    if (!(e >= 0 && t > 0 && i > e)) return F.DEFAULT_TEXT;
    i = Math.min(i - e, t);
    let o = n.match(SU) ? (r = n.match(new RegExp("(" + $v + ".|.){" + e + "}((" + $v + ".|.){" + i + "})"))) === null || r === void 0 ? void 0 : r[2] : n.substring(e, e + i);
    return o != null ? o : ""
}
u(nS, "_l");

function Px(n) {
    let e = new Date(n.getTime());
    return e.setMinutes(n.getMinutes() - n.getTimezoneOffset()), e.getTime()
}
u(Px, "Ml");

function Um(n, e, t) {
    let r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1,
        i = t <= 36e5,
        o = t <= 6e4,
        s = t <= 1e3,
        a = kx(n, i, o, s).toNative(),
        l = kx(e, i, o, s).toNative(),
        d = Date.UTC(a.getUTCFullYear(), a.getUTCMonth(), a.getUTCDate(), a.getUTCHours(), a.getUTCMinutes(), a.getUTCSeconds(), 0),
        c = Date.UTC(l.getUTCFullYear(), l.getUTCMonth(), l.getUTCDate(), l.getUTCHours(), l.getUTCMinutes(), l.getUTCSeconds(), 0),
        h = r ? Px(l) - Px(a) : c - d;
    return Math.floor(h / t)
}
u(Um, "Ul");

function kx(n, e, t, r) {
    return new le(n.year, n.month, n.day, e ? n.hours : 0, t ? n.minutes : 0, r ? n.seconds : 0)
}
u(kx, "Fl");

function IU(n, e, t) {
    let r = new le(1900, 1, 1, n, e, t);
    return r.hours === n && r.minutes === e && r.seconds === t
}
u(IU, "$l");

function t1(n, e, t, r, i, o) {
    let s = new le(n, e, t, r, i, o);
    return s.year === n && s.month === e && s.day === t && s.hours === r && s.minutes === i && s.seconds === o
}
u(t1, "Pl");

function AU(n) {
    return n ? 1 : 0
}
u(AU, "Vl");

function CU(n) {
    return n ? bt.fromNumber(1) : bt.fromNumber(0)
}
u(CU, "Bl");

function RU(n) {
    return new He(n ? 1 : 0)
}
u(RU, "kl");

function n1(n) {
    return n === !0 ? "True" : n === !1 ? "False" : F.DEFAULT_TEXT
}
u(n1, "zl");

function OU(n) {
    return new le(n.year, n.month, n.day)
}
u(OU, "Hl");

function DU(n) {
    return new le(1900, 1, 1, n.hours, n.minutes, n.seconds)
}
u(DU, "jl");

function r1(n) {
    return n.toString(F.FORMAT.defaultDateTimeFormat.dateTimeFormat)
}
u(r1, "ql");

function i1(n) {
    return n.toString(F.FORMAT.defaultDateTimeFormat.dateFormat)
}
u(i1, "Gl");

function fh(n) {
    return H.isValidDecimal(n) ? n.toString() : F.DEFAULT_TEXT
}
u(fh, "Wl");

function Vv(n) {
    return n.gte(F.MIN_INTEGER_VALUE) && n.lte(F.MAX_INTEGER_VALUE)
}
u(Vv, "Kl");

function NU(n) {
    return Vv(n) ? n.round().toNumber() : F.DEFAULT_INTEGER
}
u(NU, "Jl");

function Mh(n) {
    return n.gte(F.MIN_LONGINTEGER_VALUE.toString()) && n.lte(F.MAX_LONGINTEGER_VALUE.toString())
}
u(Mh, "Yl");

function LU(n) {
    return Mh(n) ? bt.fromString(n.round().toString()) : F.DEFAULT_LONGINTEGER
}
u(LU, "Xl");

function xU(n) {
    return H.isWithinIntegerRange(n.toNumber())
}
u(xU, "Ql");

function o1(n) {
    return H.isValidLongInteger(n) ? n.toString() : F.DEFAULT_TEXT
}
u(o1, "Zl");

function PU(n) {
    return H.isValidInteger(n) ? n.toString() : F.DEFAULT_TEXT
}
u(PU, "eu");

function kU(n, e) {
    let t = e.getRegExpForDate().test(n);
    if (t) {
        let r = TU(e),
            i = new le(r.year, r.month, r.day);
        t = i.year === r.year && i.month === r.month && i.day === r.day
    }
    return t
}
u(kU, "tu");

function Gz(n, e) {
    if (!kU(n, e)) return le.defaultValue;
    let t = TU(e);
    return new le(t.year, t.month, t.day)
}
u(Gz, "nu");

function UU(n, e) {
    let t = e.getRegExpForDateTime().test(n);
    if (t) {
        let r = _U(e);
        t = t1(r.year, r.month, r.day, r.hours, r.minutes, r.seconds)
    }
    return t
}
u(UU, "ru");

function Kz(n, e) {
    if (!UU(n, e)) return le.defaultValue;
    let t = _U(e);
    return new le(t.year, t.month, t.day, t.hours, t.minutes, t.seconds)
}
u(Kz, "iu");

function gf(n) {
    return /^\d{4}-\d{2}-\d{2}(?:T|t)\d{2}:\d{2}(:\d{2}(?:\.\d+)?)?(?:Z|[+-]\d{2}:\d{2})?$/.test(n)
}
u(gf, "su");

function Gy(n) {
    return n.indexOf(" ") !== -1
}
u(Gy, "au");

function MU(n) {
    let e = n.toUpperCase().search("T| ");
    return e !== -1 && (n = n.substring(0, e)), n
}
u(MU, "ou");

function FU(n) {
    let e = F.FORMAT.dateTimeFormats;
    n = MU(n);
    for (let t = 0; t < e.length; ++t)
        if (kU(n, e[t])) return !0;
    return !1
}
u(FU, "lu");

function s1(n) {
    let e = F.FORMAT.dateTimeFormats;
    n = MU(n);
    for (let t = 0; t < e.length; ++t) {
        let r = Gz(n, e[t]);
        if (!r.eq(le.defaultValue)) return r
    }
    return le.defaultValue
}
u(s1, "uu");

function BU(n) {
    return !gf(n) || !isNaN(Date.parse(n))
}
u(BU, "cu");

function jU(n) {
    let e = F.FORMAT.dateTimeFormats;
    if (gf(n)) return BU(n);
    Gy(n) || (n += " 00:00:00");
    for (let t = 0; t < e.length; ++t)
        if (UU(n, e[t])) return !0;
    return !1
}
u(jU, "du");

function a1(n) {
    let e = F.FORMAT.dateTimeFormats;
    if (gf(n)) return le.fromISODateTime(n);
    Gy(n) || (n += " 00:00:00");
    for (let t = 0; t < e.length; ++t) {
        let r = Kz(n, e[t]);
        if (!r.eq(le.defaultValue)) return r
    }
    return le.defaultValue
}
u(a1, "hu");

function $U(n) {
    let e = n.indexOf(" ");
    return e !== -1 && (n = n.substring(e + 1, n.length)), n
}
u($U, "gu");

function SI(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : F.FORMAT.defaultDateTimeFormat;
    if (gf(n)) return BU(n);
    Gy(n) && (n = $U(n));
    let t = e.getRegExpForTime().test(n);
    if (t) {
        let r = EU(e);
        t = IU(r.hours, r.minutes, r.seconds)
    }
    return t
}
u(SI, "pu");

function VU(n) {
    if (gf(n)) {
        let e = le.fromISODateTime(n);
        return new le(1900, 1, 1, e.hours, e.minutes, e.seconds, e.milliseconds)
    }
    return Gy(n) && (n = $U(n)),
        function(e, t) {
            if (!SI(e, t)) return le.defaultValue;
            let r = EU(t);
            return new le(1900, 1, 1, r.hours, r.minutes, r.seconds)
        }(n, F.FORMAT.defaultDateTimeFormat)
}
u(VU, "fu");

function u1(n) {
    return n.toString(F.FORMAT.defaultDateTimeFormat.timeFormat)
}
u(u1, "mu");

function HU(n) {
    if (F.FORMAT.numberFormat.getRegExpForInteger().test(n)) {
        let e = parseInt(n, 10);
        if (!isNaN(e) && e >= F.MIN_INTEGER_VALUE && e <= F.MAX_INTEGER_VALUE) return e
    }
    return null
}
u(HU, "vu");

function zU(n) {
    if (F.FORMAT.numberFormat.getRegExpForDecimal().test(n)) {
        let e = new He(n);
        if (!e.isNaN() && e.gte(F.MIN_DECIMAL_VALUE) && e.lte(F.MAX_DECIMAL_VALUE)) return e
    }
    return null
}
u(zU, "yu");

function WU(n) {
    if (!F.FORMAT.numberFormat.getRegExpForInteger().test(n)) return null;
    let e = n.charAt(0) === "-";
    if (e && n.length < F.MIN_LONGINTEGER_VALUE.toString().length || !e && n.length < F.MAX_LONGINTEGER_VALUE.toString().length || Mh(new He(n))) try {
        return bt.fromString(n)
    } catch (t) {}
    return null
}
u(WU, "bu");

function qU(n) {
    return zU(n) !== null
}
u(qU, "Tu");

function GU(n) {
    return zU(n) === null ? F.DEFAULT_DECIMAL : new He(n)
}
u(GU, "wu");

function KU(n) {
    return HU(n) !== null
}
u(KU, "Eu");

function JU(n) {
    let e = HU(n);
    return e === null ? F.DEFAULT_INTEGER : e
}
u(JU, "Iu");

function ZU(n) {
    return WU(n) !== null
}
u(ZU, "Au");

function YU(n) {
    let e = WU(n);
    return e === null ? F.DEFAULT_LONGINTEGER : e
}
u(YU, "Nu");

function XU(n) {
    return n.toLowerCase() === "true"
}
u(XU, "Su");

function Qm(n) {
    if (typeof n == "number" || H.isLongInteger(n) || H.isDecimal(n)) return new He(n.toString()).round().toNumber();
    throw new TypeError("Cannot convert type '" + typeof n + "' to 'Integer'")
}
u(Qm, "Du");

function ev(n) {
    if (typeof n == "number" || H.isLongInteger(n) || H.isDecimal(n)) return bt.fromString(new He(n.toString()).round().toString());
    throw new TypeError("Cannot convert type '" + typeof n + "' to 'LongInteger'")
}
u(ev, "Ru");

function tv(n) {
    if (typeof n == "number" || H.isLongInteger(n) || H.isDecimal(n)) return new He(n.toString());
    throw new TypeError("Cannot convert type '" + typeof n + "' to 'Decimal'")
}
u(tv, "Cu");

function rS(n, e, t) {
    if (n instanceof le || Object.prototype.toString.call(n) === "[object Date]") {
        let r = new le(n.getTime()),
            i = e ? r.year : 1900,
            o = e ? r.month : 1,
            s = e ? r.day : 1,
            a = t ? r.hours : 0,
            l = t ? r.minutes : 0,
            d = t ? r.seconds : 0;
        return new le(i, o, s, a, l, d)
    }
    throw new TypeError("Cannot convert type '" + typeof n + "' to 'DateTime'")
}
u(rS, "xu");

function Ux(n, e, t, r) {
    return e < 0 ? F.DEFAULT_TEXT : (t.length > 1 && (t = t.substr(0, 1)), r.length > 1 && (r = r.substr(0, 1)), n.toFormat(e, He.rounding, {
        decimalSeparator: t,
        groupSeparator: r
    }))
}
u(Ux, "Lu");
var II = "[a-zA-Z0-9.!#$%&'*+\\-/=?^_`{|}~]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",
    QU = "([0-9a-zA-Z\\\\= ]*|=\\?([^?]*)\\?([qQbB])\\?([^?]*)\\?=)",
    Jz = new RegExp("^" + II + "$"),
    Zz = new RegExp("^" + QU + "[ ]*<" + II + ">$"),
    Yz = new RegExp('^\\"' + QU + '\\"[ ]*<' + II + ">$"),
    AI = Object.freeze({
        __proto__: null,
        abs: u(function(n) {
            let e = n.abs();
            return e.isNaN() ? F.DEFAULT_DECIMAL : e
        }, "abs"),
        addDays: u(function(n, e) {
            return n.addDays(e)
        }, "addDays"),
        addHours: u(function(n, e) {
            return n.addHours(e)
        }, "addHours"),
        addMinutes: u(function(n, e) {
            return n.addMinutes(e)
        }, "addMinutes"),
        addMonths: u(function(n, e) {
            return n.addMonths(e)
        }, "addMonths"),
        addSeconds: u(function(n, e) {
            return n.addSeconds(e)
        }, "addSeconds"),
        addYears: u(function(n, e) {
            return n.addYears(e)
        }, "addYears"),
        booleanToDecimal: RU,
        booleanToInteger: AU,
        booleanToLongInteger: CU,
        booleanToText: n1,
        buildDateTime: u(function(n, e) {
            return new le(n.year, n.month, n.day, e.hours, e.minutes, e.seconds, e.milliseconds)
        }, "buildDateTime"),
        chr: u(function(n) {
            return n >= 0 && n <= 65535 ? String.fromCharCode(n) : F.DEFAULT_TEXT
        }, "chr"),
        concat: u(function(n, e) {
            return (n || "") + (e || "")
        }, "concat"),
        currDate: u(function() {
            let n = new le(new Date);
            return new le(n.year, n.month, n.day)
        }, "currDate"),
        currDateTime: u(function() {
            return new le(new Date)
        }, "currDateTime"),
        currTime: u(function() {
            let n = new le(new Date);
            return new le(1900, 1, 1, n.hours, n.minutes, n.seconds)
        }, "currTime"),
        dateTimeToDate: OU,
        dateTimeToText: r1,
        dateTimeToTime: DU,
        dateToDateTime: u(function(n) {
            return n
        }, "dateToDateTime"),
        dateToText: i1,
        day: u(function(n) {
            return n.day
        }, "day"),
        dayOfWeek: u(function(n) {
            return n.weekDay
        }, "dayOfWeek"),
        decimalToBoolean: u(function(n) {
            return !n.eq(new He(0))
        }, "decimalToBoolean"),
        decimalToInteger: NU,
        decimalToIntegerValidate: Vv,
        decimalToLongInteger: LU,
        decimalToLongIntegerValidate: Mh,
        decimalToText: fh,
        diffDays: u(function(n, e) {
            return Um(n, e, 864e5, !0)
        }, "diffDays"),
        diffHours: u(function(n, e) {
            return Um(n, e, 36e5)
        }, "diffHours"),
        diffMinutes: u(function(n, e) {
            return Um(n, e, 6e4)
        }, "diffMinutes"),
        diffSeconds: u(function(n, e) {
            return Um(n, e, 1e3)
        }, "diffSeconds"),
        emailAddressValidate: u(function(n) {
            return n === "" || !/\.@/.test(n) && (Jz.test(n) || Zz.test(n) || Yz.test(n))
        }, "emailAddressValidate"),
        encodeHtml: u(function(n) {
            return n === void 0 ? "" : function(e) {
                if (e === void 0 || e === "") return e;
                let t = [],
                    r = 32,
                    i = 10;
                e.charCodeAt(0) === r ? t[0] = "\xA0" : t[0] = e.charAt(0);
                for (let o = 1; o < e.length - 1; ++o) e.charCodeAt(o) !== r || e.charCodeAt(o - 1) !== i && e.charCodeAt(o + 1) !== r ? t[o] = e.charAt(o) : t[o] = "\xA0";
                return e.length !== 1 && (e.charCodeAt(e.length - 1) === r ? t[e.length - 1] = "\xA0" : t[e.length - 1] = e.charAt(e.length - 1)), t.join("")
            }(function(e) {
                let t = [];
                for (let r = 0; r < e.length; ++r) {
                    let i = e.charCodeAt(r);
                    i === 60 ? t.push("&lt;") : i === 62 ? t.push("&gt;") : i === 38 ? t.push("&amp;") : i === 34 ? t.push("&quot;") : i === 39 ? t.push("&#39;") : i >= 160 && i <= 255 ? t.push("&#" + i + ";") : t.push(e.charAt(r))
                }
                return t.join("")
            }(n)).replace(/\r/g, "").replace(/&#13;/g, "").replace(/\n/g, "<br/>").replace(/&#10;/g, "<br/>")
        }, "encodeHtml"),
        encodeJavascript: u(function(n) {
            return n.replace(/\\/g, "\\x5c").replace(/'/g, "\\x27").replace(/\"/g, "\\x22").replace("&", "\\x26").replace("<", "\\x3c").replace(/>/g, "\\x3e").replace(/\r/g, "\\r").replace(/\n/g, "\\n")
        }, "encodeJavascript"),
        encodeUrl: u(function(n) {
            return encodeURIComponent(n).replace(/'/g, "%27").replace(/%20/g, "+")
        }, "encodeUrl"),
        formatCurrency: u(function(n, e, t, r, i) {
            let o = Ux(n, t, r, i);
            return o === F.DEFAULT_TEXT ? F.DEFAULT_TEXT : e + o
        }, "formatCurrency"),
        formatDateTime: u(function(n, e) {
            return n.toString(e)
        }, "formatDateTime"),
        formatDecimal: Ux,
        formatPercent: u(function(n, e, t) {
            try {
                return e < 0 ? "" : (t.length > 1 && (t = t.substr(0, 1)), n.times(100).toFormat(e, He.rounding, {
                    decimalSeparator: t,
                    groupSeparator: ""
                }) + "%")
            } catch (r) {
                return ""
            }
        }, "formatPercent"),
        formatPhoneNumber: u(function(n, e, t, r, i, o, s) {
            try {
                return /^\d+$/.test(n) ? n.length !== e + t + r ? n : i + n.substr(0, e) + o + n.substr(e, t) + s + n.substr(e + t, r) : n
            } catch (a) {
                return ""
            }
        }, "formatPhoneNumber"),
        formatText: u(function(n, e, t, r, i) {
            try {
                let o = hh(n);
                if (o < e) {
                    i = nS(i, 0, 1);
                    let s = e - o;
                    for (; s-- > 0;) r ? n = i + n : n += i;
                    return n
                }
                return o > t ? nS(n, r ? o - t : 0, t) : n
            } catch (o) {
                return ""
            }
        }, "formatText"),
        getAppName: u(function() {
            return My()
        }, "getAppName"),
        getBookmarkableURL: u(function() {
            return window.location.href
        }, "getBookmarkableURL"),
        getCurrentLocale: u(function() {
            let {
                localeService: n = hf(Y.LocaleService)
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            return n ? n.getCurrentLocale() : F.DEFAULT_TEXT
        }, "getCurrentLocale"),
        getOwnerURLPath: u(function() {
            return Es()
        }, "getOwnerURLPath"),
        getUserAgent: u(function() {
            return navigator.userAgent
        }, "getUserAgent"),
        getUserId: u(function() {
            let n = Da();
            return z("RolesInfo", `Checking User's ID: ${n}`), n
        }, "getUserId"),
        hour: u(function(n) {
            return n.hours
        }, "hour"),
        identifierToInteger: u(function(n) {
            return n
        }, "identifierToInteger"),
        identifierToLongInteger: u(function(n) {
            return n
        }, "identifierToLongInteger"),
        identifierToText: u(function(n) {
            return n
        }, "identifierToText"),
        iif: u(function(n, e, t) {
            return n ? e : t
        }, "iif"),
        index: u(function(n, e, t, r, i) {
            var o;
            try {
                if (e.length === 0 || t < 0 || t > hh(n)) return -1;
                let s;
                i && (n = n.toLocaleLowerCase(), e = e.toLocaleLowerCase()), t && t > 0 && (s = (o = n.match(new RegExp("(" + $v + ".|.){" + t + "}"))) === null || o === void 0 ? void 0 : o[0].length);
                let a = r ? n.lastIndexOf(e, s || n.length) : n.indexOf(e, s || 0);
                return a < 0 ? -1 : hh(n.substr(0, a))
            } catch (s) {
                return -1
            }
        }, "index"),
        integerToBoolean: u(function(n) {
            return n !== 0
        }, "integerToBoolean"),
        integerToDecimal: u(function(n) {
            return new He(n)
        }, "integerToDecimal"),
        integerToIdentifier: u(function(n) {
            return n
        }, "integerToIdentifier"),
        integerToLongInteger: u(function(n) {
            return bt.fromNumber(n)
        }, "integerToLongInteger"),
        integerToText: PU,
        length: hh,
        like: u(function(n, e) {
            if (!e) return !1;
            let t = e.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&").replace(/%/g, ".*").replace(/_/g, ".");
            return RegExp(`^${t}$`, "gi").test(n)
        }, "like"),
        longIntegerToDecimal: u(function(n) {
            return new He(n.toString())
        }, "longIntegerToDecimal"),
        longIntegerToIdentifier: u(function(n) {
            return n
        }, "longIntegerToIdentifier"),
        longIntegerToInteger: u(function(n) {
            let e = n.toNumber();
            return H.isWithinIntegerRange(e) ? e : F.DEFAULT_INTEGER
        }, "longIntegerToInteger"),
        longIntegerToIntegerValidate: xU,
        longIntegerToText: o1,
        max: u(function(n, e) {
            let t = He.max(n, e);
            return t.isNaN() ? F.DEFAULT_DECIMAL : t
        }, "max"),
        min: u(function(n, e) {
            let t = He.min(n, e);
            return t.isNaN() ? F.DEFAULT_DECIMAL : t
        }, "min"),
        minute: u(function(n) {
            return n.minutes
        }, "minute"),
        mod: u(function(n, e) {
            let t = n.mod(e);
            return t.isNaN() ? F.DEFAULT_DECIMAL : t
        }, "mod"),
        month: u(function(n) {
            return n.month
        }, "month"),
        newDate: u(function(n, e, t) {
            return t1(n, e, t, 0, 0, 0) ? new le(n, e, t) : F.DEFAULT_DATE
        }, "newDate"),
        newDateTime: u(function(n, e, t, r, i, o) {
            return t1(n, e, t, r, i, o) ? new le(n, e, t, r, i, o) : F.DEFAULT_DATETIME
        }, "newDateTime"),
        newTime: u(function(n, e, t) {
            return IU(n, e, t) ? new le(1900, 1, 1, n, e, t) : F.DEFAULT_TIME
        }, "newTime"),
        nullBinary: u(function() {
            return F.DEFAULT_BINARYDATA
        }, "nullBinary"),
        nullDate: u(function() {
            return F.DEFAULT_DATE
        }, "nullDate"),
        nullIdentifier: u(function() {
            return 0
        }, "nullIdentifier"),
        nullObject: u(function() {
            return null
        }, "nullObject"),
        nullTextIdentifier: u(function() {
            return ""
        }, "nullTextIdentifier"),
        objectToBoolean: u(function(n) {
            if (typeof n == "boolean") return n;
            throw new TypeError("Cannot convert type '" + typeof n + "' to 'Boolean'")
        }, "objectToBoolean"),
        objectToDate: u(function(n) {
            return rS(n, !0, !1)
        }, "objectToDate"),
        objectToDateTime: u(function(n) {
            return rS(n, !0, !0)
        }, "objectToDateTime"),
        objectToDecimal: tv,
        objectToInteger: Qm,
        objectToLongInteger: ev,
        objectToText: u(function(n) {
            if (typeof n == "string") return n;
            throw new TypeError("Cannot convert type '" + typeof n + "' to 'Text'")
        }, "objectToText"),
        objectToTime: u(function(n) {
            return rS(n, !1, !0)
        }, "objectToTime"),
        power: u(function(n, e) {
            let t = n.pow(e);
            return t.isNaN() ? F.DEFAULT_DECIMAL : t
        }, "power"),
        replace: u(function(n, e, t) {
            let r = e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
            return n.replace(new RegExp(r, "g"), t)
        }, "replace"),
        round: u(function(n) {
            let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0,
                t = n.toDecimalPlaces(e);
            return t.isNaN() ? F.DEFAULT_DECIMAL : t
        }, "round"),
        second: u(function(n) {
            return n.seconds
        }, "second"),
        sign: u(function(n) {
            let e = new He(0);
            return n.eq(e) || n.isNaN() ? F.DEFAULT_INTEGER : n > e ? 1 : -1
        }, "sign"),
        sqrt: u(function(n) {
            try {
                let e = n.sqrt();
                return e.isNaN() ? F.DEFAULT_DECIMAL : e
            } catch (e) {
                return F.DEFAULT_DECIMAL
            }
        }, "sqrt"),
        substr: nS,
        textToBoolean: XU,
        textToDate: s1,
        textToDateTime: a1,
        textToDateTimeValidate: jU,
        textToDateValidate: FU,
        textToDecimal: GU,
        textToDecimalValidate: qU,
        textToIdentifier: u(function(n) {
            return n
        }, "textToIdentifier"),
        textToInteger: JU,
        textToIntegerValidate: KU,
        textToLongInteger: YU,
        textToLongIntegerValidate: ZU,
        textToTime: VU,
        textToTimeValidate: SI,
        timeToText: u1,
        toLower: u(function(n) {
            return n.toLowerCase()
        }, "toLower"),
        toObject: u(function(n) {
            return n
        }, "toObject"),
        toUpper: u(function(n) {
            return n.toUpperCase()
        }, "toUpper"),
        trim: u(function(n) {
            return n.trim()
        }, "trim"),
        trimEnd: u(function(n) {
            let e = n.length - 1;
            for (; n[e] === " ";) e--;
            return n.substr(0, e + 1)
        }, "trimEnd"),
        trimStart: u(function(n) {
            let e = 0;
            for (; n[e] === " ";) e++;
            return n.substr(e)
        }, "trimStart"),
        trunc: u(function(n) {
            let e = n.trunc();
            return e.isNaN() ? F.DEFAULT_DECIMAL : e
        }, "trunc"),
        year: u(function(n) {
            return n.year
        }, "year")
    }),
    e2 = {
        [T.Integer]: ce.INTEGER,
        [T.LongInteger]: ce.LONGINTEGER,
        [T.Decimal]: ce.DECIMAL,
        [T.Currency]: ce.DECIMAL,
        [T.Text]: ce.TEXT,
        [T.PhoneNumber]: ce.TEXT,
        [T.Email]: ce.TEXT,
        [T.Boolean]: ce.BOOLEAN,
        [T.Date]: ce.DATE,
        [T.DateTime]: ce.DATE_TIME,
        [T.Time]: ce.TIME,
        [T.Record]: ce.UNKNOWN,
        [T.RecordList]: ce.UNKNOWN,
        [T.BinaryData]: ce.BINARY_DATA,
        [T.Object]: ce.UNKNOWN
    };

function Cs(n) {
    switch (n) {
        case ce.INTEGER:
        case ce.LONGINTEGER:
        case ce.DECIMAL:
        case ce.TEXT:
        case ce.BOOLEAN:
        case ce.DATE:
        case ce.DATE_TIME:
        case ce.TIME:
        case ce.BINARY_DATA:
            return Ve(Sc(n));
        default:
            throw new Q.DataBaseException("", `Unable to determine default value for type ${CI(n)}`)
    }
}
u(Cs, "Vu");

function Sc(n) {
    switch (n) {
        case ce.TEXT:
            return T.Text;
        case ce.BINARY_DATA:
            return T.BinaryData;
        case ce.BOOLEAN:
            return T.Boolean;
        case ce.DATE:
            return T.Date;
        case ce.DATE_TIME:
            return T.DateTime;
        case ce.TIME:
            return T.Time;
        case ce.DECIMAL:
            return T.Decimal;
        case ce.INTEGER:
            return T.Integer;
        case ce.LONGINTEGER:
            return T.LongInteger;
        default:
            throw new Error(`Missing case for conversion of DB data type '${n}' to a model data type.`)
    }
}
u(Sc, "Bu");

function CI(n) {
    let e = Sc(n);
    return T[e]
}
u(CI, "ku");

function Mx(n) {
    let e = e2[n];
    return e != null ? e : ce.UNKNOWN
}
u(Mx, "zu");

function iS(n) {
    return !!n.isGenericRecordType
}
u(iS, "Hu");

function oS(n) {
    return !!n.isGenericRecordListType
}
u(oS, "ju");

function Fx(n) {
    return !!n.isBasicTypeListType
}
u(Fx, "qu");
var pc, Gi, c1, Fh, Wn;
(function(n) {
    let e = new Map,
        t = new Map;

    function r(o, s) {
        switch (s) {
            case T.Integer:
                return o;
            case T.LongInteger:
                return o1(o);
            case T.Decimal:
            case T.Currency:
                return fh(o);
            case T.Text:
            case T.PhoneNumber:
            case T.Email:
                return o;
            case T.Date:
                return o.toISODate();
            case T.DateTime:
                return o.toString();
            case T.Time:
                return o.toISOTime();
            case T.Boolean:
                return o;
            case T.Record:
            case T.RecordList:
                throw new TypeError("Records and Record lists are not basic types");
            case T.BinaryData:
                return typeof o == "string" ? o : o.content;
            case T.Object:
            default:
                return o
        }
    }
    u(r, "r");

    function i(o, s) {
        switch (s) {
            case T.Integer:
                return H.ensureIntegerInsideBounds(o), 0 | o;
            case T.LongInteger:
                return typeof o == "string" ? bt.fromString(o) : bt.fromNumber(o);
            case T.Decimal:
            case T.Currency:
                return new He(o || "0");
            case T.Boolean:
                return typeof o == "string" ? XU(o) : o;
            case T.Text:
            case T.PhoneNumber:
            case T.Email:
                return o === void 0 ? "" : o + "";
            case T.Date:
                return o instanceof Date ? new le(o) : le.fromISODate(o);
            case T.DateTime:
                return o instanceof Date ? new le(o) : le.fromISODateTime(o);
            case T.Time:
                return o instanceof Date ? new le(o) : le.fromISOTime(o);
            case T.Record:
            case T.RecordList:
                throw new TypeError("Records and Record lists are not basic types");
            case T.BinaryData:
                return H.hasBinaryDataInterface(o) ? new Nn(o.content, o.url) : new Nn(o);
            case T.Object:
            default:
                return o
        }
    }
    u(i, "i"), n.to = u(function o(s) {
        let a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : T.Record,
            l = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
            d = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
        if (s == null) return;
        let c, h = T.Record;
        if (typeof a != "number" ? (d = l === !0, c = a, h = T.Record) : (h = a, typeof l != "boolean" && (c = l)), s instanceof Be) {
            let f = s,
                g = f.constructor,
                p = e.get(g);
            if (!p) {
                let y = f.getAttributes();
                p = u((b, E, S) => y.reduce((_, I, x) => (I.ignoreForServer || (I.dataType === T.Record || I.dataType === T.RecordList ? _[I.name] = o(b[I.attrName], E, I.optimizeList && S) : I.dataType !== T.Object && (_[I.name] = r(b[I.attrName], y[x].dataType))), _), {}), "l"), e.set(g, p)
            }
            return p(s, c, d)
        }
        if (s instanceof Mo) {
            let f = s,
                g = f.constructor.getItemType(),
                p = {
                    List: []
                };
            if (d && c) {
                if (f.length > 0 && c) {
                    let y = c.iterationContext.getCurrentRowNumber(s);
                    p.List.push(o(f.getItem(y), g, c, d))
                }
            } else
                for (let y = 0; y < f.length; y++) p.List.push(o(f.getItem(y), g));
            return f.isEmpty && (p.EmptyListItem = o(f.emptyListItem, g, c, d)), p
        }
        return h !== T.Object ? r(s, h) : void 0
    }, "e"), n.from = u(function o(s, a) {
        if (iS(a)) {
            let l = a,
                d = t.get(l);
            if (!d) {
                let c = l.getAttributes();
                d = u(h => {
                    h != null || (h = {});
                    let f = c.reduce((g, p, y) => (p.dataType === T.Record || p.dataType === T.RecordList ? g[p.attrName] = Be.getData(o(h[p.name], c[y].complexType)) : p.dataType === T.BinaryData ? g[p.attrName] = i({
                        content: h[p.name],
                        url: h[`_${p.name}URL`]
                    }, c[y].dataType) : g[p.attrName] = i(h[p.name], c[y].dataType), g), {});
                    return new l(new l.RecordClass(f))
                }, "a"), t.set(l, d)
            }
            return d(s)
        }
        if (oS(a) || Fx(a)) {
            if (a.getItemType() === void 0 || a.getItemType() === null) throw Error("A List can only be deserialized if its ItemType is defined.");
            let l = new a;
            return s.List.length === 0 ? l.emptyListItem = o(s.EmptyListItem, a.getItemType()) : l.pushAll(s.List.map(d => o(d, a.getItemType()))), l
        }
        return i(s, a)
    }, "e")
})(pc || (pc = {})),
function(n) {
    function e(f) {
        return !!(H.isValidJsNumber(f) && f >= F.MIN_INTEGER_VALUE && f <= F.MAX_INTEGER_VALUE) || (H.isLongInteger(f) ? xU(f) : H.isDecimal(f) ? Vv(f) : H.isText(f) ? KU(f) : !!H.isBoolean(f))
    }
    u(e, "t");

    function t(f) {
        return !!H.isValidJsNumber(f) || !!H.isValidLongInteger(f) || (H.isValidDecimal(f) ? Mh(f) : H.isText(f) ? ZU(f) : !!H.isBoolean(f))
    }
    u(t, "n");

    function r(f) {
        return !!H.isValidJsNumber(f) || !!(H.isValidDecimal(f) && F.MIN_DECIMAL_VALUE.lte(f) && F.MAX_DECIMAL_VALUE.gte(f)) || !!H.isValidLongInteger(f) || (H.isText(f) ? qU(f) : !!H.isBoolean(f))
    }
    u(r, "r");

    function i(f) {
        return H.isJsNumber(f) ? H.isValidJsNumber(f) : H.isLongInteger(f) ? H.isValidLongInteger(f) : H.isDecimal(f) ? H.isValidDecimal(f) : !!H.isText(f) || !!H.isBoolean(f) || (H.isDateTime(f) ? H.isValidDateTime(f) : !!H.isJsDate(f) && H.isValidJsDate(f))
    }
    u(i, "i");

    function o(f) {
        return i(f)
    }
    u(o, "s");

    function s(f) {
        return H.isJsNumber(f) ? H.isValidJsNumber(f) : H.isLongInteger(f) ? H.isValidLongInteger(f) : H.isDecimal(f) ? H.isValidDecimal(f) : H.isText(f) ? /^(true|false)$/gi.test(f) : !!H.isBoolean(f)
    }
    u(s, "a");

    function a(f) {
        if (H.isValidDateTime(f) && f.gte(F.MIN_DATE_VALUE) && f.lte(F.MAX_DATE_VALUE) || H.isValidJsDate(f) && new le(f).gte(F.MIN_DATE_VALUE) && new le(f).lte(F.MAX_DATE_VALUE)) return !0;
        if (H.isText(f)) {
            if (F.ISO_DATE_FORMAT_REGEXP.test(f)) {
                let g = new le(new Date(f));
                return g.gte(F.MIN_DATE_VALUE) && g.lte(F.MAX_DATE_VALUE)
            }
            if (FU(f)) {
                let g = s1(f);
                return g.gte(F.MIN_DATE_VALUE) && g.lte(F.MAX_DATE_VALUE)
            }
            return !1
        }
        return !1
    }
    u(a, "o");

    function l(f) {
        return !!H.isValidDateTime(f) || !!H.isValidJsDate(f) || !!H.isText(f) && (!(!F.RFC3339_TIMEPART.test(f) && !F.ISO_DATE_FORMAT_REGEXP.test(f)) || SI(f))
    }
    u(l, "l");

    function d(f) {
        if (H.isValidDateTime(f) && f.gte(F.MIN_DATETIME_VALUE) && f.lte(F.MAX_DATETIME_VALUE) || H.isValidJsDate(f) && new le(f).gte(F.MIN_DATETIME_VALUE) && new le(f).lte(F.MAX_DATETIME_VALUE)) return !0;
        if (H.isText(f)) {
            if (F.ISO_DATE_FORMAT_REGEXP.test(f)) {
                let g = new le(new Date(f));
                return g.gte(F.MIN_DATETIME_VALUE) && g.lte(F.MAX_DATETIME_VALUE)
            }
            if (jU(f)) {
                let g = a1(f);
                return g.gte(F.MIN_DATETIME_VALUE) && g.lte(F.MAX_DATETIME_VALUE)
            }
            return !1
        }
        return !1
    }
    u(d, "u");

    function c(f) {
        if (r(f)) {
            if (H.isJsNumber(f) || H.isLongInteger(f) || H.isDecimal(f)) return tv(f);
            if (H.isText(f) && f !== "") return GU(f);
            if (H.isBoolean(f)) return RU(f)
        }
        return F.DEFAULT_DECIMAL
    }
    u(c, "c");

    function h(f) {
        if (i(f)) {
            if (H.isJsNumber(f)) return H.isValidInteger(f) ? PU(f) : fh(new He(f));
            if (H.isLongInteger(f)) return o1(f);
            if (H.isDecimal(f)) return fh(f);
            if (H.isText(f)) return f;
            if (H.isBoolean(f)) return n1(f);
            if (H.isValidDate(f)) return i1(f);
            if (H.isValidTime(f)) return u1(f);
            if (H.isDateTime(f)) return r1(f);
            if (H.isJsDate(f)) {
                let g = new le(f);
                return H.isValidDate(g) ? i1(g) : H.isValidTime(g) ? u1(g) : r1(g)
            }
        }
        return F.DEFAULT_TEXT
    }
    u(h, "d"), n.isConvertibleTo = function(f, g) {
        switch (g) {
            case T.Integer:
                return e(f);
            case T.LongInteger:
                return t(f);
            case T.Decimal:
                return r(f);
            case T.Currency:
                return function(p) {
                    return r(p)
                }(f);
            case T.Text:
                return i(f);
            case T.PhoneNumber:
                return function(p) {
                    return i(p)
                }(f);
            case T.Email:
                return o(f);
            case T.Boolean:
                return s(f);
            case T.Date:
                return a(f);
            case T.Time:
                return l(f);
            case T.DateTime:
                return d(f);
            case T.BinaryData:
                return function(p) {
                    return H.isBinaryData(p)
                }(f);
            default:
                return !1
        }
    }, n.isDefault = function(f) {
        return H.isValidJsNumber(f) && f === F.DEFAULT_INTEGER || H.isValidLongInteger(f) && f.equals(F.DEFAULT_LONGINTEGER) || H.isValidDecimal(f) && f.equals(F.DEFAULT_DECIMAL) || H.isText(f) && f === F.DEFAULT_TEXT || H.isBoolean(f) && f === F.DEFAULT_BOOLEAN || H.isValidDateTime(f) && f.equals(F.DEFAULT_DATETIME)
    }, n.convertTo = function(f, g) {
        switch (g) {
            case T.Integer:
                return function(p) {
                    if (e(p)) {
                        if (H.isJsNumber(p) || H.isLongInteger(p) || H.isDecimal(p)) return Qm(p);
                        if (H.isText(p) && p !== "") return JU(p);
                        if (H.isBoolean(p)) return AU(p)
                    }
                    return F.DEFAULT_INTEGER
                }(f);
            case T.LongInteger:
                return function(p) {
                    if (t(p)) {
                        if (H.isJsNumber(p) || H.isLongInteger(p) || H.isDecimal(p)) return ev(p);
                        if (H.isText(p) && p !== "") return YU(p);
                        if (H.isBoolean(p)) return CU(p)
                    }
                    return F.DEFAULT_LONGINTEGER
                }(f);
            case T.Decimal:
                return c(f);
            case T.Currency:
                return function(p) {
                    return c(p)
                }(f);
            case T.Text:
                return h(f);
            case T.PhoneNumber:
                return function(p) {
                    return h(p)
                }(f);
            case T.Email:
                return function(p) {
                    return o(p) && H.isText(p) ? p : F.DEFAULT_EMAIL
                }(f);
            case T.Boolean:
                return function(p) {
                    if (s(p)) {
                        if (H.isJsNumber(p)) return p !== 0;
                        if (H.isLongInteger(p) || H.isDecimal(p)) return !p.eq(0);
                        if (H.isText(p) && p !== "") return !/^(false)$/gi.test(p);
                        if (H.isBoolean(p)) return p
                    }
                    return F.DEFAULT_BOOLEAN
                }(f);
            case T.Date:
                return function(p) {
                    if (a(p)) {
                        if (H.isDateTime(p)) {
                            let y = p;
                            return new le(y.year, y.month, y.day)
                        }
                        if (H.isJsDate(p)) {
                            let y = p;
                            return new le(y.getFullYear(), y.getMonth() + 1, y.getDate())
                        }
                        if (H.isText(p) && p !== "") return F.RFC3339_DATEPART.test(p) ? le.fromISODate(p) : F.ISO_DATE_FORMAT_REGEXP.test(p) ? OU(le.fromISODateTime(p)) : s1(p)
                    }
                    return F.DEFAULT_DATE
                }(f);
            case T.Time:
                return function(p) {
                    if (l(p)) {
                        if (H.isDateTime(p)) {
                            let y = p;
                            return new le(null, null, null, y.hours, y.minutes, y.seconds, y.milliseconds)
                        }
                        if (H.isJsDate(p)) {
                            let y = p;
                            return new le(null, null, null, y.getHours(), y.getMinutes(), y.getSeconds())
                        }
                        if (H.isText(p) && p !== "") return F.RFC3339_TIMEPART.test(p) ? le.fromISOTime(p) : F.ISO_DATE_FORMAT_REGEXP.test(p) ? DU(le.fromISODateTime(p)) : VU(p)
                    }
                    return F.DEFAULT_TIME
                }(f);
            case T.DateTime:
                return function(p) {
                    if (d(p)) {
                        if (H.isDateTime(p)) {
                            let y = p;
                            return new le(y.year, y.month, y.day, y.hours, y.minutes, y.seconds, y.milliseconds)
                        }
                        if (H.isJsDate(p)) return new le(p);
                        if (H.isText(p) && p !== "") return F.ISO_DATE_FORMAT_REGEXP.test(p) ? le.fromISODateTime(p) : a1(p)
                    }
                    return F.DEFAULT_DATETIME
                }(f);
            case T.BinaryData:
                return f;
            default:
                return null
        }
    }, n.typeConvertRecord = function(f, g, p) {
        return p(f, g)
    }, n.typeConvertRecordList = function(f, g, p) {
        let y = 0;
        for (; y < f.length;) g.append(p(f.getItem(y), g.newItem())), y++;
        return g
    }
}(Gi || (Gi = {})),
function(n) {
    function e(t) {
        return t - t % 1
    }
    u(e, "t"), n.to = function(t, r) {
        return function(i, o) {
            switch (o) {
                case T.Integer:
                    return i;
                case T.LongInteger:
                    let s = i;
                    return H.ensureNumberInsideBounds(s), s.toNumber();
                case T.Decimal:
                case T.Currency:
                    let a = i;
                    return H.ensureNumberPrecision(a), H.ensureNumberInsideBounds(a), a.toNumber();
                case T.Text:
                case T.PhoneNumber:
                case T.Email:
                    return i;
                case T.Date:
                case T.DateTime:
                case T.Time:
                    return i.toNative();
                case T.Boolean:
                    return i;
                case T.Record:
                case T.RecordList:
                    throw new TypeError("Records and Record lists are not basic types");
                case T.BinaryData:
                    return typeof i == "string" ? i : i.content;
                case T.Object:
                default:
                    return i
            }
        }(t, r)
    }, n.from = function(t, r) {
        return function(i, o) {
            switch (o) {
                case T.Integer:
                    if (H.isValidJsNumber(i)) return H.ensureIntegerInsideBounds(i), e(i);
                    break;
                case T.LongInteger:
                    if (H.isValidJsNumber(i)) return H.ensureLongIntegerInsideBounds(i), bt.fromNumber(e(i));
                    break;
                case T.Decimal:
                case T.Currency:
                    if (H.isValidJsNumber(i)) return H.ensureDecimalInsideBounds(i), new He(i);
                    break;
                case T.Boolean:
                    if (H.isBoolean(i)) return i;
                    break;
                case T.Text:
                case T.PhoneNumber:
                case T.Email:
                    if (H.isText(i)) return i;
                    if (H.isValidJsNumber(i)) return H.ensureDecimalInsideBounds(i), fh(new He(i));
                    if (H.isBoolean(i)) return n1(i);
                    break;
                case T.Date:
                    if (H.isValidJsDate(i)) {
                        let s = i;
                        return new le(s.getFullYear(), s.getMonth() + 1, s.getDate())
                    }
                    break;
                case T.DateTime:
                    if (H.isValidJsDate(i)) return new le(i);
                    break;
                case T.Time:
                    if (H.isValidJsDate(i)) {
                        let s = i;
                        return new le(null, null, null, s.getHours(), s.getMinutes(), s.getSeconds(), s.getMilliseconds())
                    }
                    break;
                case T.BinaryData:
                    return H.hasBinaryDataInterface(i) ? new Nn(i.content, i.url) : new Nn(i);
                case T.Object:
                    return i
            }
            throw new Q.InvalidJavascriptType(`Cannot assign a JavaScript ${typeof i} with value ${i==null?JSON.stringify(i):i.toString()} to an output parameter of type ${T[o]}`)
        }(t, r)
    }
}(c1 || (c1 = {})),
function(n) {
    let e = new Map;

    function t(o, s, a) {
        let l = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !0,
            d = arguments.length > 4 ? arguments[4] : void 0,
            c = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : !1;
        if (l !== !1 || c || !Zr(o, a)) switch (s) {
            case T.Time:
                return o.toISOTime();
            case T.Date:
                return o.toISODate();
            case T.DateTime:
                return d === !0 ? "" + Math.floor(o.getTime() / 1e3) : o.toString().replace(/\.\d+/, "");
            case T.LongInteger:
                let h = o;
                return H.ensureNumberInsideBounds(h), h.toNumber();
            case T.Decimal:
            case T.Currency:
                let f = o;
                return H.ensureNumberPrecision(f), H.ensureNumberInsideBounds(f), f.toNumber();
            case T.Record:
            case T.RecordList:
                throw new TypeError("Records and Record lists are not basic types");
            case T.BinaryData:
                return typeof o == "string" ? o : o.content;
            default:
                return o
        }
    }
    u(t, "n");

    function r(o) {
        let {
            value: s,
            serializeDefaultValues: a = !0,
            useUnixDateFormat: l = !1,
            dataType: d = T.Record,
            defaultValue: c,
            enforceDefaultValueSerializationAtThisLevel: h = !1
        } = o;
        if (s != null) return s instanceof Be ? function(f, g, p) {
            let y = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1,
                b = f.getAttributes().reduce((E, S) => {
                    if (S.dataType === T.Record || S.dataType === T.RecordList) {
                        let _ = r({
                            value: f[S.attrName],
                            serializeDefaultValues: g,
                            useUnixDateFormat: p
                        });
                        _ && (E[S.nameForJson] = _)
                    } else {
                        let _ = t(f[S.attrName], S.dataType, S.defaultValue, g, p);
                        _ !== void 0 && (E[S.nameForJson] = _)
                    }
                    return E
                }, {});
            if (Object.keys(b).length !== 0 || y) return b
        }(s, a != null && a, l != null && l, h) : s instanceof Mo ? function(f, g, p) {
            let y = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1,
                b = [],
                E = f.constructor.getItemType();
            for (let S = 0; S < f.length; S++) b.push(r({
                value: f.getItem(S),
                serializeDefaultValues: g,
                useUnixDateFormat: p,
                dataType: E,
                enforceDefaultValueSerializationAtThisLevel: !0
            }));
            if (b.length > 0 || g || y) return b
        }(s, a != null && a, l != null && l, h) : t(s, d, c != null ? c : Ve(d), a, l, h)
    }
    u(r, "r");

    function i(o, s, a, l) {
        if (o == null) return a;
        switch (s) {
            case T.Integer:
                return function(d) {
                    let c;
                    if (F.FORMAT.numberFormat.getRegExpForInteger().test(d) ? c = new He(d) : F.FORMAT.numberFormat.getRegExpForJSNumber().test(d) && (c = new He(+d)), c === void 0 || !c.isInteger() || !Vv(c)) throw new Q.Exception("Could not convert '" + d + "' to Integer");
                    return NU(c)
                }(o);
            case T.LongInteger:
                return function(d) {
                    let c;
                    if (F.FORMAT.numberFormat.getRegExpForInteger().test(d) ? c = new He(d) : F.FORMAT.numberFormat.getRegExpForJSNumber().test(d) && (c = new He(+d)), c === void 0 || !c.isInteger() || !Mh(c)) throw new Q.Exception("Could not convert '" + d + "' to Long Integer");
                    return LU(c)
                }(o);
            case T.Currency:
            case T.Decimal:
                return function(d) {
                    let c;
                    if (F.FORMAT.numberFormat.getRegExpForInteger().test(d) ? c = new He(d) : F.FORMAT.numberFormat.getRegExpForJSNumber().test(d) && (c = new He(+d)), c === void 0 || c.lt(F.MIN_DECIMAL_VALUE) || c.gt(F.MAX_DECIMAL_VALUE)) throw new Q.Exception("Could not convert '" + d + "' to Decimal");
                    return c
                }(o);
            case T.DateTime:
                return function(d, c) {
                    if (!c) {
                        if (!Gi.isConvertibleTo(d, T.DateTime)) throw new Q.Exception("Could not convert '" + d + "' to DateTime");
                        return pc.from(d, T.DateTime)
                    }
                    d instanceof Date && (d = new le(d.getTime()));
                    try {
                        return new le(1e3 * +d)
                    } catch (h) {
                        throw new Q.Exception("Could not convert '" + d + "' to DateTime")
                    }
                }(o, l);
            default:
                return pc.from(o, s)
        }
    }
    u(i, "i"), n.to = r, n.from = u(function o(s, a, l, d) {
        if (iS(a)) {
            let c = a,
                h = e.get(c);
            if (!h) {
                let f = c.getAttributes();
                h = u((g, p) => {
                    g != null || (g = {});
                    let y = f.reduce((b, E, S) => (E.nameForJson !== "" && (E.dataType === T.Record || E.dataType === T.RecordList ? b[E.attrName] = Be.getData(o(g[E.nameForJson], f[S].complexType, p)) : b[E.attrName] = i(g[E.nameForJson], f[S].dataType, f[S].defaultValue, p)), b), {});
                    return new a(new a.RecordClass(y))
                }, "o"), e.set(c, h)
            }
            return h(s, l)
        }
        if (oS(a) || Fx(a)) {
            if (a.getItemType() === void 0 || a.getItemType() === null) throw Error("A List can only be deserialized if its ItemType is defined.");
            let c = s;
            if (c == null && (c = []), c.constructor !== Array) throw new TypeError("Could not convert '" + c + "' to List");
            let h = new a;
            return h.pushAll(c.map(f => o(f, a.getItemType(), l))), h
        }
        return i(s, a, d === void 0 ? Ve(a) : d, l)
    }, "e")
}(Fh || (Fh = {})),
function(n) {
    n.typeDefaultValue = Cs, n.convertToModelDataType = Sc, n.typeDisplayName = CI;
    let e = "1900-01-01 00:00:00",
        t = new Map;

    function r(a) {
        let l = e2[a];
        return l === void 0 ? pe.DBDataType.UNKNOWN : l
    }
    u(r, "r");

    function i(a, l, d, c) {
        return n.deserializeFromDB(a["o" + l], r(c))
    }
    u(i, "i");

    function o(a, l, d, c) {
        return n.deserializeFromDB(a[d], r(c))
    }
    u(o, "s");

    function s(a, l) {
        let d = l.length,
            c = a.toString();
        return l.substr(0, Math.max(0, d - c.length)) + c
    }
    u(s, "a"), n.from = u(function a(l, d, c, h) {
        var f;
        if (iS(d)) {
            let g = l,
                p = d,
                y = c,
                b = t.get(p);
            if (!b) {
                let E = p.getAttributes();
                b = u((S, _, I, x) => {
                    let L = {};
                    return x && x.length > 0 ? (E.forEach(U => {
                        U.dataType !== T.RecordList && (L[U.attrName] = null)
                    }), x.forEach(U => {
                        let N = E.filter(j => j.attrName === U)[0];
                        N.complexType ? L[U] = a(S, N.complexType, _) : L[U] = I(S, _.value++, N.name, N.dataType)
                    })) : E.forEach((U, N) => {
                        U.dataType !== T.RecordList && (U.dataType === T.Record && d.isAnonymousRecord() ? L[U.attrName] = a(S, E[N].complexType, _) : L[U.attrName] = I(S, _.value++, E[N].name, E[N].dataType))
                    }), new d.RecordClass(L)
                }, "d"), t.set(p, b)
            }
            return b(g, y, d.isAnonymousRecord() ? o : i, h)
        }
        if (oS(d)) {
            if (d.getItemType() === void 0 || d.getItemType() === null) throw Error("A List can only be deserialized if its ItemType is defined.");
            let g = l,
                p = d.getItemType(),
                y = c,
                b = new d,
                E = [];
            for (let S = 0; S < g.length; S++) E.push(new p(y(null, g.item(S))));
            return b.pushAll(E), b
        } {
            let g = d;
            throw new Error(`Unable to read data from Local Storage. Unknown type ${(f=g==null?void 0:g.name)!==null&&f!==void 0?f:g}`)
        }
    }, "e"), n.serializeToDB = function(a, l) {
        if (l.isEntityReference && Zr(a, n.typeDefaultValue(l.type))) return null;
        switch (l.type) {
            case pe.DBDataType.INTEGER:
                return a;
            case pe.DBDataType.LONGINTEGER:
                return a ? a.toString() : null;
            case pe.DBDataType.DECIMAL:
                let d = a;
                return l.decimals ? d.toFixed(l.decimals) : d.toString();
            case pe.DBDataType.TEXT:
                return a;
            case pe.DBDataType.BOOLEAN:
                return a ? 1 : 0;
            case pe.DBDataType.DATE_TIME:
                let c = a.toNative();
                return a.eq(le.defaultValue) ? e : (c = a.toNative(), s(c.getUTCFullYear(), "0000") + "-" + s(c.getUTCMonth() + 1, "00") + "-" + s(c.getUTCDate(), "00") + " " + s(c.getUTCHours(), "00") + ":" + s(c.getUTCMinutes(), "00") + ":" + s(c.getUTCSeconds(), "00"));
            case pe.DBDataType.DATE:
                let h = a.toNative();
                return s(h.getFullYear(), "0000") + "-" + s(h.getMonth() + 1, "00") + "-" + s(h.getDate(), "00");
            case pe.DBDataType.TIME:
                let f = a.toNative();
                return "1900-01-01 " + s(f.getHours(), "00") + ":" + s(f.getMinutes(), "00") + ":" + s(f.getSeconds(), "00");
            case pe.DBDataType.BINARY_DATA:
                let g = a;
                return g.content === void 0 ? null : g.content;
            default:
                throw new Q.DataBaseException("", `Unable to serialize ${a} to a database value.`)
        }
    }, n.deserializeFromDB = function(a, l) {
        if (a === null) return n.typeDefaultValue(l);
        switch (l) {
            case pe.DBDataType.INTEGER:
                return a;
            case pe.DBDataType.LONGINTEGER:
                return bt.fromValue(a);
            case pe.DBDataType.DECIMAL:
                return new He(a);
            case pe.DBDataType.TEXT:
                return a;
            case pe.DBDataType.BOOLEAN:
                return a !== 0;
            case pe.DBDataType.DATE_TIME:
            case pe.DBDataType.DATE:
            case pe.DBDataType.TIME:
                let d = /^((\d{4})-(\d{2})-(\d{2}))?\s?((\d{2}):(\d{2}):(\d{2}))?$/.exec(a),
                    c = new Date;
                switch (l) {
                    case pe.DBDataType.DATE_TIME:
                        if (a === e) return le.defaultValue;
                        c.setUTCFullYear(parseInt(d[2], 10), parseInt(d[3], 10) - 1, parseInt(d[4], 10)), c.setUTCHours(parseInt(d[6], 10) || 0, parseInt(d[7], 10) || 0, parseInt(d[8], 10) || 0, 0);
                        break;
                    case pe.DBDataType.DATE:
                        c.setFullYear(parseInt(d[2], 10), parseInt(d[3], 10) - 1, parseInt(d[4], 10)), c.setHours(0, 0, 0, 0);
                        break;
                    case pe.DBDataType.TIME:
                        c.setFullYear(1900, 0, 1), c.setHours(parseInt(d[6], 10) || 0, parseInt(d[7], 10) || 0, parseInt(d[8], 10) || 0, 0)
                }
                return new le(c);
            case pe.DBDataType.BINARY_DATA:
                return new Nn(a);
            default:
                throw new Q.DataBaseException("", "Unable to deserialize " + a + " to a runtime value.")
        }
    }, n.deserializeLazyBinaryFromDB = function(a) {
        return new Nn(void 0, void 0, a)
    }
}(Wn || (Wn = {}));
var Xz = Object.freeze({
        __proto__: null,
        get JSConversions() {
            return Gi
        },
        get JSNodeParamConverter() {
            return c1
        },
        get JSONConverter() {
            return Fh
        },
        get LocalStorageConverter() {
            return Wn
        },
        get ServerDataConverter() {
            return pc
        }
    }),
    Bh = "BACKUP_";

function Qz(n) {}
u(Qz, "Zu");
var Bx, l1, lr, jh;
(function(n) {
    n[n.Unchanged = 0] = "Unchanged", n[n.Deleted = 1] = "Deleted", n[n.Recreated = 2] = "Recreated", n[n.New = 3] = "New"
})(Bx || (Bx = {})),
function(n) {
    let e = [{
        columnName: "Id",
        options: "INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL"
    }, {
        columnName: "Key",
        options: "UNIQUE NOT NULL"
    }, {
        columnName: "Value"
    }];
    n.TABLE_NAME = "OSSYS_PERSISTENTKEYVALUE";
    let t = `"${e.map(a=>a.columnName).join('", "')}"`,
        r = e.map(a => "'" + a.columnName + (a.options ? "' " + a.options : "'")).join(", ");

    function i(a) {
        return a.executeNonQuery(`CREATE TABLE IF NOT EXISTS "${n.TABLE_NAME}" (${r})`)
    }
    u(i, "i"), n.initialize = function(a, l) {
        return n.storage = new o(l), i(a)
    }, n.create = i;
    let s = class s {
        constructor(l) {
            this.db = l
        }
        isReady() {
            return Promise.resolve(!0)
        }
        getValue(l) {
            return this.db.executeTransaction(d => d.executeScalar(`SELECT VALUE FROM ${n.TABLE_NAME} WHERE Key = ?`, [l]))
        }
        setValue(l, d) {
            return this.db.executeTransaction(c => c.executeNonQuery(`INSERT OR REPLACE INTO ${n.TABLE_NAME} (${t}) VALUES (COALESCE((SELECT Id FROM ${n.TABLE_NAME} WHERE Key = ?), null), ?, ?)`, [l, l, d]))
        }
    };
    u(s, "s");
    let o = s;
    n.PersistentKeyValueStorage = o
}(l1 || (l1 = {})),
function(n) {
    let e = "Metamodel";

    function t(o, s) {
        return !! function(a, l) {
            if (a === void 0) return !0;
            if (a === l) return !1;
            switch (a) {
                case pe.DBDataType.BOOLEAN:
                    return l !== pe.DBDataType.INTEGER && l !== pe.DBDataType.LONGINTEGER;
                case pe.DBDataType.INTEGER:
                    return l !== pe.DBDataType.LONGINTEGER && l !== pe.DBDataType.TEXT;
                case pe.DBDataType.LONGINTEGER:
                    return l !== pe.DBDataType.TEXT;
                default:
                    return !0
            }
        }(o.type, s.type) || !o.isEntityReference != !s.isEntityReference || o.length !== void 0 && s.length !== void 0 && (o.decimals !== void 0 && s.decimals !== void 0 ? o.length - o.decimals > s.length - s.decimals : o.length > s.length)
    }
    u(t, "n");

    function r(o, s, a, l) {
        if (a) {
            let c = function(h, f) {
                let g = h.name.toLowerCase(),
                    p = f.attributes.filter(y => y.name.toLowerCase() === g);
                return p.length === 0 ? null : p[0]
            }(s, a);
            if (c !== null) {
                if (l && (c == null ? void 0 : c.type) === pe.DBDataType.DATE_TIME) {
                    let h = l.attrs[s.name.toLowerCase()];
                    if (h) return n.upgradeDbValue(o, h, s)
                }
                return n.upgradeDbValue(o, c, s)
            }
        }
        let d = l.attrs[s.name.toLowerCase()];
        return d ? n.upgradeDbValue(o, d, s) : o
    }
    u(r, "r");

    function i(o, s) {
        let a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
            l = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null,
            d, c = s;
        return l && s.type === pe.DBDataType.DATE_TIME && (c = l), d = o.isPrimaryKey && c.isPrimaryKey && a ? pe.DBDataType.INTEGER !== o.type && pe.DBDataType.LONGINTEGER !== o.type || pe.DBDataType.INTEGER !== c.type && pe.DBDataType.LONGINTEGER !== c.type : o.type !== c.type, d || c.type !== pe.DBDataType.DECIMAL && c.length !== o.length || c.type !== pe.DBDataType.DECIMAL && c.decimals !== o.decimals || !c.isEntityReference != !o.isEntityReference && !o.isPrimaryKey
    }
    u(i, "i"),
        function(o) {
            let s = "OSSYS_ENTITY",
                a = `${Bh}${s}`,
                l = [{
                    name: "SS_Key"
                }, {
                    name: "Module_SS_Key"
                }, {
                    name: "Name"
                }, {
                    name: "Physical_Table_name"
                }, {
                    name: "Hash"
                }, {
                    name: "Extra_Info",
                    defaultValue: `'{"attrs":{}}'`
                }, {
                    name: "Upgrade_Status",
                    defaultValue: "0"
                }],
                d = `"${l.map(b=>b.name).join('", "')}"`;

            function c(b, E) {
                return b.executeNonQuery(`CREATE TABLE IF NOT EXISTS "${E}" (${d}, UNIQUE (SS_Key, Module_SS_Key))`)
            }
            u(c, "a");

            function h(b, E) {
                let S = !0,
                    _ = l.map(I => `"ent"."${I.name}"`);
                return b.executeQueryRaw(`SELECT ${_.join(", ")} FROM "${E}" "ent" LIMIT 0`).onError(I => {
                    S = !1
                }).andThen(() => S)
            }
            u(h, "o");

            function f(b, E, S) {
                return g(b, s, E, S).andThen(_ => g(_, a, E, S))
            }
            u(f, "l");

            function g(b, E, S, _) {
                let I = !1;
                return b.feed(null).andThenAll(() => [x => x.executeNonQuery(`SELECT "ent"."${S}" FROM ${E} "ent" LIMIT 0`).onError(L => {
                    I = !0
                }), x => I ? x.executeNonQuery(`ALTER TABLE ${E} ADD "${S}"`).andThen(L => _ ? L.executeNonQuery(`UPDATE ${E} SET "${S}" = ${_}`) : L.feed(null)) : x.feed(null)])
            }
            u(g, "u");

            function p(b) {
                z(e, `Extracting metadata for table ${b.tableName} (${b.name})`);
                let E = {
                    v: 0,
                    idIsAutoNumber: b.idIsAutoNumber,
                    attrs: {}
                };
                for (let S of b.attributes) E.attrs[S.name.toLowerCase()] = y(S);
                return E
            }
            u(p, "c");

            function y(b) {
                let E = {
                    type: b.type
                };
                return b.decimals !== void 0 && (E.decimals = b.decimals), b.length !== void 0 && (E.length = b.length), b.isPrimaryKey && (E.isPrimaryKey = b.isPrimaryKey), b.isEntityReference && (E.isEntityReference = b.isEntityReference), E
            }
            u(y, "d"), o.getDefaultMetaData = function() {
                return {
                    v: -1,
                    attrs: {}
                }
            }, o.create = function(b) {
                return c(b, s).andThen(E => c(E, `${Bh}${s}`))
            }, o.innerCreate = c, o.verifyColumns = function(b) {
                return h(b, s).andThen(E => h(E, a))
            }, o.innerVerifyColumns = h, o.addMissingColumns = function(b) {
                return b.feed(null).andThenAll(E => l.map(S => _ => f(_, S.name, S.defaultValue)))
            }, o.addColumnIfNeeded = f, o.copyMetaInfo = function(b, E, S) {
                let _ = S ? a : s,
                    I = S ? s : a,
                    x = b.executeNonQuery(`DELETE FROM ${I} WHERE Physical_Table_name = ?`, [E]).andThen(L => L.executeNonQuery(`INSERT INTO ${I}(${d}) SELECT ${d} FROM ${_} WHERE Physical_Table_name = ?`, [E]));
                return S && (x = x.andThen(L => L.executeNonQuery(`DELETE FROM ${_} WHERE Physical_Table_name = ?`, [E]))), x
            }, o.extractEntityMetadata = p, o.updateEntity = function(b, E, S) {
                let _ = p(E);
                z(e, `Updating metadata for table ${E.tableName} (${E.name})`);
                let I = new yi;
                return I.add("Hash", pe.DBDataType.TEXT, E.hash), I.add("Name", pe.DBDataType.TEXT, E.name), I.add("Physical_Table_name", pe.DBDataType.TEXT, E.tableName), I.add("Extra_Info", pe.DBDataType.TEXT, JSON.stringify(_)), I.add("Key", pe.DBDataType.TEXT, E.key), I.add("ModuleKey", pe.DBDataType.TEXT, S), b.executeNonQuery(`UPDATE ${s} SET Hash = ?, Name = ?, Physical_Table_name = ?, Extra_Info = ? WHERE SS_Key = ? AND Module_SS_Key = ?`, I.toArray())
            }, o.insertEntity = function(b, E, S) {
                let _ = p(E),
                    I = new yi;
                return I.add("Key", pe.DBDataType.TEXT, E.key), I.add("ModuleKey", pe.DBDataType.TEXT, S), I.add("Name", pe.DBDataType.TEXT, E.name), I.add("TableName", pe.DBDataType.TEXT, E.tableName), I.add("Hash", pe.DBDataType.TEXT, E.hash), I.add("Extra_Info", pe.DBDataType.TEXT, JSON.stringify(_)), I.add("Upgrade_Status", pe.DBDataType.TEXT, 3), b.executeNonQuery(`INSERT INTO ${s}(SS_Key, Module_SS_Key, Name, Physical_Table_name, Hash, Extra_Info, Upgrade_Status) VALUES (?, ?, ?, ?, ?, ?, ?)`, I.toArray())
            }
        }(n.Metamodel || (n.Metamodel = {})), n.upgradeDbValue = function(o, s, a) {
            if (t(s, a)) {
                let l = Wn.deserializeFromDB(o, s.type),
                    d = Wn.convertToModelDataType(a.type),
                    c = function(h, f, g, p) {
                        let y = h,
                            b = f,
                            E = function(_) {
                                switch (_) {
                                    case pe.DBDataType.TEXT:
                                        return "Text";
                                    case pe.DBDataType.BINARY_DATA:
                                        return "Binary Data";
                                    case pe.DBDataType.BOOLEAN:
                                        return "Boolean";
                                    case pe.DBDataType.INTEGER:
                                        return "Integer";
                                    case pe.DBDataType.LONGINTEGER:
                                        return "Long Integer";
                                    case pe.DBDataType.DECIMAL:
                                        return "Decimal";
                                    case pe.DBDataType.DATE_TIME:
                                        return "DateTime";
                                    case pe.DBDataType.DATE:
                                        return "Date";
                                    case pe.DBDataType.TIME:
                                        return "Time";
                                    default:
                                        return "Unknown"
                                }
                            }(g),
                            S = T[p];
                        if (typeof h == "string" && h && (y = h.substr(0, 50) + ` (length:${h.length})`), H.isText(f)) {
                            let _ = f;
                            b = _.substr(0, 50) + ` (length:${_.length})`
                        }
                        if (f instanceof Nn) {
                            let _ = f.content;
                            b = _.substr(0, 50) + ` (length:${_.length})`
                        }
                        return `convert databaseValue:'${y}'/deserializedValue:'${b}' from type ${E} to ${S}`
                    }(o, l, s.type, d);
                if (Gi.isConvertibleTo(l, d)) {
                    let h = Gi.convertTo(l, d),
                        f = Wn.serializeToDB(h, a);
                    return n2(f, a, c), f
                }
                throw new Q.DataBaseException("", `Unable to ${c}.`)
            }
            return o
        }, n.upgradeDbRecord = function(o, s, a, l) {
            let d = {};
            for (let h of Object.keys(o)) d[h.toLowerCase()] = o[h];
            (function(h, f) {
                var g;
                for (let p of f.attributes) {
                    let y = p.name.toLowerCase();
                    if (h[y] === void 0) {
                        let b = (g = p.default) !== null && g !== void 0 ? g : Wn.typeDefaultValue(p.type);
                        h[y] = Wn.serializeToDB(b, p)
                    }
                }
            })(d, s);
            let c = {};
            for (let h of s.attributes) try {
                let f = h.name.toLowerCase(),
                    g = d[f];
                c[f] = r(g, h, a, l)
            } catch (f) {
                throw new Q.DataBaseException("", `Unable to upgrade attribute '${h.name}' data type to '${Wn.typeDisplayName(h.type)}':
${Yr(f)}`)
            }
            return c
        }, n.requiresFullUpgrade = function(o, s, a) {
            let l;
            return l = s ? s.idIsAutoNumber : a.idIsAutoNumber, l !== o.idIsAutoNumber ? !0 : function(d, c, h) {
                let f = {};
                for (let g of d.attributes) {
                    let p = g.name.toLowerCase();
                    f[p] = {}, f[p].entityAttribute = g
                }
                for (let g of Object.keys(h.attrs)) {
                    let p = g.toLowerCase();
                    f[p] = f[p] || {}, f[p].dbMetaAttribute = h.attrs[g]
                }
                if (c)
                    for (let g of c.attributes) {
                        let p = g == null ? void 0 : g.name.toLowerCase();
                        f[p] = f[p] || {}, f[p].dbAttribute = g
                    }
                return Object.keys(f).map(g => f[g])
            }(o, s, a).some(d => !d.entityAttribute || (d.dbAttribute || d.dbMetaAttribute ? function(c, h, f) {
                let g = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
                return h ? !(f === void 0 || f.type === void 0 || f.type === c.type) || i(c, h, g, f) || !h.isPrimaryKey != !c.isPrimaryKey : i(c, f, g) || !f.isPrimaryKey != !c.isPrimaryKey
            }(d.entityAttribute, d.dbAttribute, d.dbMetaAttribute, l !== pe.AutoNumber.No) : d.entityAttribute.isPrimaryKey))
        }
}(lr || (lr = {})),
function(n) {
    n[n.Auto = 0] = "Auto", n[n.Single = 1] = "Single", n[n.Bulk = 2] = "Bulk"
}(jh || (jh = {}));
var jx = new As("Id", "idOut"),
    eW = new dn("Record", "recordOut"),
    jr = "WebSQLStorage",
    yc = class yc {
        constructor() {}
        getDatabase() {
            return this._db ? Promise.resolve(this._db) : (this.dbReadyPromise || (this.dbReadyPromise = new Promise(e => {
                this.onDbInit = () => e(this._db)
            })), this.dbReadyPromise)
        }
        initDb(e) {
            z(jr, `Setting platform database to '${e?e.name:"none"}'`), this._db = e, this.onDbInit && (this.onDbInit(), this.onDbInit = null)
        }
        clearDb() {
            this._db = null
        }
        initModule(e, t, r) {
            return this.recoverBackupTables(t, e, r).andThen(i => e.length === 0 ? i.feed(null) : this.dropInconsistentTables(i, e, r)).andThen(i => this.backupDeletedTables(i, e, r)).andThen(i => {
                let o = new yi;
                return o.add("ModuleKey", pe.DBDataType.TEXT, r), i.executeQuery("SELECT SS_Key, Hash, Extra_Info FROM OSSYS_ENTITY WHERE Module_SS_Key = ?", s => ({
                    hash: s.Hash,
                    extraInfo: JSON.parse(s.Extra_Info || "{}"),
                    ssKey: s.SS_Key
                }), o.toArray())
            }).andThenAll(i => e.map(o => {
                let s = i.filter(a => a.ssKey === o.key);
                return a => this.createOrUpgradeTable(a, o, s.length === 1 ? s[0] : void 0, r)
            }))
        }
        initMetamodel(e) {
            return lr.Metamodel.create(e).andThen(t => lr.Metamodel.verifyColumns(t)).andThen((t, r) => {
                if (!r) return lr.Metamodel.addMissingColumns(t)
            })
        }
        createOrUpgradeTable(e, t, r, i) {
            z(jr, `Checking the status of table ${t.tableName} (${t.name})`), r || (r = {
                hash: null,
                extraInfo: lr.Metamodel.getDefaultMetaData()
            });
            let {
                hash: o,
                extraInfo: s
            } = r;
            return o ? o !== t.hash ? z8.introspectTableInfo(e, t.tableName).andThen((a, l) => lr.requiresFullUpgrade(t, l, s) ? (z(jr, `Table ${t.tableName} (${t.name}) exists and will be fully upgraded`), this.recreateTable(a, t, l, i, s)) : (z(this, `Table ${t.tableName} (${t.name}) exists and will be incrementally upgraded`), this.upgradeTable(a, t, l, i, s))) : (z(jr, `Table ${t.tableName} (${t.name}) exists and is up to date`), null) : (z(jr, `Table ${t.tableName} (${t.name}) does not exist and will be created`), this.createTable(e, t, i).andThen(a => lr.Metamodel.insertEntity(a, t, i)))
        }
        recreateTable(e, t, r, i, o) {
            return e.executeQuery(`SELECT * FROM "${t.tableName}"`, s => s).onError(s => {
                throw qe(jr, `Unable to upgrade the definition of entity '${t.name}':
${Yr(s)}`), new Q.DataBaseException("", `Unable to upgrade the definition of entity '${t.name}':
${Yr(s)}`)
            }).andThen((s, a) => this.backupTable(s, t.tableName, 2).andThen(l => this.createTable(l, t, i)).andThenAll(() => a.map(l => {
                let d = lr.upgradeDbRecord(l, t, r, o),
                    c = new yi(!0);
                for (let h of t.attributes) c.add(h.name, h.type, d[h.name.toLowerCase()]);
                return h => h.executeNonQuery(t.insert.sql, c.toArray())
            }))).andThen(s => lr.Metamodel.updateEntity(s, t, i))
        }
        upgradeTable(e, t, r, i, o) {
            let s = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : null;
            return e.feed(null).andThenAll(() => {
                let a = t.attributes.filter(l => r ? !r.attributes.some(d => l.name === d.name) : !Object.keys(o.attrs).some(d => d === l.name.toLowerCase()));
                return z(this, `Entity '${t.name}' - newAttributes - ${JSON.stringify(a)} - hash - ${s} - info.hash - ${t.hash}`), a.map(l => d => {
                    let c = d.executeNonQuery(l.addColumn.sql);
                    if (l.default !== void 0) {
                        let h = new yi;
                        h.add("value", l.type, l.default), c = c.andThen(f => f.executeNonQuery(`UPDATE "${t.tableName}" SET "${l.name}" = ?`, h.toArray()))
                    }
                    return c
                })
            }).andThen(a => lr.Metamodel.updateEntity(a, t, i))
        }
        switchModule(e, t) {
            return this.dropBackupTables(e, t)
        }
        recoverBackupTables(e, t, r) {
            return this.doForEachTable(e, i => (z(jr, `Recovering table ${i}`), t.filter(o => o.tableName === i), o => this.recoverBackupTable(o, i)), r, "Upgrade_Status <> 0")
        }
        dropInconsistentTables(e, t, r) {
            return this.doForEachTable(e, i => (z(this, `Dropping inconsistent table ${i} (same key, different physical table name)`), o => this.dropTableIfExists(o, i).andThen(s => s.executeNonQuery(`DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${i}'`))), r, "Upgrade_Status = 0" + (t.length === 0 ? "" : ` AND SS_Key IN (${t.map(i=>"'"+i.key+"'").join(", ")}) AND Physical_Table_name NOT IN (${t.map(i=>"'"+i.tableName+"'").join(", ")})`))
        }
        dropBackupTables(e, t) {
            return this.doForEachTable(e, r => (z(jr, `Dropping table ${r}`), i => this.dropBackupTable(i, r)), t, "Upgrade_Status <> 0")
        }
        backupDeletedTables(e, t, r) {
            return this.doForEachTable(e, i => (z(jr, `Backing up old table ${i}`), o => this.backupTable(o, i, 1)), r, "Upgrade_Status = 0" + (t.length === 0 ? "" : ` AND Physical_Table_name NOT IN (${t.map(i=>"'"+i.tableName+"'").join(", ")})`))
        }
        doForEachTable(e, t, r, i) {
            let o = `SELECT Physical_Table_name as name FROM OSSYS_ENTITY WHERE Module_SS_Key = '${r}'`;
            return i && (o += " AND " + i), e.executeQuery(o, s => s.name).andThenAll(s => {
                let a = [];
                return s.forEach(l => {
                    a.push(t(l))
                }), a
            })
        }
        dropTableIfExists(e, t) {
            return e.executeNonQuery(`DROP TABLE IF EXISTS "${t}"`)
        }
        createTable(e, t, r) {
            return z(jr, `createTable '${t.createTable.sql}'`), e.executeNonQuery(t.createTable.sql)
        }
        backupTable(e, t, r) {
            return z(jr, `backupTable '${t}'`), lr.Metamodel.copyMetaInfo(e, t, !1).andThen(i => this.dropTableIfExists(i, this.getBackupTableName(t))).andThen(i => this.renameTableAndSetStatus(i, t, this.getBackupTableName(t), t, r))
        }
        recoverBackupTable(e, t) {
            let r = !0;
            return this.dropTableIfExists(e, t).andThen(i => i.executeScalar(`SELECT 1 FROM ${this.getBackupTableName(t)}`)).onError(i => {
                i && (r = !1)
            }).andThen(i => {
                if (r) return this.renameTableAndSetStatus(i, this.getBackupTableName(t), t, t, 0)
            }).andThen(i => lr.Metamodel.copyMetaInfo(i, t, !0))
        }
        dropBackupTable(e, t) {
            return this.dropTableIfExists(e, this.getBackupTableName(t)).andThen(r => r.executeScalar(`SELECT Upgrade_Status FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${t}'`)).andThen((r, i) => r.executeNonQuery(i === 1 ? `DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${t}'` : `UPDATE OSSYS_ENTITY SET Upgrade_Status = 0 WHERE upper(Physical_Table_name) = '${t}'`)).andThen(r => r.executeNonQuery(`DELETE FROM ${Bh}OSSYS_ENTITY WHERE Physical_Table_name = ?`, [t]))
        }
        renameTableAndSetStatus(e, t, r, i, o) {
            return z(jr, `renameTableAndSetStatus '${i} to ${r}'`), this.renameTable(e, t, r).andThen(s => this.setTableUpgradeStatus(s, i, o))
        }
        renameTable(e, t, r) {
            return e.executeNonQuery(`ALTER TABLE "${t}" RENAME TO "${r}"`)
        }
        setTableUpgradeStatus(e, t, r) {
            return e.executeNonQuery(`UPDATE OSSYS_ENTITY SET Upgrade_Status = ${r} WHERE upper(Physical_Table_name) = '${t}'`)
        }
        getBackupTableName(e) {
            return Bh + e
        }
        executeNonQuery(e, t) {
            return this.getDatabase().then(r => r.executeTransaction(i => i.executeNonQuery(e, t == null ? void 0 : t.toArray())))
        }
        executeQuery(e, t, r, i) {
            return this.getDatabase().then(o => o.executeReadTransaction(s => s.executeQueryRaw(e, i == null ? void 0 : i.toArray()).andThen((a, l) => Wn.from(l.rows, t, r))))
        }
        rawExecuteQuery(e, t, r) {
            return this.getDatabase().then(i => i.executeReadTransaction(o => o.executeQueryRaw(e, r == null ? void 0 : r.toArray()).andThen((s, a) => {
                let l = new Array(a.rows.length);
                for (let d = 0; d < a.rows.length; d++) {
                    let c = a.rows.item(d);
                    l[d] = t(c)
                }
                return l
            })))
        }
        executeCount(e, t) {
            return this.getDatabase().then(r => r.executeReadTransaction(i => i.executeScalar(e, t == null ? void 0 : t.toArray()).andThen((o, s) => Wn.deserializeFromDB(s, pe.DBDataType.LONGINTEGER))))
        }
        rawExecuteScalar(e, t) {
            return this.getDatabase().then(r => r.executeReadTransaction(i => i.executeQueryRaw(e, t == null ? void 0 : t.toArray()).andThen((o, s) => s.rows.length === 0 ? null : function(a) {
                for (let l in a)
                    if (a.hasOwnProperty(l)) return a[l];
                return null
            }(s.rows.item(0)))))
        }
        create(e, t) {
            return Mm(e, t, "create"), this.getDatabase().then(r => r.executeTransaction(i => this.createInner(i, e, t, !0)))
        }
        createInner(e, t, r, i) {
            var o, s;
            let a = (s = (o = t.insert).getArguments) === null || s === void 0 ? void 0 : s.call(o, r);
            return e.executeQueryRaw(t.insert.sql, a == null ? void 0 : a.toArray()).andThen((l, d) => {
                if (t.getIdAttribute() === null) return null;
                (t.idIsAutoNumber === pe.AutoNumber.No || t.idIsAutoNumber === pe.AutoNumber.YesIfEmpty && !t.hasNullId(r)) && (i = !1);
                let c = t.getIdAttribute().type,
                    h = Wn.convertToModelDataType(c),
                    f = new(jx.getType(h)),
                    g;
                return g = i ? Wn.deserializeFromDB(d.insertId, c) : t.getIdFromRecord(r), f.idOut = g, f
            })
        }
        update(e, t) {
            var r, i;
            Mm(e, t, "update");
            let o = (i = (r = e.update).getArguments) === null || i === void 0 ? void 0 : i.call(r, t);
            return this.executeNonQuery(e.update.sql, o)
        }
        createOrUpdate(e, t) {
            return this.getDatabase().then(r => r.executeTransaction(i => this.createOrUpdateInner(i, e, t, !0)))
        }
        createOrUpdateInner(e, t, r, i) {
            var o, s;
            if (Mm(t, r, "create or update"), t.hasNullId(r)) return this.createInner(e, t, r, !0);
            let a = (s = (o = t.upsert).getArguments) === null || s === void 0 ? void 0 : s.call(o, r);
            return e.executeQueryRaw(t.upsert.sql, a == null ? void 0 : a.toArray()).andThen((l, d) => {
                let c = t.getIdFromRecord(r),
                    h = t.getIdAttribute().type,
                    f = Wn.convertToModelDataType(h),
                    g = new(jx.getType(f));
                return g.idOut = c, g
            })
        }
        createOrUpdateAll(e, t) {
            return this.getDatabase().then(r => r.executeTransaction(i => yc.ForceCreateOrUpdateAllMethod === jh.Bulk || yc.ForceCreateOrUpdateAllMethod === jh.Auto && e.attributes.filter(o => o.type === pe.DBDataType.BINARY_DATA).length === 0 ? this.createOrUpdateAllBulk(i, e, t) : this.createOrUpdateAllSingle(i, e, t)).then(Qz))
        }
        createOrUpdateAllBulk(e, t, r) {
            var i, o, s, a;
            let l = [],
                d = u((f, g) => l.push(p => p.executeQueryRaw(f, g)), "l"),
                c = Math.floor(yc.MaxQueryParameters / t.attributes.length);
            if (c === 0) return this.createOrUpdateAllSingle(e, t, r);
            let h = Math.ceil(r.length / c);
            for (let f = 0; f < h; f++) {
                let g = [],
                    p = 0;
                for (; p < c;) {
                    let y = f * c + p;
                    if (y === r.length) break;
                    let b = r.getItem(y);
                    Mm(t, b, "create or update"), g = g.concat((o = (i = t.upsert).getArguments) === null || o === void 0 ? void 0 : o.call(i, b).toArray()), p++
                }
                d((a = (s = t.upsert).getBulkSql) === null || a === void 0 ? void 0 : a.call(s, p), g)
            }
            return e.feed(null).andThenAll(() => l)
        }
        createOrUpdateAllSingle(e, t, r) {
            let i = [],
                o = u(s => i.push(a => this.createOrUpdateInner(a, t, s, !1)), "i");
            for (let s = 0; s < r.length; s++) o(r.getItem(s));
            return e.feed(null).andThenAll(() => i)
        }
        get(e, t) {
            let r = e.getIdAttribute(),
                i = new yi;
            return i.add(r.name, r.type, t), this.rawExecuteQuery(e.select.sql, e.dbRecordToRecord, i).then(o => {
                if (o.length === 0) throw new Q.DataBaseException("", `${e.name} with id ${t} was not found`); {
                    let s = new(eW.getType(o[0].constructor));
                    return s.recordOut = o[0], s
                }
            })
        }
        delete(e, t) {
            let r = e.getIdAttribute(),
                i = new yi;
            return i.add(r.name, r.type, t), this.executeNonQuery(e.delete.sql, i)
        }
        deleteAll(e) {
            return this.executeNonQuery(e.deleteAll.sql)
        }
        getBinary(e, t, r) {
            let i = e.getIdAttribute(),
                o = i.name,
                s = i.type,
                a = `SELECT "${t}" FROM "${e.tableName}" WHERE "${o}" = ?`,
                l = new yi;
            return l.add(o, s, r), Wn.deserializeLazyBinaryFromDB(() => this.getDatabase().then(d => d.executeReadTransaction(c => c.executeScalar(a, l.toArray()))))
        }
        replaceEntityReferencesInOrderBy(e, t, r) {
            let i = xa(e = e.trim(), '(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)', !0);
            if (i.length > 0) {
                let s = i[0];
                throw new Q.DataBaseException("", `'${s.groups[2]+s.groups[3]}' found in 'Order By' parameter is a reserved prefix`)
            }
            if (e !== "" && (i = xa(e, "((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*", !0), i.length !== 1 || i[0].value !== e)) throw new Q.DataBaseException("", "Invalid syntax in 'Order By' parameter.");
            let o = ol(e, "(\\{\\w+\\}|\\w+\\.)", !1, s => this.replaceEntityNameInOrderBy(s, t, r));
            return o = ol(o, "(\\[\\w+\\])", !1, s => this.replaceAttributeName(s)), o
        }
        replaceEntityNameInOrderBy(e, t, r) {
            let i = "",
                o = this.getEntityNameFromMatch(e),
                s = !1;
            for (let a = 0; a < t.length; a++)
                if (t[a].toLowerCase() === o.toLowerCase()) {
                    s = !0, i = '"' + r[a] + '"';
                    break
                } if (!s) throw new Q.DataBaseException("", `'${o}' found in 'Order By' parameter is an invalid Entity`);
            return e.value.charAt(e.value.length - 1) === "." ? i + "." : i
        }
        replaceAttributeName(e) {
            let t = e.value.substr(1, e.value.length - 2);
            return t ? (t.charAt(0) === '"' ? "" : '"') + t + (t.charAt(t.length - 1) === '"' ? "" : '"') : ""
        }
        getEntityNameFromMatch(e) {
            return e.value.charAt(e.value.length - 1) === "." ? e.value.substr(0, e.value.length - 1) : e.value.substr(1, e.value.length - 2)
        }
        getOrderByColumnsWithoutDuplicates(e) {
            return this.filterDuplicateOrderByColumns(e).join(", ")
        }
        filterDuplicateOrderByColumns(e) {
            let t = new Array,
                r = {};
            return e.forEach(i => {
                let o = i.trim();
                if (o !== "") {
                    let s = o.replace(new RegExp("\b((ASC)|(DESC))$", "im"), "").replace('"', "").replace("[", "").replace("]", "").trim().toLowerCase();
                    r[s] !== !0 && (t.push(o), r[s] = !0)
                }
            }), t
        }
    };
u(yc, "oc");
var dl = yc;
dl.MaxQueryParameters = 500, dl.ForceCreateOrUpdateAllMethod = jh.Auto;
var t2 = new dl;

function Mm(n, e, t) {
    let r = n.getAllAttributesFromRecord(e).toArray();
    for (let i = 0; i < n.attributes.length; i++) {
        let o = n.attributes[i];
        n2(r[i], o, `${t} '${n.name}.${o.name}'`)
    }
}
u(Mm, "uc");

function n2(n, e, t) {
    if (e.type === pe.DBDataType.TEXT) {
        if (n === null || e.length === void 0) return;
        let r = n.length - e.length;
        if (r > 0) throw new Q.DataBaseException("", `Unable to ${t} because it exceeds the maximum allowed length by ${r} characters.`)
    } else if (e.type === pe.DBDataType.DECIMAL && e.length !== void 0 && e.decimals !== void 0) {
        let r = n.split(".")[0].length - (e.length - e.decimals);
        if (r > 0) throw new Q.DataBaseException("", `Unable to ${t} because it exceeds the maximum allowed length by ${r} characters.`)
    }
}
u(n2, "cc");
var bA = class bA {
    constructor(e) {
        this.skipConversion = e, this.argumentList = [], this.existingArguments = {}
    }
    add(e, t, r, i, o, s) {
        if (!this.existingArguments[e])
            if (this.existingArguments[e] = !0, r === void 0) this.argumentList.push(null);
            else {
                let a;
                a = this.skipConversion ? r : Wn.serializeToDB(r, {
                    type: t,
                    length: i,
                    decimals: o,
                    isEntityReference: s
                }), this.argumentList.push(a)
            }
    }
    toArray() {
        return this.argumentList
    }
};
u(bA, "dc");
var yi = bA,
    Nc, tW = Object.freeze({
        __proto__: null,
        BACKUP_TABLE_PREFIX: Bh,
        Entity: (Nc = class {
            constructor(e, t, r) {
                this.storage = e, this.info = t, this.moduleKey = r, this.getBinary = (i, o, s) => s.hasContent() ? s : this.storage.getBinary(this.info, i, o)
            }
            getStorage() {
                return this.storage
            }
            getInfo() {
                return this.info
            }
            create(e) {
                return this.storage.create(this.info, e)
            }
            createOrUpdate(e) {
                return this.storage.createOrUpdate(this.info, e)
            }
            createOrUpdateAll(e) {
                return this.storage.createOrUpdateAll(this.info, e)
            }
            update(e) {
                return this.storage.update(this.info, e)
            }
            get(e) {
                return this.storage.get(this.info, e)
            }
            delete(e) {
                return this.storage.delete(this.info, e)
            }
            deleteAll() {
                return this.storage.deleteAll(this.info)
            }
        }, u(Nc, "Entity"), Nc),
        get PersistentKeyValue() {
            return l1
        },
        QueryArgumentsList: yi,
        get Upgrades() {
            return lr
        },
        WebSQLStorage: dl,
        webSQLStorageInstance: t2
    }),
    r2 = "_error.html",
    wh = {
        errorCode: "UNHANDLED"
    },
    d1 = {
        errorCode: "IGNORED"
    },
    Ky = "ErrorHandling",
    Wi = {
        errorPageMessage: new Jr(vn.Session, "ErrorPageMessage", ""),
        errorPageExtraMessage: new Jr(vn.Session, "ErrorPageExtraMessage", ""),
        errorPageExceptionInfo: new Jr(vn.Session, "ErrorPageExceptionInfo")
    };

function Jy(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "",
        t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "",
        r = arguments.length > 3 ? arguments[3] : void 0;
    var i, o;
    if (!hI() && (n && (s2(n) ? a2(n) : xe((i = n.category) !== null && i !== void 0 ? i : Ky, n.message || "Navigating to Error page", (o = n.errorCode) !== null && o !== void 0 ? o : "OS-CLRT-00000", n, Oe.External)), dI(r))) {
        let s = sl.getVersionedUrl(r2);
        Wi.errorPageMessage.set(e), Wi.errorPageExtraMessage.set(t), n ? Wi.errorPageExceptionInfo.set(GP(n)) : Wi.errorPageExceptionInfo.remove(), Uo(s)
    }
}
u(Jy, "yc");

function i2(n, e) {
    var t;
    let r = X1();
    Jy(n, ((t = r == null ? void 0 : r.messages) === null || t === void 0 ? void 0 : t.incompatibleProducer) || n.message, void 0, e)
}
u(i2, "bc");

function RI(n) {
    var e;
    let t = X1();
    Jy(void 0, ((e = t == null ? void 0 : t.messages) === null || e === void 0 ? void 0 : e.appOffline) || "This application is temporarily unavailable. Try reloading or contact the administrator.", void 0, n)
}
u(RI, "Tc");

function bs(n, e) {
    z(Ky, "Error thrown by the application: " + n, Oe.Client), oI(n) ? RI(e) : Ei(n, Q.IncompatibleProducerException) ? i2(n, e) : Jy(n, void 0, void 0, e)
}
u(bs, "wc");

function h1(n, e) {
    return !!Ei(n, Q.IgnorableSystemException) || !!oI(n) && (RI(e), !0)
}
u(h1, "Ec");

function o2(n) {
    return n === wh || n === d1
}
u(o2, "Ic");

function s2(n) {
    return n && typeof n.requireType == "string"
}
u(s2, "Ac");

function a2(n) {
    var e;
    let t = "OS-CLRT-RJS-00000",
        r = Oe.Internal;
    n.requireType === "timeout" ? t = "OS-CLRT-RJS-00005" : n.requireType === "mismatch" ? (t = n.message.indexOf("anonymous define()") !== -1 ? "OS-CLRT-RJS-00004" : "OS-CLRT-RJS-00003", r = Oe.External) : n.requireType === "scripterror" && (t = /Script error for.*?, needed by:.*/gm.test(n.message) ? "OS-CLRT-RJS-00002" : "OS-CLRT-RJS-00001", r = Oe.External), xe(Ky, (e = n.message) !== null && e !== void 0 ? e : "Error loading script by RequireJS", t, n, r)
}
u(a2, "Nc");
var nW = Object.freeze({
        __proto__: null,
        ERROR_PAGE_HTML: r2,
        ErrorHandlingStorage: Wi,
        IGNORED_ERROR_RESULT: d1,
        UNHANDLED_ERROR_RESULT: wh,
        defaultErrorHandler: u(function(n, e) {
            let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : (i, o) => bs(i, o),
                r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : (i, o) => h1(i, o);
            return Yr(n) && qe(Ky, Yr(n)), n instanceof Q.NotRegisteredException ? (kk({
                callbackUrl: jt()
            }), wh) : r(n, e) ? d1 : (t(n, e), wh)
        }, "defaultErrorHandler"),
        handleError: bs,
        ignoreError: h1,
        isRequireJSError: s2,
        isSpecialHandleErrorResult: o2,
        navigateToAppOffline: RI,
        navigateToErrorPage: Jy,
        navigateToIncompatibleProducer: i2,
        reportRequireJSError: a2
    }),
    $h, Th, OI = !0;

function u2(n) {
    OI = n
}
u(u2, "xc");

function DI(n, e) {
    let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0,
        r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "",
        i = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : !0,
        o = arguments.length > 5 ? arguments[5] : void 0;
    if (!OI) return;
    let s = u(() => $h.showMessage(n, e, t, r, i, o), "a");
    $h ? s() : Th = s
}
u(DI, "Lc");

function c2() {
    OI && ($h ? $h.closeMessage() : Th = null)
}
u(c2, "Oc");
var hc, f1, nv, l2, rW = Object.freeze({
        __proto__: null,
        closeFeedbackMessage: c2,
        registerFeedbackMessageService: u(function(n) {
            $h = n, Th && (Th(), Th = null)
        }, "registerFeedbackMessageService"),
        setEnabled: u2,
        showFeedbackMessage: DI
    }),
    wA = class wA {
        constructor() {
            hc.set(this, 0)
        }
        create() {
            return dP(this, hc, Ts(this, hc, "f") + 1, "f"), Ts(this, hc, "f")
        }
        shouldAbort(e) {
            return e !== Ts(this, hc, "f")
        }
    };
u(wA, "Pc");
var g1 = wA;

function iW(n, e, t) {
    var r = this;
    return function() {
        for (var i = arguments.length, o = new Array(i), s = 0; s < i; s++) o[s] = arguments[s];
        return M(r, void 0, void 0, function*() {
            (function(a, l, d) {
                let {
                    responseHandler: c
                } = d[0];
                d[0].responseHandler = function() {
                    a.shouldAbort(l) || c == null || c(...arguments)
                }
            })(n, e, o);
            try {
                if (n.shouldAbort(e)) return {
                    completed: !1
                };
                let a = yield t(...o);
                return n.shouldAbort(e) ? {
                    completed: !1
                } : {
                    completed: !0,
                    data: a
                }
            } catch (a) {
                if (n.shouldAbort(e)) return {
                    completed: !1
                };
                throw a
            }
        })
    }
}
u(iW, "Vc");
hc = new WeakMap;
var TA = class TA {
    constructor() {
        f1.add(this), nv.set(this, new Map)
    }
    create(e) {
        let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : _I,
            r = Ts(this, f1, "m", l2).call(this, e),
            i = r.create();
        return {
            ref: i,
            post: iW(r, i, t)
        }
    }
};
u(TA, "Bc");
var p1 = TA;
nv = new WeakMap, f1 = new WeakSet, l2 = u(function(n) {
    let e = Ts(this, nv, "f").get(n);
    return e || (e = new g1, Ts(this, nv, "f").set(n, e)), e
}, "Fc");
var sS = "ResourceCache",
    EA = class EA {
        constructor() {
            this.isCaching = !1, this.errorMessages = [], this.onFinishListeners = [], this.onErrorListeners = [], this.onProgressListeners = []
        }
        onFinish() {
            this.isCaching = !1, this.onFinishListeners.forEach(e => e()), this.onFinishListeners = [], this.onErrorListeners = [], this.onProgressListeners = []
        }
        onError(e) {
            this.errorMessages.push(e), this.onErrorListeners.forEach(t => t(e))
        }
        onProgress(e, t) {
            this.onProgressListeners.forEach(r => r(e, t))
        }
        listen(e, t, r) {
            this.errorMessages.length > 0 && t && t(this.errorMessages.join(`
`)), !this.isCaching && e && e(), this.isCaching && (e && this.onFinishListeners.push(e), t && this.onErrorListeners.push(t), r && this.onProgressListeners.push(r))
        }
        start(e) {
            return new Promise((t, r) => {
                if (!this.isCaching) try {
                    this.isCaching = !0, this.errorMessages = [], this.innerStart(e)
                } catch (o) {
                    return this.onError(o.message), void r(o.message)
                }
                let i = {
                    finished: !1
                };
                this.listen(() => {
                    i.finished || (i.finished = !0, t())
                }, o => {
                    i.finished || (i.finished = !0, r(o))
                }, null)
            })
        }
        switch (e) {
            this.innerSwitch(e)
        }
    };
u(EA, "zc");
var Vh = EA,
    Ih = class Ih extends Vh {
        constructor() {
            super(), this.isNativeReady = !1, this.isCacheAvailable = !1, Rr().then(() => {
                this.isNativeReady = !0, this.isCacheAvailable = typeof OSCache != "undefined", this.isCacheAvailable ? (OSCache.addEventListener("onfinish", e => this.onFinish()), OSCache.addEventListener("onerror", e => this.onError(e.message)), OSCache.addEventListener("onprogress", e => this.onProgress(e.loaded, e.total))) : console.error(sS, Ih.OSCacheNotFoundMessage)
            }, e => {
                console.error(sS, "OSCache was not initialized because Cordova was not loaded.", e)
            })
        }
        checkOSCacheAndDeferCall(e, t) {
            return this.isNativeReady ? !!this.isCacheAvailable || (e && this.onError(Ih.OSCacheNotFoundMessage), !1) : (Rr().then(t), !1)
        }
        getCacheName() {
            return "Native Cache"
        }
        innerStart(e) {
            if (!this.checkOSCacheAndDeferCall(!0, () => this.innerStart(e))) return;
            let t = jt(),
                r = `/${Qn()}/`,
                i = [];
            for (let o of Object.getOwnPropertyNames(e.urlVersions)) i.push(lf(cf(o, r, t), e.urlVersions[o]));
            OSCache.startCaching(e.versionToken, i, e.urlMappings, e.urlMappingsNoCache)
        }
        innerSwitch(e) {
            if (this.checkOSCacheAndDeferCall(!1, () => this.innerSwitch(e))) try {
                OSCache.switchToVersion(e)
            } catch (t) {
                console.error(sS, t)
            }
        }
    };
u(Ih, "Hc");
var Hv = Ih;
Hv.OSCacheNotFoundMessage = "OSCache not found (is a native plugin missing?)";
var Ah = class Ah extends Vh {
    constructor() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Wy;
        super(), this.requested = 0, this.resourceQueue = [], this.count = 0, this.total = 0, this.getMethod = e
    }
    getCacheName() {
        return "Preloader"
    }
    innerStart(e) {
        if (this.isOngoing() || (this.count = this.requested = this.total = 0, this.resources = e.urlVersions, !this.resources) || (this.resourceQueue = Object.getOwnPropertyNames(this.resources), this.total = this.resourceQueue.length, this.resourceQueue.length <= 0)) return;
        let t = `/${Qn()}/`;
        for (let r = 0; r < Ah.DefaultWindowSize; ++r) this.prefetchNext(t, "")
    }
    innerSwitch(e) {}
    isOngoing() {
        return this.requested > 0 || this.resourceQueue.length > 0
    }
    request(e, t, r) {
        return M(this, void 0, void 0, function*() {
            try {
                yield this.getMethod({
                    url: e,
                    timeout: Ah.DefaultResourceTimeout,
                    responseType: "none"
                })
            } catch (i) {
                this.onError && this.onError(`Failed to load resource '${e}'.`)
            }
            this.onProgress && this.onProgress(++this.count, this.total), this.requested--, this.resourceQueue.length === 0 && this.requested === 0 ? this.onFinish && this.onFinish() : this.resourceQueue.length > 0 && this.prefetchNext(t, r)
        })
    }
    prefetchNext(e, t) {
        let r = this.resourceQueue.pop();
        if (!r) throw new Error("No resource to fetch next.");
        let i = lf(cf(r, e, t), this.resources[r]);
        this.request(i, e, t), this.requested++
    }
};
u(Ah, "jc");
var Hh = Ah;
Hh.DefaultWindowSize = 2, Hh.DefaultResourceTimeout = 2e4;
var _A = class _A extends Vh {
    getCacheName() {
        return "Dummy"
    }
    innerStart(e) {
        this.onFinish()
    }
    innerSwitch(e) {}
};
u(_A, "qc");
var m1 = _A,
    rv = typeof document == "undefined" ? new m1 : on() ? new Hv : new Hh,
    hl, v1;
(function(n) {
    n[n.TransitionStart = 0] = "TransitionStart", n[n.TransitionEnd = 1] = "TransitionEnd", n[n.NavigationStart = 2] = "NavigationStart"
})(hl || (hl = {})),
function(n) {
    n[n.Success = 0] = "Success", n[n.Failure = 1] = "Failure"
}(v1 || (v1 = {}));
var oW = 0,
    aS = (() => {
        let n = [],
            e = Object.keys(hl).length / 2;
        for (let t = 0; t < e; t++) n.push({});
        return n
    })(),
    zh;
(function(n) {
    function e(r, i) {
        let o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
            s = "_" + oW++;
        return aS[r][s] = {
            listenOnce: o,
            callback: i
        }, {
            type: r,
            id: s
        }
    }
    u(e, "t");

    function t(r, i) {
        return delete aS[r][i]
    }
    u(t, "n"), n.listen = e, n.listenOnce = function(r, i) {
        return e(r, i, !0)
    }, n.unregister = function(r) {
        return r && t(r.type, r.id)
    }, n.dispatch = function(r) {
        let i, o = aS[r.type];
        for (let s in o) {
            let a = o[s];
            a.listenOnce && t(r.type, s);
            let l = a.callback(r.args);
            l !== void 0 && (i = l)
        }
        return i
    }
})(zh || (zh = {}));
var sW = Object.freeze({
    __proto__: null,
    get EventDispatcher() {
        return zh
    },
    get EventType() {
        return hl
    },
    get TransitionEndResult() {
        return v1
    }
});

function y1(n) {
    return "name" in n && "registerInitializer" in n && "initialize" in n && "initializerCleanup" in n && "testConnection" in n && "close" in n && "executeReadTransaction" in n && "executeTransaction" in n && "executeUpgradeTransaction" in n
}
u(y1, "Zc");
var SA = class SA extends Error {
    constructor(e) {
        let {
            message: t,
            errorCode: r,
            category: i
        } = e;
        super(t), this.errorCode = r, this.category = i
    }
};
u(SA, "ed");
var b1 = SA,
    d2 = "moduleservices",
    aW = `${d2}/moduleinfo`,
    uW = `${d2}/moduleversioninfo`,
    IA = class IA {
        constructor() {
            let {
                getBasePath: e = u(() => jt(), "e"),
                getMethod: t = Wy,
                prefetchedVersion: r
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            this.getBasePath = e != null ? e : () => jt(), this.getMethod = t, this.prefetchedVersion = r
        }
        init() {
            return M(this, void 0, void 0, function*() {
                try {
                    this.prefetchedVersion = yield this.getLatestVersion()
                } catch (e) {
                    z("ManifestLoader", `Failed to prefetch latest version. ${e}`)
                }
            })
        }
        getVersionTokenParameter(e) {
            return e ? `?${e}` : ""
        }
        getPrefetchedVersion() {
            return this.prefetchedVersion
        }
        getLatestManifest(e, t) {
            return this.getManifest(e, t)
        }
        getCachedManifest(e) {
            return this.getManifest("cached", e)
        }
        getManifest(e) {
            return M(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : de.resolve(Y.UnauthenticatedHttpClient);
                return function*() {
                    var o;
                    let s = `${aW}${r.getVersionTokenParameter(t)}`;
                    return (o = yield r.getMethod({
                        url: s,
                        timeout: 1e4,
                        baseURL: r.getBasePath(),
                        httpClient: i
                    })) !== null && o !== void 0 ? o : {}
                }()
            })
        }
        getLatestVersion() {
            return M(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new Date().getTime().toString(),
                    r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : de.resolve(Y.HttpClient);
                return function*() {
                    var i;
                    let o = `${uW}?${t}`;
                    return (i = yield e.getMethod({
                        url: o,
                        timeout: 1e4,
                        baseURL: e.getBasePath(),
                        httpClient: r
                    })) !== null && i !== void 0 ? i : {}
                }()
            })
        }
    };
u(IA, "id");
var w1 = IA;

function cW() {
    return M(this, void 0, void 0, function*() {
        let n = yield function() {
            return M(this, void 0, void 0, function*() {
                try {
                    return yield Rr(), aI(window) ? window.OutSystemsNative.Prebundle : null
                } catch (e) {
                    return null
                }
            })
        }();
        return n ? new Promise((e, t) => {
            n.getManifest(e, t)
        }) : null
    })
}
u(cW, "sd");
var zv = typeof __PERFORMANCE != "undefined";

function Ic(n) {
    zv && __PERFORMANCE.start(n)
}
u(Ic, "od");

function ws(n) {
    zv && __PERFORMANCE.end(n)
}
u(ws, "ld");
var lW = Object.freeze({
        __proto__: null,
        clear: u(function() {
            if (zv) return __PERFORMANCE.clear()
        }, "clear"),
        dump: u(function() {
            if (zv) return __PERFORMANCE.dump()
        }, "dump"),
        end: ws,
        start: Ic
    }),
    Kt = "VersionsManager",
    NI = "__",
    $x, Vx;
(function(n) {
    n[n.Generic = 0] = "Generic", n[n.Resources = 1] = "Resources", n[n.DataModel = 2] = "DataModel"
})($x || ($x = {})),
function(n) {
    n[n.Idle = 0] = "Idle", n[n.Upgrading = 1] = "Upgrading", n[n.UpgradeSuccess = 2] = "UpgradeSuccess", n[n.UpgradeFailed = 3] = "UpgradeFailed"
}(Vx || (Vx = {}));
var sc = {
        applicationInfo: new Jr(vn.Persistent, "ApplicationInfo"),
        upgradeStatus: new Jr(vn.Session, "UpgradeStatus", 0)
    },
    dW = u(n => {
        let e = n.lastIndexOf(NI);
        return e !== -1 ? n.substring(0, e) : n.replace(".js", "")
    }, "fd"),
    h2 = u((n, e) => `/${e}/${n}`, "md"),
    T1 = u((n, e, t) => t ? t[h2(n, e)] : void 0, "vd"),
    f2 = u(function(n, e) {
        let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
            r = ((d, c) => {
                let h = d.replace(/(.*)(\?[^?]+)$/, "$1").replace(/(.*)(\.[^.]+)$/, "$1");
                return c && (h = h.replace(/(.*)(__[^_]+)$/, "$1")), h
            })(n, t),
            i = Oa(r),
            o = Oa((d => {
                let c = d.indexOf("?"),
                    h = d.substring(0, c >= 0 ? c : void 0);
                return h.substring(h.lastIndexOf("."))
            })(n)),
            s = Oa(NI),
            a = new RegExp(`${i}${s}.*${o}$`),
            l = e ? Object.keys(e).find(d => a.exec(d)) : void 0;
        return l ? {
            matchedUrlVersion: l,
            relativeUrlWithoutHashAndExtension: r
        } : t ? {} : f2(n, e, !0)
    }, "yd"),
    hW = u(function(n, e) {
        let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
            r = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : Qn,
            i = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : jt,
            o = r(),
            s = i(),
            a = ((d, c, h) => {
                let {
                    matchedUrlVersion: f,
                    relativeUrlWithoutHashAndExtension: g
                } = f2(d, c);
                if (h && f && g) {
                    let p = f.lastIndexOf(NI);
                    return `${g}${f.substring(p)}`
                }
                return d
            })(n, e, t),
            l = T1(a, o, e);
        if (l) {
            let d = lf(h2(a, o), l != null ? l : "");
            return cf(d, `/${o}/`, s)
        }
        return a
    }, "bd"),
    bc = class bc {
        constructor() {
            let {
                manifestLoader: e = new w1
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            this._isAutoUpgradeEnabled = !0, this.checkedCachedInfoConsistency = !1, this.manifestLoader = e
        }
        get cachedAppInfo() {
            let e = sc.applicationInfo.get();
            if (e && !this.checkedCachedInfoConsistency) {
                try {
                    bc.validateApplicationInfo(e)
                } catch (t) {
                    e = void 0, sc.applicationInfo.remove()
                }
                this.checkedCachedInfoConsistency = !0
            }
            return e
        }
        set cachedAppInfo(e) {
            sc.applicationInfo.set(e)
        }
        get currentAppInfo() {
            var e, t;
            return (t = (e = this.fetchedApplicationInfo) === null || e === void 0 ? void 0 : e.manifest) !== null && t !== void 0 ? t : this.cachedAppInfo
        }
        get upgradeStatus() {
            return sc.upgradeStatus.get()
        }
        set upgradeStatus(e) {
            sc.upgradeStatus.set(e)
        }
        initializeManifestLoader() {
            return this.manifestLoader.init()
        }
        initialize() {
            return M(this, void 0, void 0, function*() {
                if (z(Kt, "Initializing VersionsManager"), this.initialUpgradeStatus = this.upgradeStatus, !Qn()) return Promise.reject(Error("Home module not defined!"));
                this.enableBackgroundCheckForNewVersions(), this.fetchedApplicationInfo = yield this.fetchApplicationManifest()
            })
        }
        upgradeVersion(e, t) {
            return M(this, void 0, void 0, function*() {
                this.onVersionReady = t.onVersionReady || (() => {}), this.onUpgradeFinished = t.onUpgradeFinished || (s => {}), this.onNewVersionDetected = !this.isUpgradeDisabled && t.onNewVersionDetected || (s => Promise.resolve());
                let r = t.onAppInfoReady || (s => {}),
                    i = this.fetchedApplicationInfo.manifest,
                    o = this.fetchedApplicationInfo.isFromPrebundle;
                if (r(i), MP(function(s, a) {
                        let l = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Qn,
                            d = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : jt,
                            c = `/${l()}/`,
                            h = d();
                        return Object.keys(s).filter(f => /\.js$/i.test(f)).reduce((f, g) => {
                            let p = s[g],
                                y = cf(g, c, h),
                                b = y.split("/"),
                                E = dW(b[b.length - 1]);
                            return f.hasOwnProperty(E) || (f[E] = lf(y, p)), f
                        }, {})
                    }(i.manifest.urlVersions, i.manifest.versionToken)), this.isNewVersion(i.manifest, o)) {
                    if (!this.isUpgradeDisabled && this.usingStaleIndex(i)) return wk(!0), hr(Kt, "Reloading application - index.html was changed in the server", Oe.Internal), !1;
                    yield this.upgrade(i, e)
                } else this.initDataModel(e);
                return !0
            })
        }
        initDataModel(e) {
            z(Kt, "Initializing data model"), e.then(t => this.upgradeDataModel(t).then(() => this.switchDataModel(t)).then(() => {
                this.onVersionReady()
            })).then(() => this.setUpgradeStatus(0)).catch(t => this.handleInitError(t))
        }
        cacheResourcesInBackground(e) {
            return z(Kt, "Caching resources in the background..."), this.fetchApplicationManifest(!1).then(t => {
                let {
                    manifest: r,
                    isFromPrebundle: i
                } = t, o = this.usingStaleIndex(r);
                if (e && e(o), fk(o), this.isNewVersion(r.manifest, i)) return this.upgradeResources(r)
            }).catch(t => qe(Kt, `Error caching resources for new version in the background: ${t}`))
        }
        getResourceVersionToken(e, t) {
            if (this.currentAppInfo) return T1(e, t, this.currentAppInfo.manifest.urlVersions)
        }
        isNewVersion(e, t) {
            let r = e.versionToken,
                i = this.getLastApplicationVersionToken(),
                o = r !== i;
            if (this.canDisableNativeAutoUpgrade) {
                let s = this.isAutoUpgradeEnabled,
                    a = o && (s || t);
                return z(Kt, () => o ? `Version check found a new version '${r}' from ${t?"prebundle":"server"} with auto-upgrade ${s?"enabled":"disabled"} and decided it is ${a?"":"not "}upgradable. Current version has token '${i}'` : `Version check found the same version '${r}'.`), a
            }
            return o
        }
        getLastApplicationVersionToken() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
            var t;
            if (e && (!((t = this.fetchedApplicationInfo) === null || t === void 0) && t.manifest)) return this.fetchedApplicationInfo.manifest.manifest.versionToken;
            let r = this.cachedAppInfo;
            return r ? r.manifest.versionToken : ""
        }
        getVersionToken(e, t) {
            return this.getResourceVersionToken(e, t)
        }
        getVersionedUrl(e) {
            var t, r;
            return hW(e, (t = this.currentAppInfo) === null || t === void 0 ? void 0 : t.manifest.urlVersions, (r = this.currentAppInfo) === null || r === void 0 ? void 0 : r.manifest.cdnUrlVersioning)
        }
        static getJSONParseErrorMessage() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
            return "Error parsing manifest JSON " + (e ? `, missing or invalid field: ${e}.` : ".")
        }
        static validateApplicationInfo(e) {
            if (!e) throw Error(this.getJSONParseErrorMessage());
            if (!e.manifest) throw Error(this.getJSONParseErrorMessage("manifest"));
            let t = e.manifest;
            if (!t.versionToken || typeof t.versionToken != "string") throw Error(this.getJSONParseErrorMessage("manifest.versionToken"));
            if (!t.urlVersions || typeof t.urlVersions != "object") throw Error(this.getJSONParseErrorMessage("manifest.urlVersions"));
            if (!t.urlMappings || typeof t.urlMappings != "object") throw Error(this.getJSONParseErrorMessage("manifest.urlMappings"));
            if (!t.urlMappingsNoCache || typeof t.urlMappingsNoCache != "object") throw Error(this.getJSONParseErrorMessage("manifest.urlMappingsNoCache"));
            if (!e.data) throw Error(this.getJSONParseErrorMessage("data"));
            let r = e.data;
            if (!r.modules || typeof r.modules != "object") throw Error(this.getJSONParseErrorMessage("data.modules"))
        }
        getLatestVersionFromServer() {
            return M(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
                return function*() {
                    var r;
                    let i = yield t && e.manifestLoader.getPrefetchedVersion() || e.manifestLoader.getLatestVersion();
                    return e.canDisableNativeAutoUpgrade && (e._isAutoUpgradeEnabled = (r = i.isAutoUpgradeEnabled) !== null && r !== void 0 && r), i.versionToken || xe(Kt, "Error retrieving version token from module version info.", "OS-CLRT-60301"), i
                }()
            })
        }
        checkForNewVersion() {
            this.isUpgradeDisabled || this.isUpgradingVersion || !sc.applicationInfo.isDefined() || this.getLatestVersionFromServer(!1).then(e => {
                this.getLastApplicationVersionToken() !== e.versionToken && this.isAutoUpgradeEnabled && this.onNewVersionDetected(!1, this.isAutoUpgradeEnabled)
            }, e => {
                qe(Kt, `Error checking for new version: ${e}`)
            })
        }
        upgrade(e, t) {
            return M(this, void 0, void 0, function*() {
                z(Kt, "New application version detected, starting upgrade..."), this.setUpgradeStatus(1);
                let r = this.supportsResourceCache().then(o => o ? this.upgradeResources(e).catch(s => this.handleUpgradeError(s, 1, Promise.resolve(void 0))) : Promise.resolve()),
                    i = t.then(o => this.upgradeDataModel(o)).catch(o => this.handleUpgradeError(o, 2, r));
                yield Promise.all([r, i]).then(() => {
                    this.upgradeStatus === 1 && this.commitNewVersion(e, t).then(o => {
                        o && this.onVersionReady()
                    })
                }).catch(o => this.handleUpgradeError(o))
            })
        }
        supportsResourceCache() {
            return M(this, void 0, void 0, function*() {
                var e;
                if (sf()) {
                    let t = !!(!((e = cv()) === null || e === void 0) && e.splashScreenName);
                    return z(Kt, "Web app - Resource pre-caching is " + (t ? "enabled" : "disabled")), t
                } {
                    let t = yield this.serviceWorkerIsAvailable(), r = on() || !t;
                    return z(Kt, "Mobile app - Pre-caching resources with " + (r ? "Resource Cache" : "Service Worker")), r
                }
            })
        }
        serviceWorkerIsAvailable() {
            return M(this, void 0, void 0, function*() {
                try {
                    return "serviceWorker" in navigator ? (yield navigator.serviceWorker.getRegistrations()) !== null : !1
                } catch (e) {
                    return !1
                }
            })
        }
        commitNewVersion(e, t) {
            return t.then(r => this.switchDataModel(r)).then(() => this.switchResourcesVersion(e.manifest.versionToken)).then(() => {
                let r = !this.cachedAppInfo;
                return this.cachedAppInfo = e, this.setUpgradeStatus(r ? 0 : 2), !0
            })
        }
        setManifestLoader(e) {
            this.manifestLoader = e
        }
        upgradeResources(e) {
            return Ic("VersionsManager upgradeResources"), mh(() => rv.start(e.manifest), () => ws("VersionsManager upgradeResources"))
        }
        upgradeDataModel(e) {
            return Ic("VersionsManager upgradeDataModel"), y1(e) ? (z(Kt, `Initializing data model on ${e.engineName} database.`), mh(() => M(this, void 0, void 0, function*() {
                let t = yield this.getAllEntityModules(), r = de.resolve(Y.EntityService);
                for (let i of t) r.registerInitializer(i.getEntityInfos());
                yield e.initialize()
            }), () => ws("VersionsManager upgradeDataModel"))) : (z(Kt, "Initializing data model on SQLite/WebSQL database."), mh(() => this.doForEachClientEntitiesModule(e, (t, r) => r.init(t)), () => ws("VersionsManager upgradeDataModel")))
        }
        getAllEntityModules() {
            let e = [],
                t = yP(),
                r = t ? [t] : vP();
            if (r)
                for (let i of r) z(Kt, `Fetching entity module '${i}'.`), e.push(new Promise((o, s) => {
                    Lh([i], a => o(a), s)
                }));
            return Promise.all(e)
        }
        doForEachClientEntitiesModule(e, t) {
            return e.isMock ? Promise.resolve() : this.getAllEntityModules().then(r => e.executeTransaction(i => i.feed(null).andThenAll(() => r.map(o => s => t(s, o)))))
        }
        switchResourcesVersion(e) {
            rv.switch(e)
        }
        switchDataModel(e) {
            return y1(e) ? (z(Kt, "Finishing initialization of data model on IndexedDB database."), e.initializerCleanup()) : (z(Kt, "Finishing initialization of data model on SQLite/WebSQL database."), this.doForEachClientEntitiesModule(e, (t, r) => r.switch(t)))
        }
        handleInitError(e) {
            let t = this.isUpgradeDisabled ? "Upgrade failed and rollback isn't possible at this time" : "Unable to load the data model";
            xe(Kt, t, "OS-CLRT-60303", e, Oe.External), bs(e)
        }
        handleUpgradeError(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0,
                r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Promise.resolve(void 0);
            return Ei(e, Q.OpenDatabaseException) ? (xe(Kt, "Upgrade failed - unable to open the database.", "OS-CLRT-60302", e), bs(e), Promise.resolve(void 0)) : hI() || this.initialUpgradeStatus === 3 ? this.initialUpgradeStatus === 3 ? (bs(e), Promise.resolve(void 0)) : (qe(Kt, "Upgrade failed - ignoring error due to concurrent navigation."), this.upgradeStatus !== 3 && this.setUpgradeStatus(0), Promise.resolve(void 0)) : (xe(Kt, "Upgrade failed - rolling back to previous application version.", "OS-CLRT-60302", e, Oe.External), this.rollBackApplicationVersion(t, r))
        }
        get isUpgradingVersion() {
            return this.upgradeStatus === 1
        }
        setUpgradeStatus(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            return this.upgradeStatus = e, z(Kt, "Upgrade status changed to: " + e), e === 2 ? this.onUpgradeFinished(!0) : e === 3 ? this.onUpgradeFinished(!1, t) : void 0
        }
        rollBackApplicationVersion(e, t) {
            return this.loadCachedManifest().then(r => {
                let {
                    manifest: i
                } = r;
                if (this.setUpgradeStatus(3, e), e !== 1) return t.then(() => rv.start(i.manifest))
            }).then(() => {
                fI(!1)
            }).catch(r => {
                bs(r)
            })
        }
        get isUpgradeDisabled() {
            return this.upgradeStatus === 3
        }
        get isAutoUpgradeEnabled() {
            return this._isAutoUpgradeEnabled
        }
        get canDisableNativeAutoUpgrade() {
            return de.resolve(Y.SettingsManager).readBool("CanDisableAutoUpgrade") && on() && this.isRunningCachedIndex()
        }
        isRunningCachedIndex() {
            let e = OSManifestLoader.indexVersionToken,
                t = this.getIndexVersion(this.cachedAppInfo);
            return !!t && e === t
        }
        usingStaleIndex(e) {
            return yk() ? !1 : (OSManifestLoader.indexVersionToken || this.getIndexVersion(this.cachedAppInfo)) !== this.getIndexVersion(e)
        }
        getIndexVersion(e) {
            if (!e) return "";
            let t = T1("index.html", Qn(), e.manifest.urlVersions);
            return t ? t.substr(1) : ""
        }
        loadCachedManifest() {
            return M(this, void 0, void 0, function*() {
                var e;
                if (this.canDisableNativeAutoUpgrade) {
                    let t = this.innerLoadPrebundledManifest(),
                        r = this.innerLoadCachedManifest(),
                        i = null,
                        o = null,
                        s = null;
                    try {
                        i = yield t
                    } catch (a) {
                        qe(Kt, `Error loading prebundled manifest: ${(e=a==null?void 0:a.message)!==null&&e!==void 0?e:a}`)
                    }
                    try {
                        o = yield r
                    } catch (a) {
                        s = a
                    }
                    try {
                        o = yield this.innerLoadCachedManifest()
                    } catch (a) {
                        s = a
                    }
                    if (!(i != null && i.manifest.versionSequence)) {
                        if (o) return {
                            manifest: o,
                            isFromPrebundle: !1
                        };
                        throw s
                    }
                    return o && o.manifest.versionSequence >= i.manifest.versionSequence ? {
                        manifest: o,
                        isFromPrebundle: !1
                    } : {
                        manifest: i,
                        isFromPrebundle: !0
                    }
                }
                return {
                    manifest: yield this.innerLoadCachedManifest(),
                    isFromPrebundle: !1
                }
            })
        }
        innerLoadCachedManifest() {
            return M(this, void 0, void 0, function*() {
                if (yield this.ensureCachedManifest(), this.cachedAppInfo) return this.cachedAppInfo; {
                    let e = yield this.manifestLoader.getCachedManifest();
                    return bc.validateApplicationInfo(e), e
                }
            })
        }
        innerLoadPrebundledManifest() {
            return cW()
        }
        ensureCachedManifest() {
            if (on() || this.cachedAppInfo) return Promise.resolve(void 0); {
                this.setUpgradeStatus(0);
                let e = new b1({
                    message: "No cached manifest found. It's not possible to rollback to a previous version.",
                    errorCode: "OS-CLRT-60304"
                });
                return Promise.reject(e)
            }
        }
        getLatestManifestFromServer(e) {
            return this.manifestLoader.getLatestManifest(e).then(t => (bc.validateApplicationInfo(t), {
                manifest: t,
                isFromPrebundle: !1
            }))
        }
        fetchApplicationManifest() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
            return Ic("VersionsManager fetchApplicationManifest"), this.isUpgradeDisabled ? this.loadCachedManifest() : this.getLatestVersionFromServer(e).then(t => this.isNewVersion(t, !1) ? this.getLatestManifestFromServer(t.versionToken) : this.loadCachedManifest()).catch(() => this.loadCachedManifest()).then(t => (ws("VersionsManager fetchApplicationManifest"), t))
        }
        enableBackgroundCheckForNewVersions() {
            let e = !1;
            zh.listen(hl.NavigationStart, () => e = !0), zh.listen(hl.TransitionEnd, () => {
                e = !1, setTimeout(() => {
                    e || this.checkForNewVersion()
                }, 1e3)
            })
        }
    };
u(bc, "Td");
var E1 = bc,
    Ti = new E1;

function Hx(n, e) {
    hr("Public", `'${n}' is deprecated and will be removed on the next version. Consider using '${e}' instead.`)
}
u(Hx, "Ed");
var fW = AI,
    wa, Wv;
(function(n) {
    n[n.Info = 0] = "Info", n[n.Success = 1] = "Success", n[n.Warning = 2] = "Warning", n[n.Error = 3] = "Error"
})(wa || (wa = {})),
function(n) {
    n.showFeedbackMessage = function(e, t) {
        let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0,
            i = arguments.length > 3 ? arguments[3] : void 0,
            o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : !0,
            s = arguments.length > 5 ? arguments[5] : void 0;
        return DI(e, function(a) {
            switch (a) {
                case wa.Info:
                    return 0;
                case wa.Success:
                    return 1;
                case wa.Warning:
                    return 2;
                case wa.Error:
                    return 3;
                default:
                    throw new Error("Don't know how to convert " + a)
            }
        }(t), r, i, o, s)
    }, n.closeFeedbackMessage = function() {
        return c2()
    }
}(Wv || (Wv = {}));
var Lc, g2 = (Lc = class {
        constructor(e) {
            this._model = e
        }
        setWidgetAsInvalid(e, t) {
            var r;
            let i = (r = this._model) === null || r === void 0 ? void 0 : r.widgets.get(e);
            i.validAttr = !1, i.validationMessageAttr = t
        }
        setWidgetAsValid(e) {
            var t;
            let r = (t = this._model) === null || t === void 0 ? void 0 : t.widgets.get(e);
            r.validAttr = !0, r.validationMessageAttr = ""
        }
        isWidgetValid(e) {
            var t;
            return ((t = this._model) === null || t === void 0 ? void 0 : t.widgets.get(e)).validAttr === !0
        }
    }, u(Lc, "Sd"), Lc),
    qv, fl, Gv;
(function(n) {
    n.whenReady = function() {
        return lI()
    }
})(qv || (qv = {})),
function(n) {
    n.isUpgradingVersion = function() {
        return Ti.isUpgradingVersion
    }, n.listen = function(e) {
        z("ApplicationLifecycle", "Registering listeners for the application load process."), e && (e.onLoadComplete && Tl.waitForAppReady().then(() => {
            var t;
            return (t = e.onLoadComplete) === null || t === void 0 ? void 0 : t.call(e)
        }), e.onUpgradeProgress && rv.listen(null, null, (t, r) => {
            var i;
            return (i = e.onUpgradeProgress) === null || i === void 0 ? void 0 : i.call(e, t, r)
        }))
    }
}(fl || (fl = {}));
var AA = class AA {
    constructor(e) {
        this._context = e
    }
    navigateTo(e, t, r) {
        mv(e, this.getTransitionObject(t, of ), this._context, !1, r)
    }
    navigateBack(e) {
        Ik(this.getTransitionObject(e), this._context, !1)
    }
    navigateForward(e) {
        Ak(this.getTransitionObject(e), this._context, !1)
    }
    navigatedFromHistory() {
        return (Xr.activeScreen ? Xr.activeScreen.modelContext : {
            viewName: "",
            navigatedFromHistory: !1,
            viewWasRestoredFromCache: !1
        }).navigatedFromHistory
    }
    registerBackNavigationHandler(e) {
        return Tk(e)
    }
    unregisterBackNavigationHandler(e) {
        Ek(e)
    }
    registerNavigationHandler(e) {
        return _k(e)
    }
    getTransitionObject(e) {
        let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
        return Uy(e, t)
    }
};
u(AA, "xd");
var Kv = AA;
(function(n) {
    n.log = function(e, t) {
        hr(e, t, Oe.Client)
    }, n.error = function(e, t, r) {
        xe(e, t, void 0, r, Oe.Client)
    }
})(Gv || (Gv = {}));
var Ny = class Ny {
    constructor(e) {
        this._model = e
    }
    static get ActiveScreenCssClass() {
        return "active-screen"
    }
    getCurrentScreenRootElement() {
        return document.querySelector("." + Ny.ActiveScreenCssClass)
    }
    render() {
        return new Promise(e => {
            requestAnimationFrame(() => {
                setTimeout(e, 1)
            })
        })
    }
    wasCurrentViewRestoredFromCache() {
        return !!this._model && this._model.context.viewWasRestoredFromCache
    }
    registerDeviceClassGetter(e) {
        return rk(Y.DeviceHelperClassProvider, () => e)
    }
};
u(Ny, "Ld");
var Jv = Ny,
    CA = class CA {
        static getCurrentContext() {
            let e = p2();
            return {
                applicationKey: Is() || "",
                applicationName: My() || "",
                screenKey: e ? e.screenKey : "",
                screenName: e ? e.screenName : "",
                isReady: Tl.isReady
            }
        }
    };
u(CA, "Od");
var Zv = CA,
    Ly = class Ly {
        static get Instance() {
            return Ly
        }
        static get isUpgradingVersion() {
            return Hx("ApplicationLoad.isUpgradingVersion", "ApplicationLifecycle.isUpgradingVersion()"), fl.isUpgradingVersion()
        }
        static listen(e) {
            Hx("ApplicationLoad.listen()", "ApplicationLifecycle.listen()"), fl.listen(e)
        }
    };
u(Ly, "_d");
var Yv = Ly,
    Ac, gW = Object.freeze({
        __proto__: null,
        ApplicationContext: Zv,
        get ApplicationLifecycle() {
            return fl
        },
        ApplicationLoad: Yv,
        BuiltinFunctions: fW,
        get Device() {
            return qv
        },
        get FeedbackMessage() {
            return Wv
        },
        get FeedbackMessageType() {
            return wa
        },
        get Logger() {
            return Gv
        },
        Navigation: Kv,
        Validation: g2,
        View: Jv
    }),
    RA = class RA {
        constructor(e, t) {
            this._model = e, this._navigationContext = t
        }
        get BuiltinFunctions() {
            return AI
        }
        get Validation() {
            return this._validation || (this._validation = new g2(this._model)), this._validation
        }
        get FeedbackMessage() {
            return Wv
        }
        get Device() {
            return qv
        }
        get ApplicationLifecycle() {
            return fl
        }
        get ApplicationContext() {
            return Zv
        }
        get ApplicationLoad() {
            return Yv
        }
        get Navigation() {
            return this._navigation || (this._navigation = new Kv(this._navigationContext)), this._navigation
        }
        get Logger() {
            return Gv
        }
        get View() {
            return this._view || (this._view = new Jv(this._model)), this._view
        }
    };
u(RA, "Fd");
var gl = RA;
(function(n) {
    n[n.Block = 0] = "Block", n[n.IteratorItem = 1] = "IteratorItem", n[n.None = 2] = "None"
})(Ac || (Ac = {}));
var Fm = "-",
    OA = class OA {
        constructor(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "",
                r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Ac.None,
                i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null;
            switch (this._ownerService = e, r) {
                case Ac.Block:
                    this._namespace = "b";
                    break;
                case Ac.IteratorItem:
                    this._namespace = "l";
                    break;
                default:
                    this._namespace = ""
            }
            if (this._namespace += t, e) {
                let o = i ? i + Fm : "";
                this._namespace = e.namespace + this._namespace + Fm + o
            } else this._namespace && (this._namespace = this._namespace + Fm)
        }
        getId(e) {
            return e ? this.namespace + e : null
        }
        static nameFromId(e) {
            return e.substring(e.lastIndexOf(Fm) + 1)
        }
        get namespace() {
            return this._namespace
        }
        get ownerService() {
            return this._ownerService
        }
    };
u(OA, "Pd");
var pl = OA,
    pW = Object.freeze({
        __proto__: null,
        get NamespaceKind() {
            return Ac
        },
        WidgetIdService: pl
    }),
    DA = class DA {
        constructor(e, t) {
            this.model = e, this.messagesProvider = t, this.updatingValidations = !1, this.disposed = !1, e.hasValidationWidgets && (this.widgets = {}, this.widgetChildren = {}, this.oldModelWidgets = this.model.widgets, this.model.subscribeWrites(() => {
                this.updatingValidations || this.oldModelWidgets === this.model.widgets || this.recalculateAggregatorsState(""), this.oldModelWidgets = this.model.widgets
            }, !0))
        }
        getWidgetRecord(e) {
            return this.model.widgets.get(e)
        }
        updateWidgetValidationsProperties(e, t, r) {
            let i = this.updatingValidations;
            this.updatingValidations = !0;
            try {
                if (e.isWebBlockInstance) e.valid = t;
                else {
                    let o = this.getWidgetRecord(e.getId());
                    o.validAttr !== t && (o.validAttr = t), r !== void 0 && o.validationMessageAttr !== r && (o.validationMessageAttr = r)
                }
            } finally {
                this.updatingValidations = i
            }
        }
        validateWidget(e) {
            let t = !0;
            for (let i in this.widgetChildren[e]) this.validateWidget(i) !== !0 && (t = !1);
            let r = this.widgets[e];
            if (r) {
                let i;
                r.isValidationAggregator ? i = new Qv(t) : r.validate && (i = r.validate()), i && (this.updateWidgetValidationsProperties(r, i.valid, i.validationMessage), i.valid || (t = !1))
            }
            return t
        }
        recalculateAggregatorsState(e) {
            let t = !0;
            for (let i in this.widgetChildren[e]) this.recalculateAggregatorsState(i) || (t = !1);
            let r = this.widgets[e];
            if (r) {
                if (r.isWebBlockInstance) return r.valid;
                if (!r.isValidationAggregator) return this.getWidgetRecord(e).validAttr;
                this.updateWidgetValidationsProperties(r, t)
            }
            return t
        }
        register(e) {
            if (this.model.hasValidationWidgets && e) {
                let t = e.getId();
                if (t) {
                    this.widgets[t] = e;
                    let r = e.validationParentId || "",
                        i = this.widgetChildren[r];
                    if (i || (i = {}, this.widgetChildren[r] = i), i[t] = 1, !e.isWebBlockInstance) {
                        let o = e,
                            s = this.model.widgets.create(t);
                        s.generationNode = o.generationNode, this.model.widgets.add(s)
                    }
                }
            }
        }
        unregister(e) {
            if (!e || this.disposed || !this.model.hasValidationWidgets) return;
            let t = this.widgets[e],
                r = (t ? t.validationParentId : null) || "";
            delete this.widgets[e], delete this.widgetChildren[r][e], t && this.model.widgets.remove(e)
        }
        isRegistered(e) {
            return !!this.widgets && this.widgets[e] !== void 0
        }
        validate(e) {
            if (!this.model.hasValidationWidgets) return !0;
            let t = this.validateWidget(e || "");
            return e && (t = this.recalculateAggregatorsState("")), this.model.flush(), t
        }
        getMandatoryValueMessage() {
            return this.messagesProvider.getMandatoryValueMessage()
        }
        getInvalidValueMessage(e) {
            return this.messagesProvider.getInvalidValueMessage(e)
        }
        getNameById(e) {
            return pl.nameFromId(e)
        }
        getWidgetChildren() {
            return this.widgetChildren
        }
        dispose() {
            this.disposed = !0
        }
    };
u(DA, "Bd");
var Xv = DA,
    NA = class NA {
        constructor(e, t) {
            this.valid = e, this.validationMessage = t
        }
        get valid() {
            return this._valid
        }
        set valid(e) {
            this._valid = e == null || e
        }
        get validationMessage() {
            return this._validationMessage
        }
        set validationMessage(e) {
            this._validationMessage = e || ""
        }
    };
u(NA, "kd");
var Qv = NA,
    mW = Object.freeze({
        __proto__: null,
        ValidationResult: Qv,
        ValidationService: Xv
    }),
    ey = u(() => {}, "Hd"),
    Ch = class Ch {
        constructor(e, t) {
            this.controllerClass = e, this.messagesProvider = t
        }
        create(e, t) {
            return new this.controllerClass(e, this.messagesProvider, t)
        }
        static executeWithNavigationCallbacks(e, t, r) {
            return dk(t), mh(e, () => {
                t.dispose(r), hk()
            })
        }
        initialize(e, t, r, i, o, s) {
            return M(this, void 0, void 0, function*() {
                let a = Xr.activeScreen,
                    l = a ? a.callContext() : r.callContext();
                try {
                    jk() && (yield new Promise(g => {
                        new gl(null, null).ApplicationLifecycle.listen({
                            onLoadComplete: g
                        })
                    }), yield mI()), this.controllerClass.checkPermissions()
                } catch (g) {
                    let p = {
                        permissionsOk: !1
                    };
                    return Ch.executeWithNavigationCallbacks(() => r.handleError(g, l), i, l).then(() => p, y => p)
                }
                let d = t.create(e),
                    c = this.create(d, new pl(null));
                c.setAsActiveScreen();
                let h = Ch.executeWithNavigationCallbacks(() => c.fireInitialize({
                        rootSpan: s
                    }), o, c.callContext()),
                    f = {
                        permissionsOk: !0,
                        controller: c,
                        model: d
                    };
                return h.then(() => f, g => Ei(g, Q.UnhandledOrIgnoredErrorInEventException) && g.handleErrorResult === wh ? {
                    permissionsOk: !0
                } : f)
            })
        }
        get activeScreenController() {
            return Xr.activeScreen
        }
    };
u(Ch, "jd");
var _1 = Ch,
    Rh = class Rh {
        constructor() {
            this._iterationContext = new ty, this._id = ++Rh.currentId
        }
        get id() {
            return this._id
        }
        get viewName() {
            return this._viewName
        }
        get timeout() {
            return this._timeout
        }
        get iterationContext() {
            return this._iterationContext
        }
        set iterationContext(e) {
            this._iterationContext = e
        }
        withViewName(e) {
            return this._viewName !== e ? this.innerClone({
                _viewName: {
                    value: e
                }
            }) : this
        }
        withTimeout(e) {
            return this._timeout !== e ? this.innerClone({
                _timeout: {
                    value: e
                }
            }) : this
        }
        clone() {
            let e = this.innerClone();
            return e._id = ++Rh.currentId, e
        }
        innerClone(e) {
            let t = Object.create(this, e != null ? e : {});
            return t.iterationContext = this.iterationContext.clone(), t
        }
        get isOutOfContext() {
            return !!Xr.activeScreen && this.viewName !== Xr.activeScreen.viewName
        }
    };
u(Rh, "qd");
var Wh = Rh;
Wh.currentId = 0;
var xy = class xy {
    getCurrentRowNumber(e) {
        let t = this.getIterator(e);
        return t ? t.currentRowNumber : 0
    }
    setCurrentRowNumber(e, t) {
        this.getIteratorForSet(e).currentRowNumber = t
    }
    isBeingIterated(e) {
        let t = this.getIterator(e);
        return !!t && t.isBeingIterated
    }
    registerIterationStart(e) {
        let t = this.getIteratorForSet(e);
        if (t.isBeingIterated) throw new Error("List is already being iterated in this context");
        t.currentRowNumber = e.length - 1, t.isBeingIterated = !0
    }
    registerIterationEnd(e) {
        let t = this.getIteratorForSet(e);
        if (!t.isBeingIterated) throw new Error("List was redefined while being iterated");
        t.isBeingIterated = !1
    }
    getIterator(e) {
        return this.iterators ? this.iterators.get(e.modelId) : null
    }
    getIteratorForSet(e) {
        this.iterators || (this.iterators = new Map);
        let t = this.getIterator(e);
        return t || (t = {
            currentRowNumber: 0,
            isBeingIterated: !1
        }, this.iterators.set(e.modelId, t)), t
    }
    clone() {
        let e = new xy;
        return this.iterators && (e.iterators = function(t, r) {
            let i = new Map;
            return t.forEach((o, s) => {
                let a = r(o);
                i.set(s, a)
            }), i
        }(this.iterators, t => Object.create(t))), e
    }
};
u(xy, "Gd");
var ty = xy,
    zx = new kh,
    vW = new dn("Data", "dataOut"),
    yW = new dn("List", "listOut", [{
        name: "Count",
        attrName: "countOut",
        mandatory: !0,
        dataType: T.LongInteger,
        defaultValue: u(() => bt.defaultValue, "defaultValue")
    }]),
    uS = "BaseController",
    Oh = class Oh {
        constructor(e) {
            if (this.isExecutingJSNode = !1, this.localeChangeHandler = t => {
                    var r;
                    let i = de.resolve(Y.TranslationsService),
                        o = de.resolve(Y.LocaleService);
                    i && ((r = t.localeFamily) !== null && r !== void 0 ? r : [t.localeCode]).forEach(s => {
                        var a, l;
                        this.translationResources[s] ? (z(uS, `Adding translations for ${s} locale.`), i.add((a = this.translationResources[s].translations) !== null && a !== void 0 ? a : {}), o.setCurrentLocaleRTL((l = this.translationResources[s].isRTL) !== null && l !== void 0 && l)) : z(uS, `No translations found for ${s} locale.`)
                    })
                }, this.translationResources = e != null ? e : this.translationResources, this.translationResources) {
                let t = de.resolve(Y.LocaleService);
                if (t) {
                    let r = t.getCurrentLocale(),
                        i = t.getCurrentLocaleFamily();
                    this.localeChangeHandler({
                        localeCode: r,
                        localeFamily: i
                    }), z(uS, "Subscribing handler for locale service."), t.subscribe(this.localeChangeHandler)
                }
            }
        }
        get publicApiHelper() {
            return this._publicApiHelper || (this._publicApiHelper = this.createPublicApiHelper()), this._publicApiHelper
        }
        getDefaultTimeout() {
            throw new Error("Controllers must implement getDefaultTimeout")
        }
        createPublicApiHelper() {
            return new gl(null, this.callContext())
        }
        get default() {
            return this
        }
        get controller() {
            return this
        }
        callContext() {
            return arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new Wh
        }
        safeExecuteJSNode(e, t, r, i, o, s, a) {
            let l = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : !1,
                d = u(f => {
                    let g = `Check the JavaScript node '${t}' of the action '${r}'.`;
                    throw ((f = f || new Error(g)) instanceof Q.NumberOverflowException || f instanceof Q.InvalidJavascriptType) && (f.message = f.message + " " + g), f
                }, "l"),
                c = this.isExecutingJSNode,
                h = (i ? [i] : []).concat(s, a, this.publicApiHelper);
            e = e.bind(null, ...h);
            try {
                if (this.isExecutingJSNode = !0, l) return e().then(() => o(i)).catch(d);
                try {
                    return e(), o(i)
                } catch (f) {
                    d(f)
                }
            } finally {
                this.isExecutingJSNode = c
            }
        }
        safeExecuteAsyncJSNode(e, t, r, i, o, s, a) {
            return this.safeExecuteJSNode(e, t, r, i, o, s, a, !0)
        }
        executeActionInsideJSNode(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ey,
                i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : ey,
                o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "",
                s = u(a => {
                    if (!h1(a, t)) throw a
                }, "a");
            try {
                if (o) try {
                    this.ensureControllerAlive(o)
                } catch (l) {
                    throw xe("Controller", `Invalid call of action '${o}'`, "OS-CLRT-60801", l, Oe.External), l
                }
                let a = e(t);
                return a instanceof Promise ? a.then(l => (i(), r(l))).catch(l => {
                    i(), s(l)
                }) : r(a)
            } catch (a) {
                s(a)
            } finally {
                this.isExecutingJSNode || i()
            }
        }
        getInitialPayloadObject(e, t) {
            return {
                versionInfo: {
                    moduleVersion: Ti.getLastApplicationVersionToken(!0),
                    apiVersion: t
                },
                viewName: e.viewName ? e.viewName : "*"
            }
        }
        getEffectiveTimeoutForServerCall(e) {
            let t = CP();
            return (e != null ? e : 0) || (t != null ? t : 0) || this.getDefaultTimeout()
        }
        callServerAction(e, t, r, i, o, s, a) {
            let l = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : !1;
            return this.innerCallServerAction(e, t, r, i, o, s, a, l)
        }
        innerCallServerAction(e, t, r, i, o, s, a) {
            let l = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : !1,
                d = this.getEffectiveTimeoutForServerCall(o.timeout),
                c = this.getInitialPayloadObject(o, r);
            c.inputParameters = i;
            let h = "The timeout of " + d + "s was reached while executing this server action.";
            return _I({
                url: t,
                payload: c,
                timeout: d,
                timeoutHandler: u(() => Promise.resolve((() => {
                    throw qe(e, h), new Q.Exception(h, e)
                })()), "timeoutHandler"),
                responseHandler: Oh.createPostResponseHandler(a),
                headers: s,
                useLocaleInfo: l,
                actionOrAggregateName: e
            }).then(f => f || {}).catch(f => {
                throw f.extraStack = e, f
            })
        }
        static checkPermissions() {
            throw new Error("Screen Controllers must implement checkPermissions")
        }
        static handlePostResponse(e) {
            let t = de.resolve(Y.ClientVariablesService);
            t && t.checkSessionExpires();
            let r = de.resolve(Y.SettingsManager);
            if (r && e.clientSettingsHash !== void 0 && e.clientSettingsHash !== null) {
                r.update(e.clientSettingsHash), Qk(r.readLogLevel());
                let i = r.readNumber("LoggerSchedulerTimeInterval");
                i > 0 && bI(i)
            }
        }
        static createPostResponseHandler(e) {
            return t => {
                let {
                    data: r,
                    responseHeaders: i
                } = t;
                Oh.handlePostResponse(r), e && e(r, i)
            }
        }
        executeClientAggregate(e, t) {
            return Kr(() => e()).then(r => {
                let i = t();
                i.listOut = r.list, i.countOut = r.count
            })
        }
        ensureControllerAlive(e) {}
        static getJSONDeserializeOutputType(e) {
            return vW.getType(e)
        }
        static getAggregateOutputType(e) {
            return yW.getType(e)
        }
        static registerVariableGroupType(e, t) {
            zx.registerTypeDefinition(e, t)
        }
        static getVariableGroupType(e) {
            return zx.getType(e)
        }
    };
u(Oh, "Xd");
var ml = Oh,
    uh = "BaseViewController",
    wc = class wc extends ml {
        fireEvent(e) {
            return Kr(() => {
                if (e) return e.call(this, this.callContext())
            }).then(t => {
                if (o2(t)) throw Q.UnhandledOrIgnoredErrorInEventException.create(t)
            })
        }
        fireEventAndForget(e) {
            this.fireEvent(e).catch(Q.UnhandledOrIgnoredErrorInEventException.ignore)
        }
        constructor(e, t, r, i) {
            super(i), this.model = e, this.messagesProvider = t, this._idService = r, this.instanceId = wc.globalInstanceId++, this.isDisposed = !1, this.shouldSendClientVarsToDataSources = !1, this.fetchReadySources = s => {
                let a = [];
                (s === void 0 ? this.dataFetchActionNames : this.dataFetchDependentsGraph[s]).forEach(l => {
                    s && this.dataFetchDependencies[l]--, this.dataFetchDependencies[l] === 0 && a.push(l)
                }), a.forEach(l => {
                    this.remainingFetchesCount++, this.dataFetchDependencies[l] = -1, this.executeDataFetchAction(l).then(() => this.fetchReadySources(l))
                })
            }, this.clientVariablesHandler = s => {
                this.model.clientVariablesGeneration++, this.model.scheduleFlush()
            }, this.localeDependencyHandler = s => {
                this.model.currentLocale = s.localeCode, this.model.scheduleFlush()
            };
            let o = de.resolve(Y.LocaleService);
            this.linearRequest = new p1, o && this.translationResources && (this.model.currentLocale = o.getCurrentLocale()), this.validationServiceInstance = new Xv(e, t)
        }
        createPublicApiHelper() {
            return new gl(this.model, this.callContext())
        }
        static get activeScreen() {
            return wc.activeScreenInstance
        }
        setAsActiveScreen() {
            wc.activeScreenInstance = this
        }
        callContext(e) {
            return super.callContext(e).withViewName(this.viewName)
        }
        get validationService() {
            return this.validationServiceInstance
        }
        get viewName() {
            var e;
            return (e = this.modelContext) === null || e === void 0 ? void 0 : e.viewName
        }
        fetchData() {
            let e = !1;
            z(uh, "Using Improved data fetching with dependencies"), e = this.innerFetchDataWithDependencies(), e && this.model.flush()
        }
        executeDataFetchAction(e) {
            return z(uh, "Fetching " + e), Kr(() => this[e]()).then(() => {
                this.remainingFetchesCount--, clearTimeout(this.flushTimeoutHandle), z(uh, "Fetched " + e), this.remainingFetchesCount > 0 ? this.flushTimeoutHandle = window.setTimeout(() => this.model.flush(), 50) : this.model.flush()
            }, t => {
                this.remainingFetchesCount--, this.model.flush(), this.handleError(t)
            })
        }
        innerFetchDataWithDependencies() {
            return !(!this.dataFetchActionNames || this.dataFetchActionNames.length === 0) && (this.dataFetchDependencies = Object.assign({}, this.dataFetchDependenciesOriginal), this.flushTimeoutHandle = 0, this.remainingFetchesCount = 0, this.fetchReadySources(), !0)
        }
        get idService() {
            return this._idService
        }
        fireInitialize() {
            return M(this, arguments, void 0, function() {
                var e = this;
                let {
                    rootSpan: t,
                    startActiveSpan: r = eU,
                    setAttributeToSpan: i = this.setAttributesToSpan
                } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                return function*() {
                    let o = de.resolve(Y.ClientVariablesService);
                    o && o.subscribe(e.clientVariablesHandler);
                    let s = de.resolve(Y.LocaleService);
                    if (s && s.subscribe(e.localeDependencyHandler), !t) return yield e.fireEvent(e.onInitializeEventHandler), void e.fetchData();
                    let a = t.getContext().attributes;
                    yield r(`${t.getSpanInformation().name}__initialize`, l => M(e, void 0, void 0, function*() {
                        try {
                            i(l, a), yield this.fireEvent(this.onInitializeEventHandler)
                        } finally {
                            l == null || l.end()
                        }
                        this.fetchData()
                    }), Oe.Internal, t)
                }()
            })
        }
        setAttributesToSpan(e, t) {
            var r, i, o;
            e && t && (e.setAttribute("code.function", t["code.function"]), e.setAttribute("outsystems.function.key", (r = t["outsystems.function.key"]) !== null && r !== void 0 ? r : ""), e.setAttribute("outsystems.function.owner.name", (i = t["outsystems.function.owner.name"]) !== null && i !== void 0 ? i : ""), e.setAttribute("outsystems.function.owner.key", (o = t["outsystems.function.owner.key"]) !== null && o !== void 0 ? o : ""), e.setAttribute("outsystems.function.type", t["outsystems.function.type"]), t.screen && e.setAttribute("outsystems.runtime.screen", t["outsystems.runtime.screen"]))
        }
        fireAfterViewReady() {
            this.fireEvent(this.onReadyEventHandler).then(() => this.fireEvent(this.onRenderEventHandler)).catch(Q.UnhandledOrIgnoredErrorInEventException.ignore)
        }
        fireAfterInputsChanged() {
            this.fireEventAndForget(this.onParametersChangedEventHandler)
        }
        fireAfterViewRender() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
            if (this.onRenderEventHandler) return this.fireEvent(t => {
                if (!e) return this.onRenderEventHandler(t);
                xe("View", `Render loop avoided. This is likely due to the model of the screen/block '${this.viewName}' being changed inside its 'On Render' client action. Avoid changes to the model inside 'On Render' client actions.`, "OS-CLRT-60800", void 0, Oe.External)
            })
        }
        fireAfterViewDestroy() {
            let {
                clientVariablesService: e = de.resolve(Y.ClientVariablesService),
                localeService: t = de.resolve(Y.LocaleService)
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            e && e.unsubscribe(this.clientVariablesHandler), t && t.unsubscribe(this.localeDependencyHandler), this.fireEventAndForget(this.onDestroyEventHandler)
        }
        registerClientAction(e, t) {
            this[e] = t
        }
        innerCallAggregate(e, t, r, i, o, s, a, l, d, c, h, f) {
            let g = arguments.length > 12 && arguments[12] !== void 0 ? arguments[12] : !1,
                p = this.getEffectiveTimeoutForServerCall(l);
            return z(uh, `Calling ${e} aggregate with start index endpoint`), this.callServerDataSource(e, t, r, s, a, y => {
                y.inputParameters = {
                    StartIndex: o,
                    MaxRecords: i
                }
            }, p, d, c, h, f, g)
        }
        callAggregateWithStartIndexAndClientVars(e, t, r, i, o, s, a, l, d, c, h, f) {
            let g = arguments.length > 12 && arguments[12] !== void 0 ? arguments[12] : !1;
            return this.innerCallAggregate(e, t, r, i, o, s, a, l, d, c, h, f, g)
        }
        callAggregateWithStartIndex(e, t, r, i, o, s, a, l, d, c, h) {
            return this.innerCallAggregate(e, t, r, i, o, s, a, l, d, c, h)
        }
        callAggregate(e, t, r, i, o, s, a, l, d, c) {
            return this.innerCallAggregate(e, t, r, i, 0, o, s, a, l, d, c)
        }
        callDataAction(e, t, r, i, o, s, a, l, d, c) {
            let h = arguments.length > 10 && arguments[10] !== void 0 ? arguments[10] : !1;
            return this.innerCallDataAction(e, t, r, i, o, s, a, l, d, c, h)
        }
        innerCallDataAction(e, t, r, i, o, s, a, l, d, c) {
            let h = arguments.length > 10 && arguments[10] !== void 0 ? arguments[10] : !1,
                f = this.getEffectiveTimeoutForServerCall(s);
            return this.callServerDataSource(e, t, r, i, o, void 0, f, a, l, d, c, h)
        }
        callServerDataSource(e, t, r, i, o) {
            let s = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : void 0,
                a = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : 0,
                l = arguments.length > 7 ? arguments[7] : void 0,
                d = arguments.length > 8 ? arguments[8] : void 0,
                c = arguments.length > 9 ? arguments[9] : void 0,
                h = arguments.length > 10 ? arguments[10] : void 0,
                f = arguments.length > 11 && arguments[11] !== void 0 ? arguments[11] : !1,
                g = this.getInitialPayloadObject(this.callContext(), r);
            return z(uh, `Calling ${e} data source with optimized on payload`), g.screenData = {
                variables: pc.to(this.model.variables, c, !0)
            }, s && s(g), this.shouldSendClientVarsToDataSources && h && (g.clientVariables = h.serialize()), i(0), Fy((p, y) => this.linearRequest.create(e).post({
                url: t,
                payload: g,
                timeout: a,
                timeoutHandler: u(() => Promise.resolve((() => {
                    let b = `The timeout of ${a}s was reached while fetching this screen data.`;
                    throw qe(e, b), new Q.Exception(b)
                })()), "timeoutHandler"),
                responseHandler: ml.createPostResponseHandler(d),
                headers: l,
                useLocaleInfo: f
            }).then(b => this.handleServerDataSourceResponse({
                res: b,
                reject: y,
                resolve: p,
                setDataFromJS: o,
                setDataFetchStatus: i
            })).catch(b => {
                let E = Ei(b, Q.ViewHasChangedException) || Ei(b, Q.AbortedRequestException);
                if (!this.isDisposed) return E || i(2), y(b)
            }))
        }
        handleServerDataSourceResponse(e) {
            let {
                res: t,
                reject: r,
                resolve: i,
                setDataFromJS: o,
                setDataFetchStatus: s
            } = e;
            if (!this.isDisposed) return t.completed ? (o(t.data), s(1), i()) : r(new Q.AbortedRequestException)
        }
        handleError(e) {
            throw new Error("@abstract")
        }
        safeExecuteAsyncJSNode(e, t, r, i, o, s, a) {
            return this.model.flush(), super.safeExecuteAsyncJSNode(e, t, r, i, o, s, a)
        }
        executeActionInsideJSNode(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ey,
                i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : ey,
                o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "UNKNOWN";
            return super.executeActionInsideJSNode(e, t, r, () => {
                i(), this.model.flush()
            }, o)
        }
        dispose() {
            this.validationService.dispose(), this.isDisposed = !0
        }
        ensureControllerAlive(e) {
            if (this.isDisposed) {
                let t = new Q.ControllerDisposedException(`Invalid call of the '${e}' client action of the '${this.viewName}' since the latter is not currently active. This is likely due to a platform's client action being used as an event handler or in a setTimeout function. Consider removing this call by using the 'On Destroy' event of the screen/block or moving your logic to a global client action.`);
                throw qe("Controller", t.message), t
            }
        }
        safeExecuteClientAction(e, t) {
            for (var r = arguments.length, i = new Array(r > 2 ? r - 2 : 0), o = 2; o < r; o++) i[o - 2] = arguments[o];
            return uf(() => e.apply(this, i.concat(this.callContext(t))), s => this.handleError(s), () => this.model.flush())
        }
        get modelContext() {
            return this.model.context
        }
        executeScreenClientAggregate(e, t, r) {
            return Kr(() => (t().dataFetchStatusAttr = 0, e())).then(i => {
                if (!this.isDisposed) return t().bulkSet(i.list, 1, i.count), Kr(r)
            }, i => {
                if (!this.isDisposed) throw t().dataFetchStatusAttr = 2, i
            })
        }
        static downloadBinary(e, t) {
            let r = e.toBlob() || new Blob([]),
                i = document.createElement("a");
            i.style.display = "none", document.body.appendChild(i), r.type && (i.type = r.type);
            let o = window.URL.createObjectURL(r);
            i.href = o, i.download = t, i.click(), setTimeout(() => window.URL.revokeObjectURL(o), 500), i.remove()
        }
    };
u(wc, "Zd");
var Xr = wc;
Xr.globalInstanceId = 0;
var xc, bW = Object.freeze({
        __proto__: null,
        BaseController: ml,
        BaseModuleController: (xc = class extends ml {
            constructor() {
                super(...arguments), this.fireApplicationResumeSingletonCallback = this.fireApplicationResume.bind(this)
            }
            registerEventHandler(e, t, r) {
                r(() => new Promise((i, o) => {
                    Lh([e], i, o)
                }).then(() => {
                    let i = this[t],
                        o = u(() => Promise.resolve().then(() => i.call(this)), "r");
                    return r(o), o()
                }))
            }
            registerOnApplicationReadyHandler(e, t) {
                this.registerEventHandler(e, t, r => this.onApplicationReadyHandler = r)
            }
            registerOnApplicationResumeHandler(e, t) {
                this.registerEventHandler(e, t, r => this.onApplicationResumeHandler = r)
            }
            fireApplicationReady() {
                return this.onApplicationReadyHandler ? this.onApplicationReadyHandler().then(() => this.setupOnApplicationResumeListener()) : (this.setupOnApplicationResumeListener(), Promise.resolve(void 0))
            }
            setupOnApplicationResumeListener() {
                this.onApplicationResumeHandler && ak("resume", this.fireApplicationResumeSingletonCallback)
            }
            fireApplicationResume() {
                return this.onApplicationResumeHandler ? this.onApplicationResumeHandler() : Promise.resolve(void 0)
            }
        }, u(xc, "BaseModuleController"), xc),
        BaseViewController: Xr,
        CallContext: Wh,
        ControllerFactory: _1,
        IterationContext: ty
    }),
    p2 = u(() => {
        let n = Xr.activeScreen;
        if (n) {
            let e = mP(J1());
            if (e) return Z1(e, n.viewName)
        }
        return null
    }, "th"),
    wW = u(() => {
        var n;
        let e = p2();
        return (n = e == null ? void 0 : e.screenName.split(".").pop()) !== null && n !== void 0 ? n : ""
    }, "nh"),
    m2 = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let {
                application: r = Tl,
                initType: i = 0,
                executeRequiredScripts: o
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            return function*() {
                if (yield Yk({
                        version: Ti.getLastApplicationVersionToken(),
                        getCurrentScreenName: wW
                    }), i === 1) return !0;
                let s = r.initializeDatabase(),
                    a = !1,
                    l = u(() => {
                        a = !0
                    }, "s"),
                    d = new Promise(f => {
                        if (a) f();
                        else {
                            let g = l;
                            l = u(() => {
                                g(), f()
                            }, "s")
                        }
                    }),
                    c = d.then(() => r.triggerApplicationReadyEvent()),
                    h = {
                        onVersionReady: u(() => {
                            s.then(f => r.onDatabaseReady(f)).then(() => d).then(() => c).then(() => r.onApplicationReady())
                        }, "onVersionReady"),
                        onUpgradeFinished: u((f, g) => r.onUpgradeFinished(f, g), "onUpgradeFinished"),
                        onNewVersionDetected: u((f, g) => r.onNewVersionDetected(f, g), "onNewVersionDetected"),
                        onAppInfoReady: u(f => r.onAppInfoReady(f), "onAppInfoReady")
                    };
                return yield r.tryUpgrade(s, h, l, o)
            }()
        })
    }, "rh");

function LI() {
    return M(this, void 0, void 0, function*() {
        try {
            return yield Rr(), aI(window) ? window.OutSystemsNative.Http : null
        } catch (n) {
            return null
        }
    })
}
u(LI, "ih");

function v2() {
    return M(this, void 0, void 0, function*() {
        let n = yield LI(), e = de.resolve(Y.SettingsManager);
        return !(e != null && e.readBool("ForceXhrCommunication")) && !!n
    })
}
u(v2, "sh");

function Wx() {
    var n;
    if (!de.resolve(Y.SettingsManager).readBool("EnableOpenTelemetryTraces")) return;
    let e = de.resolve(Y.InstrumentationFactory);
    if (!e) return;
    let t = e.getActiveSpan();
    if (!t) return;
    let r = t.getContext();
    if (!r) return;
    let i = Object.keys((n = r.attributes) !== null && n !== void 0 ? n : {}).reduce((o, s) => {
        var a;
        return typeof((a = r.attributes[s]) === null || a === void 0 ? void 0 : a.toString) == "function" && (o[s] = r.attributes[s].toString()), o
    }, {});
    return {
        spanId: r.spanId,
        traceId: r.traceId,
        attributes: i,
        sampled: r.sampled
    }
}
u(Wx, "ah");
var cS = EI + "locale";

function lS() {
    let n = hf(Y.LocaleService);
    if (n) return n.getCurrentLocale()
}
u(lS, "lh");

function dS(n) {
    let e = hf(Y.LocaleService);
    e && e.setCurrentLocale(n)
}
u(dS, "uh");
var TW = {
        isHealthy: !0,
        healthCheckIntervalInSeconds: Number.POSITIVE_INFINITY,
        healthCheckEndpoint: "/moduleservices/ping",
        healingTimeoutDelayInSeconds: 30
    },
    qx = u((n, e, t) => {
        let r = e ? new cg({
            acceptionRules: [e, /^[^/]/],
            rejectionRules: [/^[a-z0-9]+:\/\//i]
        }) : void 0;
        return new Zl(n, Object.assign(Object.assign({}, TW), {
            healthCheckNeededPathFilter: r,
            logger: t
        }))
    }, "dh"),
    LA = class LA {
        static getHttpClientLogger() {
            let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : nU;
            return {
                setActiveSpanAsNonAggregable: u(() => e.setActiveSpanAsNonAggregable(), "setActiveSpanAsNonAggregable"),
                debug: u(t => {
                    let {
                        category: r,
                        message: i
                    } = t;
                    return e.debug(r != null ? r : "", i != null ? i : "")
                }, "debug"),
                error: u(t => {
                    let {
                        category: r,
                        message: i,
                        errorCode: o,
                        error: s
                    } = t;
                    return e.error(r != null ? r : "", i != null ? i : "", o != null ? o : it.Communication_Default, s, Oe.Internal)
                }, "error"),
                clientError: u(t => {
                    let {
                        category: r,
                        clientMessage: i,
                        internalMessage: o,
                        errorCode: s,
                        error: a
                    } = t;
                    return e.clientError({
                        category: r != null ? r : "",
                        clientMessage: i != null ? i : "",
                        internalMessage: o != null ? o : "",
                        errorCode: s != null ? s : it.Communication_Default,
                        errorObj: a
                    })
                }, "clientError"),
                startActiveClientSpan: u((t, r) => e.startActiveSpan(t, r, Oe.Internal, void 0, _p.Client), "startActiveClientSpan")
            }
        }
        static build() {
            return M(this, arguments, void 0, function() {
                let {
                    baseUrl: e,
                    headers: t,
                    localeHeader: r,
                    getLocale: i,
                    setLocale: o,
                    logger: s = this.getHttpClientLogger(),
                    usesNativeHttpPlugin: a = v2,
                    getNativeHttpPluginInstance: l = LI,
                    loadTrace: d = Wx,
                    getToken: c,
                    withHealthCheck: h = !1,
                    healthCheckPathScope: f
                } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                return function*() {
                    let g;
                    if (!Oi.isEnabled(eo.WebHttpClientForNative) && (yield a())) {
                        let p = yield l();
                        if (!p) {
                            let y = new Error("Unable to get native http plugin instance.");
                            throw s == null || s.error({
                                category: "HttpClientFactory",
                                message: y.message,
                                error: y
                            }), y
                        }
                        g = new eg({
                            baseUrl: e,
                            headers: t,
                            localeHeader: r,
                            getLocale: i,
                            setLocale: o,
                            logger: s,
                            httpClientInstance: p,
                            loadTrace: d,
                            getToken: c
                        })
                    } else g = new io({
                        baseUrl: e,
                        headers: t,
                        localeHeader: r,
                        getLocale: i,
                        setLocale: o,
                        logger: s,
                        loadTrace: d,
                        getToken: c
                    });
                    return h ? qx(g, f, s) : g
                }()
            })
        }
        static buildWithDebugger(e) {
            let {
                alternateHttpClient: t,
                appUrl: r,
                localeHeader: i,
                getLocale: o,
                setLocale: s,
                logger: a = {
                    setActiveSpanAsNonAggregable: u(() => tU(), "setActiveSpanAsNonAggregable"),
                    debug: u(h => {
                        let {
                            category: f,
                            message: g
                        } = h;
                        return z(f != null ? f : "", g != null ? g : "")
                    }, "debug"),
                    error: u(h => {
                        let {
                            category: f,
                            message: g,
                            error: p
                        } = h;
                        return xe(f != null ? f : "", g != null ? g : "", "OS-CLRT-00000", p)
                    }, "error")
                },
                getToken: l,
                withHealthCheck: d = !1,
                healthCheckPathScope: c
            } = e;
            if (r) {
                let h = new og({
                    appUrl: r,
                    localeHeader: i,
                    getLocale: o,
                    setLocale: s,
                    logger: a,
                    alternateHttpClientInstance: t,
                    getToken: l
                });
                return d ? qx(h, c, a) : h
            }
            return t
        }
        static buildLoggerHttpClient() {
            let {
                baseUrl: e,
                headers: t,
                localeHeader: r,
                getLocale: i,
                setLocale: o,
                loadTrace: s = Wx,
                getToken: a
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            return new Jf({
                baseUrl: e,
                headers: t,
                localeHeader: r,
                getLocale: i,
                setLocale: o,
                loadTrace: s,
                getToken: a
            })
        }
        static updateHealthCheckConfig(e) {
            let {
                healthCheckIntervalInSeconds: t
            } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            if (e instanceof Zl) {
                let r = t === void 0 || t < 0 ? Number.POSITIVE_INFINITY : t;
                e.setHealthCheckInterval(r)
            }
        }
    };
u(LA, "hh");
var Ca = LA,
    y2 = u((n, e) => M(void 0, [n, e], void 0, function(t, r) {
        let {
            applicationDefinition: i,
            application: o = Tl
        } = r;
        return function*() {
            Rk(), i.useESM || function() {
                let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : globalThis;
                try {
                    (function(a) {
                        let l = a.requirejs,
                            d = a.define;
                        if (!l || typeof d != "function") return;
                        let c = "OutSystems/ClientRuntime/Main";
                        l.defined(c) || (d(c, ["@outsystems/runtime-core-js"], function(f) {
                            return f
                        }), l([c]))
                    })(s)
                } catch (a) {
                    console.error("Failed to apply RequireJS fix", a)
                }
            }(), o.setApplicationDefinition(i), yield vI(), yield(s => M(void 0, void 0, void 0, function*() {
                let a = yield Ca.build({
                    withHealthCheck: !0,
                    healthCheckPathScope: jt()
                });
                s.register(Y.UnauthenticatedHttpClient, () => a);
                let l = yield Ca.build({
                    baseUrl: jt(),
                    getToken: ov,
                    getLocale: u(() => {
                        var c;
                        return (c = lS()) !== null && c !== void 0 ? c : null
                    }, "getLocale"),
                    setLocale: u(c => dS(c), "setLocale"),
                    localeHeader: cS,
                    withHealthCheck: !0,
                    healthCheckPathScope: jt()
                });
                if (s.register(Y.HttpClient, () => l), TP() && EP()) {
                    let c = Ca.buildWithDebugger({
                        alternateHttpClient: l,
                        appUrl: Q1(),
                        getToken: ov,
                        getLocale: u(() => {
                            var f;
                            return (f = lS()) !== null && f !== void 0 ? f : null
                        }, "getLocale"),
                        setLocale: u(f => dS(f), "setLocale"),
                        localeHeader: cS,
                        withHealthCheck: !0
                    });
                    s.register(Y.DebuggerHttpClient, () => c), s.register(Y.NonDebuggerHttpClient, () => l);
                    let h = s.resolve(Y.Debugger);
                    h != null && h.isSessionActive() && s.register(Y.HttpClient, () => s.resolve(Y.DebuggerHttpClient))
                }
                let d = Ca.buildLoggerHttpClient({
                    baseUrl: jt(),
                    getToken: u(c => ov(c, !1), "getToken"),
                    getLocale: u(() => {
                        var c;
                        return (c = lS()) !== null && c !== void 0 ? c : null
                    }, "getLocale"),
                    setLocale: u(c => dS(c), "setLocale"),
                    localeHeader: cS
                });
                s.register(Y.LoggerHttpClient, () => d)
            }))(t)
        }()
    }), "gh"),
    Dh = class Dh {
        static addKey(e) {
            this.cache[e] = {
                components: {}
            }, this.cacheKeys.push(e);
            let t = this.cacheKeys.length - Dh.MaxCacheSize;
            if (t > 0)
                for (let r = 0; r < t; r++) this.removeKey(this.cacheKeys[r])
        }
        static removeKey(e) {
            delete this.cache[e], this.cacheKeys.splice(this.cacheKeys.indexOf(e), 1)
        }
        static save(e, t, r, i) {
            this.cache[e] || this.addKey(e), this.cache[e].components[t] = {
                state: r,
                customProperties: i
            }
        }
        static load(e, t) {
            let r = Dh.loadScreenCache(e);
            return r ? r.components[t] : null
        }
        static loadScreenCache(e) {
            return this.cache[e] || void 0
        }
        static clear(e) {
            e ? this.cache[e] && this.removeKey(e) : (this.cache = {}, this.cacheKeys = [])
        }
    };
u(Dh, "ph");
var Na = Dh;
Na.MaxCacheSize = 20, Na.cache = {}, Na.cacheKeys = [];
var EW = Object.freeze({
        __proto__: null,
        ScreenStateCache: Na
    }),
    Eh = "ServiceWorker",
    _W = u(n => n.kind === "log", "vh"),
    SW = u(n => window.location.origin === n, "yh"),
    IW = u(n => {
        let {
            log: e,
            loggerMethods: t
        } = n;
        e.severity === "error" ? t.error(Eh, e.message, e.errorCode, e.error, Oe.External) : e.severity === "info" ? t.info(Eh, e.message, Oe.External) : (0, t[e.severity])(Eh, e.message)
    }, "bh"),
    Gx = "Argument 'handler' cannot be null or undefined",
    xA = class xA {
        constructor(e, t) {
            this.moduleName = e, this.context = t, this.subscribers = []
        }
        subscribe(e) {
            if (!e) throw new Error(Gx);
            for (let t = 0; t < this.subscribers.length; t++)
                if (this.subscribers[t] === e) return !1;
            return this.subscribers.push(e), z(this.moduleName, `Subscribing handler for ${this.context}`), !0
        }
        unsubscribe(e) {
            if (!e) throw new Error(Gx);
            for (let t = 0; t < this.subscribers.length; t++)
                if (this.subscribers[t] === e) return this.subscribers.splice(t, 1), z(this.moduleName, `Unsubscribing handler for ${this.context}`), !0;
            return !1
        }
        publish(e) {
            for (let t of this.subscribers) t(e);
            z(this.moduleName, `Notifying subscribers for ${this.context}`)
        }
    };
u(xA, "wh");
var ny = xA,
    b2 = "true",
    w2 = "false";

function Ea(n) {
    return `Unsupported data type (${n}) for client variable`
}
u(Ea, "Ah");

function AW(n, e) {
    if (n == null) throw new TypeError(`Value ${n} is not a valid value for a client variable.`);
    if (! function(t, r) {
            switch (r) {
                case T.Integer:
                    return H.isValidInteger(t);
                case T.LongInteger:
                    return H.isValidLongInteger(t);
                case T.Decimal:
                case T.Currency:
                    return H.isValidDecimal(t);
                case T.Boolean:
                    return H.isBoolean(t);
                case T.Text:
                case T.PhoneNumber:
                case T.Email:
                    return H.isText(t);
                case T.Date:
                    return H.isValidDate(t);
                case T.DateTime:
                    return H.isValidDateTime(t);
                case T.Time:
                    return H.isValidTime(t);
                default:
                    let i = Ea(ZS(r));
                    throw new TypeError(i)
            }
        }(n, e)) {
        let t = ZS(e);
        throw new TypeError(`Value ${n} is not a valid value for a client variable of the specified type (${t}).`)
    }
    switch (e) {
        case T.Integer:
        case T.LongInteger:
        case T.Decimal:
        case T.Currency:
            return n.toString();
        case T.Boolean:
            return n ? b2 : w2;
        case T.Text:
        case T.PhoneNumber:
        case T.Email:
            return n;
        case T.Date:
            return n.toISODate();
        case T.DateTime:
            return n.toString();
        case T.Time:
            return n.toISOTime();
        default:
            throw new TypeError(Ea(`${e}`))
    }
}
u(AW, "Nh");
var Bm = "Client Variables",
    hS = "$SESSION_USER_ID";

function Kx(n) {
    return n == null
}
u(Kx, "Rh");
var PA = class PA {
    constructor(e) {
        this.namespace = e, this.publisher = new ny(Bm, e), this.fullKeyMatcher = new RegExp(`^${Oa(lv)}${Oa(this.namespace)}\\$[^$]*\\$ClientVars\\$`), this.checkSessionExpires(), this.innerSetVariable(hS, "", T.Text, Da())
    }
    subscribe(e) {
        return this.publisher.subscribe(e)
    }
    unsubscribe(e) {
        return this.publisher.unsubscribe(e)
    }
    getFullKey(e, t) {
        return `${lv}${this.namespace}$${t}$ClientVars$${e}`
    }
    getVariable(e, t, r, i) {
        return this.checkSessionExpires(), this.innerGetVariable(e, t, r, i)
    }
    innerGetVariable(e, t, r, i) {
        let o = window.localStorage.getItem(this.getFullKey(e, t));
        return z(Bm, `Reading Client Variable ${e} of module ${t} for ${this.namespace}`), Kx(o) ? Kx(i) ? Ve(r) : i : function(s, a) {
            switch (a) {
                case T.Integer:
                    let l = Number(s);
                    return H.isValidInteger(l) && H.isWithinIntegerRange(l) ? l : F.DEFAULT_INTEGER;
                case T.LongInteger:
                    if (!s) return F.DEFAULT_LONGINTEGER;
                    let d = bt.fromString(s);
                    return H.isValidLongInteger(d) ? d : F.DEFAULT_LONGINTEGER;
                case T.Decimal:
                    if (!s) return F.DEFAULT_DECIMAL;
                    let c = new He(s);
                    return H.isValidDecimal(c) && H.isWithinDecimalRange(c) ? c : F.DEFAULT_DECIMAL;
                case T.Currency:
                    if (!s) return F.DEFAULT_CURRENCY;
                    let h = new He(s);
                    return H.isValidDecimal(h) && H.isWithinDecimalRange(h) ? h : F.DEFAULT_CURRENCY;
                case T.Boolean:
                    return s === b2 || s !== w2 && F.DEFAULT_BOOLEAN;
                case T.Text:
                    return H.isText(s) ? s : F.DEFAULT_TEXT;
                case T.PhoneNumber:
                    return H.isText(s) ? s : F.DEFAULT_PHONENUMBER;
                case T.Email:
                    return H.isText(s) ? s : F.DEFAULT_EMAIL;
                case T.Date:
                    let f = le.fromISODate(s);
                    return H.isValidDate(f) ? f : F.DEFAULT_DATE;
                case T.DateTime:
                    let g = le.fromISODateTime(s);
                    return H.isValidDateTime(g) ? g : F.DEFAULT_DATETIME;
                case T.Time:
                    let p = le.fromISOTime(s);
                    return H.isValidTime(p) ? p : F.DEFAULT_TIME;
                case T.Record:
                    throw new TypeError(Ea("Record"));
                case T.RecordList:
                    throw new TypeError(Ea("List"));
                case T.BinaryData:
                    throw new TypeError(Ea("Binary Data"));
                case T.Object:
                    throw new TypeError(Ea("Object"));
                default:
                    throw new TypeError(Ea(`Unknown: ${s}`))
            }
        }(o, r)
    }
    setVariable(e, t, r, i) {
        this.checkSessionExpires(), this.innerSetVariable(e, t, r, i), this.publisher.publish({
            key: e,
            module: t,
            value: i
        })
    }
    innerSetVariable(e, t, r, i) {
        window.localStorage.setItem(this.getFullKey(e, t), AW(i, r)), z(Bm, `Set Client Variable ${e} of module ${t} for ${this.namespace}`)
    }
    removeAllVariables() {
        let e = [];
        for (let t = 0; t < window.localStorage.length; t++) {
            let r = window.localStorage.key(t);
            r && this.fullKeyMatcher.test(r) && e.push(r)
        }
        if (e.length > 0) {
            for (let t of e) window.localStorage.removeItem(t);
            this.publisher.publish()
        }
    }
    checkSessionExpires() {
        let e = this.innerGetVariable(hS, "", T.Text);
        Da() !== e && (e !== "" && (z(Bm, `Removing all Client Variables for user provider ${this.namespace}`), this.removeAllVariables()), this.innerSetVariable(hS, "", T.Text, Da()))
    }
};
u(PA, "Ch");
var S1 = PA,
    Zy = "BACKUP_",
    pf = "OSSYS_ENTITY";

function xI(n) {
    return n && n.toUpperCase()
}
u(xI, "Oh");

function ry(n, e) {
    var t;
    return (t = n.attributes.filter(r => (r == null ? void 0 : r.name) === e.name)[0]) !== null && t !== void 0 ? t : null
}
u(ry, "_h");

function wi(n) {
    var e;
    return (e = Ss(n)[0]) !== null && e !== void 0 ? e : null
}
u(wi, "Mh");

function Ss(n) {
    return n.attributes.filter(e => e == null ? void 0 : e.isPrimaryKey)
}
u(Ss, "Uh");

function PI(n) {
    let e = Ss(n);
    return e.length > 0 ? e.map(t => {
        var r;
        return (r = t == null ? void 0 : t.columnName) !== null && r !== void 0 ? r : null
    }) : null
}
u(PI, "Fh");

function Ra(n, e) {
    let t = wi(n);
    return t && e.getAttributes().filter(r => r.name === t.name)[0] || null
}
u(Ra, "$h");

function T2(n, e) {
    let t = wi(n);
    if (!t) return null;
    let r = e.getAttributes().filter(i => i.name === t.name)[0];
    return r ? e[r.attrName] : null
}
u(T2, "Ph");
var CW = Object.freeze({
        __proto__: null,
        BACKUP_TABLE_PREFIX: Zy,
        METADATA_TABLE_NAME: pf,
        formatObjectName: xI,
        getIdentifierAttribute: Ra,
        getIdentifierColumn: wi,
        getIdentifierColumnNames: PI,
        getIdentifierColumns: Ss,
        getIdentifierValue: T2,
        getMatchingColumn: ry,
        hasNullIdentifier: u(function(n, e) {
            let t = wi(n);
            if (!t) return !0;
            let r = e.getAttributes().filter(i => i.name === t.name)[0];
            return !r || Zr(e[r.attrName], Ve(r.dataType))
        }, "hasNullIdentifier")
    }),
    dt = {
        tableName: pf,
        idIsAutoNumber: Dn.No,
        attributes: [{
            name: "Key",
            columnName: "KEY",
            type: ce.TEXT,
            isPrimaryKey: !0
        }, {
            name: "ModuleKey",
            columnName: "MODULEKEY",
            type: ce.TEXT,
            isPrimaryKey: !0
        }, {
            name: "UpgradeStatus",
            columnName: "UPGRADESTATUS",
            type: ce.INTEGER
        }, {
            name: "Name",
            columnName: "NAME",
            type: ce.TEXT
        }, {
            name: "TableName",
            columnName: "TABLENAME",
            type: ce.TEXT
        }, {
            name: "Hash",
            columnName: "HASH",
            type: ce.TEXT
        }, {
            name: "ExtraInfo",
            columnName: "EXTRAINFO",
            type: ce.TEXT
        }]
    },
    Po = Object.assign(Object.assign({}, dt), {
        tableName: `${Zy}${pf}`
    }),
    Jx = "MetadataTableInitializer",
    RW = {
        isNeeded: u(n => M(void 0, void 0, void 0, function*() {
            return !(yield n.existsTable(dt))
        }), "isNeeded"),
        run: u(n => M(void 0, void 0, void 0, function*() {
            z(Jx, "Running initializer for entity meta info table."), yield n.createTable(dt), yield n.createTable(Po), z(Jx, "Initializer for entity meta info table ran successfully.")
        }), "run")
    },
    I1;
(function(n) {
    n[n.Unchanged = 0] = "Unchanged", n[n.Deleted = 1] = "Deleted", n[n.Recreated = 2] = "Recreated", n[n.New = 3] = "New"
})(I1 || (I1 = {}));
var er = I1;

function jm(n, e, t) {
    for (let r of e.getAttributes()) E2(e[r.attrName], ry(n, r), `${t} '${n.tableName}.${r.name}'`)
}
u(jm, "Gh");

function E2(n, e, t) {
    if (e.type === ce.TEXT && e.length !== void 0) {
        if (!n) return;
        let r = n.length - e.length;
        if (r > 0) throw new Q.DataBaseException("", `Unable to ${t} because it exceeds the maximum allowed length by ${r} characters.`)
    } else if (e.type === ce.DECIMAL && e.length !== void 0 && e.decimals !== void 0) {
        let r = n.trunc().abs().toString().length - (e.length - e.decimals);
        if (r > 0) throw new Q.DataBaseException("", `Unable to ${t} because it exceeds the maximum allowed length by ${r} characters.`)
    }
}
u(E2, "Wh");
var zn = "EntityModelUtils";

function Ln(n) {
    return n[0]
}
u(Ln, "Jh");

function iy(n, e) {
    return M(this, void 0, void 0, function*() {
        return yield n.findRecords(dt, {
            MODULEKEY: e
        })
    })
}
u(iy, "Yh");

function OW(n, e, t, r) {
    return M(this, void 0, void 0, function*() {
        var i;
        let o;
        z(zn, `Checking the status of table ${e.tableName} (${e.name})`);
        let s = {};
        if (t && (o = t.HASH, s = JSON.parse((i = t.EXTRAINFO) !== null && i !== void 0 ? i : "{}")), o) {
            if (o !== e.hash) return function(a, l) {
                return l.idIsAutoNumber !== a.idIsAutoNumber ? !0 : function(c, h) {
                    var f, g;
                    let p = {};
                    for (let y of c.attributes) {
                        let b = y.columnName;
                        p[b] = {}, p[b].entityAttr = y
                    }
                    for (let y of Object.keys((f = h.attrs) !== null && f !== void 0 ? f : {})) p[y] = p[y] || {}, p[y].metadataAttr = (g = h.attrs) === null || g === void 0 ? void 0 : g[y];
                    return Object.keys(p).map(y => p[y])
                }(a, l).some(c => !c.entityAttr || (c.metadataAttr ? function(h, f) {
                    return function(g, p) {
                        return g.type !== p.type || p.length !== g.length || p.decimals !== g.decimals || !!p.isEntityReference != !!g.isEntityReference && !g.isPrimaryKey
                    }(h, f) || !f.isPrimaryKey != !h.isPrimaryKey
                }(c.entityAttr, c.metadataAttr) : c.entityAttr.isPrimaryKey))
            }(e, s) ? (z(zn, `Table ${e.tableName} (${e.name}) exists and will be fully upgraded`), R2(n, e, s, r)) : (z(zn, `Table ${e.tableName} (${e.name}) exists and will be incrementally upgraded`), function(a, l, d, c) {
                return M(this, void 0, void 0, function*() {
                    var h;
                    let f = l.attributes.filter(g => {
                        var p;
                        return !Object.keys((p = d.attrs) !== null && p !== void 0 ? p : {}).some(y => y === g.columnName)
                    });
                    z(zn, `Upgrading table ${l.tableName} (${l.name}) with new attributes (${JSON.stringify(f)}) and new hash (${l.hash})`);
                    for (let g of f) {
                        let p = c.serialize((h = g.default) !== null && h !== void 0 ? h : Cs(g.type), g);
                        yield a.addColumn(l, Object.assign(Object.assign({}, g), {
                            serializedDefault: p
                        }))
                    }
                    yield C2(a, l)
                })
            }(n, e, s, r));
            z(zn, `Table ${e.tableName} (${e.name}) exists and is up to date`)
        } else z(zn, `Table ${e.tableName} (${e.name}) does not exist and will be created`), yield A2(n, e, r), yield function(a, l) {
            return M(this, void 0, void 0, function*() {
                let d = D2(l);
                d.UPGRADESTATUS = er.New, z(zn, `Creating metadata for table ${l.tableName} (${l.name})`), yield a.insertRecord(dt, d)
            })
        }(n, e)
    })
}
u(OW, "Xh");

function DW(n, e, t) {
    return M(this, void 0, void 0, function*() {
        return Yy(n, r => (z(zn, `Recovering table ${r} from backup`), i => function(o, s) {
            return M(this, void 0, void 0, function*() {
                yield Xy(o, s), (yield o.existsTable(qh(s))) && (yield I2(o, qh(s), s, s, er.Unchanged)), yield O2(o, s, !0)
            })
        }(i, r)), t, r => r.UPGRADESTATUS !== er.Unchanged)
    })
}
u(DW, "Qh");

function NW(n, e, t) {
    return M(this, void 0, void 0, function*() {
        return Yy(n, r => (z(zn, `Dropping inconsistent table ${r} (same key, different physical table name)`), i => function(o, s) {
            return M(this, void 0, void 0, function*() {
                yield Xy(o, s);
                let a = Ln(yield o.findRecords(dt, {
                    TABLENAME: s
                }));
                a && (yield o.removeRecord(dt, [a.KEY, a.MODULEKEY]))
            })
        }(i, r)), t, r => {
            let i = r.UPGRADESTATUS === er.Unchanged,
                o = e.some(l => l.key === r.KEY),
                s = !e.some(l => l.tableName === r.TABLENAME),
                a = e.length === 0 || o && s;
            return i && a
        })
    })
}
u(NW, "Zh");

function _2(n, e) {
    return Yy(n, t => (z(zn, `Dropping backup table for ${t}`), r => function(i, o) {
        return M(this, void 0, void 0, function*() {
            yield Xy(i, qh(o));
            let s = Ln(yield i.findRecords(dt, {
                TABLENAME: o
            }));
            s && (s.UPGRADESTATUS === er.Deleted ? yield i.removeRecord(dt, [s.KEY, s.MODULEKEY]): (s.UPGRADESTATUS = er.Unchanged, yield i.updateRecord(dt, s)));
            let a = Ln(yield i.findRecords(Po, {
                TABLENAME: o
            }));
            a && (yield i.removeRecord(Po, [a.KEY, a.MODULEKEY]))
        })
    }(r, t)), e, t => t.UPGRADESTATUS !== er.Unchanged)
}
u(_2, "eg");

function Yy(n, e, t, r) {
    return M(this, void 0, void 0, function*() {
        let i = yield n.findRecords(dt, {
            MODULEKEY: t
        }), o = [];
        if (r)
            for (let s of i) r(s) && o.push(s);
        else o = i;
        for (let s of o) yield e(s.TABLENAME)(n)
    })
}
u(Yy, "tg");

function S2(n, e, t) {
    return M(this, void 0, void 0, function*() {
        return z(zn, `Backing up table '${e}'`), yield O2(n, e, !1), yield Xy(n, qh(e)), I2(n, e, qh(e), e, t)
    })
}
u(S2, "ng");

function Xy(n, e) {
    return n.deleteTableIfExists(e)
}
u(Xy, "rg");

function I2(n, e, t, r, i) {
    return M(this, void 0, void 0, function*() {
        return z(zn, `Renaming table '${e}' to '${t}' and setting status to ${er[i]}`), yield function(o, s, a) {
                return o.renameTable(s, a)
            }(n, e, t),
            function(o, s, a) {
                return M(this, void 0, void 0, function*() {
                    let l = Ln(yield o.findRecords(dt, {
                        TABLENAME: s
                    }));
                    return l.UPGRADESTATUS = a, o.updateRecord(dt, l)
                })
            }(n, r, i)
    })
}
u(I2, "ig");

function qh(n) {
    return `${Zy}${n}`
}
u(qh, "sg");

function A2(n, e, t) {
    return M(this, void 0, void 0, function*() {
        return z(zn, `Creating table ${e.tableName} (${e.name})`), n.createTable(Object.assign(Object.assign({}, e), {
            attributes: [...e.attributes.map(r => {
                var i;
                return Object.assign(Object.assign({}, r), {
                    serializedDefault: t.serialize((i = r.default) !== null && i !== void 0 ? i : Cs(r.type), r)
                })
            })]
        }))
    })
}
u(A2, "ag");

function C2(n, e) {
    return M(this, void 0, void 0, function*() {
        z(zn, `Updating metadata for table ${e.tableName} (${e.name})`);
        let t = yield n.getRecord(dt, [e.key, e.moduleKey]), r = D2(e);
        r.UPGRADESTATUS = t.UPGRADESTATUS, r.LASTIDENTIFIER = t.LASTIDENTIFIER, yield n.updateRecord(dt, r)
    })
}
u(C2, "og");

function R2(n, e, t, r) {
    return M(this, void 0, void 0, function*() {
        try {
            let i = yield n.getAllRecords(e);
            yield S2(n, e.tableName, er.Recreated), yield A2(n, e, r);
            for (let o of i) {
                let s = LW(o, e, t, r);
                yield n.insertRecord(e, s)
            }
            yield C2(n, e)
        } catch (i) {
            let o = `Unable to upgrade the definition of entity '${e.name}':
${Yr(i)}`;
            throw qe(zn, o), new Q.DataBaseException("", o)
        }
    })
}
u(R2, "lg");

function LW(n, e, t, r) {
    let i = {};
    for (let o of e.attributes) try {
        let s = o.columnName,
            a = n[s];
        i[s] = xW(a, o, t, r)
    } catch (s) {
        throw new Q.DataBaseException("", `Unable to upgrade attribute '${o.name}' data type to '${CI(o.type)}':
${Yr(s)}`)
    }
    return function(o, s, a) {
        var l;
        for (let d of s.attributes) {
            let c = d.columnName;
            if (o[c] === void 0) {
                let h = (l = d.default) !== null && l !== void 0 ? l : Cs(d.type);
                o[c] = a.serialize(h, d)
            }
        }
    }(i, e, r), i
}
u(LW, "ug");

function xW(n, e, t, r) {
    var i;
    let o = (i = t.attrs) === null || i === void 0 ? void 0 : i[e.columnName];
    return o ? function(s, a, l, d) {
        if (d.isConversionNeeded(a, l)) {
            let c = d.deserialize(s, a),
                h = Sc(l.type),
                f = function(g, p) {
                    let y = T[Sc(g.type)],
                        b = T[Sc(p.type)];
                    return `convert column '${p.name}' from type ${y} to ${b}`
                }(a, l);
            if (Gi.isConvertibleTo(c, h)) {
                let g = Gi.convertTo(c, h);
                return E2(g, l, f), d.serialize(g, l)
            }
            throw new Q.DataBaseException("", `Unable to ${f}.`)
        }
        return s
    }(n, o, e, r) : n
}
u(xW, "cg");

function O2(n, e, t) {
    return M(this, void 0, void 0, function*() {
        let r = t ? Po : dt,
            i = t ? dt : Po,
            o = Ln(yield n.findRecords(i, {
                TABLENAME: e
            }));
        o && (yield n.removeRecord(i, [o.KEY, o.MODULEKEY]));
        let s = Ln(yield n.findRecords(r, {
            TABLENAME: e
        }));
        if (s && (yield n.insertRecord(i, s)), t) {
            let a = Ln(yield n.findRecords(r, {
                TABLENAME: e
            }));
            a && (yield n.removeRecord(r, [a.KEY, a.MODULEKEY]))
        }
    })
}
u(O2, "dg");

function D2(n) {
    let e = function(i) {
            let o = {};
            return i.attributes.forEach(s => {
                o[s.columnName] = {
                    type: s.type,
                    isPrimaryKey: s.isPrimaryKey,
                    length: s.length,
                    decimals: s.decimals,
                    isEntityReference: s.isEntityReference
                }
            }), {
                v: 2,
                idIsAutoNumber: i.idIsAutoNumber,
                attrs: o
            }
        }(n),
        t = wi(n),
        r = (t == null ? void 0 : t.type) === ce.INTEGER ? 0 : "0";
    return {
        KEY: n.key,
        MODULEKEY: n.moduleKey,
        UPGRADESTATUS: er.Unchanged,
        NAME: n.name,
        TABLENAME: n.tableName,
        HASH: n.hash,
        LASTIDENTIFIER: t && n.idIsAutoNumber !== Dn.No ? r : void 0,
        EXTRAINFO: JSON.stringify(e)
    }
}
u(D2, "hg");
var $m = "EntityModelInitializer",
    kA = class kA {
        constructor(e, t) {
            this.entityInfos = e, this.serializer = t
        }
        isNeeded(e) {
            return M(this, void 0, void 0, function*() {
                if (this.hasEntityInfos()) {
                    if (!(yield e.existsTable(dt))) return !0;
                    let t = Ln(this.entityInfos).moduleKey,
                        r = yield iy(e, t);
                    for (let i of this.entityInfos) {
                        let o = Ln(r.filter(s => s.KEY === i.key));
                        if (!o || o.HASH !== i.hash || o.UPGRADESTATUS !== er.Unchanged || o.TABLENAME !== i.tableName) return !0
                    }
                    for (let i of r)
                        if (!this.entityInfos.some(o => o.key === i.KEY)) return !0
                }
                return !1
            })
        }
        run(e) {
            return M(this, void 0, void 0, function*() {
                if (!this.hasEntityInfos()) return;
                let t = Ln(this.entityInfos).moduleKey;
                z($m, `Running initializer for entities of module '${t}'.`), yield DW(e, this.entityInfos, t), this.entityInfos.length > 0 && (yield NW(e, this.entityInfos, t)), yield function(i, o, s) {
                    return M(this, void 0, void 0, function*() {
                        return Yy(i, a => (z(zn, `Backing up table ${a} before deletion`), l => S2(l, a, er.Deleted)), s, a => a.UPGRADESTATUS === er.Unchanged && !o.some(l => l.tableName === a.TABLENAME))
                    })
                }(e, this.entityInfos, t);
                let r = yield iy(e, t);
                for (let i of this.entityInfos) {
                    let o = i,
                        s = Ln(r.filter(a => a.KEY === o.key));
                    yield OW(e, o, s, this.serializer)
                }
                z($m, `Initializer for entities of module '${t}' ran successfully.`)
            })
        }
        cleanup(e) {
            return M(this, void 0, void 0, function*() {
                if (!this.hasEntityInfos()) return;
                let t = Ln(this.entityInfos).moduleKey;
                z($m, `Running initializer cleanup for entities of module '${t}'.`), yield _2(e, t), z($m, `Initializer cleanup for entities of module '${t}' ran successfully.`)
            })
        }
        hasEntityInfos() {
            return this.entityInfos && this.entityInfos.length > 0
        }
    };
u(kA, "pg");
var A1 = kA,
    Zx = new As("Id", "idOut"),
    PW = new dn("Record", "recordOut"),
    fS = "EntityService",
    Ro = class Ro {
        constructor(e) {
            this._serializer = e
        }
        get database() {
            return this._database
        }
        get serializer() {
            return this._serializer
        }
        setDatabase(e) {
            z(fS, "Registering initializer for entity meta info table."), this._database = e, this._database.registerInitializer(RW)
        }
        getDatabase() {
            return this.databasePromise || (this.databasePromise = new Promise(e => {
                this.releaseDatabaseForUse = () => e(this.database)
            })), this.databasePromise
        }
        registerInitializer(e) {
            if (e && e.length > 0) {
                z(fS, `Registering initializer for entities of module '${e[0].moduleKey}'.`);
                let t = new A1(e, this.serializer);
                this.database.registerInitializer(t)
            }
        }
        setReady() {
            z(fS, "Releasing the database as ready for use."), this.databasePromise ? this.releaseDatabaseForUse() : this.databasePromise = Promise.resolve(this.database)
        }
        static wrap(e, t) {
            let r = t.getAttributes()[0],
                i = new t;
            return i[r.attrName] = e, i
        }
        static unwrap(e) {
            let t = e.getAttributes()[0];
            return e[t.attrName]
        }
        static getWrappedType(e) {
            return e.getAttributes()[0].complexType
        }
        create(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase(), i = Ro.unwrap(t), o;
                jm(e, i, "create");
                try {
                    o = yield r.executeTransaction(l => this.innerCreate(l, e, i), !0, [dt, e])
                } catch (l) {
                    throw new Q.DataBaseException("", l.message, l.stack)
                }
                if (o === null) return null;
                let s = Ra(e, i),
                    a = new(Zx.getType(s.dataType));
                return a.idOut = o, a
            })
        }
        innerCreate(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = yield e.insertRecord(t, this.serializer.serialize(r, t)), o = wi(t);
                return o ? this.serializer.deserialize(i, o) : null
            })
        }
        update(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase(), i = Ro.unwrap(t);
                jm(e, i, "update");
                try {
                    yield r.executeTransaction(o => this.innerUpdate(o, e, i), !0, [dt, e])
                } catch (o) {
                    throw new Q.DataBaseException("", o.message, o.stack)
                }
            })
        }
        innerUpdate(e, t, r) {
            return M(this, void 0, void 0, function*() {
                return e.updateRecord(t, this.serializer.serialize(r, t))
            })
        }
        createOrUpdate(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase(), i = Ro.unwrap(t), o;
                jm(e, i, "create or update");
                try {
                    o = yield r.executeTransaction(l => this.innerCreateOrUpdate(l, e, i), !0, [dt, e])
                } catch (l) {
                    throw new Q.DataBaseException("", l.message, l.stack)
                }
                let s = Ra(e, i),
                    a = new(Zx.getType(s.dataType));
                return a.idOut = o, a
            })
        }
        innerCreateOrUpdate(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = yield e.upsertRecord(t, this.serializer.serialize(r, t)), o = wi(t);
                return o ? this.serializer.deserialize(i, o) : null
            })
        }
        createOrUpdateAll(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase(), i = [];
                for (let o = 0; o < t.length; o++) {
                    let s = t.getItem(o),
                        a = Ro.unwrap(s);
                    jm(e, a, "create or update"), i.push(a)
                }
                try {
                    yield r.executeTransaction(o => M(this, void 0, void 0, function*() {
                        return this.innerCreateOrUpdateAll(o, e, i)
                    }), !0, [dt, e])
                } catch (o) {
                    throw new Q.DataBaseException("", o.message, o.stack)
                }
            })
        }
        innerCreateOrUpdateAll(e, t, r) {
            return M(this, void 0, void 0, function*() {
                return e.upsertAllRecords(t, r.map(i => this.serializer.serialize(i, t)))
            })
        }
        get(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase(), i = null;
                try {
                    i = yield r.executeReadTransaction(o => M(this, void 0, void 0, function*() {
                        return this.innerGet(o, e, t)
                    }), !0, [e])
                } catch (o) {
                    throw new Q.DataBaseException("", o.message, o.stack)
                }
                if (i) {
                    let o = new(PW.getType(e.implicitAnonymousType));
                    return o.recordOut = Ro.wrap(i, e.implicitAnonymousType), o
                }
                throw new Q.DataBaseException("", `${e.tableName} with id ${t} was not found`)
            })
        }
        innerGet(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = wi(t),
                    o = yield e.getRecord(t, this.serializer.serialize(r, i));
                return o ? this.serializer.deserialize(o, t, Ro.getWrappedType(t.implicitAnonymousType)) : null
            })
        }
        delete(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase();
                try {
                    yield r.executeTransaction(i => this.innerDelete(i, e, t), !0, [dt, e])
                } catch (i) {
                    throw new Q.DataBaseException("", i.message, i.stack)
                }
            })
        }
        innerDelete(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = wi(t);
                return e.removeRecord(t, this.serializer.serialize(r, i))
            })
        }
        deleteAll(e) {
            return M(this, void 0, void 0, function*() {
                let t = yield this.getDatabase();
                try {
                    yield t.executeTransaction(r => this.innerDeleteAll(r, e), !0, [dt, e])
                } catch (r) {
                    throw new Q.DataBaseException("", r.message, r.stack)
                }
            })
        }
        innerDeleteAll(e, t) {
            return M(this, void 0, void 0, function*() {
                return e.removeAllRecords(t)
            })
        }
    };
u(Ro, "yg");
var oy = Ro,
    gS = "1900-01-01 00:00:00",
    pS = "Serializer",
    Rn = class Rn {
        static get NULLDATE_IN_DB() {
            return gS
        }
        static maskValue(e, t) {
            let r = t.length,
                i = e.toString();
            return t.substr(0, Math.max(0, r - i.length)) + i
        }
        static maskFourZeroes(e) {
            return Rn.maskValue(e, "0000")
        }
        static maskTwoZeroes(e) {
            return Rn.maskValue(e, "00")
        }
        constructor() {
            this.serializers = new Map, this.deserializers = new Map, this.serializers.set(ce.BINARY_DATA, (e, t) => this.serializeBinaryData(e, t)), this.serializers.set(ce.BOOLEAN, (e, t) => this.serializeBoolean(e, t)), this.serializers.set(ce.DATE, (e, t) => this.serializeDate(e, t)), this.serializers.set(ce.DATE_TIME, (e, t) => this.serializeDateTime(e, t)), this.serializers.set(ce.DECIMAL, (e, t) => this.serializeDecimal(e, t)), this.serializers.set(ce.INTEGER, (e, t) => this.serializeInteger(e, t)), this.serializers.set(ce.LONGINTEGER, (e, t) => this.serializeLongInteger(e, t)), this.serializers.set(ce.TEXT, (e, t) => this.serializeText(e, t)), this.serializers.set(ce.TIME, (e, t) => this.serializeTime(e, t)), this.deserializers.set(ce.BINARY_DATA, (e, t) => this.deserializeBinaryData(e, t)), this.deserializers.set(ce.BOOLEAN, (e, t) => this.deserializeBoolean(e, t)), this.deserializers.set(ce.DATE, (e, t) => this.deserializeDate(e, t)), this.deserializers.set(ce.DATE_TIME, (e, t) => this.deserializeDateTime(e, t)), this.deserializers.set(ce.DECIMAL, (e, t) => this.deserializeDecimal(e, t)), this.deserializers.set(ce.INTEGER, (e, t) => this.deserializeInteger(e, t)), this.deserializers.set(ce.LONGINTEGER, (e, t) => this.deserializeLongInteger(e, t)), this.deserializers.set(ce.TEXT, (e, t) => this.deserializeText(e, t)), this.deserializers.set(ce.TIME, (e, t) => this.deserializeTime(e, t))
        }
        serialize(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Dn.No;
            return e instanceof Be ? this.serializeRecord(e, t) : this.serializeBasicType(e, t, r)
        }
        serializeRecord(e, t) {
            z(pS, "Starting to serialize a record");
            let r = {};
            return e.getAttributes().forEach(i => {
                let o = ry(t, i);
                r[o.columnName] = this.serializeBasicType(e[i.attrName], o, o.isPrimaryKey ? t.idIsAutoNumber : Dn.No)
            }), z(pS, "Finished serializing a record"), r
        }
        serializeInteger(e, t) {
            return e != null ? e : 0
        }
        serializeText(e, t) {
            return e != null ? e : ""
        }
        serializeBoolean(e, t) {
            return e ? 1 : 0
        }
        serializeLongInteger(e, t) {
            return e ? e.toString() : "0"
        }
        serializeDecimal(e, t) {
            return t.decimals ? e.toFixed(t.decimals) : e.toString()
        }
        serializeDate(e, t) {
            let r = e.toNative();
            return Rn.maskFourZeroes(r.getFullYear()) + "-" + Rn.maskTwoZeroes(r.getMonth() + 1) + "-" + Rn.maskTwoZeroes(r.getDate())
        }
        serializeTime(e, t) {
            let r = e.toNative();
            return Rn.maskTwoZeroes(r.getHours()) + ":" + Rn.maskTwoZeroes(r.getMinutes()) + ":" + Rn.maskTwoZeroes(r.getSeconds())
        }
        serializeDateTime(e, t) {
            if (e.eq(le.defaultValue)) return gS;
            let r = e.toNative();
            return Rn.maskFourZeroes(r.getUTCFullYear()) + "-" + Rn.maskTwoZeroes(r.getUTCMonth() + 1) + "-" + Rn.maskTwoZeroes(r.getUTCDate()) + " " + Rn.maskTwoZeroes(r.getUTCHours()) + ":" + Rn.maskTwoZeroes(r.getUTCMinutes()) + ":" + Rn.maskTwoZeroes(r.getUTCSeconds())
        }
        innerSerializeBasicType(e, t, r) {}
        serializeBasicType(e, t, r) {
            if (z(pS, `Serializing a value of type ${t.type}`), !this.serializers.has(t.type)) throw new Q.DataBaseException("", `Unable to serialize ${t.type} to a database value.`);
            let i = this.innerSerializeBasicType(e, t, r);
            return i !== void 0 ? i : this.serializers.get(t.type)(e, t)
        }
        deserialize(e, t, r) {
            return r ? this.deserializeRecord(e, t, r) : this.deserializeBasicType(e, t)
        }
        deserializeRecord(e, t, r) {
            let i = new r;
            return r.getAttributes().forEach(o => {
                let s = ry(t, o);
                i[o.attrName] = this.deserializeBasicType(e[s.columnName], s)
            }), i
        }
        deserializeInteger(e, t) {
            return e
        }
        deserializeLongInteger(e, t) {
            return bt.fromValue(e)
        }
        deserializeDecimal(e, t) {
            return new He(e)
        }
        deserializeText(e, t) {
            return e
        }
        deserializeBoolean(e, t) {
            return e !== 0
        }
        deserializeDateTime(e, t) {
            if (e === gS) return le.defaultValue;
            let r = /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),
                i = new Date;
            return i.setUTCFullYear(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10)), i.setUTCHours(parseInt(r[4], 10) || 0, parseInt(r[5], 10) || 0, parseInt(r[6], 10) || 0, 0), new le(i)
        }
        deserializeDate(e, t) {
            let r = /^(\d{4})-(\d{2})-(\d{2})$/.exec(e),
                i = new Date;
            return i.setFullYear(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10)), i.setHours(0, 0, 0, 0), new le(i)
        }
        deserializeTime(e, t) {
            let r = /^(\d{2}):(\d{2}):(\d{2})$/.exec(e),
                i = new Date;
            return i.setFullYear(1900, 0, 1), i.setHours(parseInt(r[1], 10) || 0, parseInt(r[2], 10) || 0, parseInt(r[3], 10) || 0, 0), new le(i)
        }
        innerDeserializeBasicType(e, t) {}
        deserializeBasicType(e, t) {
            if (!this.deserializers.has(t.type)) throw new Q.DataBaseException("", `Unable to deserialize ${t} to a runtime value.`);
            let r = this.innerDeserializeBasicType(e, t);
            return r !== void 0 ? r : e === null ? Cs(t.type) : this.deserializers.get(t.type)(e, t)
        }
    };
u(Rn, "wg");
var zr = Rn,
    UA = class UA extends zr {
        serializeBinaryData(e, t) {
            return e.toArrayBuffer() || null
        }
        deserializeBinaryData(e, t) {
            let r = e instanceof ArrayBuffer ? new Blob([e]) : e;
            return new Nn(r)
        }
        isConversionNeeded(e, t) {
            return !!this.isConversionNeededBetweenDBDataTypes(e.type, t.type) || !!e.isEntityReference != !!t.isEntityReference || e.length !== void 0 && t.length !== void 0 && (e.decimals !== void 0 && t.decimals !== void 0 ? e.length - e.decimals > t.length - t.decimals : e.length > t.length)
        }
        isConversionNeededBetweenDBDataTypes(e, t) {
            if (e === void 0) return !0;
            if (e === t) return !1;
            switch (e) {
                case ce.BOOLEAN:
                    return t !== ce.INTEGER;
                case ce.LONGINTEGER:
                    return t !== ce.TEXT;
                default:
                    return !0
            }
        }
    };
u(UA, "Eg");
var sy = UA,
    kW = Object.freeze({
        __proto__: null,
        default: sy
    }),
    ac = "IndexedDBMetadataV2Upgrader",
    MA = class MA {
        constructor(e, t) {
            this.entityInfos = e, this.serializer = t, this.VERSION = 2
        }
        isNeeded(e) {
            return M(this, void 0, void 0, function*() {
                var t, r;
                if (this.hasEntityInfos()) {
                    if (!(yield e.existsTable(dt))) return !1;
                    let i = Ln(this.entityInfos).moduleKey,
                        o = yield iy(e, i);
                    for (let s of this.entityInfos) {
                        let a = Ln(o.filter(l => l.KEY === s.key));
                        if (a && ((r = JSON.parse((t = a.EXTRAINFO) !== null && t !== void 0 ? t : "{}").v) !== null && r !== void 0 ? r : 0) < this.VERSION) return !0
                    }
                }
                return !1
            })
        }
        run(e) {
            return M(this, void 0, void 0, function*() {
                var t;
                if (!this.hasEntityInfos()) return;
                let r = Ln(this.entityInfos).moduleKey,
                    i = yield iy(e, r);
                for (let o of this.entityInfos) {
                    z(ac, `Running initializer for entities of module '${r}'.`);
                    let s = Ln(i.filter(c => c.KEY === o.key)),
                        a = {},
                        l = !0,
                        d = !0;
                    s && (a = JSON.parse((t = s.EXTRAINFO) !== null && t !== void 0 ? t : "{}"), l = s.UPGRADESTATUS === er.Unchanged, d = s.UPGRADESTATUS === er.Recreated), l ? (z(this, `Table ${o.tableName} (${o.name}) exists and will be fully upgraded`), yield R2(e, o, a, this.serializer)) : z(ac, `Table ${o.tableName} (${o.name}) exists and will be skipped`), (d || l) && o.attributes.some(c => c.isEntityReference) ? (z(this, `Table ${o.tableName} (${o.name}) exists and have its defaults upgraded`), yield this.upgradeDefaults(e, o, a, this.serializer)) : z(ac, `Table ${o.tableName} (${o.name}) wasn't upgraded`)
                }
            })
        }
        cleanup(e) {
            return M(this, void 0, void 0, function*() {
                if (!this.hasEntityInfos()) return;
                let t = Ln(this.entityInfos).moduleKey;
                z(ac, `Running initializer cleanup for entities of module '${t}'.`), yield _2(e, t), z(ac, `Initializer cleanup for entities of module '${t}' ran successfully.`)
            })
        }
        upgradeDefaults(e, t, r, i) {
            return M(this, void 0, void 0, function*() {
                try {
                    let o = yield e.getAllRecords(t);
                    for (let s of o) this.fillWithDefaultsIfNull(s, t, i);
                    yield e.upsertAllRecords(t, o)
                } catch (o) {
                    let s = `Unable to upgrade the definition of entity '${t.name}':
${Yr(o)}`;
                    throw qe(ac, s), new Q.DataBaseException("", s)
                }
            })
        }
        fillWithDefaultsIfNull(e, t, r) {
            var i;
            for (let o of t.attributes) {
                let s = o.columnName;
                if (o.isEntityReference && e[s] === null) {
                    let a = (i = o.default) !== null && i !== void 0 ? i : Cs(o.type);
                    e[s] = r.serialize(a, o)
                }
            }
        }
        hasEntityInfos() {
            return this.entityInfos && this.entityInfos.length > 0
        }
    };
u(MA, "Ng");
var C1 = MA,
    FA = class FA extends oy {
        constructor() {
            super(new sy)
        }
        executeAggregate(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield this.getDatabase();
                try {
                    return yield r.executeQuery(e, !0, t)
                } catch (i) {
                    throw new Q.DataBaseException("", i.message, i.stack)
                }
            })
        }
        innerCreate(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = yield this.getMetadataRecord(e, t), o = Ra(t, r), s = r.clone();
                if (t.idIsAutoNumber === Dn.YesIfEmpty) {
                    let a = this.getRecordIdAndUpdateLastIdentifier(i, t, r);
                    yield this.updateMetadataTable(e, i), s[o.attrName] = a
                }
                return yield e.insertRecord(t, this.serializer.serialize(s, t)), o ? s[o.attrName] : null
            })
        }
        getRecordIdAndUpdateLastIdentifier(e, t, r) {
            let i = wi(t),
                o = Ra(t, r),
                s = T2(t, r);
            if (t.idIsAutoNumber === Dn.YesIfEmpty) {
                let a = e.LASTIDENTIFIER !== void 0 ? this.serializer.deserialize(e.LASTIDENTIFIER, i) : Ve(o.dataType);
                Zr(s, Ve(o.dataType)) ? (a instanceof bt ? a = a.add(1) : typeof a == "number" && (a += 1), s = a, e.LASTIDENTIFIER = this.serializer.serialize(s, i)) : qy(s, a) > 0 && (e.LASTIDENTIFIER = this.serializer.serialize(s, i))
            }
            return s
        }
        innerCreateOrUpdate(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = r.clone();
                if (t.idIsAutoNumber === Dn.YesIfEmpty) {
                    let a = yield this.getMetadataRecord(e, t), l = this.getRecordIdAndUpdateLastIdentifier(a, t, r);
                    yield this.updateMetadataTable(e, a), i[Ra(t, r).attrName] = l
                }
                let o = yield e.upsertRecord(t, this.serializer.serialize(i, t)), s = wi(t);
                return s ? this.serializer.deserialize(o, s) : null
            })
        }
        innerCreateOrUpdateAll(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = yield this.getMetadataRecord(e, t), o, s = r.map(a => {
                    o = o != null ? o : Ra(t, a);
                    let l = a.clone();
                    if (t.idIsAutoNumber === Dn.YesIfEmpty) {
                        let d = this.getRecordIdAndUpdateLastIdentifier(i, t, a);
                        l[o.attrName] = d
                    }
                    return this.serializer.serialize(l, t)
                });
                return yield this.updateMetadataTable(e, i), e.upsertAllRecords(t, s)
            })
        }
        registerInitializer(e) {
            if (super.registerInitializer(e), e && e.length > 0) {
                z("IndexedDBEntityService", `Registering V2 upgrader for entities of module '${e[0].moduleKey}'.`);
                let t = new C1(e, this.serializer);
                this.database.registerInitializer(t)
            }
        }
        getMetadataRecord(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = yield e.getRecord(dt, [t.key, t.moduleKey]);
                if (!r) throw new Error(`Unable to fetch record with key ${t.key} and moduleKey ${t.moduleKey} from 
                metadata table ${dt.tableName}.`);
                return r
            })
        }
        updateMetadataTable(e, t) {
            return M(this, void 0, void 0, function*() {
                if (t.LASTIDENTIFIER !== void 0) return e.updateRecord(dt, t)
            })
        }
    };
u(FA, "Sg");
var R1 = FA,
    _a = {
        tableName: pf,
        idIsAutoNumber: Dn.No,
        attributes: [{
            name: "SS_Key",
            columnName: "SS_Key",
            type: ce.TEXT
        }, {
            name: "Module_SS_Key",
            columnName: "Module_SS_Key",
            type: ce.TEXT
        }, {
            name: "Name",
            columnName: "Name",
            type: ce.TEXT
        }, {
            name: "Physical_Table_name",
            columnName: "Physical_Table_name",
            type: ce.TEXT
        }, {
            name: "Hash",
            columnName: "Hash",
            type: ce.TEXT
        }, {
            name: "Extra_Info",
            columnName: "Extra_Info",
            type: ce.TEXT
        }, {
            name: "Upgrade_Status",
            columnName: "Upgrade_Status",
            type: ce.INTEGER
        }]
    },
    O1 = Object.assign(Object.assign({}, _a), {
        tableName: `${Zy}${pf}`
    });

function UW(n, e, t) {
    return M(this, void 0, void 0, function*() {
        let r = (yield n.getAllRecords(e)).map(i => function(o) {
            let s = JSON.parse(o.Extra_Info),
                a = {
                    v: 2,
                    idIsAutoNumber: s.idIsAutoNumber,
                    attrs: Object.keys(s.attrs).reduce((l, d) => (l[d.toUpperCase()] = s.attrs[d], l), {})
                };
            return {
                KEY: o.SS_Key,
                MODULEKEY: o.Module_SS_Key,
                UPGRADESTATUS: o.Upgrade_Status,
                NAME: o.Name,
                TABLENAME: o.Physical_Table_name,
                HASH: o.Hash,
                EXTRAINFO: JSON.stringify(a)
            }
        }(i));
        yield n.deleteTableIfExists(e), yield n.createTable(t), yield n.upsertAllRecords(t, r)
    })
}
u(UW, "Cg");
var N2 = {
        isNeeded: u(n => M(void 0, void 0, void 0, function*() {
            let e = n,
                t = !1;
            return (yield n.existsTable(_a)) && (t = yield e.executeQuery(r => {
                var i, o, s, a;
                return o = r, s = _a.tableName, a = (i = _a.attributes[0]) === null || i === void 0 ? void 0 : i.columnName, new Promise(l => {
                    o.executeSql(`SELECT "${s}"."${a}" FROM "${s}" LIMIT 1`, void 0, () => {
                        l(!0)
                    }, () => (l(!1), !1))
                })
            })), t
        }), "isNeeded"),
        run: u(n => M(void 0, void 0, void 0, function*() {
            let e = [{
                v0TableInfo: _a,
                v2TableInfo: dt
            }, {
                v0TableInfo: O1,
                v2TableInfo: Po
            }].map(t => {
                let {
                    v0TableInfo: r,
                    v2TableInfo: i
                } = t;
                return UW(n, r, i)
            });
            yield Promise.all(e)
        }), "run"),
        cleanup: u(n => M(void 0, void 0, void 0, function*() {
            yield n.deleteTableIfExists(_a), yield n.deleteTableIfExists(O1), yield n.renameTable(`${dt.tableName}_V2`, dt.tableName), yield n.renameTable(`${Po.tableName}_V2`, Po.tableName)
        }), "cleanup")
    },
    Tc = class Tc {
        constructor() {
            Tc.lastUpgraderRegistered = this
        }
        isNeeded(e) {
            return M(this, void 0, void 0, function*() {
                let t = !1;
                return Tc.lastUpgraderRegistered === this && (t = yield N2.isNeeded(e)), t
            })
        }
        run(e) {
            return M(this, void 0, void 0, function*() {
                let t = [{
                    v2TableInfo: dt,
                    v0TableInfo: _a
                }, {
                    v2TableInfo: Po,
                    v0TableInfo: O1
                }].map(r => {
                    let {
                        v2TableInfo: i,
                        v0TableInfo: o
                    } = r;
                    return this.migrateToV0(e, i, o)
                });
                yield Promise.all(t)
            })
        }
        migrateToV0(e, t, r) {
            return M(this, void 0, void 0, function*() {
                let i = (yield e.getAllRecords(t)).map(o => function(s) {
                    let a = JSON.parse(s.EXTRAINFO),
                        l = {
                            v: 0,
                            idIsAutoNumber: a.idIsAutoNumber,
                            attrs: Object.keys(a.attrs).reduce((d, c) => (d[c.toLowerCase()] = a.attrs[c], d), {})
                        };
                    return {
                        SS_Key: s.KEY,
                        Module_SS_Key: s.MODULEKEY,
                        Name: s.NAME,
                        Physical_Table_name: s.TABLENAME,
                        Hash: s.HASH,
                        Extra_Info: JSON.stringify(l),
                        Upgrade_Status: s.UPGRADESTATUS
                    }
                }(o));
                yield e.deleteTableIfExists(`${t.tableName}_V2`), yield e.renameTable(t.tableName, `${t.tableName}_V2`), yield e.createTable(r), yield e.upsertAllRecords(r, i)
            })
        }
        cleanup() {
            return M(this, void 0, void 0, function*() {
                Tc.lastUpgraderRegistered = null
            })
        }
    };
u(Tc, "Lg");
var D1 = Tc,
    BA = class BA extends zr {
        constructor() {
            super(...arguments), this.fromMethodCache = new Map, this.attributeReaderImplementation = (e, t, r, i) => {
                let o = {
                    type: Mx(i)
                };
                return this.deserialize(e["o" + t], o)
            }, this.namedAttributeReaderImplementation = (e, t, r, i) => {
                let o = {
                    type: Mx(i)
                };
                return this.deserialize(e[r], o)
            }, this.deserializeAggregate = (e, t, r, i) => {
                var o;
                if (this.isGenericRecordType(t)) {
                    let s = e,
                        a = t,
                        l = r,
                        d = this.fromMethodCache.get(a);
                    if (!d) {
                        let c = a.getAttributes();
                        d = this.makeConverterFunction({
                            attributes: c,
                            fromLocalStorage: this.deserializeAggregate,
                            dataType: t
                        }), this.fromMethodCache.set(a, d)
                    }
                    return d(s, l, this.getAttributeReaderImplementation(t), i)
                }
                if (this.isGenericRecordListType(t)) {
                    let s = new t,
                        a = e,
                        l = r,
                        d = [];
                    for (let c = 0; c < a.length; c++) d.push(s.newItem(l(null, a.item(c))));
                    return s.pushAll(d), s
                } {
                    let s = t;
                    throw new Error(`Unable to read data from Local Storage. Unknown type ${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:s}`)
                }
            }
        }
        isGenericRecordType(e) {
            return !!e.isGenericRecordType
        }
        isGenericRecordListType(e) {
            return !!e.isGenericRecordListType
        }
        getAttributeReaderImplementation(e) {
            return e.isAnonymousRecord() ? this.namedAttributeReaderImplementation : this.attributeReaderImplementation
        }
        makeAttributesDeclaration(e, t) {
            t.forEach(r => {
                r.dataType !== T.RecordList && (e[r.attrName] = null)
            })
        }
        makeDeserializerForEachAttribute(e) {
            let {
                data: t,
                attributes: r,
                dataType: i,
                row: o,
                indexRef: s,
                readerImplementation: a,
                fromLocalStorage: l
            } = e;
            r.forEach((d, c) => {
                d.dataType !== T.RecordList && (d.dataType === T.Record && i.isAnonymousRecord() ? t[d.attrName] = l(o, d.complexType, s) : t[d.attrName] = a(o, s.value++, r[c].name, r[c].dataType))
            })
        }
        makeConverterFunction(e) {
            let {
                attributes: t,
                fromLocalStorage: r,
                dataType: i
            } = e;
            return (o, s, a, l) => {
                let d = {};
                return l && l.length > 0 ? (this.makeAttributesDeclaration(d, t), l.forEach(c => {
                    let h = t.filter(function(f) {
                        return f.attrName === c
                    })[0];
                    h.complexType ? d[c] = r(o, h.complexType, s) : d[c] = a(o, s.value++, h.name, h.dataType)
                })) : this.makeDeserializerForEachAttribute({
                    data: d,
                    attributes: t,
                    dataType: i,
                    row: o,
                    indexRef: s,
                    readerImplementation: a,
                    fromLocalStorage: r
                }), new i.RecordClass(d)
            }
        }
        serializeDateTime(e, t) {
            if (e.eq(le.defaultValue)) return zr.NULLDATE_IN_DB;
            let r = e.toNative();
            return zr.maskFourZeroes(r.getUTCFullYear()) + "-" + zr.maskTwoZeroes(r.getUTCMonth() + 1) + "-" + zr.maskTwoZeroes(r.getUTCDate()) + " " + zr.maskTwoZeroes(r.getUTCHours()) + ":" + zr.maskTwoZeroes(r.getUTCMinutes()) + ":" + zr.maskTwoZeroes(r.getUTCSeconds())
        }
        serializeBinaryData(e, t) {
            return e.content === void 0 ? null : e.content
        }
        deserializeDateTime(e, t) {
            if (e === zr.NULLDATE_IN_DB) return le.defaultValue;
            let r = /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),
                i = new Date;
            return i.setUTCFullYear(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10)), i.setUTCHours(parseInt(r[4], 10) || 0, parseInt(r[5], 10) || 0, parseInt(r[6], 10) || 0, 0), new le(i)
        }
        deserializeBinaryData(e, t) {
            return new Nn(e)
        }
        isConversionNeeded(e, t) {
            return !!this.isConversionNeededBetweenDBDataTypes(e.type, t.type) || !!e.isEntityReference != !!t.isEntityReference || e.length !== void 0 && t.length !== void 0 && (e.decimals !== void 0 && t.decimals !== void 0 ? e.length - e.decimals > t.length - t.decimals : e.length > t.length)
        }
        isConversionNeededBetweenDBDataTypes(e, t) {
            if (e === void 0) return !0;
            if (e === t) return !1;
            switch (e) {
                case ce.BOOLEAN:
                    return t !== ce.INTEGER && t !== ce.LONGINTEGER;
                case ce.INTEGER:
                    return t !== ce.LONGINTEGER && t !== ce.TEXT;
                case ce.LONGINTEGER:
                    return t !== ce.TEXT;
                default:
                    return !0
            }
        }
        innerSerializeBasicType(e, t, r) {
            return z("WebSQLSerializer", `WebSQL serializing a value of type ${t.type}`), t.isPrimaryKey && r === Dn.YesIfEmpty && Zr(e, Cs(t.type)) || t.isEntityReference && Zr(e, Cs(t.type)) ? null : void 0
        }
    };
u(BA, "Og");
var ay = BA,
    MW = Object.freeze({
        __proto__: null,
        default: ay
    }),
    jA = class jA extends oy {
        constructor() {
            super(new ay), this.isMetadataV2UpgraderRegistered = !1
        }
        registerInitializer(e) {
            this.isMetadataV2UpgraderRegistered || (this.database.registerInitializer(N2), this.isMetadataV2UpgraderRegistered = !0), super.registerInitializer(e), this.database.registerInitializer(new D1)
        }
        executeAggregate(e) {
            return M(this, void 0, void 0, function*() {
                let t = yield this.getDatabase();
                try {
                    return yield t.executeQuery(e)
                } catch (r) {
                    throw new Q.DataBaseException("", r.message, r.stack)
                }
            })
        }
    };
u(jA, "Mg");
var N1 = jA,
    $A = class $A {
        constructor() {
            let {
                onNewVersionHandler: e
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            this.onNewVersionHandler = e
        }
        setOnNewVersionHandler(e) {
            this.onNewVersionHandler = e
        }
        onNewVersion(e, t) {
            return M(this, void 0, void 0, function*() {
                this.onNewVersionHandler ? this.onNewVersionHandler(e, t) : qe("LifecycleHandlers", "onNewVersion triggered without handler defined.")
            })
        }
    };
u($A, "Ug");
var L1 = $A,
    Yx = "en-US",
    mS = !1,
    FW = /^[A-z]{2,3}([_-]([A-z]{4}|[\d]{3}))?([_-]([A-z]{2}|[\d]{3}))?$/,
    VA = class VA {
        constructor(e) {
            this.currentLocaleStorage = new Jr(vn.Persistent, "CurrentLocale", void 0, Y1), this.publisher = new ny("Locale Service", e)
        }
        subscribe(e) {
            return this.publisher.subscribe(e)
        }
        unsubscribe(e) {
            return this.publisher.unsubscribe(e)
        }
        getCurrentLocale() {
            var e, t;
            return (t = (e = this.currentLocaleStorage.get()) === null || e === void 0 ? void 0 : e.localeCode) !== null && t !== void 0 ? t : Yx
        }
        setCurrentLocale(e) {
            let t = hf(Y.TranslationsService);
            if (t && t.clear(), !this.isValidLocale(e)) throw new Error(`Value '${e}' isn't a valid locale.`); {
                let i = {
                    localeCode: e,
                    isRTL: mS
                };
                this.currentLocaleStorage.set(i)
            }
            let r = this.getCurrentLocaleFamily();
            this.publisher.publish({
                localeCode: e,
                localeFamily: r
            })
        }
        getCurrentLocaleFamily() {
            var e;
            let t = [],
                r = (e = this.getCurrentLocale()) !== null && e !== void 0 ? e : "";
            return r.indexOf("-") > 0 && t.push(r.split("-")[0]), t.push(r), t
        }
        isValidLocale(e) {
            return FW.test(e)
        }
        isCurrentLocaleRTL() {
            var e, t;
            return (t = (e = this.currentLocaleStorage.get()) === null || e === void 0 ? void 0 : e.isRTL) !== null && t !== void 0 ? t : mS
        }
        setCurrentLocaleRTL(e) {
            var t;
            let r = (t = this.currentLocaleStorage.get()) !== null && t !== void 0 ? t : {
                localeCode: Yx,
                isRTL: mS
            };
            r.isRTL = e, this.currentLocaleStorage.set(r)
        }
    };
u(VA, "Vg");
var uy = VA,
    BW = Object.freeze({
        __proto__: null,
        default: uy
    }),
    Vm = "MappingWithDefaultService",
    HA = class HA {
        constructor() {
            this.messages = {}
        }
        getMessage(e, t) {
            z(Vm, `Getting message for key ${e} with default message ${t}`);
            let r = this.messages[e];
            return r != null ? r : t
        }
        setMessage(e, t) {
            z(Vm, `Setting message for key ${e} with value ${t}`), this.messages[e] = t
        }
        add(e) {
            if (!e) throw new Error("Messages cannot either null or undefined");
            let t = Object.keys(e);
            z(Vm, `Adding ${t.length} messages`), t.forEach(r => this.setMessage(r, e[r]))
        }
        clear() {
            z(Vm, "Clearing cached messages"), this.messages = {}
        }
    };
u(HA, "zg");
var x1 = HA,
    Xx = "Application",
    L2 = u(function(n) {
        for (var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) t[r - 1] = arguments[r];
        return M(void 0, [n, ...t], void 0, function(i) {
            let {
                dateTimeFormat: o,
                numberFormat: s,
                application: a = Tl
            } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            return function*() {
                $P(Is());
                let l = VW();
                (function() {
                    let {
                        serviceWorker: d = navigator.serviceWorker,
                        loggerMethods: c = {
                            debug: z,
                            info: hr,
                            warning: qe,
                            error: xe
                        }
                    } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                    d ? d.addEventListener("message", h => {
                        SW(h.origin) ? _W(h.data) && IW({
                            log: h.data,
                            loggerMethods: c
                        }) : z(Eh, "The received message is not from a secure Service Worker and will be ignored")
                    }) : qe(Eh, "Service Worker API is not available")
                })(), z(Xx, "Initializing Application"), i.register(Y.LifecycleEventsManager, () => new L1({
                    onNewVersionHandler: u((d, c) => a.onNewVersionDetected(d, c), "onNewVersionHandler")
                })), UP(d => {
                    if (Ti.isUpgradingVersion && !iI(d)) return qe(Xx, "RequireJS error during upgrade, treating as an upgrade error."), void Ti.handleUpgradeError(d, 1);
                    bs(d)
                }), Na.clear(), hP(OP()), jW(o, s), yield l, i.register(Y.ClientVariablesService, () => new S1(Y1())), HW(i), i.register(Y.TranslationsService, () => new x1), i.register(Y.LocaleService, () => new uy(Qn())), $W()
            }()
        })
    }, "jg"),
    jW = u((n, e) => {
        n && (F.FORMAT.dateTimeFormat = n), e && (F.FORMAT.numberFormat = e)
    }, "qg"),
    $W = u(() => {
        let n = By();
        n && (Object.defineProperty(n, "OutSystemsApp", {
            value: {
                get public() {
                    var e;
                    return new gl(null, (e = Xr.activeScreen) === null || e === void 0 ? void 0 : e.callContext())
                }
            },
            configurable: !0
        }), n.dispatchEvent(new Event("ospublicapiready")))
    }, "Gg"),
    VW = u(() => M(void 0, void 0, void 0, function*() {
        (yield v2()) && (yield LI())
    }), "Wg"),
    HW = u(n => {
        on() ? n.register(Y.EntityService, () => new N1) : n.register(Y.EntityService, () => new R1)
    }, "Kg"),
    Qx = "/moduleservices/auth/configs",
    ch = "AuthConfigsManager",
    eP = "os-runtime-authconfigs",
    zA = class zA {
        constructor() {
            let {
                httpClient: e = de.resolve(Y.UnauthenticatedHttpClient),
                initialConfigs: t,
                getBasePath: r = u(() => jt(), "n"),
                cacheName: i = "os-builtin-authconfigs",
                cacheStorage: o = localStorage
            } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            var s;
            this.isOnlineListenerRegistered = !1, this.httpClient = e, this.getBasePath = r, this.cacheStorage = o, ((a, l, d) => {
                let c = a.getItem(l);
                c && (a.setItem(d, c), a.removeItem(l))
            })(this.cacheStorage, i, eP), this.cacheName = eP, this.authConfigs = (s = t != null ? t : this.fetchCachedConfigs()) !== null && s !== void 0 ? s : []
        }
        cacheConfigs(e) {
            this.cacheStorage.setItem(this.cacheName, JSON.stringify(e))
        }
        fetchCachedConfigs() {
            try {
                let e = this.cacheStorage.getItem(this.cacheName);
                if (e) return JSON.parse(e);
                qe(ch, "No auth configs stored in cache")
            } catch (e) {
                xe(ch, "Error retrieving auth configs from cache", "OS-CLRT-40100", e)
            }
        }
        update() {
            return M(this, arguments, void 0, function() {
                var e = this;
                let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : F8,
                    r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : de.resolve(Y.Auth);
                return function*() {
                    var i;
                    try {
                        let o = yield e.httpClient.get({
                            url: Qx,
                            baseURL: e.getBasePath()
                        }), s = o == null ? void 0 : o.authConfigurations;
                        if (!Array.isArray(s)) throw new Error("Did not receive an array of configurations");
                        if (e.authConfigs = s, e.cacheConfigs(e.authConfigs), !(!((i = r.getInstance()) === null || i === void 0) && i.isAuthenticated())) {
                            let [a] = e.readAuthConfigs(dh);
                            a && r.updateConfig(a.configs)
                        }
                    } catch (o) {
                        xe(ch, "Error while fetching auth configs", "OS-CLRT-40100", o), e.isOnlineListenerRegistered || (t(() => M(e, void 0, void 0, function*() {
                            return this.update()
                        })), e.isOnlineListenerRegistered = !0)
                    }
                }()
            })
        }
        readAuthConfigs(e) {
            let {
                suppressExternalWarnings: t = !1
            } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            try {
                e !== dh || this.authConfigs.find(i => i.type === dh) || (qe(ch, `${dh} not available, fallback to cognito`), e = "cognito");
                let r = e ? this.authConfigs.filter(i => i.type === e) : this.authConfigs;
                return r.length < 1 ? (qe(Qx, `No identity provider configurations found${e?` for type "${e}"`:""}.`, t ? Oe.Internal : Oe.External), []) : r.map(i => {
                    var o, s, a, l, d, c, h, f, g, p, y, b, E;
                    return {
                        key: i.key,
                        type: i.type,
                        kc_hint: (o = i.kc_hint) !== null && o !== void 0 ? o : "cognito",
                        configs: {
                            identityProvider: (s = i.kc_hint) !== null && s !== void 0 ? s : i.type,
                            scope: "openid",
                            clientId: (a = i.configs.amplifyClientId) !== null && a !== void 0 ? a : i.configs.clientId,
                            poolId: i.configs.poolId,
                            region: i.configs.region,
                            tenantId: i.configs.tenantId,
                            passwordComplexityPolicy: {
                                minimumLength: (d = (l = i.configs.passwordPolicy) === null || l === void 0 ? void 0 : l.minimumLength) !== null && d !== void 0 ? d : 12,
                                lowerCaseLetterRequired: (h = (c = i.configs.passwordPolicy) === null || c === void 0 ? void 0 : c.requireLowercase) === null || h === void 0 || h,
                                upperCaseLetterRequired: (g = (f = i.configs.passwordPolicy) === null || f === void 0 ? void 0 : f.requireUppercase) === null || g === void 0 || g,
                                numberRequired: (y = (p = i.configs.passwordPolicy) === null || p === void 0 ? void 0 : p.requireNumbers) === null || y === void 0 || y,
                                specialCharacterRequired: (E = (b = i.configs.passwordPolicy) === null || b === void 0 ? void 0 : b.requireSymbols) === null || E === void 0 || E
                            }
                        }
                    }
                })
            } catch (r) {
                return qe(ch, "Couldn't read auth configurations"), []
            }
        }
    };
u(zA, "Qg");
var P1 = zA,
    zW = {
        info: u(n => {
            let {
                category: e,
                message: t
            } = n;
            hr(e != null ? e : "", t != null ? t : "", Oe.Internal)
        }, "info"),
        error: u(n => {
            let {
                category: e,
                message: t,
                error: r,
                code: i,
                visibility: o
            } = n;
            var s;
            xe(e != null ? e : "", t != null ? t : "", (s = i) !== null && s !== void 0 ? s : "OS-CLRT-40100", r, o)
        }, "error"),
        warning: u(n => {
            let {
                category: e,
                message: t
            } = n;
            qe(e != null ? e : "", t != null ? t : "")
        }, "warning"),
        debug: u(n => {
            let {
                category: e,
                message: t
            } = n;
            z(e != null ? e : "", t != null ? t : "")
        }, "debug")
    },
    x2 = u(n => M(void 0, void 0, void 0, function*() {
        n.register(Y.AuthConfigsManager, () => new P1);
        let e = n.resolve(Y.AuthConfigsManager),
            [t] = e.readAuthConfigs(dh, {
                suppressExternalWarnings: !0
            });
        n.register(Y.Auth, () => {
            var r;
            return new Am({
                appKey: Is(),
                appUrl: jt(),
                region: t == null ? void 0 : t.configs.region,
                poolId: t == null ? void 0 : t.configs.poolId,
                clientId: t == null ? void 0 : t.configs.clientId,
                scope: "openid",
                identityProvider: (r = t == null ? void 0 : t.kc_hint) !== null && r !== void 0 ? r : t == null ? void 0 : t.type,
                passwordComplexityPolicy: t == null ? void 0 : t.configs.passwordComplexityPolicy,
                logger: zW,
                httpClient: n.resolve(Y.UnauthenticatedHttpClient),
                isOnline: u(() => Kk(), "isOnline")
            })
        }), yield e.update()
    }), "ep"),
    WA = class WA {
        constructor(e, t) {
            this.databaseName = e, this.databaseEngineName = t, this.isInitialized = !1, this.allInitializers = [], this.initializersToRun = []
        }
        get name() {
            return this.databaseName
        }
        get engineName() {
            var e;
            return (e = this.databaseEngineName) !== null && e !== void 0 ? e : "Unknown"
        }
        registerInitializer(e) {
            if (this.isInitialized) throw new Q.DataBaseException("", `Cannot register a database initializer on the already initialized database '${this.name}'`);
            this.allInitializers.push(e)
        }
        initialize() {
            return M(this, void 0, void 0, function*() {
                if (this.isInitialized) throw new Q.DataBaseException("", `Cannot initialize the already initialized database '${this.name}'`);
                this.markInitialized(), yield this.identifyNeededInitializers(), yield this.runNeededInitializers()
            })
        }
        initializerCleanup() {
            return M(this, void 0, void 0, function*() {
                if (!this.isInitialized) throw new Q.DataBaseException("", `Cannot perform database initializer cleanup on the non-initialized database '${this.name}'`);
                yield this.cleanupNeededInitializers()
            })
        }
        identifyNeededInitializers() {
            return M(this, void 0, void 0, function*() {
                this.allInitializers && this.allInitializers.length > 0 && (yield this.executeReadTransaction(e => M(this, void 0, void 0, function*() {
                    for (let t of this.allInitializers)(yield t.isNeeded(e)) && this.initializersToRun.push(t)
                }))), this.releaseUnneededInitializers()
            })
        }
        runNeededInitializers() {
            return M(this, void 0, void 0, function*() {
                this.initializersToRun.length > 0 && (yield this.executeUpgradeTransaction(e => M(this, void 0, void 0, function*() {
                    for (let t of this.initializersToRun) yield t.run(e)
                })))
            })
        }
        cleanupNeededInitializers() {
            return M(this, void 0, void 0, function*() {
                this.initializersToRun.length > 0 && (yield this.executeUpgradeTransaction(e => M(this, void 0, void 0, function*() {
                    for (let t of this.initializersToRun) t.cleanup && (yield t.cleanup(e))
                })), this.releaseNeededInitializers())
            })
        }
        markInitialized() {
            this.isInitialized = !0
        }
        releaseUnneededInitializers() {
            this.allInitializers = []
        }
        releaseNeededInitializers() {
            this.initializersToRun = []
        }
    };
u(WA, "tp");
var cy = WA;

function tP(n, e) {
    if (e !== null) return e
}
u(tP, "np");

function nP(n) {
    let e = n.replace(/(?:"([^\\"]|\\.)*")|(?:'([^\\']|\\.)*')|(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(\w+)\s*:/g, function(t, r, i, o, s) {
        return o ? '"' + o + '"' : i ? '"' + t.substring(1, t.length - 1) + '"' : s ? '"' + s + '":' : t
    });
    return JSON.parse(e)
}
u(nP, "rp");

function ly(n) {
    let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 3,
        t = arguments.length > 2 ? arguments[2] : void 0,
        r = arguments.length > 3 ? arguments[3] : void 0,
        i = arguments.length > 4 ? arguments[4] : void 0;
    t = t != null ? t : WW, e = isNaN(+e) ? 1 : e;
    let o = new WeakMap;
    return JSON.stringify(u(function s(a, l, d, c, h) {
        var f;
        return a && typeof a == "object" ? (h = o.has(a), o.set(a, !0), c = Array.isArray(a), h ? d = (f = i == null ? void 0 : i(a)) !== null && f !== void 0 ? f : null : JSON.stringify(a, function(g, p) {
            if (c || l > 0) {
                if (t && (p = t(g, p)), !g) return c = Array.isArray(p), a = p;
                (d = d || (c ? [] : {}))[g] = s(p, c ? l : l - 1)
            }
        }), d === void 0 ? c ? [] : "(...)" : d) : a
    }, "e")(n, e), null, r)
}
u(ly, "ip");

function WW(n, e) {
    if (n === "") {
        if (Array.isArray(e)) {
            let r = e;
            return r.length >= 10 && (r = r.slice(0, 9), r.push("(...)")), r
        }
        return function(r, i) {
            let o = 0,
                s = !1,
                a = Object.keys(r).reduce(function(l, d) {
                    return o++, o <= i ? l[d] = r[d] : s = !0, l
                }, {});
            return s && (a["..."] = "(...)"), a
        }(e, 10)
    }
    if (typeof e == "string") {
        let t = e;
        return t.length > 25 ? t.substring(0, 19) + " (...)" : t
    }
    return e
}
u(WW, "sp");
var qW = Object.freeze({
        __proto__: null,
        deserializeFromJSON: u(function(n, e, t) {
            try {
                let r;
                return n && (r = nP(n)), Fh.from(r, e, t)
            } catch (r) {
                throw "Failed to deserialize JSON to " + e.name + ": " + r.message
            }
        }, "deserializeFromJSON"),
        filterJSONValues: tP,
        mergeJS: u(function n(e, t) {
            let r, i, o, s;
            for (let a in t) r = e[a], i = t[a], i && r && (typeof i == "object" || (o = Array.isArray(i))) ? (o ? (o = !1, s = Array.isArray(r) ? r : []) : s = typeof r == "object" ? r : {}, e[a] = n(s, i)) : i !== void 0 && (e[a] = i);
            return e
        }, "e"),
        parseJSON: nP,
        serializeObjectForLog: ly,
        serializeToJSON: u(function(n, e, t, r) {
            let i = Fh.to({
                value: n,
                serializeDefaultValues: e,
                useUnixDateFormat: t,
                dataType: r,
                enforceDefaultValueSerializationAtThisLevel: !0
            });
            return JSON.stringify(i, tP)
        }, "serializeToJSON")
    }),
    vS = "IndexedDBTransactionWithoutObjectStores",
    qA = class qA {
        constructor(e, t) {
            this.allowTraces = e, this.database = t, this.allowTraces && z(vS, `Starting transaction ${this.transactionId} over ${t.objectStoreNames.length} store(s)`)
        }
        createTable(e) {
            return new Promise(t => {
                var r, i, o;
                this.debug(`Creating table '${e.tableName}'`);
                let s = PI(e),
                    a = this.database.createObjectStore(e.tableName, {
                        autoIncrement: !s,
                        keyPath: s
                    });
                this.debug(`Creating columns for '${e.tableName}' table`);
                for (let l = 0; l < e.attributes.length; l++) this.debug(`Creating column '${(r=e.attributes[l])===null||r===void 0?void 0:r.name}'`), a.createIndex((i = e.attributes[l]) === null || i === void 0 ? void 0 : i.columnName, (o = e.attributes[l]) === null || o === void 0 ? void 0 : o.columnName);
                t()
            })
        }
        deleteTableIfExists(e) {
            let t;
            return t = typeof e == "string" ? e : e.tableName, new Promise((r, i) => {
                if (this.debug(`Deleting table '${t}'`), !this.database.objectStoreNames.contains(t)) return this.debug(`Table '${t}' does not exist`), r();
                try {
                    this.database.deleteObjectStore(t), this.debug(`Table '${t}' deleted successfuly`)
                } catch (o) {
                    return this.warning(`Error deleting table '${t}'`, o), i(o)
                }
                r()
            })
        }
        existsTable(e) {
            let t = typeof e == "string" ? e : e.tableName;
            return Promise.resolve(this.database.objectStoreNames.contains(t))
        }
        renameTable(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        addColumn(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        existsColumn(e, t) {
            return M(this, void 0, void 0, function*() {
                throw new Error("You can't execute this method on a database without object stores.")
            })
        }
        getRecord(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        insertRecord(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        updateRecord(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        upsertRecord(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        upsertAllRecords(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        removeRecord(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        removeAllRecords(e) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        findRecords(e, t) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        getAllRecords(e) {
            throw new Error("You can't execute this method on a database without object stores.")
        }
        debug(e) {
            this.allowTraces && z(vS, `${e} on transaction ${this.transactionId}`, Oe.Client)
        }
        warning(e, t) {
            qe(vS, `${e} on transaction ${this.transactionId}${t?`: ${t.message}`:""}`, Oe.Client)
        }
    };
u(qA, "lp");
var dy = qA;

function GW(n, e) {
    let t = n.trim();
    if (t === "") return []; {
        let i = xa(t, "((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*", !0);
        if (i.length !== 1 || i[0].value !== t) throw new Q.DataBaseException("", "Invalid syntax in 'Order By' parameter.")
    }
    let r = ol(t, "(\\{\\w+\\}|\\w+\\.)", !1, i => function(o, s) {
        let a = function(d) {
                return d.value.charAt(d.value.length - 1) === "." ? d.value.substr(0, d.value.length - 1) : d.value.substr(1, d.value.length - 2)
            }(o),
            l = s.some(d => d.toLowerCase() === a.toLowerCase()) ? a : "";
        if (l === "") throw new Q.DataBaseException("", `'${a}' found in 'Order By' parameter is an invalid Entity`);
        return o.value.charAt(o.value.length - 1) === "." ? l + "." : l
    }(i, e));
    return r = ol(r, "(\\[\\w+\\])", !1, i => i.value.substr(1, i.value.length - 2)), r.split(/, ?/).map(i => {
        let o = i.trim().split(" "),
            s = o.length !== 2 || o[1].toLowerCase() === "asc";
        return {
            attributeParts: o[0].split("."),
            isAscending: s
        }
    })
}
u(GW, "up");

function ji(n) {
    n.stopPropagation(), n.preventDefault()
}
u(ji, "cp");

function P2(n) {
    return M(this, void 0, void 0, function*() {
        if (n instanceof Mo)
            for (let e = 0; e < n.length; e++) {
                let t = n.getItem(e);
                yield k1(t)
            } else n instanceof Be && (yield k1(n))
    })
}
u(P2, "dp");

function k1(n) {
    return M(this, void 0, void 0, function*() {
        let e = n.getAttributes().map(t => M(this, void 0, void 0, function*() {
            let r = n[t.attrName];
            t.dataType === T.Record ? yield k1(r): t.dataType === T.BinaryData && (yield r.loadContent())
        }));
        yield Promise.all(e)
    })
}
u(k1, "hp");
var KW = Object.freeze({
        __proto__: null,
        getDynamicSortsObjGenerator: u(function(n, e) {
            let t = GW(n, e);
            return r => t.map(i => {
                let o = r;
                for (let a = 0; a < i.attributeParts.length; a++) {
                    let l = (s = i.attributeParts[a], s.charAt(0).toLowerCase() + s.substr(1) + "Attr").toLowerCase(),
                        d = o.getAttributes().filter(c => c.attrName.toLowerCase() === l);
                    if (d.length === 0) throw new Q.DataBaseException("", `Invalid attribute in 'Order By' parameter: ${i.attributeParts.join(".")}`);
                    o = o[d[0].attrName]
                }
                var s;
                return {
                    value: o,
                    isAscending: i.isAscending
                }
            })
        }, "getDynamicSortsObjGenerator"),
        loadBinaryDataContent: P2,
        markEventAsHandled: ji
    }),
    rP = "IndexedDBTransaction",
    Hi = class Hi extends dy {
        set onComplete(e) {
            this.transaction.oncomplete = () => (this.allowTraces && z(rP, `Committing transaction ${this.transactionId}`), e())
        }
        set onAbort(e) {
            this.transaction.onabort = () => (qe(rP, `Aborting transaction ${this.transactionId}: ${this.transaction.error}`), e(this.transaction.error))
        }
        executeQuery(e) {
            return e(this.transaction)
        }
        constructor(e, t, r) {
            super(e, r), this.transaction = t, Hi.lastTransactionId = (Hi.lastTransactionId + 1) % 1e12, this.transactionId = Hi.lastTransactionId + 1
        }
        renameTable(e, t) {
            return M(this, void 0, void 0, function*() {
                this.transaction.objectStore(e).name = t
            })
        }
        getRecord(e, t) {
            return new Promise((r, i) => {
                this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);
                let o = this.transaction.objectStore(e.tableName).get(Hi.wrapKeyIfNeeded(t, e));
                o.onsuccess = () => {
                    this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`), r(o.result || null)
                }, o.onerror = s => {
                    this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`, this.transaction.error), ji(s), i(this.transaction.error)
                }
            })
        }
        removeRecord(e, t) {
            return new Promise((r, i) => {
                this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`);
                let o = this.transaction.objectStore(e.tableName).delete(Hi.wrapKeyIfNeeded(t, e));
                o.onsuccess = () => {
                    this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`), r()
                }, o.onerror = s => {
                    this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`, o.error), ji(s), i(o.error)
                }
            })
        }
        removeAllRecords(e) {
            return new Promise((t, r) => {
                this.debug(`Deleting all records from table '${e.tableName}'`);
                let i = this.transaction.objectStore(e.tableName).clear();
                i.onsuccess = () => {
                    this.debug(`Deleted all records from table '${e.tableName}' successfully`), t()
                }, i.onerror = o => {
                    this.warning(`Error deleting all records from table '${e.tableName}'`, i.error), ji(o), r(i.error)
                }
            })
        }
        insertRecord(e, t) {
            return new Promise((r, i) => {
                this.debug(`Inserting record on table '${e.tableName}'`);
                let o = this.transaction.objectStore(e.tableName).add(t);
                o.onsuccess = () => {
                    this.debug(`Inserted record on table '${e.tableName}' successfully`), r(Hi.unwrapKeyIfNeeded(o))
                }, o.onerror = s => {
                    this.warning(`Error inserting record on table '${e.tableName}'`, o.error), ji(s), i(o.error)
                }
            })
        }
        upsertRecord(e, t) {
            return new Promise((r, i) => {
                this.debug(`Adding/Updating record on table '${e.tableName}'`);
                let o = this.transaction.objectStore(e.tableName).put(t);
                o.onsuccess = () => {
                    this.debug(`Added/Updated record on table '${e.tableName}' successfully`), r(Hi.unwrapKeyIfNeeded(o))
                }, o.onerror = s => {
                    this.warning(`Error adding/updating record on table '${e.tableName}'`, o.error), ji(s), i(o.error)
                }
            })
        }
        upsertAllRecords(e, t) {
            return M(this, void 0, void 0, function*() {
                this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`);
                try {
                    for (let r of t) yield this.upsertRecord(e, r);
                    this.debug(`Added/updated ${t==null?void 0:t.length} record(s) on table '${e.tableName}' successfully`)
                } catch (r) {
                    throw this.warning(`Error adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`, r), r
                }
            })
        }
        updateRecord(e, t) {
            return M(this, void 0, void 0, function*() {
                return new Promise((r, i) => {
                    let o = PI(e);
                    if ((o == null ? void 0 : o.length) === 0) {
                        let a = new Error(`Cannot perform an update on table '${e.tableName}' since it has no primary key column`);
                        return this.warning(a.message), i(a)
                    }
                    this.debug(`Checking if record exists on table '${e.tableName}'`);
                    let s = this.transaction.objectStore(e.tableName).get(o == null ? void 0 : o.map(a => t[a]));
                    s.onsuccess = () => {
                        try {
                            if (!s.result) {
                                let l = new Error(`Record to update does not exist on table '${e.tableName}'`);
                                return this.warning(l.message), i(l)
                            }
                            this.debug(`Updating record on table '${e.tableName}'`);
                            let a = this.transaction.objectStore(e.tableName).put(t);
                            a.onsuccess = () => {
                                this.debug(`Updated record on table '${e.tableName}' successfully`), r()
                            }, a.onerror = l => {
                                this.warning(`Error updating record on table '${e.tableName}'`, a.error), ji(l), i(a.error)
                            }
                        } catch (a) {
                            this.warning(`Error updating record on table '${e.tableName}'`, a), i(a)
                        }
                    }, s.onerror = a => {
                        this.warning(`Error checking if record exists on table '${e.tableName}'`, s.error), ji(a), i(s.error)
                    }
                })
            })
        }
        addColumn(e, t) {
            return M(this, void 0, void 0, function*() {
                yield new Promise((i, o) => {
                    this.debug(`Adding column '${ly(t)}' on table '${e.tableName}'`);
                    try {
                        this.transaction.objectStore(e.tableName).createIndex(t.columnName, t.columnName), i()
                    } catch (s) {
                        this.warning(`Error adding column '${ly(t)}' on table '${e.tableName}'`, s), o(s)
                    }
                });
                let r = yield this.getAllRecords(e);
                for (let i of r) i[t.columnName] = t.serializedDefault, yield this.upsertRecord(e, i)
            })
        }
        existsColumn(e, t) {
            return M(this, void 0, void 0, function*() {
                return new Promise((r, i) => {
                    this.debug(`Checking if column '${t}' exists on table '${e}'`);
                    try {
                        r(this.transaction.objectStoreNames.contains(e) && this.transaction.objectStore(e).indexNames.contains(t))
                    } catch (o) {
                        this.warning(`Error checking if column '${t}' exists on table '${e}'`, o), i(o)
                    }
                })
            })
        }
        findRecords(e, t) {
            return new Promise((r, i) => {
                this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria.`);
                let o = [],
                    s = Ss(e).length > 0,
                    a = this.transaction.objectStore(e.tableName).openCursor();
                a.onsuccess = () => {
                    let l = a.result;
                    if (l) {
                        let d = l.value;
                        s || (d = Object.assign(Object.assign({}, d), {
                            $KEY: l.primaryKey
                        })), Object.keys(t).reduce((c, h) => c && t.hasOwnProperty(h) && d[xI(h)] === t[h], !0) && o.push(d), l.continue()
                    } else this.debug(`Search on table '${e.tableName}' found ${o.length} record(s) matching the specified criteria.`), r(o)
                }, a.onerror = l => {
                    this.warning(`Error searching for records on table '${e.tableName}'`, a.error), ji(l), i(a.error)
                }
            })
        }
        getAllRecords(e) {
            return new Promise((t, r) => {
                this.debug(`Getting all records from table '${e.tableName}'`);
                let i = this.transaction.objectStore(e.tableName).getAll();
                i.onsuccess = () => {
                    this.debug(`Retrieved all the records from table '${e.tableName}'`), t(i.result)
                }, i.onerror = o => {
                    this.warning(`Error retrieving all the records from table '${e.tableName}'`, i.error), ji(o), r(i.error)
                }
            })
        }
        static wrapKeyIfNeeded(e, t) {
            return Ss(t).length > 0 ? e instanceof Array ? e : [e] : e
        }
        static unwrapKeyIfNeeded(e) {
            return e.result instanceof Array ? e.result[0] : e.result
        }
    };
u(Hi, "fp");
var Gh = Hi;
Gh.lastTransactionId = 0;
var ya = "IndexedDBDatabase",
    Ec = class Ec extends cy {
        static asSafeDbName(e) {
            return e || ""
        }
        static executeTransactionPromiseWithRetry(e) {
            return M(this, arguments, void 0, function(t) {
                let r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 3;
                return function*() {
                    let i, o = !0,
                        s = 0;
                    for (; o;) {
                        s++;
                        try {
                            i = yield new Promise(t), o = !1
                        } catch (a) {
                            if (!/the transaction is inactive or finished/i.test(a.message) || s >= r) throw a
                        }
                    }
                    return i
                }()
            })
        }
        static open(e, t) {
            return e = this.asSafeDbName(e), new Promise((r, i) => {
                if (this.cache[e]) r(this.cache[e]);
                else {
                    if (typeof window == "undefined") return i(new Q.SystemException("Database is only available in the browser/web view"));
                    if (!("indexedDB" in window)) return z(ya, "This browser doesn't support IndexedDB"), i(new Q.SystemException("This browser doesn't support IndexedDB"));
                    if (o = navigator.userAgent, /^((?!chrome|android).)*safari/i.test(o) && function(a) {
                            try {
                                return a.self !== a.top
                            } catch (l) {
                                return !0
                            }
                        }(window)) {
                        let a = `Your app requires native access to a Local Storage database that is not available in your browser while using an iframe.
Please test your app in your mobile device or use Google Chrome`;
                        return alert(a), i(new Q.SystemException(a))
                    }
                    z(ya, `Opening database '${e}' on IndexedDB`);
                    let s = window.indexedDB.open(e);
                    s.onsuccess = () => {
                        z(ya, `Database '${e}' opened successfully with version '${s.result.version}'`);
                        let a = s.result;
                        this.cache[e] = new Ec(e, a, t), r(this.cache[e])
                    }, s.onerror = () => {
                        qe(ya, `Error opening database '${e}'`), i(new Q.OpenDatabaseException(`Could not open database '${e}'`))
                    }
                }
                var o
            })
        }
        constructor(e, t, r) {
            super(e, "IndexedDB"), this.databaseImplementation = t, this.onNewDatabaseVersionDetected = r, this.setOnVersionChangeEvent()
        }
        setOnVersionChangeEvent() {
            this.databaseImplementation.onversionchange = () => {
                this.databaseImplementation.close(), this.onNewDatabaseVersionDetected && this.onNewDatabaseVersionDetected()
            }
        }
        close() {
            return z(ya, `Closing database ${this.name} with version '${this.databaseImplementation.version}'`), this.databaseImplementation.close(), delete Ec.cache[this.name], Promise.resolve()
        }
        testConnection() {
            return Promise.resolve()
        }
        executeQuery(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return this.executeReadTransaction(i => i.executeQuery(e), t, r)
        }
        executeTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return this.innerExecuteDMLTransaction(e, t, "readwrite", r)
        }
        executeReadTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return this.innerExecuteDMLTransaction(e, t, "readonly", r)
        }
        innerExecuteDMLTransaction(e, t, r, i) {
            return this.databaseImplementation.objectStoreNames.length === 0 ? this.innerExecuteIDBTransactionWithoutObjectStores(e, t) : this.innerExecuteIDBTransaction(e, t, r, i)
        }
        innerExecuteIDBTransaction(e, t, r, i) {
            return Ec.executeTransactionPromiseWithRetry((o, s) => M(this, void 0, void 0, function*() {
                let a = null,
                    l = null,
                    d = i ? i.map(f => f.tableName) : [];
                if (d.length === 0)
                    for (let f = 0; f < this.databaseImplementation.objectStoreNames.length; f++) d.push(this.databaseImplementation.objectStoreNames.item(f));
                let c = this.databaseImplementation.transaction(d, r),
                    h = new Gh(t, c, this.databaseImplementation);
                h.onComplete = () => M(this, void 0, void 0, function*() {
                    yield P2(a), o(a)
                }), h.onAbort = f => s(l != null ? l : f);
                try {
                    a = yield e(h)
                } catch (f) {
                    l = f, c == null || c.abort()
                }
            }))
        }
        innerExecuteIDBTransactionWithoutObjectStores(e, t) {
            return e(new dy(t, this.databaseImplementation))
        }
        executeUpgradeTransaction(e) {
            return M(this, arguments, void 0, function(t) {
                var r = this;
                let i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
                return function*() {
                    return new Promise((o, s) => {
                        let a = null,
                            l = null,
                            d = r.databaseImplementation.version;
                        r.databaseImplementation.close();
                        let c = window.indexedDB.open(r.name, d + 1);
                        c.onsuccess = () => (r.debug(`Database '${r.name}' opened successfully with version '${d+1}'`, i), r.databaseImplementation = c.result, r.setOnVersionChangeEvent(), o(a)), c.onerror = () => (qe(ya, `Error opening '${r.name}' database with version '${d+1}'`), s(l != null ? l : c.error)), c.onupgradeneeded = () => {
                            r.debug(`Upgrading database '${r.name}' with version '${d+1}'`, i), r.databaseImplementation = c.result;
                            let h = new Gh(i, c.transaction, c.result);
                            h.onAbort = f => l = l != null ? l : f, t(h).then(f => a = f).catch(f => {
                                var g;
                                l = f, (g = c.transaction) === null || g === void 0 || g.abort()
                            })
                        }
                    })
                }()
            })
        }
        debug(e) {
            (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0) && z(ya, e)
        }
    };
u(Ec, "vp");
var hy = Ec,
    U1;
hy.cache = {},
    function(n) {
        n[n.Read = 0] = "Read", n[n.Write = 1] = "Write", n[n.Upgrade = 2] = "Upgrade"
    }(U1 || (U1 = {}));
var dr = U1,
    $i = new Map;

function iP(n) {
    var e;
    return (e = $i.get(n)) !== null && e !== void 0 ? e : ""
}
u(iP, "wp");
$i.set(ce.BINARY_DATA, "BLOB"), $i.set(ce.BOOLEAN, "BOOLEAN"), $i.set(ce.DATE, "DATE"), $i.set(ce.DATE_TIME, "DATETIME"), $i.set(ce.DECIMAL, "REAL"), $i.set(ce.INTEGER, "INTEGER"), $i.set(ce.LONGINTEGER, "BIGINT"), $i.set(ce.TEXT, "TEXT"), $i.set(ce.TIME, "TIME");
var uc = "The transaction is read-only",
    Hm = "The database is not running a version change transaction",
    yS = "WebSQLTransaction",
    Vn = class Vn {
        get transactionId() {
            return this._transactionId
        }
        constructor(e, t, r) {
            this.allowTraces = e, this.transaction = t, this.mode = r, Vn.lastTransactionId = (Vn.lastTransactionId + 1) % 1e12, this._transactionId = Vn.lastTransactionId + 1, this.allowTraces && z(yS, `Starting transaction ${this.transactionId}`)
        }
        executeQuery(e) {
            return e(this.transaction)
        }
        getColumnDeclaration(e, t) {
            let r, i = `${iP(t.type)}`;
            if (t.isPrimaryKey) {
                if (e.idIsAutoNumber === Dn.YesIfEmpty || e.idIsAutoNumber === Dn.Yes) return t.type === ce.LONGINTEGER && (i = `${iP(ce.INTEGER)}`), i += " PRIMARY KEY AUTOINCREMENT NOT NULL", {
                    declaration: `"${t.columnName}" ${i}`
                };
                r = `"${t.columnName}"`
            }
            if (t.length && (i += `(${t.length}${t.decimals?","+t.decimals:""})`), t.serializedDefault !== void 0) {
                let o = t.serializedDefault;
                typeof o == "string" && (o = `'${o.replace("'","''")}'`), i += ` DEFAULT ${o}`
            }
            return {
                declaration: `"${t.columnName}" ${i}`,
                primaryKeyDeclaration: r
            }
        }
        createTable(e) {
            return new Promise((t, r) => {
                if (this.debug(`Creating table '${e.tableName}'`), this.mode < dr.Upgrade) {
                    let a = new Error(Hm);
                    return this.warning(`Error creating table '${e.tableName}'`, a), r(a)
                }
                let i = e.attributes.map(a => this.getColumnDeclaration(e, a)),
                    o = i.filter(a => !!a.primaryKeyDeclaration).map(a => a.primaryKeyDeclaration),
                    s = i.map(a => a.declaration);
                o.length > 0 && s.push(`PRIMARY KEY (${o.join(",")})`), this.transaction.executeSql(`CREATE TABLE "${e.tableName}" (${s.join(",")})`, void 0, (a, l) => {
                    this.debug(`Table '${e.tableName}' created with success`), t()
                }, (a, l) => {
                    let d = new Error(l.message.toString());
                    return this.warning(`Error creating table '${e.tableName}'`, d), r(d), !1
                })
            })
        }
        deleteTableIfExists(e) {
            let t;
            return t = typeof e == "string" ? e : e.tableName, new Promise((r, i) => {
                if (this.debug(`Deleting table '${t}'`), this.mode < dr.Upgrade) {
                    let o = new Error(Hm);
                    return this.warning(`Error deleting table '${t}'`, o), i(o)
                }
                this.transaction.executeSql(`DROP TABLE IF EXISTS "${t}"`, void 0, (o, s) => {
                    this.debug(`Table '${t}' deleted with success`), r()
                }, (o, s) => {
                    let a = new Error(s.message.toString());
                    return this.warning(`Error deleting table '${t}'`, a), i(a), !1
                })
            })
        }
        renameTable(e, t) {
            return new Promise((r, i) => M(this, void 0, void 0, function*() {
                if (this.debug(`Renaming table '${e}'`), this.mode < dr.Upgrade) {
                    let o = new Error(Hm);
                    return this.warning(`Error renaming table '${e}'`, o), i(o)
                }
                this.transaction.executeSql(`ALTER TABLE "${e}" RENAME TO "${t}"`, void 0, (o, s) => {
                    this.debug(`Table '${e}' renamed to '${t}' with success`), r()
                }, (o, s) => {
                    let a = new Error(s.message.toString());
                    return this.warning(`Error renaming table '${e}'`, a), i(a), !1
                })
            }))
        }
        existsTable(e) {
            let t;
            return t = typeof e == "string" ? e : e.tableName, new Promise((r, i) => {
                this.debug(`Checking if table '${t}' exists`), this.transaction.executeSql(`SELECT * FROM sqlite_master WHERE type = 'table' AND UPPER(name) = UPPER("${t}")`, void 0, (o, s) => {
                    this.debug(`Table '${t}' checked with success`), r(s.rows.length > 0)
                }, (o, s) => {
                    let a = new Error(s.message.toString());
                    return this.warning(`Error checking if table '${t}' exists`, a), i(a), !1
                })
            })
        }
        addColumn(e, t) {
            return new Promise((r, i) => M(this, void 0, void 0, function*() {
                let o = ly(t);
                if (this.debug(`Adding column '${o}' on table '${e.tableName}'`), this.mode < dr.Upgrade) {
                    let l = new Error(Hm);
                    return this.warning(`Error adding column '${o}'`, l), i(l)
                }
                let s = u((l, d) => {
                        this.debug(`Column '${o}' added with success`), r()
                    }, "s"),
                    a = u((l, d) => {
                        let c = new Error(d.message.toString());
                        return this.warning(`Error adding column '${o}'`, c), i(c), !1
                    }, "a");
                this.transaction.executeSql(`ALTER TABLE "${e.tableName}" ADD ${this.getColumnDeclaration(e,t).declaration}`, void 0, (l, d) => {
                    l.executeSql(`UPDATE "${e.tableName}" SET "${t.columnName}" = ?`, [t.serializedDefault], s, a)
                }, a)
            }))
        }
        existsColumn(e, t) {
            return new Promise(r => {
                this.debug(`Checking if column '${t}' exists on table '${e}'`), this.transaction.executeSql(`SELECT "${e}"."${t}" FROM "${e}" LIMIT 0`, void 0, () => {
                    this.debug(`Column '${t}' exists on table '${e}'`), r(!0)
                }, () => (this.debug(`Column '${t}' does not exist on table '${e}'`), r(!1), !1))
            })
        }
        getRecord(e, t) {
            return new Promise((r, i) => {
                this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);
                let o = Vn.wrapKeyIfNeeded(t),
                    s = e.attributes.map(c => `"${c==null?void 0:c.columnName}"`).join(", "),
                    a = `"${e.tableName}"`,
                    l = [...o],
                    d = e.attributes.filter(c => c == null ? void 0 : c.isPrimaryKey).map(c => `"${c==null?void 0:c.columnName}" = ?`).join(" and ");
                this.transaction.executeSql(`SELECT ${s} FROM ${a} WHERE ${d}`, l, (c, h) => {
                    this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`);
                    let f = Vn.convertSQLResultSetToDatabaseRecord(e, h);
                    r(f.length > 0 ? f[0] : null)
                }, (c, h) => {
                    let f = new Error(h.message.toString());
                    return this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`, f), i(f), !1
                })
            })
        }
        insertRecord(e, t) {
            return new Promise((r, i) => {
                if (this.debug(`Inserting record on table '${e.tableName}'`), this.mode < dr.Write) {
                    let c = new Error(uc);
                    return this.warning(`Error inserting record on table '${e.tableName}'`, c), i(c)
                }
                let o = e.attributes.filter(c => c == null ? void 0 : c.isPrimaryKey),
                    s = e.attributes.map(c => `"${c==null?void 0:c.columnName}"`).join(", "),
                    a = Vn.concatenateMultipleTimes("?", e.attributes.length, ", "),
                    l = `"${e.tableName}"`,
                    d = e.attributes.map(c => t[c == null ? void 0 : c.columnName] === void 0 ? null : t[c == null ? void 0 : c.columnName]);
                this.transaction.executeSql(`INSERT INTO ${l} (${s}) VALUES (${a})`, d, (c, h) => {
                    var f, g;
                    let p;
                    this.debug(`Inserted record on table '${e.tableName}' successfully`), p = e.idIsAutoNumber === Dn.No || e.idIsAutoNumber === Dn.YesIfEmpty && t[(f = o[0]) === null || f === void 0 ? void 0 : f.columnName] !== null ? t[(g = o[0]) === null || g === void 0 ? void 0 : g.columnName] : h.insertId, r(p)
                }, (c, h) => {
                    let f = new Error(h.message.toString());
                    return this.warning(`Error inserting record on table '${e.tableName}'`, f), i(f), !1
                })
            })
        }
        updateRecord(e, t) {
            return new Promise((r, i) => {
                if (this.debug(`Updating record on table '${e.tableName}'`), this.mode < dr.Write) {
                    let h = new Error(uc);
                    return this.warning(`Error updating record on table '${e.tableName}'`, h), i(h)
                }
                let o = e.attributes.filter(h => !(h != null && h.isPrimaryKey)),
                    s = e.attributes.filter(h => h == null ? void 0 : h.isPrimaryKey),
                    a = o.map(h => `"${h==null?void 0:h.columnName}" = ?`).join(", "),
                    l = s.map(h => `"${h==null?void 0:h.columnName}" = ?`).join(" and "),
                    d = `"${e.tableName}"`,
                    c = [];
                o.forEach(h => c.push(t[h == null ? void 0 : h.columnName])), s.forEach(h => c.push(t[h == null ? void 0 : h.columnName])), this.transaction.executeSql(`UPDATE ${d} SET ${a} WHERE ${l}`, c, (h, f) => {
                    f.rowsAffected === 0 ? this.debug(`Record to update does not exist on table '${e.tableName}'`) : this.debug(`Updated record on table '${e.tableName}' successfully`), r()
                }, (h, f) => {
                    let g = new Error(f.message.toString());
                    return this.warning(`Error updating record on table '${e.tableName}'`, g), i(g), !1
                })
            })
        }
        upsertRecord(e, t) {
            return new Promise((r, i) => {
                if (this.debug(`Adding/updating record on table '${e.tableName}'`), this.mode < dr.Write) {
                    let c = new Error(uc);
                    return this.warning(`Error adding/updating record on table '${e.tableName}'`, c), i(c)
                }
                let o = e.attributes.filter(c => c == null ? void 0 : c.isPrimaryKey),
                    s = e.attributes.map(c => `"${c==null?void 0:c.columnName}"`).join(", "),
                    a = Vn.concatenateMultipleTimes("?", e.attributes.length, ", "),
                    l = `"${e.tableName}"`,
                    d = e.attributes.map(c => t[c == null ? void 0 : c.columnName]);
                this.transaction.executeSql(`INSERT OR REPLACE INTO ${l} (${s}) VALUES (${a})`, d, (c, h) => {
                    var f, g;
                    let p;
                    this.debug(`Added/updated record on table '${e.tableName}' successfully`), p = e.idIsAutoNumber === Dn.No || e.idIsAutoNumber === Dn.YesIfEmpty && t[(f = o[0]) === null || f === void 0 ? void 0 : f.columnName] !== null ? t[(g = o[0]) === null || g === void 0 ? void 0 : g.columnName] : h.insertId, r(p)
                }, (c, h) => {
                    let f = new Error(h.message.toString());
                    return this.warning(`Error adding/updating record on table '${e.tableName}'`, f), i(f), !1
                })
            })
        }
        upsertAllRecords(e, t) {
            return M(this, void 0, void 0, function*() {
                if (this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`), this.mode < dr.Write) {
                    let r = new Error(uc);
                    throw this.warning(`Error adding/updating records on table '${e.tableName}'`, r), r
                }
                try {
                    e.attributes.some(r => (r == null ? void 0 : r.type) === ce.BINARY_DATA) ? yield this.innerUpsertAllSingle(e, t): yield this.innerUpsertAllBulk(e, t), this.debug(`Added/updated ${t==null?void 0:t.length} record(s) on table '${e.tableName}' successfully`)
                } catch (r) {
                    throw this.warning(`Error adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`, r), r
                }
            })
        }
        innerUpsertAllSingle(e, t) {
            return M(this, void 0, void 0, function*() {
                this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}' one by one`);
                for (let r of t) yield this.upsertRecord(e, r)
            })
        }
        innerUpsertAllBulk(e, t) {
            return M(this, void 0, void 0, function*() {
                let r = Math.floor(Vn.MaxQueryParameters / e.attributes.length);
                if (r === 0) return this.innerUpsertAllSingle(e, t);
                let i = [],
                    o = Math.ceil(t.length / r);
                this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}' in ${o} chunk(s) of ${r} record(s) each`);
                for (let a = 0; a < o; a++) {
                    let l = [],
                        d = 0;
                    for (; d < r;) {
                        let h = a * r + d;
                        if (h === t.length) break;
                        let f = t[h];
                        e.attributes.forEach(g => l.push(f[g == null ? void 0 : g.columnName])), d++
                    }
                    let c = this.createUpsertBulkQuery(e, d);
                    i.push({
                        query: c,
                        argList: l
                    })
                }
                let s = 0;
                for (let a of i) this.debug(`Adding/updating chunk ${++s} of ${o} on table '${e.tableName}'`), yield this.wrapExecuteSqlOnPromise(a, e)
            })
        }
        wrapExecuteSqlOnPromise(e, t) {
            return new Promise((r, i) => {
                this.transaction.executeSql(e.query, e.argList, (o, s) => {
                    this.debug(`Added/Updated bulk of records on table '${t.tableName}' successfully`), r()
                }, (o, s) => {
                    let a = new Error(s.message.toString());
                    return this.warning(`Error adding/updating bulk of records on table '${t.tableName}'`, a), i(a), !1
                })
            })
        }
        createUpsertBulkQuery(e, t) {
            let r = e.attributes.map(s => `"${s==null?void 0:s.columnName}"`).join(", "),
                i = `"${e.tableName}"`,
                o = `(${Vn.concatenateMultipleTimes("?",e.attributes.length,", ")})`;
            return `INSERT OR REPLACE INTO ${i} (${r}) VALUES ${Vn.concatenateMultipleTimes(o,t,", ")}`
        }
        removeRecord(e, t) {
            return new Promise((r, i) => {
                if (this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`), this.mode < dr.Write) {
                    let d = new Error(uc);
                    return this.warning(`Error deleting record from table '${e.tableName}'`, d), i(d)
                }
                let o = Vn.wrapKeyIfNeeded(t),
                    s = `"${e.tableName}"`,
                    a = [...o],
                    l = e.attributes.filter(d => d == null ? void 0 : d.isPrimaryKey).map(d => `"${d==null?void 0:d.columnName}" = ?`).join(" AND ");
                this.transaction.executeSql(`DELETE FROM ${s} WHERE ${l===""?"ROWID = ?":l}`, a, (d, c) => {
                    this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`), r()
                }, (d, c) => {
                    let h = new Error(c.message.toString());
                    return this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`, h), i(h), !1
                })
            })
        }
        removeAllRecords(e) {
            return new Promise((t, r) => {
                if (this.debug(`Deleting all records from table '${e.tableName}'`), this.mode < dr.Write) {
                    let o = new Error(uc);
                    return this.warning(`Error deleting all records from table '${e.tableName}'`, o), r(o)
                }
                let i = `"${e.tableName}"`;
                this.transaction.executeSql(`DELETE FROM ${i}`, void 0, (o, s) => {
                    this.debug(`Deleted all records from table '${e.tableName}' successfully`), t()
                }, (o, s) => {
                    let a = new Error(s.message.toString());
                    return this.warning(`Error deleting all records from table '${e.tableName}'`, a), r(a), !1
                })
            })
        }
        findRecords(e, t) {
            return new Promise((r, i) => {
                this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria`);
                let o = (Ss(e).length > 0 ? "" : '"rowid" AS "ROWID", ') + e.attributes.map(d => `"${d==null?void 0:d.columnName}"`).join(", "),
                    s = `"${e.tableName}"`,
                    a = "",
                    l = [];
                for (let d in t) t.hasOwnProperty(d) && (a += `${a.length>0?" AND ":""}"${xI(d)}" = ?`, l.push(t[d]));
                this.transaction.executeSql(`SELECT ${o} FROM ${s} WHERE ${a}`, l, (d, c) => {
                    this.debug(`Search on table '${e.tableName}' found ${c.rows.length} record(s) matching the specified criteria`);
                    let h = Vn.convertSQLResultSetToDatabaseRecord(e, c);
                    r(h)
                }, (d, c) => {
                    let h = new Error(c.message.toString());
                    return this.warning(`Error searching for records on table '${e.tableName}'\r
${h}`, h), i(h), !1
                })
            })
        }
        getAllRecords(e) {
            return new Promise((t, r) => {
                this.debug(`Getting all records on table '${e.tableName}'`);
                let i = (Ss(e).length > 0 ? "" : '"rowid" AS "ROWID", ') + e.attributes.map(s => `"${s==null?void 0:s.columnName}"`).join(", "),
                    o = `"${e.tableName}"`;
                this.transaction.executeSql(`SELECT ${i} FROM ${o}`, void 0, (s, a) => {
                    this.debug(`Retrieved all records from table '${e.tableName}' successfully`);
                    let l = Vn.convertSQLResultSetToDatabaseRecord(e, a);
                    t(l)
                }, (s, a) => {
                    let l = new Error(a.message.toString());
                    return this.warning(`Error retrieving all records from table '${e.tableName}'`, l), r(l), !1
                })
            })
        }
        debug(e) {
            this.allowTraces && z(yS, `${e} on transaction ${this.transactionId}`)
        }
        warning(e, t) {
            qe(yS, `${e} on transaction ${this.transactionId}${t?`: ${t.message}`:""}`, Oe.Client)
        }
        static wrapKeyIfNeeded(e) {
            return e instanceof Array ? e : [e]
        }
        static convertSQLResultSetToDatabaseRecord(e, t) {
            let r = Ss(e).length > 0,
                i = [];
            if (t.rows.length > 0)
                for (let o = 0; o < t.rows.length; o++) {
                    let s = t.rows.item(o),
                        a = {};
                    r || (a.$KEY = s.ROWID), e.attributes.forEach(l => {
                        a[l == null ? void 0 : l.columnName] = s[l == null ? void 0 : l.columnName]
                    }), i.push(a)
                }
            return i
        }
        static concatenateMultipleTimes(e, t, r) {
            return Array.apply(null, new Array(t)).map(() => e).join(`${r}`)
        }
    };
u(Vn, "Np");
var Kh = Vn;
Kh.MaxQueryParameters = 500, Kh.lastTransactionId = 0;
var lh = "Could not open database",
    ba = "WebSQLDatabase",
    Yn = class Yn extends cy {
        static open(e) {
            return M(this, void 0, void 0, function*() {
                return this.cache[e] || (this.cache[e] = yield Yn.innerOpen(e)), this.cache[e]
            })
        }
        static innerOpen(e) {
            return M(this, void 0, void 0, function*() {
                if (typeof window == "undefined") throw new Q.SystemException("Database is only available in the browser/web view");
                return on() ? Yn.openPluginDatabase(e) : Yn.isWebSQLSupported() ? Yn.openWebSQLDatabase(e) : void Yn.throwDatabaseRequiredError()
            })
        }
        static openPluginDatabase(e) {
            return M(this, void 0, void 0, function*() {
                yield Rr();
                let t = window;
                if (t.sqlitePlugin) return z(Yn, `Opening database '${e}'`), new Promise((r, i) => {
                    try {
                        t.sqlitePlugin.openDatabase({
                            name: e,
                            location: "default"
                        }, o => {
                            o ? (z(Yn, `Database '${e}' opened successfully`), r(new Yn(e, o))) : (qe(ba, `Error opening database '${e}'`), i(new Q.OpenDatabaseException(`${lh} '${e}'`)))
                        }, o => {
                            qe(ba, `Error opening database '${e}' ${o.message}`), i(new Q.OpenDatabaseException(`${lh} '${e}': ${o.message.toString()}`))
                        })
                    } catch (o) {
                        i(new Q.OpenDatabaseException(`${lh} '${e}': ${o.message.toString()}`))
                    }
                });
                throw new Q.OpenDatabaseException("No database driver available")
            })
        }
        static openWebSQLDatabase(e) {
            let t = window,
                r;
            try {
                z(Yn, `Opening database '${e}'`), r = t.openDatabase(e, "1.0", e, 5242880)
            } catch (i) {
                throw new Q.OpenDatabaseException(`${lh} '${e}': ${i.message.toString()}`)
            }
            if (r) return z(Yn, `Database '${e}' opened successfully`), new Yn(e, r);
            throw qe(ba, `Error opening database '${e}'`), new Q.OpenDatabaseException(`${lh} '${e}'`)
        }
        static isWebSQLSupported() {
            return !!window.openDatabase
        }
        static throwDatabaseRequiredError() {
            let e = `Your app requires native access to a Local Storage database that is not available in your browser.

Please test your app in your mobile device` + (window.chrome ? "" : ", or use Google Chrome web browser") + ".";
            throw alert(e), new Q.SystemException(e)
        }
        constructor(e, t) {
            super(e, "WebSQL"), this.databaseImplementation = t
        }
        testConnection() {
            return M(this, void 0, void 0, function*() {
                let e = 0;
                hr(ba, "Starting to test on database connections. Performing #5 test queries.", Oe.Internal), yield Promise.all(Array.apply(null, new Array(5)).map(() => new Promise(t => M(this, void 0, void 0, function*() {
                    try {
                        yield this.executeTransaction(r => r.executeQuery(i => new Promise((o, s) => {
                            i.executeSql("SELECT 1", void 0, () => o(), (a, l) => (s(new Error(l.message.toString())), !1))
                        })))
                    } catch (r) {
                        e++, xe("WebSQLDatabase", "Failed to execute canary query (probably due to zombie transaction)", "OS-CLRT-60407", r)
                    } finally {
                        t()
                    }
                })))), hr(ba, `Finished tests on database connections. #${5-e} out of #5 successfull queries.`, Oe.Internal)
            })
        }
        close() {
            return this.databaseImplementation = null, delete Yn.cache[this.name], Promise.resolve()
        }
        executeQuery(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return this.executeReadTransaction(r => r.executeQuery(e), t)
        }
        executeTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return this.innerExecuteTransaction(e, dr.Write, t, r)
        }
        executeReadTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return this.innerExecuteTransaction(e, dr.Read, t, r)
        }
        executeUpgradeTransaction(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
            return this.innerExecuteTransaction(e, dr.Upgrade, t)
        }
        innerExecuteTransaction(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0,
                i = arguments.length > 3 ? arguments[3] : void 0;
            return new Promise((o, s) => {
                let a, l, d;
                this.innerExecuteTransactionInMode(t === dr.Read, c => M(this, void 0, void 0, function*() {
                    a = new Kh(r, c, t);
                    try {
                        l = yield e(a)
                    } catch (h) {
                        d = h, c.executeSql("ABORT_TRANSACTION", void 0, () => {}, () => !0)
                    }
                }), c => {
                    let h = d != null ? d : new Error(c.message.toString());
                    r && qe(ba, `Aborting transaction ${a==null?void 0:a.transactionId}: ${h}`, Oe.Client), s(h)
                }, () => {
                    this.debug(`Committing transaction ${a==null?void 0:a.transactionId}`, r), o(l)
                })
            })
        }
        innerExecuteTransactionInMode(e, t, r, i) {
            var o, s;
            e ? (o = this.databaseImplementation) === null || o === void 0 || o.readTransaction(t, r, i) : (s = this.databaseImplementation) === null || s === void 0 || s.transaction(t, r, i)
        }
        debug(e) {
            (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0) && z(ba, e)
        }
    };
u(Yn, "Rp");
var fy = Yn;
fy.cache = {};
var k2 = u(function() {
        for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++) e[t] = arguments[t];
        return M(void 0, [...e], void 0, function() {
            let r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Ti;
            return function*() {
                yield r.initializeManifestLoader(), yield r.initialize()
            }()
        })
    }, "Cp"),
    U2 = u(function(n) {
        for (var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) t[r - 1] = arguments[r];
        return M(void 0, [n, ...t], void 0, function(i) {
            let {
                onSettingsUpdated: o
            } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            return function*() {
                i.register(Y.SettingsManager, () => new zS({
                    onSettingsUpdated: o
                })), yield i.resolve(Y.SettingsManager).update()
            }()
        })
    }, "xp"),
    M1, M2, $r = "Application",
    iv = {
        hasRenderedSplashInSession: new Jr(vn.Session, "HasRenderedSplashInSession", !1),
        pendingUpgradeFeedback: new Jr(vn.Session, "PendingUpgradeFeedback")
    },
    ov = u((n, e, t) => M(void 0, void 0, void 0, function*() {
        var r;
        if (t === void 0 && (t = (r = de.resolve(Y.Auth)) === null || r === void 0 ? void 0 : r.getInstance()), t) return yield t.getValidAccessToken(n, e)
    }), "Up"),
    GA = class GA {
        constructor() {
            M1.add(this), this.showingSplashScreen = !1, this.isApplicationReady = !1
        }
        setApplicationDefinition(e) {
            fP(e), wP(e.applicationKey), on() && function(t) {
                M(this, arguments, void 0, function(r) {
                    let {
                        version: i,
                        ensureReady: o = Rr,
                        getNativeAppInfo: s = Ok
                    } = r;
                    return function*() {
                        yield o();
                        let a = s();
                        if (typeof(a == null ? void 0 : a.setOSApplicationVersion) == "function") try {
                            a.setOSApplicationVersion(i)
                        } catch (l) {
                            yield hr("Native", "Failed to set app version", Oe.Internal)
                        }
                    }()
                })
            }({
                version: e.appVersion
            })
        }
        tryUpgrade(e, t, r, i) {
            return M(this, void 0, void 0, function*() {
                let o = yield Ti.upgradeVersion(e, t);
                return o && (yield i == null ? void 0 : i(), r()), o
            })
        }
        processInitializationError(e, t) {
            if (e !== 0) throw t;
            this.handleError(t)
        }
        initialize(e) {
            let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0,
                r = arguments.length > 2 ? arguments[2] : void 0,
                i = arguments.length > 3 ? arguments[3] : void 0,
                o = arguments.length > 4 ? arguments[4] : void 0;
            return Ic("Application initialize"), uf(() => M(this, void 0, void 0, function*() {
                yield y2(de, {
                    applicationDefinition: e,
                    application: this
                });
                let s = L2(de, {
                        dateTimeFormat: r,
                        numberFormat: i
                    }),
                    a = U2(de, {
                        onSettingsUpdated: Ts(this, M1, "m", M2)
                    }),
                    l = x2(de),
                    d = k2();
                return yield Promise.all([s, a, l, d]), yield m2({
                    initType: t,
                    executeRequiredScripts: o,
                    application: this
                })
            }), s => this.processInitializationError(t, s), () => ws("Application initialize"))
        }
        triggerApplicationReadyEvent() {
            var e;
            let t = (e = SP()) !== null && e !== void 0 ? e : _P();
            if (t) return z($r, "Calling application ready event handler for " + Qn()), new Promise((r, i) => {
                Lh([t], r, i)
            }).then(r => r.default.fireApplicationReady()).catch(r => {
                this.handleError(r)
            })
        }
        initializeDatabase() {
            return M(this, void 0, void 0, function*() {
                let e;
                z($r, "Initializing application database.");
                let t = sf(),
                    r = on();
                if (t || J1() === "28f21196-030a-4be2-8241-5a4888fb3ca5") z($r, "Initializing database mock for NativeAppBuilder."), e = H8.mockDb(qm());
                else {
                    let i;
                    r ? (z($r, "Initializing WebSQL database service."), i = fy.open(qm())) : (z($r, "Initializing IndexDB database service."), i = hy.open(qm(), () => this.onNewVersionDetected(!0))), e = i.then(o => M(this, void 0, void 0, function*() {
                        return z($r, "Initializing entity service"), de.resolve(Y.EntityService).setDatabase(o), o
                    }))
                }
                return e
            })
        }
        onDatabaseReady(e) {
            y1(e) ? de.resolve(Y.EntityService).setReady() : t2.initDb(e), z($r, "Database initialized successfully")
        }
        onNewVersionDetected(e, t) {
            let r = (t != null ? t : Ti.isAutoUpgradeEnabled) || !on();
            z($r, "New version detected, currentViewHasChanged = " + e);
            let i = !0;
            if (e && r) {
                this.disableDocument();
                let o = u(() => Uo(Es(), i, !0), "e"),
                    s = u(a => a.getApplicationUpgradeRequiredMessage(this.canLoseDataInUpgrade()), "t");
                this.showFeedbackMessage(s, 2, "upgrade-required", o).then(() => u2(!1))
            }
            return r ? Ti.cacheResourcesInBackground(o => {
                i = o
            }) : Promise.resolve()
        }
        onAppInfoReady(e) {
            try {
                Ic("Application onAppInfoReady"), this.updateServerRequestTimeoutOverrideInSeconds(e), this.updateApplicationInfo(e), this.updateClientInfo()
            } finally {
                ws("Application onAppInfoReady")
            }
        }
        updateServerRequestTimeoutOverrideInSeconds(e) {
            var t;
            RP((t = e.data) === null || t === void 0 ? void 0 : t.serverRequestTimeoutOverrideInSeconds)
        }
        updateApplicationInfo(e) {
            var t, r;
            gP((t = e.data) === null || t === void 0 ? void 0 : t.modules), bP((r = e.data) === null || r === void 0 ? void 0 : r.entityModuleNames)
        }
        updateClientInfo() {
            Rr().then(() => function() {
                let e = window.device;
                if (e) {
                    let t = new dv(new hv(e.platform, e.version, e.manufacturer, e.model, e.uuid, e.serial, e.cordova, e.isVirtual));
                    m8.set(RS.serializeClientInfo(t))
                }
            }()).catch(e => qe($r, `Client info update failed: ${e}`))
        }
        shouldRenderSplashScreen() {
            let e = cv();
            return !!(e != null && e.splashScreenName && e.splashScreenName.length > 0) && !iv.hasRenderedSplashInSession.get()
        }
        disableDocument() {
            let e = document.createElement("div");
            e.classList.add("background-backdrop"), document.body.classList.add("disable-scroll"), document.body.appendChild(e)
        }
        canLoseDataInUpgrade() {
            return document.getElementsByTagName("form").length > 0
        }
        onUpgradeFinished(e, t) {
            e ? z($r, "Upgrade finished successfully") : qe($r, `Upgrade failed with reason: ${t}`);
            let r = {
                success: e,
                failReason: t
            };
            e && !this.isShowingSplashScreen ? this.showUpgradeFeedback(r) : iv.pendingUpgradeFeedback.set(r)
        }
        waitForAppReady() {
            return this.isApplicationReady ? Promise.resolve(void 0) : (this.appReadyPromise || (this.appReadyPromise = new Promise(e => {
                this.onReady = () => e()
            })), this.appReadyPromise)
        }
        onApplicationReady() {
            z($r, "Application ready"), ws("Application ready"), yI(), this.isApplicationReady = !0, this.onReady && (this.onReady(), this.onReady = null)
        }
        showUpgradeFeedback(e) {
            let t, r, i;
            if (e.success) r = 0, t = u(o => o.getApplicationUpgradeCompleteMessage(), "t"), i = "upgrade-success";
            else switch (r = 2, i = "upgrade-error", e.failReason) {
                case 1:
                    t = u(o => o.getApplicationUpgradeFailedOnResourcesMessage(), "t");
                    break;
                case 2:
                    t = u(o => o.getApplicationUpgradeFailedOnDataModelMessage(), "t");
                    break;
                default:
                    t = u(o => o.getApplicationUpgradeFailedUnknownMessage(), "t")
            }
            this.showFeedbackMessage(t, r, i)
        }
        showFeedbackMessage(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "",
                i = arguments.length > 3 ? arguments[3] : void 0;
            return new Promise(o => {
                var s;
                Lh([(s = AP()) !== null && s !== void 0 ? s : IP()], a => {
                    let l = e(a);
                    l && DI(l, t, !0, r, !0, i), o()
                })
            })
        }
        get isReady() {
            return this.isApplicationReady
        }
        get isShowingSplashScreen() {
            return this.showingSplashScreen
        }
        set isShowingSplashScreen(e) {
            e && iv.hasRenderedSplashInSession.set(!0), this.showingSplashScreen = e
        }
        handleError(e, t) {
            bs(e, t)
        }
        exit() {
            return !on() || uk()
        }
        registerDefaultErrorHandler(e) {
            return de.register(Y.GlobalExceptionHandler, e)
        }
    };
u(GA, "Fp");
var gy = GA;
M1 = new WeakSet, M2 = u(function(n) {
    let e = n.readNumber("HealthCheckInterval");
    [de.resolve(Y.HttpClient), de.resolve(Y.UnauthenticatedHttpClient), de.resolve(Y.DebuggerHttpClient), de.resolve(Y.NonDebuggerHttpClient)].forEach(t => Ca.updateHealthCheckConfig(t, {
        healthCheckIntervalInSeconds: e
    }))
}, "Op");
var Tl = new gy;
sl.setUrlVersionProvider(Ti.getVersionedUrl.bind(Ti));
var JW = Object.freeze({
        __proto__: null,
        Application: gy,
        ApplicationStorage: iv,
        default: Tl,
        getToken: ov
    }),
    ZW = "There was an error processing your request.",
    YW = "",
    XW = "RELOAD",
    QW = "#error-screen-message-text",
    e9 = "#error-screen-message-text-extra",
    F2 = "#error-screen-message-reload-button",
    t9 = "#error-screen-spinner",
    n9 = "#exception-detail",
    B2 = "#error-screen-show-detail-button",
    r9 = "#error-screen-exception-message",
    i9 = "#error-screen-exception-stack",
    o9 = "#exception-detail-text";

function oP(n) {
    var e, t, r;
    let i = Wi.errorPageMessage.get(),
        o = Wi.errorPageExtraMessage.get(),
        s = Wi.errorPageExceptionInfo.get();
    if (s) {
        let a = s.message,
            l = ko(s);
        l && (a += `
` + l), console.error(a), typeof document != "undefined" && document.querySelector && (document.querySelector(r9).innerHTML = (e = s.message) !== null && e !== void 0 ? e : "", document.querySelector(i9).innerHTML = l, document.querySelector(B2).addEventListener("click", () => $2()), n != null && n.showExceptionStack && (document.querySelector(n9).style.display = "block"))
    }
    if (typeof document != "undefined" && document.querySelector) {
        let a = (t = n == null ? void 0 : n.messages) === null || t === void 0 ? void 0 : t.defaultMessage,
            l = n == null ? void 0 : n.extraMessage;
        document.querySelector(QW).innerHTML = i || a || ZW, document.querySelector(e9).innerHTML = o || l || YW;
        let d = document.querySelector(F2);
        d.innerHTML = (r = n == null ? void 0 : n.reloadLabel) !== null && r !== void 0 ? r : XW, d.addEventListener("click", () => j2())
    }
}
u(oP, "Xp");

function j2() {
    typeof document != "undefined" && document.querySelector && (document.querySelector(F2).style.display = "none", document.querySelector(t9).style.display = "inline-block"), setTimeout(() => {
        fI()
    }, 2e3)
}
u(j2, "Qp");

function $2() {
    if (typeof document != "undefined" && document.querySelector) {
        let n = document.querySelector(B2),
            e = document.querySelector(o9);
        e.hidden ? (n.innerHTML = "Hide Detail", e.hidden = !1) : (n.innerHTML = "Show Detail", e.hidden = !0)
    }
}
u($2, "Zp");
var s9 = Object.freeze({
        __proto__: null,
        initializeErrorPage: u(function(n, e) {
            let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : oP;
            return Promise.resolve().then(() => e.initialize(n, 1).then(() => {
                var r;
                t(n.errorPageConfig);
                try {
                    let i = Wi.errorPageExceptionInfo.get(),
                        o = i ? i.message : Wi.errorPageMessage.get();
                    xe("ErrorScreen", `${o}`, (r = i == null ? void 0 : i.errorCode) !== null && r !== void 0 ? r : "OS-CLRT-00000", void 0, Oe.Client)
                } catch (i) {
                    xe("ErrorScreen", "Unable to retrieve error details", "OS-CLRT-00000")
                }
                yI()
            }).catch(r => {
                console.error(r)
            }))
        }, "initializeErrorPage"),
        reloadApplication: j2,
        setErrorPageMessages: oP,
        toggleExceptionInfo: $2
    }),
    bS = "BaseMessagesProvider",
    gi;
(function(n) {
    n.MandatoryValue = "Validation.Mandatory", n.InvalidValuePrefix = "Validation.", n.UpgradeComplete = "UpgradeComplete", n.UpgradeRequiredDataLoss = "UpgradeRequiredDataLoss", n.UpgradeRequired = "UpgradeRequired", n.UpgradeFailedOnResources = "AppInitError.Resources", n.UpgradeFailedOnDataModel = "AppInitError.DataModel", n.UpgradeFailed = "AppInitError.Generic"
})(gi || (gi = {}));
var Pc, a9 = Object.freeze({
        __proto__: null,
        BaseMessagesProvider: (Pc = class {
            constructor(e) {
                if (this.messages = {}, this.localeChangeHandler = t => {
                        var r;
                        let i = de.resolve(Y.TranslationsService),
                            o = de.resolve(Y.LocaleService);
                        i && ((r = t.localeFamily) !== null && r !== void 0 ? r : [t.localeCode]).forEach(s => {
                            var a, l;
                            this.translationResources[s] ? (z(bS, `Adding translations for ${s} locale.`), i.add((a = this.translationResources[s].translations) !== null && a !== void 0 ? a : {}), o.setCurrentLocaleRTL((l = this.translationResources[s].isRTL) !== null && l !== void 0 && l)) : z(bS, `No translations found for ${s} locale.`)
                        })
                    }, this.translationResources = e != null ? e : this.translationResources, this.translationResources) {
                    let t = de.resolve(Y.LocaleService);
                    if (t) {
                        let r = t.getCurrentLocale(),
                            i = t.getCurrentLocaleFamily();
                        this.localeChangeHandler({
                            localeCode: r,
                            localeFamily: i
                        }), z(bS, "Subscribing handler for locale service."), t.subscribe(this.localeChangeHandler)
                    }
                }
            }
            getMandatoryValueMessage() {
                return this.getMessage(gi.MandatoryValue, "Required Value!")
            }
            getInvalidValueMessage(e) {
                return this.getMessage(gi.InvalidValuePrefix + T[e], "Invalid Value!")
            }
            getApplicationUpgradeCompleteMessage() {
                return this.getMessage(gi.UpgradeComplete, "")
            }
            getApplicationUpgradeRequiredMessage(e) {
                return e ? this.getMessage(gi.UpgradeRequiredDataLoss, "") : this.getMessage(gi.UpgradeRequired, "")
            }
            getApplicationUpgradeFailedOnResourcesMessage() {
                return this.getMessage(gi.UpgradeFailedOnResources, "")
            }
            getApplicationUpgradeFailedOnDataModelMessage() {
                return this.getMessage(gi.UpgradeFailedOnDataModel, "")
            }
            getApplicationUpgradeFailedUnknownMessage() {
                return this.getMessage(gi.UpgradeFailed, "")
            }
            getMessage(e, t) {
                var r;
                let i = (r = this.messages[e]) !== null && r !== void 0 ? r : t,
                    o = de.resolve(Y.TranslationsService);
                return o ? o.getMessage(e, i) : i
            }
            setMessage(e, t) {
                this.messages[e] = t
            }
        }, u(Pc, "BaseMessagesProvider"), Pc),
        get ModuleMessageKeys() {
            return gi
        }
    }),
    F1 = "idAttr",
    B1 = "nameAttr",
    zm = "validAttr",
    Wm = "validationMessageAttr",
    KA = class KA {
        constructor(e, t, r, i) {
            this.type = e, this._value = t, this.setter = r, this.model = i
        }
        get value() {
            return this._value
        }
        set value(e) {
            let t = Gi.convertTo(e, this.type);
            this.setter(t), this.model.flush()
        }
        isAcceptable(e) {
            return Gi.isConvertibleTo(e, this.type)
        }
        fastEquals(e) {
            return e && this.constructor === e.constructor && this.value === e.value
        }
        equals(e) {
            return e && this.constructor === e.constructor && Zr(this.value, e.value)
        }
    };
u(KA, "uf");
var py = KA,
    Nh = class Nh extends yn {
        constructor(e) {
            super(e)
        }
        get idAttr() {
            return this.getBasicProperty(F1)
        }
        set idAttr(e) {
            this.setBasicProperty(F1, e, T.Text)
        }
        get nameAttr() {
            return this.getBasicProperty(B1)
        }
        set nameAttr(e) {
            this.setBasicProperty(B1, e, T.Text)
        }
        get generationNode() {
            return this.getBasicProperty(Nh.WidgetGenerationNodeAttributeName)
        }
        set generationNode(e) {
            this.setBasicProperty(Nh.WidgetGenerationNodeAttributeName, e, T.Object)
        }
        asReadOnly() {
            return {
                idAttr: this.idAttr,
                nameAttr: this.nameAttr
            }
        }
        refreshGeneration() {
            this.generationNode && (this.generationNode.generation = yl.currentGeneration)
        }
    };
u(Nh, "cf");
var Fo = Nh;
Fo.WidgetGenerationNodeAttributeName = "widgetGenerationNode", Fo.RecordClass = yn.defineRecordClass({
    idAttr: "",
    nameAttr: "",
    widgetGenerationNode: null
});
var JA = class JA extends Fo {
    constructor(e) {
        super(e)
    }
    get validAttr() {
        return this.getBasicProperty(zm)
    }
    set validAttr(e) {
        this.setBasicProperty(zm, e, T.Boolean)
    }
    get validationMessageAttr() {
        return this.getBasicProperty(Wm)
    }
    set validationMessageAttr(e) {
        this.setBasicProperty(Wm, e, T.Text)
    }
    onPropertyValueChanged(e) {
        e !== zm && e !== Wm || this.refreshGeneration()
    }
    asReadOnly() {
        return {
            idAttr: (e = this.data).get(F1),
            nameAttr: e.get(B1),
            validAttr: e.get(zm),
            validationMessageAttr: e.get(Wm)
        };
        var e
    }
};
u(JA, "df");
var vl = JA;
vl.RecordClass = (() => {
    let n = new Fo.RecordClass().toJS();
    return n.validAttr = !0, n.validationMessageAttr = "", yn.defineRecordClass(n)
})();
var Sa = class Sa extends yn {
    constructor(e) {
        super(e), this.widgetsIdToRecord = this.data.get(Sa.WidgetRecordsAttribute), this.widgetsIdToRecordDataCache = this.data.get(Sa.WidgetRecordsDataCacheAttribute)
    }
    static createDefaultData() {
        return new Sa.RecordClass({
            records: new Map,
            recordsCache: new Map
        })
    }
    static getWidgetsType() {
        return {}
    }
    getWidgetsType() {
        return this.constructor.getWidgetsType()
    }
    getWidgetRecordType(e) {
        return this.getWidgetsType()[e] || Fo
    }
    get(e) {
        let t = this.widgetsIdToRecord.get(e);
        return t || (t = this.create(e), this.add(t), t)
    }
    set(e, t) {
        this.widgetsIdToRecord.set(e, t), this.widgetsIdToRecordDataCache.delete(e), this.writePropagate(this.data, null)
    }
    internalSet(e, t) {
        this.widgetsIdToRecord.delete(e), this.widgetsIdToRecordDataCache.set(e, t), this.writePropagate(this.data, null)
    }
    create(e) {
        let t = pl.nameFromId(e),
            r = new(this.getWidgetRecordType(t))(this.widgetsIdToRecordDataCache.get(e));
        return r.idAttr = e, r.nameAttr = t, r
    }
    add(e) {
        Sa.setPropagationHandler(e, this, e.idAttr, this.internalSet), this.widgetsIdToRecordDataCache.delete(e.idAttr), this.widgetsIdToRecord.set(e.idAttr, e)
    }
    remove(e) {
        this.widgetsIdToRecord.delete(e), this.widgetsIdToRecordDataCache.delete(e), this.writePropagate(this.data, null)
    }
};
u(Sa, "hf");
var Cc = Sa;
Cc.WidgetRecordsAttribute = "records", Cc.WidgetRecordsDataCacheAttribute = "recordsCache", Cc.RecordClass = yn.defineRecordClass({
    records: null,
    recordsCache: null
});
var _c = class _c extends Be {
    get dataFetchStatusAttr() {
        return this.getBasicProperty(_c.DataFetchStatusAttributeName)
    }
    set dataFetchStatusAttr(e) {
        this.setBasicProperty(_c.DataFetchStatusAttributeName, e, T.Integer)
    }
    get isDataFetchedAttr() {
        return this.dataFetchStatusAttr === 1
    }
    get hasFetchErrorAttr() {
        return this.dataFetchStatusAttr === 2
    }
    static attributesToDeclare() {
        return [Be.attr("DataFetchStatus", _c.DataFetchStatusAttributeName, "", !0, !1, T.Integer, () => 0)].concat(super.attributesToDeclare())
    }
    replaceWith(e) {
        let t = new this.constructor(yn.getData(e));
        t.dataFetchStatusAttr = this.dataFetchStatusAttr, this.writePropagate(yn.getData(t), new ll)
    }
};
u(_c, "gf");
var Rs = _c;
Rs.DataFetchStatusAttributeName = "dataFetchStatusAttr";
var pi = class pi extends Rs {
    get listOut() {
        return this.getComplexProperty(pi.ListOutAttributeName, this.getRecordListType())
    }
    set listOut(e) {
        this.setComplexProperty(pi.ListOutAttributeName, e, T.RecordList, this.getRecordListType())
    }
    get countOut() {
        return this.getBasicProperty(pi.CountOutAttributeName)
    }
    set countOut(e) {
        this.setBasicProperty(pi.CountOutAttributeName, e, T.LongInteger)
    }
    bulkSet(e, t, r) {
        let i = [{
            name: pi.ListOutAttributeName,
            value: e,
            isBasicType: !1
        }, {
            name: Rs.DataFetchStatusAttributeName,
            value: t,
            isBasicType: !0
        }];
        r !== void 0 && i.push({
            name: pi.CountOutAttributeName,
            value: r,
            isBasicType: !0
        }), this.setProperties(i)
    }
    getRecordListType() {
        return this.constructor.RecordListType
    }
    static attributesToDeclare() {
        return [Be.attr("List", pi.ListOutAttributeName, "List", !0, !1, T.RecordList, () => !1, !0, this.RecordListType), Be.attr("Count", pi.CountOutAttributeName, "Count", !0, !1, T.LongInteger, () => bt.defaultValue)].concat(super.attributesToDeclare())
    }
    static init() {
        if (!this.RecordListType) throw new TypeError("AggregateRecords must define a RecordListType");
        super.init()
    }
};
u(pi, "pf");
var Jh = pi;
Jh.ListOutAttributeName = "listOut", Jh.CountOutAttributeName = "countOut";
var Xn = class Xn extends yn {
    constructor(e) {
        super(), this._context = e, this.writeSubscriptions = [], this.cachedValues = {}, this.modified = !1
    }
    static createDefaultData() {
        let e = this.newVariablesRecord(),
            t = this.newWidgetsRecord();
        return new Xn.RecordClass({
            variables: yn.getData(e),
            widgets: yn.getData(t),
            clientVariablesGeneration: 0,
            currentLocale: null
        })
    }
    onDefaultWritePropagate(e) {
        super.onDefaultWritePropagate(e), this.modified = !0, this.innerFlush(!0)
    }
    cloneCache() {
        return this.cache
    }
    get isModified() {
        return this.modified
    }
    scheduleFlush() {
        this.pendingFlush || (this.pendingFlush = window.setTimeout(() => this.flush(), 0))
    }
    flush() {
        this.pendingFlush && (clearTimeout(this.pendingFlush), this.pendingFlush = void 0), this.modified && (this.modified = !1, yl.currentGeneration++, this.innerFlush(!1), z("BaseViewModel", "Flushing model"))
    }
    innerFlush(e) {
        for (let t = 0; t < this.writeSubscriptions.length; t++) {
            let r = this.writeSubscriptions[t];
            r.immediate === e && r.handler(this)
        }
    }
    subscribeWrites(e) {
        let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
        return !(!this.hasVariables && !this.hasValidationWidgets && this.currentLocale === null && this.currentLocale === void 0 || !e) && (this.writeSubscriptions.push({
            handler: e,
            immediate: t
        }), !0)
    }
    unsubscribeWrites(e) {
        if (e) {
            let t = -1;
            for (let r = 0, i = this.writeSubscriptions.length; r < i; r++)
                if (this.writeSubscriptions[r].handler === e) {
                    t = r;
                    break
                } if (t >= 0) return this.writeSubscriptions.splice(t, 1), !0
        }
        return !1
    }
    clearSubscriptions() {
        this.writeSubscriptions = []
    }
    static get hasVariables() {
        return !0
    }
    get hasVariables() {
        return this.constructor.hasVariables
    }
    static getVariablesRecordConstructor() {
        throw new Error("@abstract")
    }
    static newVariablesRecord(e) {
        return this.hasVariables ? new(this.getVariablesRecordConstructor())(e) : void 0
    }
    getVariables() {
        let e = this.constructor;
        if (this.hasVariables) return this.getComplexProperty(Xn.VariablesPropertyName, e.getVariablesRecordConstructor());
        throw new Error("Model does not contain variables")
    }
    get variables() {
        return this.getVariables()
    }
    set variables(e) {
        let t = this.constructor;
        this.setComplexProperty(Xn.VariablesPropertyName, e, T.Record, t.getVariablesRecordConstructor())
    }
    get clientVariablesGeneration() {
        return this.getBasicProperty(Xn.ClientVariablesGenerationPropertyName)
    }
    set clientVariablesGeneration(e) {
        this.setBasicProperty(Xn.ClientVariablesGenerationPropertyName, e, T.Integer)
    }
    static get hasValidationWidgets() {
        return !0
    }
    get hasValidationWidgets() {
        return this.constructor.hasValidationWidgets
    }
    get currentLocale() {
        return this.getBasicProperty(Xn.CurrentLocalePropertyName)
    }
    set currentLocale(e) {
        this.currentLocale !== e && this.clearCachedValues(), this.setBasicProperty(Xn.CurrentLocalePropertyName, e, T.Text)
    }
    static getWidgetsRecordConstructor() {
        throw new Error("@abstract")
    }
    static newWidgetsRecord(e) {
        return this.hasValidationWidgets ? new(this.getWidgetsRecordConstructor())(e) : void 0
    }
    getWidgets() {
        let e = this.constructor;
        if (this.hasValidationWidgets) return this.getComplexProperty(Xn.WidgetsPropertyName, e.getWidgetsRecordConstructor());
        throw new Error("Model does not contain validation widgets")
    }
    get widgets() {
        return this.getWidgets()
    }
    set widgets(e) {
        this.setComplexProperty(Xn.WidgetsPropertyName, e, T.Object)
    }
    hasCachedValue(e) {
        return this.cachedValues.hasOwnProperty(e)
    }
    getCachedValue(e, t) {
        let r = this.cachedValues[e];
        for (var i = arguments.length, o = new Array(i > 2 ? i - 2 : 0), s = 2; s < i; s++) o[s - 2] = arguments[s];
        let a = o.map((l, d) => {
            try {
                return l()
            } catch (c) {
                return Xn.InvalidValue
            }
        });
        return r !== void 0 && o.length === r.args.length && a.every((l, d) => l === r.args[d]) || (r = {
            args: a,
            value: t()
        }, this.cachedValues[e] = r), r.value
    }
    clearCachedValues() {
        this.cachedValues = {}
    }
    createVariable(e, t, r) {
        return new py(e, t, r, this)
    }
    fromOther(e) {
        this.fromImmutableData(e.data)
    }
    toImmutableData() {
        return this.data
    }
    fromImmutableData(e) {
        this.data = e, this.writePropagate(this.data, this.cache), this.cache.invalidate()
    }
    setInputs(e) {
        throw new Error("@abstract")
    }
    get widgetsGenerationsTree() {
        return this._widgetsGenerationsTree || (this._widgetsGenerationsTree = new yl), this._widgetsGenerationsTree
    }
    getReadOnlyWidgetRecord(e) {
        return this.widgets.get(e).asReadOnly()
    }
    get context() {
        return this._context
    }
    sanitize(e) {
        let t = e;
        if (this.hasVariables) {
            if (e.constructor !== this.data.constructor) throw new Error("Expected data to be the same type of this model data");
            let r = this.variables.getNonSerializableAttributes();
            if (r.length > 0) {
                let i = t.get(Xn.VariablesPropertyName);
                r.forEach(o => i = i.set(o, null)), t = t.set(Xn.VariablesPropertyName, i)
            }
        }
        return t
    }
};
u(Xn, "ff");
var bi = Xn;
bi.VariablesPropertyName = "variables", bi.WidgetsPropertyName = "widgets", bi.ClientVariablesGenerationPropertyName = "clientVariablesGeneration", bi.CurrentLocalePropertyName = "currentLocale", bi.InvalidValue = new Object, bi.RecordClass = yn.defineRecordClass({
    variables: null,
    widgets: null,
    clientVariablesGeneration: 0,
    currentLocale: null
});
var Py = class Py extends bi {
    static get hasVariables() {
        return !1
    }
    static get hasValidationWidgets() {
        return !1
    }
    setInputs() {}
    static create(e, t, r) {
        return new Py({
            viewName: e,
            navigatedFromHistory: t,
            viewWasRestoredFromCache: r
        })
    }
};
u(Py, "mf");
var my = Py,
    ky = class ky {
        constructor(e) {
            this._parent = e, this._generation = e ? e.generation : 0
        }
        get parent() {
            return this._parent
        }
        get generation() {
            return this._generation
        }
        set generation(e) {
            this.generation < e && (this._generation = e, this.parent && (this.parent.generation = e))
        }
        addChild() {
            return new ky(this)
        }
    };
u(ky, "vf");
var j1 = ky,
    Ia = class Ia {
        constructor() {
            this._root = new j1(null), this._root.generation = Ia.currentGeneration, Ia.currentGeneration++
        }
        get root() {
            return this._root
        }
        static get currentGeneration() {
            return Ia.generation
        }
        static set currentGeneration(e) {
            Ia.generation = e
        }
    };
u(Ia, "yf");
var yl = Ia;
yl.generation = 0;
var kc, Uc, u9 = Object.freeze({
    __proto__: null,
    AggregateRecord: Jh,
    BaseViewModel: bi,
    BaseWidgetRecordMap: Cc,
    DataSourceRecord: Rs,
    DummyViewModel: my,
    ModelFactory: (kc = class {
        constructor(e) {
            this.modelClass = e
        }
        create(e) {
            return this.modelClass.hasVariables || this.modelClass.hasValidationWidgets ? new this.modelClass(e) : new my(e)
        }
        get hasValidationWidgets() {
            return this.modelClass.hasValidationWidgets
        }
    }, u(kc, "ModelFactory"), kc),
    ValidationWidgetRecord: vl,
    Variable: py,
    VariablelessViewModel: (Uc = class extends bi {
        static get hasVariables() {
            return !1
        }
        setInputs() {}
    }, u(Uc, "VariablelessViewModel"), Uc),
    WidgetRecord: Fo,
    calculateDataFetchStatus: u(function() {
        let n = 1;
        for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) t[r] = arguments[r];
        for (let i of t) switch (i) {
            case 2:
                return 2;
            case 0:
                n = 0
        }
        return n
    }, "calculateDataFetchStatus")
});

function sP(n) {
    let e = n.trim().split(" ")[0].split(".");
    return e[e.length - 1].replace(/["]+/g, "")
}
u(sP, "Tf");
var c9 = Object.freeze({
    __proto__: null,
    getAttributeFromOrderBy: sP,
    getOrderByColumnsWithoutDuplicates: u(function(n) {
        return function(e) {
            let t = [],
                r = {};
            return e.forEach(i => {
                let o = i.trim();
                if (o !== "") {
                    let s = o.replace(new RegExp("\b((ASC)|(DESC))$", "im"), "").replace('"', "").replace("[", "").replace("]", "").trim().toLowerCase();
                    r[s] !== !0 && (t.push(o), r[s] = !0)
                }
            }), t
        }(n).join(", ")
    }, "getOrderByColumnsWithoutDuplicates"),
    replaceEntityReferencesInOrderBy: u(function(n, e, t) {
        let r = xa(n = n.trim(), '(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)', !0);
        if (r.length > 0) {
            let o = r[0];
            throw new Q.DataBaseException("", `'${o.groups[2]+o.groups[3]}' found in 'Order By' parameter is a reserved prefix`)
        }
        if (n !== "" && (r = xa(n, "((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*", !0), r.length !== 1 || r[0].value !== n)) throw new Q.DataBaseException("", "Invalid syntax in 'Order By' parameter.");
        let i = ol(n, "(\\{\\w+\\}|\\w+\\.)", !1, o => function(s, a, l) {
            let d = "",
                c = function(f) {
                    return f.value.charAt(f.value.length - 1) === "." ? f.value.substr(0, f.value.length - 1) : f.value.substr(1, f.value.length - 2)
                }(s),
                h = !1;
            for (let f = 0; f < a.length; f++)
                if (a[f].toLowerCase() === c.toLowerCase()) {
                    h = !0, d = '"' + l[f] + '"';
                    break
                } if (!h) throw new Q.DataBaseException("", `'${c}' found in 'Order By' parameter is an invalid Entity`);
            return s.value.charAt(s.value.length - 1) === "." ? d + "." : d
        }(o, e, t));
        return i = ol(i, "(\\[\\w+\\])", !1, o => function(s) {
            let a = s.value.substr(1, s.value.length - 2);
            return a ? (a.charAt(0) === '"' ? "" : '"') + a + (a.charAt(a.length - 1) === '"' ? "" : '"') : ""
        }(o)), i
    }, "replaceEntityReferencesInOrderBy"),
    validateQueryOrderBy: u(function(n, e) {
        return e.forEach(t => {
            let r = sP(t);
            for (let i = 0; i < n.length; i++)
                if (n[i].attributes.some(o => o.name.toLowerCase() === r.toLowerCase())) return !0;
            throw new Q.DataBaseException("", `Invalid attribute in 'Order By' parameter: ${t}`)
        }), !0
    }, "validateQueryOrderBy")
});

function l9() {
    return !0
}
u(l9, "Ef");

function aP(n, e) {
    return n && e && (t = n, !H.isBasicType(t) || (t == null ? void 0 : t.equals) instanceof Function) ? n.fastEquals instanceof Function ? n.fastEquals(e) : Zr(n, e) : n === e;
    var t
}
u(aP, "If");
var d9 = Object.freeze({
        __proto__: null,
        arrayShallowEquals: u(function(n, e) {
            if (n === e) return !0;
            if (!(n !== null && e !== null && n instanceof Array && e instanceof Array) || n.length !== e.length) return !1;
            for (let t = 0; t < n.length; t++)
                if (!aP(n[t], e[t])) return !1;
            return !0
        }, "arrayShallowEquals"),
        assign: u(function(n) {
            if (n == null) throw new TypeError("ObjectHelper.assign target cannot be null or undefined");
            let e = Object(n),
                t = Object.prototype.hasOwnProperty;
            for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++) i[o - 1] = arguments[o];
            for (let s of i) {
                if (s == null) continue;
                let a = Object(s);
                for (let l in a) t.call(a, l) && (e[l] = a[l])
            }
            return e
        }, "assign"),
        concatenateMultipleTimes: u(function(n, e, t) {
            let r = n;
            for (let i = 0; i < t; i++) r += e;
            return r
        }, "concatenateMultipleTimes"),
        getHashCode: u(function(n) {
            let e = 0,
                t = n.length;
            if (t === 0) return e;
            for (let r = 0; r < t; r++) e = (e << 5) - e + n.charCodeAt(r), e |= 0;
            return e
        }, "getHashCode"),
        isEmptyObject: u(function(n) {
            return !n || Object.keys(n).length === 0
        }, "isEmptyObject"),
        roughSizeOf: u(function(n) {
            let e = [],
                t = [n],
                r = 0;
            for (; t.length;) {
                let i = t.pop();
                switch (typeof i) {
                    case "boolean":
                        r += 4;
                        break;
                    case "number":
                        r += 8;
                        break;
                    case "string":
                        r += 2 * i.length;
                        break;
                    case "object":
                        if (e.indexOf(i) !== -1) continue;
                        e.push(i), Array.isArray(i) || (r += 2 * Object.keys(i).length);
                        for (let o in i) {
                            let s = null;
                            try {
                                s = i[o]
                            } catch (a) {}
                            s && t.push(s)
                        }
                }
            }
            return r
        }, "roughSizeOf"),
        shallowEquals: u(function(n, e) {
            let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : l9;
            if (n === e) return !0;
            if (n === null || e === null || typeof n != "object" || typeof e != "object") return !1;
            let r = Object.keys(n),
                i = Object.keys(e);
            if (r.length !== i.length) return !1;
            let o = Object.prototype.hasOwnProperty.bind(e);
            for (let s = 0; s < r.length; s++) {
                let a = r[s];
                if (t(n, a) && (!o(a) || !aP(n[a], e[a]))) return !1
            }
            return !0
        }, "shallowEquals")
    }),
    Mc, Zh = (Mc = class extends Be {
        constructor(e, t) {
            super(e, t)
        }
        static attributesToDeclare() {
            return [this.attr("PasswordComplexityPolicyFailed", "passwordComplexityPolicyFailedAttr", "passwordComplexityPolicyFailed", !0, !1, T.Boolean, () => !1), this.attr("InvalidCredentials", "invalidCredentialsAttr", "invalidCredentials", !0, !1, T.Boolean, () => !1), this.attr("TooManyFailedAttempts", "tooManyFailedAttemptsAttr", "tooManyFailedAttempts", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
        }
    }, u(Mc, "Nf"), Mc);
Zh = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Zh);
var Fc, vy = (Fc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("ChangePasswordFailureReason", "changePasswordFailureReasonAttr", "changePasswordFailureReason", !0, !1, T.Record, () => fr.getData(new Zh), Zh)].concat(super.attributesToDeclare())
    }
}, u(Fc, "Sf"), Fc);
vy = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], vy);
var Bc, Yh = (Bc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("PasswordComplexityPolicyFailed", "passwordComplexityPolicyFailedAttr", "passwordComplexityPolicyFailed", !0, !1, T.Boolean, () => !1), this.attr("InvalidVerificationCode", "invalidVerificationCodeAttr", "invalidVerificationCode", !0, !1, T.Boolean, () => !1), this.attr("InvalidEmail", "invalidEmailAttr", "invalidEmail", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
    }
}, u(Bc, "Df"), Bc);
Yh = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Yh);
var jc, yy = (jc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("MinimumLength", "minimumLengthAttr", "minimumLength", !0, !1, T.Integer, () => Ve(T.Integer)), this.attr("UpperCaseLetterRequired", "upperCaseLetterRequiredAttr", "upperCaseLetterRequired", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("LowerCaseLetterRequired", "lowerCaseLetterRequiredAttr", "lowerCaseLetterRequired", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("NumberRequired", "numberRequiredAttr", "numberRequired", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("SpecialCharacterRequired", "specialCharacterRequiredAttr", "specialCharacterRequired", !0, !1, T.Boolean, () => Ve(T.Boolean))].concat(super.attributesToDeclare())
    }
}, u(jc, "Rf"), jc);
yy = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], yy);
var $c, by = ($c = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("IsValid", "isValidAttr", "isValid", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("MissingMinimumLength", "missingMinimumLengthAttr", "missingMinimumLength", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("MissingUpperCaseLetter", "missingUpperCaseLetterAttr", "missingUpperCaseLetter", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("MissingLowerCaseLetter", "missingLowerCaseLetterAttr", "missingLowerCaseLetter", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("MissingNumber", "missingNumberAttr", "missingNumber", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("MissingSpecialCharacter", "missingSpecialCharacterAttr", "missingSpecialCharacter", !0, !1, T.Boolean, () => Ve(T.Boolean))].concat(super.attributesToDeclare())
    }
}, u($c, "Cf"), $c);
by = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], by);
var Vc, wy = (Vc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("UserId", "userIdAttr", "userId", !0, !1, T.Text, () => Ve(T.Text)), this.attr("finishUserRegistrationFailureReason", "finishUserRegistrationFailureReasonAttr", "finishUserRegistrationFailureReason", !0, !1, T.Record, () => fr.getData(new Yh), Yh)].concat(super.attributesToDeclare())
    }
}, u(Vc, "xf"), Vc);
wy = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], wy);
var Hc, Xh = (Hc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("InvalidCredentials", "invalidCredentialsAttr", "invalidCredentials", !0, !1, T.Boolean, () => !1), this.attr("InvalidName", "invalidNameAttr", "invalidName", !0, !1, T.Boolean, () => !1), this.attr("InvalidPhotoURL", "invalidPhotoURLAttr", "invalidPhotoURL", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
    }
}, u(Hc, "Lf"), Hc);
Xh = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Xh);
var zc, $1 = (zc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("UpdateUserFailureReason", "updateUserFailureReasonAttr", "updateUserFailureReason", !0, !1, T.Record, () => fr.getData(new Xh), Xh)].concat(super.attributesToDeclare())
    }
}, u(zc, "Of"), zc);
$1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], $1);
var Wc, Ty = (Wc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Email", "emailAttr", "email", !0, !1, T.Email, () => Ve(T.Email)), this.attr("Name", "nameAttr", "name", !0, !1, T.Text, () => Ve(T.Text)), this.attr("PhotoURL", "photoURLAttr", "photoURL", !0, !1, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(Wc, "_f"), Wc);
Ty = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Ty);
var qc, Qh = (qc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("InvalidCredentials", "invalidCredentialsAttr", "invalidCredentials", !0, !1, T.Boolean, () => !1), this.attr("TooManyFailedLoginAttempts", "tooManyFailedLoginAttemptsAttr", "tooManyFailedLoginAttempts", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
    }
}, u(qc, "Mf"), qc);
Qh = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Qh);
var Gc, Ey = (Gc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("UserId", "userIdAttr", "userId", !0, !1, T.Text, () => Ve(T.Text)), this.attr("UserLoginFailureReason", "userLoginFailureReasonAttr", "userLoginFailureReason", !0, !1, T.Record, () => fr.getData(new Qh), Qh), this.attr("retryAfterSeconds", "retryAfterSecondsAttr", "retryAfterSeconds", !0, !1, T.Integer, () => Ve(T.Integer))].concat(super.attributesToDeclare())
    }
}, u(Gc, "Uf"), Gc);
Ey = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], Ey);
var Kc, ef = (Kc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("InvalidEmail", "invalidEmailAttr", "invalidEmail", !0, !1, T.Boolean, () => !1), this.attr("InvalidName", "invalidNameAttr", "invalidName", !0, !1, T.Boolean, () => !1), this.attr("UsernameAlreadyExists", "usernameAlreadyExistsAttr", "usernameAlreadyExists", !0, !1, T.Boolean, () => !1), this.attr("UserAlreadyRegistered", "userAlreadyRegisteredAttr", "userAlreadyRegistered", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
    }
}, u(Kc, "Ff"), Kc);
ef = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], ef);
var Jc, V1 = (Jc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("StartUserRegistrationFailureReason", "startUserRegistrationFailureReasonAttr", "startUserRegistrationFailureReason", !0, !1, T.Record, () => fr.getData(new ef), ef), this.attr("TemporaryPassword", "temporaryPasswordAttr", "temporaryPassword", !0, !1, T.Text, () => Ve(T.Text)), this.attr("UserId", "userIdAttr", "userId", !0, !1, T.Text, () => Ve(T.Text)), this.attr("VerificationCode", "verificationCodeAttr", "verificationCode", !0, !1, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(Jc, "$f"), Jc);
V1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], V1);
var Zc, H1 = (Zc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Name", "nameAttr", "name", !0, !1, T.Text, () => Ve(T.Text)), this.attr("PhotoURL", "photoURLAttr", "photoURL", !0, !1, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(Zc, "Pf"), Zc);
H1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], H1);
var Yc, z1 = (Yc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("HasRole", "hasRoleOut", "hasRole", !0, !1, T.Boolean, () => Ve(T.Boolean))].concat(super.attributesToDeclare())
    }
}, u(Yc, "Vf"), Yc);
z1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], z1);
var Xc, tf = (Xc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("PasswordComplexityPolicyFailed", "passwordComplexityPolicyFailedAttr", "passwordComplexityPolicyFailed", !0, !1, T.Boolean, () => !1), this.attr("InvalidVerificationCode", "invalidVerificationCodeAttr", "invalidVerificationCode", !0, !1, T.Boolean, () => !1), this.attr("InvalidEmail", "invalidEmailAttr", "invalidEmail", !0, !1, T.Boolean, () => !1)].concat(super.attributesToDeclare())
    }
}, u(Xc, "Bf"), Xc);
tf = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], tf);
var Qc, _y = (Qc = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("FinishResetPasswordFailureReason", "finishResetPasswordFailureReasonAttr", "finishResetPasswordFailureReason", !0, !1, T.Record, () => fr.getData(new tf), tf)].concat(super.attributesToDeclare())
    }
}, u(Qc, "kf"), Qc);
_y = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], _y);
var el, W1 = (el = class extends Be {
        constructor(e, t) {
            super(e, t)
        }
        static attributesToDeclare() {
            return [this.attr("Success", "successAttr", "success", !0, !1, T.Boolean, () => Ve(T.Boolean)), this.attr("VerificationCode", "verificationCodeAttr", "verificationCode", !0, !1, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
        }
    }, u(el, "zf"), el),
    sv;
W1 = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], W1);
var tl, bl = (tl = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("FileName", "fileNameAttr", "FileName", !1, !1, T.Text, () => Ve(T.Text)), this.attr("FileContent", "fileContentAttr", "FileContent", !1, !1, T.BinaryData, () => Ve(T.BinaryData)), this.attr("MimeType", "mimeTypeAttr", "MimeType", !1, !1, T.Text, () => Ve(T.Text))].concat(super.attributesToDeclare())
    }
}, u(tl, "jf"), tl);
bl = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], bl);
var nl, mc = sv = (nl = class extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Attachment", "attachmentAttr", "Attachment", !1, !1, T.Record, () => fr.getData(new bl), bl)].concat(Be.attributesToDeclare())
    }
}, u(nl, "Hf"), nl);
mc._isAnonymousRecord = !0, mc.fromStructure = function(n) {
    return new sv(new sv.RecordClass({
        attachmentAttr: fr.getData(n)
    }))
}, mc = sv = Wt([n => {
    let e = n;
    e.init !== void 0 && e.init()
}], mc);
var ZA = class ZA extends Ph {
    constructor(e) {
        super(e)
    }
};
u(ZA, "Gf");
var Sy = ZA;
Sy.itemType = bl;
var YA = class YA extends Ph {
    constructor(e) {
        super(e)
    }
};
u(YA, "Wf");
var Iy = YA;
Iy.itemType = mc;
var h9 = Object.freeze({
        __proto__: null,
        AttachmentList: Sy,
        get AttachmentRec() {
            return bl
        },
        get AttachmentRecord() {
            return mc
        },
        AttachmentRecordList: Iy,
        get ChangePasswordFailureReasonRec() {
            return Zh
        },
        get ChangePasswordResultRec() {
            return vy
        },
        get FinishResetPasswordFailureReasonRec() {
            return tf
        },
        get FinishResetPasswordResultRec() {
            return _y
        },
        get FinishUserRegistrationFailureReasonRec() {
            return Yh
        },
        get FinishUserRegistrationResultRec() {
            return wy
        },
        get HasRoleResultRec() {
            return z1
        },
        get PasswordComplexityPolicyRec() {
            return yy
        },
        get PasswordValidationResultRec() {
            return by
        },
        get StartResetPasswordResultRec() {
            return W1
        },
        get StartUserRegistrationFailureReasonRec() {
            return ef
        },
        get StartUserRegistrationResultRec() {
            return V1
        },
        get UpdateUserFailureReasonRec() {
            return Xh
        },
        get UpdateUserResultRec() {
            return $1
        },
        get UserInfoRec() {
            return Ty
        },
        get UserLoginFailureReasonRec() {
            return Qh
        },
        get UserLoginResultRec() {
            return Ey
        },
        get UserUpdateInfoRec() {
            return H1
        }
    }),
    q1 = "data-os-finished",
    f9 = "ScriptsManager",
    av = new Map,
    uP = !1,
    fc = null;

function V2(n) {
    return n.replace(/.*\//, "").replace(/(.*)__.*/, "$1")
}
u(V2, "em");

function H2(n, e) {
    let t = V2(n),
        r = wI(t, void 0, e);
    r == null || r.setAttribute("code.function", t), r == null || r.setAttribute("outsystems.function.type", "REQUIRED_SCRIPT");
    let i = e == null ? void 0 : e.getContext().attributes["outsystems.function.key"];
    i && (r == null || r.setAttribute("outsystems.function.owner.key", i));
    let o = e == null ? void 0 : e.getContext().attributes["code.function"];
    return o && (r == null || r.setAttribute("outsystems.function.owner.name", o)), r
}
u(H2, "tm");

function G1(n) {
    let {
        parentSpan: e,
        dom: t = document
    } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    wS("Adding script", n),
        function() {
            uP || (uP = !0, Object.defineProperty(define, "amd", {
                get: g9.bind(this, define.amd),
                configurable: !0
            }))
        }();
    let r = av.get(n);
    if (r) return wS("Script already added", n), r.promise;
    let i = H2(n, e),
        o = t.createElement("script");
    o.async = !1, o.setAttribute("src", n), o.setAttribute(q1, "false");
    let s = new Promise((a, l) => {
        let d = u(() => {
            o.setAttribute(q1, "true"), i == null || i.end()
        }, "a");
        o.onerror = o.onabort = c => {
            d(), l(`Error adding script '${n}' to document '${t.baseURI}'`)
        }, o.onload = c => {
            wS("Script added", n), d(), a(c)
        }
    });
    return fc != null && fc.domElement.parentNode ? fc.domElement.parentNode.insertBefore(o, fc.domElement.nextSibling) : t.head.appendChild(o), i == null || i.activate(), av.set(n, {
        promise: s,
        domElement: o
    }), fc = av.get(n), s
}
u(G1, "nm");

function wS(n, e) {
    let t = df(document.baseURI);
    z(f9, `${n} '${e}' : document '${t}'`)
}
u(wS, "rm");

function g9(n) {
    let e = document.currentScript;
    if (!(e != null && e.hasAttribute(q1))) return n
}
u(g9, "im");
var p9 = Object.freeze({
        __proto__: null,
        addScript: G1,
        clearScripts: u(function() {
            av.clear(), fc = null
        }, "clearScripts"),
        createScriptSpan: H2,
        getScriptName: V2,
        scheduleCustomJsLoading: u(function(n, e) {
            let {
                parentSpan: t,
                dom: r = document
            } = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
            return Promise.all(n.map(i => G1(i, {
                parentSpan: t,
                dom: r
            }).catch(e)))
        }, "scheduleCustomJsLoading")
    }),
    m9 = new dn("DuplicatedList", "duplicatedListOut"),
    v9 = new dn("FilteredList", "filteredListOut"),
    y9 = new dn("DistinctList", "distinctListOut"),
    b9 = new As("ExternalLoginURL", "externalLoginURLOut"),
    w9 = new dn("UserLoginResult", "userLoginResultOut"),
    T9 = new As("ExternalLogoutURL", "externalLogoutURLOut"),
    E9 = new dn("PasswordComplexityPolicy", "passwordComplexityPolicyOut"),
    _9 = new dn("PasswordValidationResult", "passwordValidationResultOut");
new dn("ResetPasswordResult", "resetPasswordResultOut");
var S9 = new As("IsExternalUser", "isExternalUserOut"),
    I9 = new dn("RegistrationResult", "registrationResultOut"),
    A9 = new dn("ChangePasswordResult", "changePasswordResultOut");
new dn("UpdateUserResult", "updateUserResultOut");
var C9 = new dn("UserInfo", "userInfoOut"),
    R9 = new dn("FinishResetPasswordResult", "finishResetPasswordResultOut"),
    XA = class XA {
        constructor() {}
        getCurrentRowNumber(e) {
            return 0
        }
        setCurrentRowNumber(e, t) {}
        isBeingIterated(e) {
            return !1
        }
        registerIterationStart(e) {}
        registerIterationEnd(e) {}
        getIterator(e) {
            return null
        }
        clone() {
            return this
        }
    };
u(XA, "bm");
var K1 = XA;

function Ta(n, e, t) {
    if (e.isBeingIterated(n)) throw new Error("List is being iterated: " + t + " is not allowed")
}
u(Ta, "Tm");

function cc(n, e, t, r) {
    Ta(n, e, t);
    try {
        return e.registerIterationStart(n), r()
    } finally {
        e.registerIterationEnd(n)
    }
}
u(cc, "wm");

function Vr(n) {
    return n ? n.iterationContext : new K1
}
u(Vr, "Em");
var QA = class QA extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Result", "resultOut", "resultOut", !0, !0, T.Boolean, () => {})].concat(super.attributesToDeclare())
    }
};
u(QA, "Im");
var wl = QA;
wl._constructor = void wl.init();
var eC = class eC extends Be {
    constructor(e, t) {
        super(e, t)
    }
    static attributesToDeclare() {
        return [this.attr("Position", "positionOut", "positionOut", !0, !0, T.Integer, () => {})].concat(super.attributesToDeclare())
    }
};
u(eC, "Am");
var nf = eC;

function O9(n) {
    let e = ko(n),
        t = df(n.message);
    switch (xe("Login SystemAction", t, n.errorCode, n, Oe.Internal), n.errorCode) {
        case "OS-CLRT-40109":
            return new Q.InvalidLoginException("Identity provider configurations missing.", e);
        case "OS-ID-BIZ-40021":
            return new Q.InvalidLoginException("Error retrieving token from identity provider.", e);
        default:
            return new Q.InvalidLoginException("Login Failed.", e)
    }
}
u(O9, "Nm");

function jn(n, e) {
    let t = n instanceof Error ? n.message : n;
    al({
        category: "SystemAction",
        clientMessage: `Error in ${e}: ${typeof t=="string"?t:"Unknown error"}`,
        internalMessage: `Error in ${e}`,
        errorCode: "OS-CLRT-00000",
        errorObj: n instanceof Error ? n : void 0
    })
}
u(jn, "Sm");

function Lt(n, e, t) {
    let r = wI(n, Oe.External);
    r == null || r.setAttribute("code.function", n), r == null || r.setAttribute("outsystems.function.key", e), r == null || r.setAttribute("outsystems.function.owner.name", "(System)"), r == null || r.setAttribute("outsystems.function.owner.key", "478870b9-2d60-4f73-9eb3-7cd8b994a737"), r == null || r.setAttribute("outsystems.function.type", "CLIENT_SYSTEM_ACTION");
    try {
        return t(r)
    } finally {
        r == null || r.end()
    }
}
u(Lt, "Dm");
nf._constructor = void nf.init();
var D9 = Object.freeze({
        __proto__: null,
        changePassword: u(function(n, e, t, r) {
            return M(this, arguments, void 0, function(i, o, s, a) {
                var l = this;
                let d = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : qk;
                return function*() {
                    return Lt("ChangePassword", "b17b5077-e564-4145-b640-9fcb359cbb07", () => M(l, void 0, void 0, function*() {
                        let c = new(A9.getType(vy));
                        try {
                            yield d({
                                username: i,
                                oldPassword: s,
                                newPassword: o
                            }), c.changePasswordResultOut.successAttr = !0
                        } catch (h) {
                            let f = h;
                            c.changePasswordResultOut.successAttr = !1, f.name === at.PasswordComplexityPolicyFailed ? c.changePasswordResultOut.changePasswordFailureReasonAttr.passwordComplexityPolicyFailedAttr = !0 : f.name === at.InvalidCredentials ? c.changePasswordResultOut.changePasswordFailureReasonAttr.invalidCredentialsAttr = !0 : f.name === at.TooManyFailedAttempts && (c.changePasswordResultOut.changePasswordFailureReasonAttr.tooManyFailedAttemptsAttr = !0)
                        }
                        return c
                    }))
                }()
            })
        }, "changePassword"),
        finishResetPassword: u(function(n, e, t, r) {
            return M(this, arguments, void 0, function(i, o, s, a) {
                var l = this;
                let d = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : Hk;
                return function*() {
                    return Lt("FinishResetPassword", "4c9a2d55-1e48-4a73-b6dd-197773173c84", () => M(l, void 0, void 0, function*() {
                        let c = new(R9.getType(_y));
                        if (!o) return c.finishResetPasswordResultOut.successAttr = !1, c.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidVerificationCodeAttr = !0, c;
                        if (!i) return c.finishResetPasswordResultOut.successAttr = !1, c.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidEmailAttr = !0, c;
                        try {
                            yield d({
                                username: i,
                                resetToken: o,
                                newPassword: s
                            }), c.finishResetPasswordResultOut.successAttr = !0
                        } catch (h) {
                            let f = h;
                            c.finishResetPasswordResultOut.successAttr = !1;
                            let g = c.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr;
                            f.name === at.PasswordComplexityPolicyFailed ? g.passwordComplexityPolicyFailedAttr = !0 : f.name === at.InvalidToken ? g.invalidVerificationCodeAttr = !0 : f.name === at.InvalidCredentials && (g.invalidEmailAttr = !0)
                        }
                        return c
                    }))
                }()
            })
        }, "finishResetPassword"),
        finishUserRegistration: u(function(n, e, t, r) {
            return M(this, arguments, void 0, function(i, o, s, a) {
                var l = this;
                let d = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : Wk,
                    c = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : Da;
                return function*() {
                    return Lt("FinishUserRegistration", "44a8850b-2e2d-4f19-9ea4-e5f40a050b5b", () => M(l, void 0, void 0, function*() {
                        let h = new(I9.getType(wy));
                        if (!s) return h.registrationResultOut.successAttr = !1, h.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr = !0, h;
                        if (!i) return h.registrationResultOut.successAttr = !1, h.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr = !0, h;
                        try {
                            yield d({
                                username: i,
                                password: o,
                                temporaryPassword: s
                            }), h.registrationResultOut.successAttr = !0, h.registrationResultOut.userIdAttr = c()
                        } catch (f) {
                            let g = f;
                            h.registrationResultOut.successAttr = !1, g.name === at.PasswordComplexityPolicyFailed ? h.registrationResultOut.finishUserRegistrationFailureReasonAttr.passwordComplexityPolicyFailedAttr = !0 : g.name === at.InvalidToken ? h.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr = !0 : g.name === at.InvalidCredentials && (h.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr = !0)
                        }
                        return h
                    }))
                }()
            })
        }, "finishUserRegistration"),
        getExternalLoginURL: u(function(n, e, t) {
            return M(this, arguments, void 0, function(r, i, o) {
                var s = this;
                let a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : Pk,
                    l = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : de.resolve(Y.AuthConfigsManager);
                return function*() {
                    return Lt("GetExternalLoginURL", "da6adf2c-ff63-4d63-a90e-a58819b503eb", () => M(s, void 0, void 0, function*() {
                        let d = r === "" ? void 0 : r,
                            c = new(b9.getType(T.Text)),
                            [h] = l.readAuthConfigs(i);
                        if (!h) {
                            let f = new Error(`The given identity provider '${i}' does not exist.`);
                            throw jn(f, "getExternalLoginURL"), f
                        }
                        return c.externalLoginURLOut = yield a({
                            callbackUrl: d,
                            authConfigs: i ? Object.assign(Object.assign({}, h.configs), {
                                identityProvider: h.kc_hint
                            }) : void 0
                        }), c
                    }))
                }()
            })
        }, "getExternalLoginURL"),
        getExternalLogoutURL: u(function(n, e) {
            return M(this, arguments, void 0, function(t, r) {
                var i = this;
                let o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Fk;
                return function*() {
                    return Lt("GetExternalLogoutURL", "c5bd52b6-817c-4268-9d9b-7d2bfe7228fe", () => M(i, void 0, void 0, function*() {
                        let s = t === "" ? void 0 : t,
                            a = new(T9.getType(T.Text));
                        return a.externalLogoutURLOut = yield o({
                            callbackUrl: s
                        }), a
                    }))
                }()
            })
        }, "getExternalLogoutURL"),
        getPasswordComplexityPolicy: u(function(n) {
            let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : $k;
            return Lt("GetPasswordComplexityPolicy", "dc6941b3-7f13-4266-92a7-afc438918f3f", () => {
                let t = new(E9.getType(yy)),
                    r = e();
                return t.passwordComplexityPolicyOut.minimumLengthAttr = r.minimumLength, t.passwordComplexityPolicyOut.lowerCaseLetterRequiredAttr = r.lowerCaseLetterRequired, t.passwordComplexityPolicyOut.upperCaseLetterRequiredAttr = r.upperCaseLetterRequired, t.passwordComplexityPolicyOut.numberRequiredAttr = r.numberRequired, t.passwordComplexityPolicyOut.specialCharacterRequiredAttr = r.specialCharacterRequired, t
            })
        }, "getPasswordComplexityPolicy"),
        getUserProfile: u(function(n) {
            return M(this, arguments, void 0, function(e) {
                var t = this;
                let r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : mI;
                return function*() {
                    return Lt("GetUserProfile", "a4d7f4ef-399a-4294-8ab4-cf1437699fe3", () => M(t, void 0, void 0, function*() {
                        let i = new(C9.getType(Ty)),
                            o = yield r();
                        return i.userInfoOut.emailAttr = o.username, i.userInfoOut.nameAttr = o.name, i.userInfoOut.photoURLAttr = o.pictureUrl, i
                    }))
                }()
            })
        }, "getUserProfile"),
        isExternalUser: u(function(n) {
            let e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : zk;
            return Lt("IsExternalUser", "5365bc0e-70f6-4e7f-90bf-6c6e12da81bb", () => {
                let t = new(S9.getType(T.Boolean));
                return t.isExternalUserOut = e(), t
            })
        }, "isExternalUser"),
        listAll: u(function(n, e, t) {
            return Lt("ListAll", "22f2c626-25d5-4457-bbe7-94261470862e", () => {
                try {
                    let r = Vr(t);
                    return cc(n, r, "all", () => {
                        let i = new wl;
                        return i.resultOut = n.all(e), i
                    })
                } catch (r) {
                    throw jn(r, "listAll"), r
                }
            })
        }, "listAll"),
        listAny: u(function(n, e, t) {
            return Lt("ListAny", "d562e8a9-e680-48d3-8274-1e7e5437e4f8", () => {
                try {
                    let r = Vr(t);
                    return cc(n, r, "any", () => {
                        let i = new wl;
                        return i.resultOut = n.any(e), i
                    })
                } catch (r) {
                    throw jn(r, "listAny"), r
                }
            })
        }, "listAny"),
        listAppend: u(function(n, e, t) {
            return Lt("ListAppend", "aa5b021e-e937-4b80-a2b3-c95b4339a11d", () => {
                try {
                    let r = Vr(t);
                    Ta(n, r, "append"), n.append(e)
                } catch (r) {
                    throw jn(r, "listAppend"), r
                }
            })
        }, "listAppend"),
        listAppendAll: u(function(n, e, t) {
            return Lt("ListAppendAll", "cfed0293-97ed-42f7-8d5a-5a2582ecb1da", () => {
                try {
                    let r = Vr(t);
                    Ta(n, r, "appendAll"), n.appendAll(e)
                } catch (r) {
                    throw jn(r, "listAppendAll"), r
                }
            })
        }, "listAppendAll"),
        listClear: u(function(n, e) {
            return Lt("ListClear", "c534e5bd-7032-4d4c-97e1-abbf1dee3fbf", () => {
                try {
                    let t = Vr(e);
                    Ta(n, t, "clear"), n.clear(), t.setCurrentRowNumber(n, 0)
                } catch (t) {
                    throw jn(t, "listClear"), t
                }
            })
        }, "listClear"),
        listDistinct: u(function(n, e) {
            return Lt("ListDistinct", "b54c6849-3ce4-455a-af15-ad7a37c9899f", () => {
                try {
                    let t = Vr(e);
                    return cc(n, t, "distinct", () => {
                        let r = new(y9.getType(n.constructor));
                        return r.distinctListOut = n.distinct(), r
                    })
                } catch (t) {
                    throw jn(t, "listDistinct"), t
                }
            })
        }, "listDistinct"),
        listDuplicate: u(function(n, e) {
            return Lt("ListDuplicate", "dbe15950-87da-4517-88b4-14c83bbe7d94", () => {
                try {
                    let t = Vr(e);
                    Ta(n, t, "duplicate");
                    let r = new(m9.getType(n.constructor));
                    return r.duplicatedListOut = n.clone(), r
                } catch (t) {
                    throw jn(t, "listDuplicate"), t
                }
            })
        }, "listDuplicate"),
        listFilter: u(function(n, e, t) {
            return Lt("ListFilter", "5137c152-4d59-48f6-b86e-b6b8e7b1e160", () => {
                try {
                    let r = Vr(t);
                    return cc(n, r, "filter", () => {
                        let i = new(v9.getType(n.constructor));
                        return i.filteredListOut = n.filter(e), i
                    })
                } catch (r) {
                    throw jn(r, "listFilter"), r
                }
            })
        }, "listFilter"),
        listIndexOf: u(function(n, e, t) {
            return Lt("ListIndexOf", "763a5d96-a42e-49b6-8129-b46525912667", () => {
                try {
                    let r = Vr(t);
                    return cc(n, r, "indexOf", () => {
                        let i = new nf;
                        return i.positionOut = n.indexOf(e), i
                    })
                } catch (r) {
                    throw jn(r, "listIndexOf"), r
                }
            })
        }, "listIndexOf"),
        listInsert: u(function(n, e, t, r) {
            return Lt("ListInsert", "6c6663d0-5b99-492d-80a5-284def1ceb8c", () => {
                try {
                    let i = Vr(r);
                    Ta(n, i, "insert"), n.insert(t, e);
                    let o = i.getCurrentRowNumber(n);
                    n.length > 1 && t <= o && i.setCurrentRowNumber(n, o + 1)
                } catch (i) {
                    throw jn(i, "listInsert"), i
                }
            })
        }, "listInsert"),
        listRemove: u(function(n, e, t) {
            return Lt("ListRemove", "9a0ebe10-cdee-4774-9179-e3c439bb0d3a", () => {
                try {
                    let r = Vr(t);
                    Ta(n, r, "remove");
                    let i = n.length === 1,
                        o;
                    i && (o = n.getItem(0)), n.remove(e), i && (n.emptyListItem = o);
                    let s = r.getCurrentRowNumber(n);
                    e < s ? r.setCurrentRowNumber(n, s - 1) : e === n.length && r.setCurrentRowNumber(n, Math.max(0, n.length - 1))
                } catch (r) {
                    throw jn(r, "listRemove"), r
                }
            })
        }, "listRemove"),
        listSort: u(function(n, e, t, r) {
            return Lt("ListSort", "c7db4ad0-51cc-44e5-aa36-50546face388", () => {
                try {
                    let i = Vr(r);
                    return cc(n, i, "sort", () => {
                        n.sort(e, t)
                    })
                } catch (i) {
                    throw jn(i, "listSort"), i
                }
            })
        }, "listSort"),
        logMessage: u(function(n, e, t) {
            return Lt("LogMessage", "8c126211-5b78-442b-8a4d-fc2f72d10ef2", () => {
                hr(e, n, Oe.Client)
            })
        }, "logMessage"),
        login: u(function(n, e, t, r) {
            return M(this, arguments, void 0, function(i, o, s, a) {
                var l = this;
                let d = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : Uk;
                return function*() {
                    return Lt("Login", "477c9f29-36c5-42a9-b910-3e5d70c7427e", () => M(l, void 0, void 0, function*() {
                        let c = new(w9.getType(Ey));
                        try {
                            c.userLoginResultOut.userIdAttr = yield d({
                                username: i,
                                password: o,
                                persistLogin: s
                            }), c.userLoginResultOut.successAttr = !0
                        } catch (h) {
                            let f = h;
                            if (c.userLoginResultOut.userIdAttr = "", c.userLoginResultOut.successAttr = !1, c.userLoginResultOut.retryAfterSecondsAttr = 10, f.name === at.InvalidCredentials) c.userLoginResultOut.userLoginFailureReasonAttr.invalidCredentialsAttr = !0;
                            else {
                                if (f.name !== at.TooManyFailedAttempts) throw O9(f);
                                c.userLoginResultOut.userLoginFailureReasonAttr.tooManyFailedLoginAttemptsAttr = !0
                            }
                        }
                        return c
                    }))
                }()
            })
        }, "login"),
        logout: u(function(n, e) {
            return M(this, arguments, void 0, function(t, r) {
                let i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Mk;
                return function*() {
                    return Lt("Logout", "41ac3c1a-dffd-4b4f-acc0-fa439a975601", () => i({
                        callbackUrl: typeof t == "string" ? t : ""
                    }))
                }()
            })
        }, "logout"),
        requireScript: u(function(n, e) {
            return Lt("RequireScript", "388d4655-dd1c-4c5c-8d46-f420d0fe02a1", t => {
                try {
                    return G1(sl.getVersionedUrl(n), {
                        parentSpan: t
                    })
                } catch (r) {
                    throw jn(r, "requireScript"), r
                }
            })
        }, "requireScript"),
        setCurrentLocale: u(function(n, e) {
            let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : de;
            return Lt("SetCurrentLocale", "f2708145-60c0-49dc-9a1a-8b0f1fae5dce", () => {
                try {
                    let r = t.resolve(Y.LocaleService);
                    if (!r) {
                        let i = new Error("Undefined locale service: can't set current locale.");
                        throw jn(i, "setCurrentLocale"), i
                    }
                    r.setCurrentLocale(n)
                } catch (r) {
                    throw jn(r, "setCurrentLocale"), r
                }
            })
        }, "setCurrentLocale"),
        validatePasswordComplexity: u(function(n, e) {
            let t = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Vk;
            return Lt("ValidatePasswordComplexity", "e11739ec-bce8-4f6c-a952-886e102ecac5", () => {
                let r = new(_9.getType(by)),
                    i = t({
                        password: n
                    });
                return r.passwordValidationResultOut.isValidAttr = i.isValid, r.passwordValidationResultOut.missingMinimumLengthAttr = i.missingMinimumLength, r.passwordValidationResultOut.missingUpperCaseLetterAttr = i.missingUpperCaseLetter, r.passwordValidationResultOut.missingLowerCaseLetterAttr = i.missingLowerCaseLetter, r.passwordValidationResultOut.missingNumberAttr = i.missingNumber, r.passwordValidationResultOut.missingSpecialCharacterAttr = i.missingSpecialCharacter, r
            })
        }, "validatePasswordComplexity")
    }),
    No, rl, N9 = Object.freeze({
        __proto__: null,
        StringUtils: (rl = class {
            static safeParseInt(e) {
                let t = e;
                return e && !isNaN(Number(e)) && (t = parseInt(e, 10)), t
            }
        }, u(rl, "StringUtils"), rl)
    }),
    L9 = Object.freeze({
        __proto__: null
    });
(function(n) {
    n[n.Normal = 0] = "Normal", n[n.AtFunctionReturn = 1] = "AtFunctionReturn", n[n.BetweenAssignments = 2] = "BetweenAssignments"
})(No || (No = {}));
var x9 = "ccid",
    cP = "dbg-stop",
    TS = "dbg-bkp",
    rn, Lo;
(function(n) {
    n[n.StepOver = 0] = "StepOver", n[n.StepInto = 1] = "StepInto", n[n.StepOut = 2] = "StepOut", n[n.Continue = 3] = "Continue", n[n.ContinueToHere = 4] = "ContinueToHere", n[n.None = 5] = "None"
})(rn || (rn = {})),
function(n) {
    n[n.Unprepared = 0] = "Unprepared", n[n.WaitingForClient = 1] = "WaitingForClient", n[n.Prepared = 2] = "Prepared"
}(Lo || (Lo = {}));
var Oo = class Oo {
    constructor() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null,
            t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null,
            r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null,
            i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null;
        this.moduleKey = e, this.objectKey = t, this.compoundKey = r, this.debuggerHash = i
    }
    init(e) {
        if (!e) return;
        let t = e.split(Oo.SeparatorChar);
        this.moduleKey = t[0], this.objectKey = t[1], this.compoundKey = t.length > 2 && t[2] ? t[2] : null, this.debuggerHash = t.length > 3 && t[3] ? t[3] : null
    }
    static parse(e) {
        if (!e) return null;
        try {
            let t = new Oo;
            return t.init(e), t
        } catch (t) {
            return null
        }
    }
    equals(e) {
        return !!e && e.moduleKey === this.moduleKey && e.objectKey === this.objectKey
    }
    toString() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
        var t;
        return e ? this.moduleKey + Oo.SeparatorChar + (this.objectKey || "") + Oo.SeparatorChar + (this.compoundKey || "") + Oo.SeparatorChar + (this.debuggerHash || "") : this.moduleKey + Oo.SeparatorChar + ((t = this.objectKey) !== null && t !== void 0 ? t : "")
    }
};
u(Oo, "$m");
var qr = Oo;
qr.SeparatorChar = ":";
var tC = class tC {
    constructor() {
        let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : rn.None,
            t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : -1;
        this._commandType = e, this._stackLevel = t
    }
    resetCommandState() {
        this._commandType = rn.None, this._stackLevel = -1
    }
    get commandType() {
        return this._commandType
    }
    set commandType(e) {
        this._commandType = e
    }
    get stackLevel() {
        return this._stackLevel
    }
    set stackLevel(e) {
        this._stackLevel = e
    }
};
u(tC, "Pm");
var Ay = tC,
    nC = class nC {
        constructor(e, t, r, i, o) {
            this.elementKey = e, this.moduleName = t, this.elementName = r, this.elementType = i, this.varBag = o, this.currentBreakpoint = null, this.previousBreakpoint = null, this.breakpointType = null, this.extraInfo = null, this.functionLeft = ""
        }
        refreshLocalState(e, t, r) {
            this.previousBreakpoint = this.currentBreakpoint, this.currentBreakpoint = e, this.breakpointType = t, this.extraInfo = r
        }
    };
u(nC, "Vm");
var Cy = nC,
    rC = class rC {
        constructor() {
            this.callStack = new Array, this._command = new Ay, this._continueToHereBreakpoint = void 0, this._stopImmediately = !1
        }
        pushCallOnStack(e, t, r, i, o) {
            this.callStack.push(new Cy(e, t, r, i, o))
        }
        popCallOnStack() {
            let e = this.callStack.pop(),
                t = this.peekLastCallOnStack();
            return this.callStack.length > 0 && t && (t.functionLeft = e == null ? void 0 : e.elementName), e
        }
        peekLastCallOnStack() {
            if (!(this.callStack.length <= 0)) return this.callStack[this.callStack.length - 1]
        }
        getCallOnStack(e) {
            if (!(e < 0 || e >= this.callStack.length)) return this.callStack[e];
            Je("The received stack level is not valid. Received '" + e + "', current thread stack length '" + this.callStack.length + "'")
        }
        refreshLastCallOnStack(e, t, r) {
            var i;
            (i = this.peekLastCallOnStack()) === null || i === void 0 || i.refreshLocalState(e, t, r)
        }
        set command(e) {
            this._command = e
        }
        get command() {
            return this._command
        }
        get stackLevel() {
            return this.callStack.length
        }
        get stopImmediately() {
            return this._stopImmediately
        }
        set stopImmediately(e) {
            this._stopImmediately = e || !1
        }
        get continueToBreakpoint() {
            return this._continueToHereBreakpoint
        }
        set continueToBreakpoint(e) {
            this._continueToHereBreakpoint = e
        }
        get threadStartName() {
            return this._threadStartName || ""
        }
        set threadStartName(e) {
            this._threadStartName = e
        }
        getThreadStack() {
            return this.callStack.map(e => {
                var t;
                return {
                    currentBreakpoint: e.currentBreakpoint !== null && e.currentBreakpoint !== void 0 ? e.currentBreakpoint.toString(!0) : null,
                    previousBreakpoint: e.previousBreakpoint !== null && e.previousBreakpoint !== void 0 ? e.previousBreakpoint.toString(!0) : null,
                    breakpointType: (t = e.breakpointType) !== null && t !== void 0 ? t : No.Normal,
                    extraInfo: e.extraInfo,
                    elementKey: e.elementKey !== null && e.elementKey !== void 0 ? e.elementKey.toString(!0) : null,
                    elementName: e.elementName,
                    elementType: e.elementType,
                    functionLeft: e.functionLeft,
                    moduleName: e.moduleName
                }
            })
        }
    };
u(rC, "Bm");
var Ry = rC;

function Je(n, e) {
    z("Debugger", n, e)
}
u(Je, "km");
var P9 = /^([0-9]+)$/,
    lP = /\[[^\]]*[^0-9\]]+[^\]]*\]/,
    iC = class iC {
        constructor() {
            this.isInSession = !1, this.breakpoints = new Map, this.callContexts = new Map, this.initializationStatus = Lo.Unprepared, this._pauseOnAllExceptions = !1, this.exceptionsMap = new Map, this.pausedOnAnException = !1, this.allowedModules = new Map
        }
        get BreakpointType() {
            return No
        }
        isPausedOnException() {
            return this.pausedOnAnException
        }
        get version() {
            return 3
        }
        isSessionActive() {
            return this.isInSession
        }
        startSession() {
            if (this.isInSession) return void Je("Debugger is already in session");
            this.pendingInitializationHandler && (this.initializationStatus = Lo.Prepared, this.pendingInitializationHandler(), this.pendingInitializationHandler = null), this.isInSession = !0;
            let e = de.resolve(Y.DebuggerHttpClient);
            e && de.register(Y.HttpClient, () => e)
        }
        endSession() {
            if (!this.isInSession) return void Je("Can't end an nonexisting session");
            this.isInSession = !1;
            let e = de.resolve(Y.NonDebuggerHttpClient);
            e && de.register(Y.HttpClient, () => e)
        }
        addBreakpoint(e) {
            qr.parse(e) !== null ? this.breakpoints.get(e) ? Je(`Breakpoint with id '${e}' already registered`) : this.breakpoints.set(e, !0) : Je(`Cannot convert '${e}' to a BreakpointId`)
        }
        addBreakpoints(e) {
            e.forEach(t => this.addBreakpoint(t))
        }
        allowBreakpointsFromModule(e) {
            this.allowedModules.get(e) ? Je(`Application with key '${e}' is already allowed`) : this.allowedModules.set(e, !0)
        }
        removeBreakpoint(e) {
            qr.parse(e) !== null ? this.breakpoints.delete(e) || Je(`Breakpoint with id '${e}'  isn't registered`) : Je(`Cannot convert '${e}' to a BreakpointId`)
        }
        clearBreakpoints() {
            this.breakpoints.clear()
        }
        push(e, t, r, i, o, s) {
            if (!this.isInSession) return;
            let a = qr.parse(e);
            if (!a) return void Je(`Error when parsing breakpointId '${e}'`);
            let l = this.callContexts.get(o);
            l || (l = new Ry, this.callContexts.set(o, l)), l.pushCallOnStack(a, t, r, i, s)
        }
        pop(e, t) {
            if (!this.isInSession) return;
            let r = qr.parse(e);
            if (!r) return void Je(`Error when parsing breakpointId '${e}'`);
            let i = this.callContexts.get(t);
            if (!i) return void Je(`There is no action to end to callContextId '${t.toString()}'`);
            let o = i.peekLastCallOnStack();
            o != null && o.elementKey.equals(r) ? (i.popCallOnStack(), i.stackLevel <= 0 && (this.callContexts.delete(t), this.exceptionsMap.delete(t))) : Je(`Action to end didn't match to current running action. Running action key: '${o==null?void 0:o.elementKey.toString()}', tried to end: '${r.toString()}'`)
        }
        stepInto(e) {
            this.fillCommandByCallContextId(e, rn.StepInto)
        }
        stepOver(e) {
            this.fillCommandByCallContextId(e, rn.StepOver)
        }
        stepOut(e) {
            this.fillCommandByCallContextId(e, rn.StepOut)
        }
        continue (e) {
            this.fillCommandByCallContextId(e, rn.Continue)
        }
        continueToHere(e, t) {
            let r = qr.parse(e);
            if (!r) return void Je(`Error when parsing breakpointId '${e}'`);
            this.fillCommandByCallContextId(t, rn.ContinueToHere);
            let i = this.callContexts.get(t);
            i && (i.continueToBreakpoint = r)
        }
        pauseOnAllExceptions(e) {
            this._pauseOnAllExceptions = e
        }
        fillCommandByCallContextId(e, t) {
            if (!this.isInSession) return void Je("Cannot preform debug actions out of a session context");
            let r = this.callContexts.get(e);
            r ? (r.command.commandType = t, r.command.stackLevel = r.stackLevel) : Je(`No match for callContextId '${e}'`)
        }
        handleFunctionCall(e, t, r) {
            var i;
            let o = e();
            if (!this.isInSession) return o;
            let s = this.callContexts.get(r);
            if (!s) return Je(`There is no callContext registered with Id '${r}'`), o;
            let a = s.getCallOnStack(s.stackLevel - 1),
                l = (i = a == null ? void 0 : a.currentBreakpoint) !== null && i !== void 0 ? i : a == null ? void 0 : a.elementKey;
            return l && this.handleBreakpoint(l.toString(!0), r, No.AtFunctionReturn, rf.to(o, a == null ? void 0 : a.varBag.callContext, null, null, t)), o
        }
        handleBreakpoint(e, t) {
            let r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : No.Normal,
                i = arguments.length > 3 ? arguments[3] : void 0;
            if (!this.isInSession) return !0;
            let o = qr.parse(e);
            if (!o) return Je(`Error when parsing breakpointId '${e}'`), !0;
            let s = this.callContexts.get(t);
            if (!s) return Je(`Trying to handle breakpoint with id '${e}', 
                but there is no callContext registered with Id '${t}'`), !0;
            if (s.refreshLastCallOnStack(o, r, i), !this.allowedModules.get(o.moduleKey)) return z("Debugger", `Skipping breakpoint '${e}' because breakpoints from app with key '${o.moduleKey}' are to be ignored.`), !0;
            if (s.stopImmediately || this.breakpoints.get(e) && s.command.commandType !== rn.ContinueToHere && r === No.Normal) return s.stopImmediately = !1, this.resetStateAndCallDebugger(s, t), !0;
            switch (s.command.commandType) {
                case rn.StepInto:
                    this.resetStateAndCallDebugger(s, t);
                    break;
                case rn.StepOut:
                    s.stackLevel < s.command.stackLevel && this.resetStateAndCallDebugger(s, t);
                    break;
                case rn.StepOver:
                    s.stackLevel <= s.command.stackLevel && r === No.Normal && this.resetStateAndCallDebugger(s, t);
                    break;
                case rn.ContinueToHere:
                    o.equals(s.continueToBreakpoint) && r === No.Normal && (s.continueToBreakpoint = void 0, this.resetStateAndCallDebugger(s, t))
            }
            return !0
        }
        resetStateAndCallDebugger(e, t) {
            e.command.resetCommandState(), this.callDebugger(t)
        }
        handleException(e, t) {
            if (!this.isInSession || iI(e)) return;
            let r = this.callContexts.get(t),
                i = Yr(e);
            if (!r) return void Je(`Trying to handle Exception with message '${i}', but there is no callContext registered with Id '${t}'`, Oe.Client);
            if (e !== this.exceptionsMap.get(t) && (this.exceptionsMap.set(t, e), this._pauseOnAllExceptions)) {
                this.pausedOnAnException = !0;
                try {
                    this.callDebugger(t)
                } finally {
                    this.pausedOnAnException = !1
                }
            }
        }
        getExceptionMessage(e) {
            if (!this.getThreadState(e)) return;
            let t = this.exceptionsMap.get(e);
            if (t !== void 0) return Yr(t);
            Je(`There is no Exception associated to callContext with Id '${e}'`)
        }
        getThreadState(e) {
            if (!this.isInSession) return void Je("Cannot perform debug actions out of a session context");
            let t = this.callContexts.get(e);
            if (t) return t;
            Je(`There is no callContext registered with Id '${e}'`)
        }
        getThreadStack(e) {
            let t = this.getThreadState(e);
            if (t) return t.getThreadStack()
        }
        parse(e) {
            return qr.parse(e)
        }
        initialize(e) {
            switch (this.initializationStatus) {
                case Lo.WaitingForClient:
                    return Promise.reject("Debugger already waiting for client initialization");
                case Lo.Prepared:
                    return Promise.reject("Debugger already initialized")
            }
            return e === void 0 && (e = !!gk("_waitForClient")), de.register(Y.Debugger, () => this), new Promise((t, r) => {
                e && !this.isInSession ? (this.initializationStatus = Lo.WaitingForClient, this.pendingInitializationHandler = t) : (this.initializationStatus = Lo.Prepared, t())
            })
        }
        registerMetaInfo(e) {
            this.metaInfoMap || (this.metaInfoMap = new Map);
            for (let t in e) e.hasOwnProperty(t) && !this.metaInfoMap.get(t) && this.metaInfoMap.set(t, e[t])
        }
        getRuntimeExpression(e, t) {
            if (!this.metaInfoMap) return void Je("MetaInfo not registered yet.");
            let r = this.metaInfoMap.get(e);
            if (r) return r;
            Je(`There is no mapping defined for variable with the key '${e}', that was evaluated in the context of the action with the key '${t}'.`)
        }
        innerEvaluateVariable(e, t, r, i) {
            let o = this.getThreadState(e);
            if (!o) return;
            let s = o.getCallOnStack(t);
            if (!s) return;
            let a = this.getRuntimeExpression(i, r);
            if (!a) return void Je(`Failed to get runtime variable expression. CallContextId '${e}', stackLevel '${t}'`);
            let l;
            try {
                l = a.getter(s.varBag, s.varBag.idService)
            } catch (d) {} finally {
                l === void 0 && Je(`Couldn't evaluate variable with key '${i}', that was evaluated in the context of the action with key: '${r}' stackLevel: '${t}' callContextId: '${e}'.`)
            }
            return l
        }
        splitPath(e) {
            if (!lP.test(e)) return e ? e.split(/[.\[\]]/).filter(t => t !== "").slice(1) : void 0
        }
        evaluateVariable(e, t, r, i, o, s) {
            if (i === "" && o === "$return") {
                let f = this.getThreadState(e);
                if (!f) return;
                let g = f.getCallOnStack(t);
                return g ? g.extraInfo : void 0
            }
            let a = this.innerEvaluateVariable(e, t, r, i);
            if (a === void 0 || lP.test(o)) return;
            let l = this.callContexts.get(e),
                d = l == null ? void 0 : l.getCallOnStack(t),
                c = this.getRuntimeExpression(i, r),
                h = this.splitPath(o);
            return rf.to(a, d == null ? void 0 : d.varBag.callContext, h, s, c == null ? void 0 : c.dataType)
        }
        getRequestHeaders(e) {
            if (!this.isInSession) return;
            let t = this.callContexts.get(e);
            if (!t) return void Je(`There is no callContext registered with Id '${e}'`);
            let r = {};
            r[x9] = String(e);
            let i = t.command;
            return i && i.commandType === rn.StepInto ? r[cP] = "true" : t.continueToBreakpoint && i.commandType === rn.ContinueToHere && (r[TS] = String(t.continueToBreakpoint)), r
        }
        lookupCaseInsensitive(e, t) {
            let r = t.toLowerCase(),
                i = Object.keys(e).find(o => o.toLowerCase() === r);
            return i ? e[i] : void 0
        }
        processResponseHeaders(e, t) {
            if (!this.isInSession) return;
            let r = this.getThreadState(e);
            if (t && r)
                if ((this.lookupCaseInsensitive(t, cP) || "").toLowerCase() === "true") r.stopImmediately = !0;
                else if (this.lookupCaseInsensitive(t, TS)) {
                let i = this.lookupCaseInsensitive(t, TS);
                r.command.commandType = rn.ContinueToHere, r.continueToBreakpoint = qr.parse(i)
            } else r.command.commandType === rn.StepInto && (r.command.commandType = rn.Continue)
        }
        getThreadStartName(e) {
            var t;
            return (t = this.getThreadState(e)) === null || t === void 0 ? void 0 : t.threadStartName
        }
        setThreadStartName(e, t) {
            if (!this.isInSession) return;
            if (!this.callContexts) return void Je("No call context dictionary initialized yet");
            if (!this.callContexts.get(e)) return void Je("No thread state for this context id");
            let r = this.callContexts.get(e);
            r && (r.threadStartName = t)
        }
    };
u(iC, "jm");
var Oy = iC,
    rf;
(function(n) {
    function e(t, r) {
        return t === void 0 && (t = null), {
            value: t,
            type: T[r]
        }
    }
    u(e, "t"), n.to = u(function t(r, i, o) {
        let s = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : -1,
            a = arguments.length > 4 ? arguments[4] : void 0,
            l = Math.max(-1, (s != null ? s : 0) - 1);
        if (r instanceof Be) {
            let d = r,
                c = d.getAttributes();
            if (o && o.length > 0) {
                let f = o[0];
                if (o = o.slice(1), r instanceof Rs) {
                    let g = r;
                    if (f === "HasFetchError") return t(g.hasFetchErrorAttr, i, o, s, T.Boolean);
                    if (f === "IsDataFetched") return t(g.isDataFetchedAttr, i, o, s, T.Boolean)
                }
                if (c = c.filter(g => g.name === f), c.length === 0) return void Je(`No attribute matching the given path '${f}'.`); {
                    let g = c[0];
                    return t(d[g.attrName], i, o, s, g.dataType)
                }
            }
            if (s === 0) return e(null, T.Record);
            let h = {};
            for (let f of c) h[f.name] = t(d[f.attrName], i, o, l, f.dataType);
            if (r instanceof Rs) {
                let f = r;
                delete h.DataFetchStatus, h.IsDataFetched = t(f.isDataFetchedAttr, i, o, s, T.Boolean), h.HasFetchError = t(f.hasFetchErrorAttr, i, o, s, T.Boolean)
            }
            return e(h, T.Record)
        }
        if (r instanceof Mo) {
            let d = r,
                c;
            d.constructor.getItemType && (c = d.constructor.getItemType());
            let h = i.iterationContext.getCurrentRowNumber(d);
            if (o && o.length > 0) {
                let g = o[0];
                if (o = o.slice(1), g === "CurrentRowNumber") return t(h, i, o, s, T.Integer);
                if (g === "Current") return t(d.isEmpty ? d.emptyListItem : d.getItem(h), i, o, s, c);
                if (g === "Empty") return t(d.isEmpty, i, o, s, T.Boolean);
                if (g === "Length") return t(d.length, i, o, s, T.Integer); {
                    let p = P9.exec(g);
                    if (p) {
                        let y = parseInt(p[1], 10);
                        return y >= 0 && y < d.length ? t(d.getItem(y), i, o, s, c) : void Je(`Index out of bounds '${y}'.`)
                    }
                    return void Je(`No '${g}' attribute on Type 'List'.`)
                }
            }
            if (s === 0) return e(null, T.RecordList);
            let f = {
                CurrentRowNumber: t(h, i, o, l, T.Integer),
                Current: t(d.isEmpty ? d.emptyListItem : d.getItem(h), i, o, l, c),
                Empty: t(d.isEmpty, i, o, l, T.Boolean),
                Length: t(d.length, i, o, l, T.Integer)
            };
            for (let g = 0; g < d.length; g++) f["[" + g + "]"] = t(d.getItem(g), i, o, l, c);
            return e(f, T.RecordList)
        }
        if (r instanceof Fo) {
            if (s === 0) return e(null, T.Record);
            let d = r;
            if (o && o.length > 0) {
                let h = o[0];
                if (o = o.slice(1), h === "Id") return t(d.idAttr, i, o, s, T.Text);
                if (d instanceof vl) {
                    if (h === "Valid") return t(d.validAttr, i, o, s, T.Boolean);
                    if (h === "ValidationMessage") return t(d.validationMessageAttr, i, o, s, T.Text)
                }
                return void Je(`No attribute matching the given path '${h}'.`)
            }
            let c = {
                Id: t(d.idAttr, i, o, l, T.Text)
            };
            return d instanceof vl && (c.Valid = t(d.validAttr, i, o, l, T.Boolean), c.ValidationMessage = t(d.validationMessageAttr, i, o, l, T.Text)), e(c, T.Record)
        }
        return a !== void 0 ? o && o.length > 0 ? void Je(`Cannot perform a inner evaluation to a Basic Type. Trying to evaluate '${o[0]}' for a variable of type '${T[a]}'.`) : function(d, c) {
            switch (c) {
                case T.Integer:
                case T.Text:
                case T.PhoneNumber:
                case T.Email:
                case T.Boolean:
                    return e(d, c);
                case T.LongInteger:
                case T.Decimal:
                case T.Currency:
                    return e(d.toString(), c);
                case T.Date:
                    return e(d.toISODate(), c);
                case T.DateTime:
                    return e(d.toString(), c);
                case T.Time:
                    return e(d.toISOTime(), c);
                case T.BinaryData:
                    return e(d.length, c);
                case T.Object:
                    return e(null, c);
                case T.Record:
                    return void Je("Record is not a basic type");
                case T.RecordList:
                    return void Je("RecordList is not a basic type");
                default:
                    return void Je(`Unknown data type ${c}`)
            }
        }(r, a) : void Je("Variable Type didn't match any case. " + typeof r)
    }, "e")
})(rf || (rf = {}));
var z2 = "6.20.5";
nI("client-runtime-core", z2);
(typeof window != "undefined" ? window : global).OutSystemsDebugger = new class extends Oy {
    callDebugger(n) {
        let e = By(),
            t = e.callContextId;
        try {
            e.callContextId = n;
            debugger
        } finally {
            e.callContextId = t
        }
    }
};
var k9 = Object.freeze({
        __proto__: null,
        BreakpointId: qr,
        get CommandType() {
            return rn
        },
        DebugCommand: Ay,
        DebuggerBase: Oy,
        get DebuggerDataConverter() {
            return rf
        },
        get InitializationStatus() {
            return Lo
        },
        LocalState: Cy,
        ThreadState: Ry,
        Version: z2
    }),
    U9 = Object.freeze({
        __proto__: null
    }),
    M9 = Object.freeze({
        __proto__: null
    });
PP();
var W2 = "6.20.5";
nI("client-runtime-core", W2);
export {
    a8 as a, c8 as b, l8 as c, f8 as d, g8 as e, p8 as f, v8 as g, w8 as h, T8 as i, I8 as j, de as k, Y as l, O8 as m, U8 as n, HS as o, M8 as p, nU as q, kz as r, Uz as s, Fz as t, Hz as u, Wz as v, qz as w, AI as x, Xz as y, tW as z, nW as A, rW as B, sW as C, lW as D, gW as E, pW as F, mW as G, bW as H, m2 as I, y2 as J, EW as K, CW as L, kW as M, MW as N, BW as O, L2 as P, x2 as Q, qW as R, KW as S, k2 as T, U2 as U, JW as V, s9 as W, a9 as X, u9 as Y, c9 as Z, d9 as _, h9 as $, p9 as aa, D9 as ba, N9 as ca, L9 as da, k9 as ea, U9 as fa, M9 as ga, W2 as ha, F9 as ia
};
/**
 * @license Angular v<unknown>
 * (c) 2010-2024 Google LLC. https://angular.io/
 * License: MIT
 */
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */